<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Javaä¼ä¸šçº§å¼€å‘ç®€ç­”é¢˜2ï¼ˆMyBatisï¼‰</title>
      <link href="/2025/07/11/Java%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BC%80%E5%8F%91%E7%AE%80%E7%AD%94%E9%A2%982%EF%BC%88MyBatis%EF%BC%89/"/>
      <url>/2025/07/11/Java%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BC%80%E5%8F%91%E7%AE%80%E7%AD%94%E9%A2%982%EF%BC%88MyBatis%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½œä¸š-2ï¼šç®€ç­”é¢˜">ä½œä¸š 2ï¼šç®€ç­”é¢˜</h1><blockquote><p>22371495 å´è‡ªå¼º</p></blockquote><p>[TOC]</p><h3 id="1-ç®€è¿°-MyBatis-çš„å·¥ä½œåŸç†">1. ç®€è¿° MyBatis çš„å·¥ä½œåŸç†</h3><p><u>MyBatis çš„<strong>å·¥ä½œåŸç†</strong></u>å¯ä»¥æ¦‚æ‹¬å¦‚ä¸‹ï¼š</p><p><strong>ä¸€ã€é…ç½®é˜¶æ®µ</strong></p><ol><li><strong>åŠ è½½é…ç½®æ–‡ä»¶</strong><br>MyBatis å¯åŠ¨æ—¶ä¼šåŠ è½½ <code>mybatis-config.xml</code> é…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…æ‹¬æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€Mapper æ˜ å°„æ–‡ä»¶è·¯å¾„ç­‰ã€‚</li><li><strong>æ„å»º SqlSessionFactory</strong><br>é€šè¿‡ <code>SqlSessionFactoryBuilder</code> è¯»å–é…ç½®æ–‡ä»¶å¹¶æ„å»º <code>SqlSessionFactory</code>ã€‚è¿™ä¸ªå·¥å‚è´Ÿè´£åˆ›å»º <code>SqlSession</code>ã€‚</li></ol><p><strong>äºŒã€è¿è¡Œé˜¶æ®µ</strong></p><ol><li><strong>åˆ›å»º SqlSession</strong><br>åº”ç”¨ç¨‹åºé€šè¿‡ <code>SqlSessionFactory</code> åˆ›å»ºä¸€ä¸ª <code>SqlSession</code> å¯¹è±¡ï¼Œç”¨äºæ‰§è¡Œ SQLã€‚</li><li><strong>æ‰§è¡Œ SQL æ˜ å°„</strong><ul><li>ä½¿ç”¨æ¥å£ç»‘å®šï¼ˆMapper æ¥å£ï¼‰æˆ–è€… XML æ˜ å°„æ–‡ä»¶ä¸­çš„ SQL è¯­å¥ã€‚</li><li>MyBatis ä¼šæ ¹æ® <code>Mapper.xml</code> ä¸­çš„ SQL æ˜ å°„ï¼Œå°†å‚æ•°ä¼ å…¥ã€ç”Ÿæˆæœ€ç»ˆ SQLï¼Œå¹¶æ‰§è¡Œã€‚</li></ul></li><li><strong>æ‰§è¡Œ JDBC æ“ä½œ</strong><br>MyBatis åº•å±‚ä»ç„¶ä½¿ç”¨ JDBC æ‰§è¡Œ SQLï¼Œé€šè¿‡ JDBC ä¸æ•°æ®åº“äº¤äº’ã€‚</li><li><strong>ç»“æœæ˜ å°„</strong><br>SQL æ‰§è¡Œåè¿”å›ç»“æœï¼ŒMyBatis ä¼šå°†ç»“æœé›†æ ¹æ® <code>resultMap</code> æˆ–è‡ªåŠ¨æ˜ å°„æœºåˆ¶è½¬æ¢ä¸º Java å¯¹è±¡ã€‚</li></ol><p><strong>ä¸‰ã€å…³é—­èµ„æº</strong></p><p><code>SqlSession</code> ä½¿ç”¨å®Œæ¯•åè¦å…³é—­ï¼Œä»¥é‡Šæ”¾æ•°æ®åº“è¿æ¥èµ„æºã€‚</p><h3 id="2-ç®€è¿°-MyBatis-å’Œ-Spring-çš„æ•´åˆè¿‡ç¨‹">2. ç®€è¿° MyBatis å’Œ Spring çš„æ•´åˆè¿‡ç¨‹</h3><ol><li>æ·»åŠ ä¾èµ–ï¼ˆMavenï¼‰</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>é…ç½®æ•°æ®åº“è¿æ¥ï¼ˆ<code>application.yml</code>ï¼‰</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/testdb</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br></pre></td></tr></table></figure><ol start="3"><li>é…ç½® MyBatisï¼ˆå¯é€‰ï¼‰</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.example.model</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><ol start="4"><li>ç¼–å†™ Mapper æ¥å£ + XML æˆ–æ³¨è§£</li></ol><p>æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    User <span class="title function_">selectById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ–ä½¿ç”¨ <code>@MapperScan</code> æ³¨è§£æ‰¹é‡æ‰«æï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.example.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyApp</span> &#123;&#125;</span><br></pre></td></tr></table></figure><p>XMLï¼ˆä½äº <code>resources/mapper/UserMapper.xml</code>ï¼‰ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">  SELECT * FROM users WHERE id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-é™¤-MyBatis-æŒä¹…åŒ–æ¡†æ¶å¤–ï¼Œæ‚¨è¿˜çŸ¥é“å“ªäº›æŒä¹…åŒ–æ¡†æ¶ï¼Ÿå¹¶è¯´æ˜ä»–ä»¬çš„ç‰¹ç‚¹">3. é™¤ MyBatis æŒä¹…åŒ–æ¡†æ¶å¤–ï¼Œæ‚¨è¿˜çŸ¥é“å“ªäº›æŒä¹…åŒ–æ¡†æ¶ï¼Ÿå¹¶è¯´æ˜ä»–ä»¬çš„ç‰¹ç‚¹</h3><h4 id="1-Hibernate">1. <strong>Hibernate</strong></h4><blockquote><p>å…¨åŠŸèƒ½çš„ ORM æ¡†æ¶ï¼ŒJPA çš„é‡è¦å®ç°ã€‚</p></blockquote><p>ç‰¹ç‚¹ï¼š</p><ul><li><strong>å…¨è‡ªåŠ¨ ORM æ˜ å°„</strong>ï¼šå¯ä»¥è‡ªåŠ¨å°†æ•°æ®åº“è¡¨æ˜ å°„æˆ Java å¯¹è±¡ã€‚</li><li><strong>æ”¯æŒ HQLï¼ˆHibernate Query Languageï¼‰</strong>ï¼šæ¯” SQL æ›´é¢å‘å¯¹è±¡ã€‚</li><li><strong>æ”¯æŒæ‡’åŠ è½½ã€ç¼“å­˜ã€äº‹åŠ¡ç®¡ç†ç­‰é«˜çº§ç‰¹æ€§</strong>ã€‚</li><li>ä¸ Spring æ•´åˆç´§å¯†ï¼Œæ”¯æŒ JPA æ³¨è§£ã€‚</li></ul><p>é€‚ç”¨åœºæ™¯ï¼š</p><ul><li>éœ€è¦å¤æ‚å¯¹è±¡å…³ç³»æ˜ å°„ã€å¤§é‡å®ä½“ç®¡ç†çš„ä¼ä¸šç³»ç»Ÿã€‚</li></ul><h4 id="2-JPAï¼ˆJava-Persistence-APIï¼‰">2. <strong>JPAï¼ˆJava Persistence APIï¼‰</strong></h4><blockquote><p>Java å®˜æ–¹å®šä¹‰çš„ ORM æ ‡å‡†æ¥å£ï¼ŒHibernateã€EclipseLink éƒ½æ˜¯å…¶å®ç°ã€‚</p></blockquote><p>ç‰¹ç‚¹ï¼š</p><ul><li><strong>æ ‡å‡†ç»Ÿä¸€æ¥å£</strong>ï¼Œé™ä½è€¦åˆåº¦ã€‚</li><li>æä¾› <strong>æ³¨è§£é©±åŠ¨çš„æ•°æ®æ˜ å°„</strong>ã€‚</li><li>æ”¯æŒ JPQL æŸ¥è¯¢è¯­è¨€ã€‚</li><li><strong>æ˜“ä¸ Spring Data JPA æ•´åˆ</strong>ã€‚</li></ul><p>é€‚ç”¨åœºæ™¯ï¼š</p><ul><li>éœ€è¦ä¸ä¸åŒ ORM æ¡†æ¶è§£è€¦æˆ–è¿½æ±‚å®˜æ–¹è§„èŒƒå…¼å®¹æ€§çš„é¡¹ç›®ã€‚</li></ul><h4 id="3-Spring-Data-JPA">3. <strong>Spring Data JPA</strong></h4><blockquote><p>æ˜¯å¯¹ JPA çš„è¿›ä¸€æ­¥å°è£…ï¼Œå±äº Spring Data å®¶æ—ã€‚</p></blockquote><p>ç‰¹ç‚¹ï¼š</p><ul><li><strong>ç®€åŒ– DAO å±‚å¼€å‘</strong>ï¼šåªå†™æ¥å£å°±èƒ½è‡ªåŠ¨å®ç° CRUDã€‚</li><li>æ”¯æŒæ–¹æ³•åè‡ªåŠ¨è§£æä¸ºæŸ¥è¯¢è¯­å¥ï¼ˆå¦‚ <code>findByUsernameAndAge</code>ï¼‰ã€‚</li><li>é›†æˆåˆ†é¡µã€æ’åºã€åŠ¨æ€æŸ¥è¯¢ç­‰åŠŸèƒ½ã€‚</li></ul><p>é€‚ç”¨åœºæ™¯ï¼š</p><ul><li>ä¸šåŠ¡æ¨¡å‹ä»¥å®ä½“ç±»ä¸ºä¸»ã€CRUD æ“ä½œå¤šçš„é¡¹ç›®ã€‚</li></ul><h4 id="4-Apache-iBATISï¼ˆMyBatis-å‰èº«ï¼‰">4. <strong>Apache iBATISï¼ˆMyBatis å‰èº«ï¼‰</strong></h4><blockquote><p>æ—©æœŸçš„ SQL æ˜ å°„æ¡†æ¶ï¼ŒMyBatis æ˜¯å®ƒçš„åˆ†æ”¯ã€‚</p></blockquote><p>ç‰¹ç‚¹ï¼š</p><ul><li>å…è®¸å¼€å‘è€…æ‰‹å†™ SQLï¼Œæ§åˆ¶åŠ›å¼ºã€‚</li><li>å·²è¾ƒå°‘ä½¿ç”¨ï¼Œå»ºè®®ç”¨ MyBatis ä»£æ›¿ã€‚</li></ul><h4 id="5-jOOQ">5. <strong>jOOQ</strong></h4><blockquote><p>é¢å‘ SQL çš„ç±»å‹å®‰å…¨ DSLï¼ˆé¢†åŸŸç‰¹å®šè¯­è¨€ï¼‰æ¡†æ¶ã€‚</p></blockquote><p>ç‰¹ç‚¹ï¼š</p><ul><li>å°† SQL ç¼–å†™ä¸º Java ä»£ç ï¼Œå…·æœ‰ç¼–è¯‘æ—¶è¯­æ³•æ£€æŸ¥ã€‚</li><li>é€‚åˆå¤æ‚æŸ¥è¯¢ï¼Œç±»å‹å®‰å…¨ã€‚</li><li>æ›´è´´è¿‘æ•°æ®åº“å¼€å‘äººå‘˜æ€ç»´ã€‚</li></ul><p>é€‚ç”¨åœºæ™¯ï¼š</p><ul><li>æ³¨é‡ SQL çµæ´»æ€§ä¸ç±»å‹å®‰å…¨çš„ç³»ç»Ÿï¼Œæˆ–éœ€è¦åŠ¨æ€æ„é€ å¤æ‚ SQL çš„é¡¹ç›®ã€‚</li></ul><h4 id="6-Spring-Data-JDBC">6. <strong>Spring Data JDBC</strong></h4><blockquote><p>ç±»ä¼¼ JPAï¼Œä½†æ›´è½»é‡ï¼ŒåŸºäº JDBC + Springã€‚</p></blockquote><p>ç‰¹ç‚¹ï¼š</p><ul><li>ä¸ä½¿ç”¨å¤æ‚çš„ ORM åŠŸèƒ½ï¼Œä»…æ”¯æŒç®€å•çš„å®ä½“å…³ç³»ã€‚</li><li>æ›´æ˜“è°ƒè¯•ï¼Œæ€§èƒ½æ›´å¯æ§ã€‚</li><li>é¿å…äº†æ‡’åŠ è½½å’Œå¤æ‚æ˜ å°„é—®é¢˜ã€‚</li></ul><p>é€‚ç”¨åœºæ™¯ï¼š</p><ul><li>é¡¹ç›®ç®€å•ï¼Œè¿½æ±‚å¯é¢„æµ‹è¡Œä¸ºã€è½»é‡çš„ç³»ç»Ÿã€‚</li></ul><hr><p>æ€»ç»“å¯¹æ¯”ï¼ˆæ ¸å¿ƒç‚¹ï¼‰ï¼š</p><table><thead><tr><th>æ¡†æ¶</th><th>æ˜¯å¦ ORM</th><th>æ§åˆ¶åŠ›</th><th>ä¸Šæ‰‹éš¾åº¦</th><th>è‡ªåŠ¨åŒ–ç¨‹åº¦</th><th>é€‚åˆåœºæ™¯</th></tr></thead><tbody><tr><td><strong>Hibernate</strong></td><td>âœ…</td><td>ä¸­</td><td>ä¸­ç­‰</td><td>é«˜</td><td>å¤æ‚ä¸šåŠ¡æ¨¡å‹ï¼Œæ ‡å‡† ORM</td></tr><tr><td><strong>JPA</strong></td><td>âœ…</td><td>ä¸­</td><td>ä¸­ç­‰</td><td>é«˜</td><td>éµå¾ªæ ‡å‡†è§„èŒƒçš„ä¼ä¸šç³»ç»Ÿ</td></tr><tr><td><strong>Spring Data JPA</strong></td><td>âœ…</td><td>ä½</td><td>âœ… ç®€å•</td><td>âœ… å¾ˆé«˜</td><td>å¿«é€Ÿå¼€å‘ã€å¸¸è§„ CRUD é¡¹ç›®</td></tr><tr><td><strong>MyBatis</strong></td><td>âŒ</td><td>âœ… é«˜</td><td>ä¸­ç­‰</td><td>ä¸­</td><td>éœ€è¦æ‰‹å†™ SQLï¼Œé€‚åˆçµæ´»æ§åˆ¶</td></tr><tr><td><strong>jOOQ</strong></td><td>âŒ</td><td>âœ… é«˜</td><td>é«˜</td><td>ä¸­</td><td>åŠ¨æ€ SQLã€ç±»å‹å®‰å…¨ã€æ•°æ®åº“é©±åŠ¨é¡¹ç›®</td></tr><tr><td><strong>Spring Data JDBC</strong></td><td>âŒ</td><td>âœ… é«˜</td><td>âœ… ç®€å•</td><td>ä¸­</td><td>ç®€å•ç³»ç»Ÿã€é¿å… ORM å¤æ‚æ€§çš„é¡¹ç›®</td></tr></tbody></table><h3 id="4-MyBatis-å®ç°æŸ¥è¯¢æ—¶ï¼Œè¿”å›çš„ç»“æœé›†æœ‰å‡ ç§å¸¸è§çš„å­˜å‚¨æ–¹å¼ï¼Ÿè¯·ä¸¾ä¾‹è¯´æ˜ã€‚">4. MyBatis å®ç°æŸ¥è¯¢æ—¶ï¼Œè¿”å›çš„ç»“æœé›†æœ‰å‡ ç§å¸¸è§çš„å­˜å‚¨æ–¹å¼ï¼Ÿè¯·ä¸¾ä¾‹è¯´æ˜ã€‚</h3><h5 id="1-è¿”å›-å•ä¸ªå¯¹è±¡">1. è¿”å› <strong>å•ä¸ªå¯¹è±¡</strong></h5><p><strong>è¯´æ˜ï¼š</strong></p><p>å½“æŸ¥è¯¢ç»“æœåªæœ‰ä¸€æ¡è®°å½•æ—¶ï¼Œå¯ä»¥ç›´æ¥æ˜ å°„æˆä¸€ä¸ª Java å¯¹è±¡ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">User <span class="title function_">getUserById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&lt;select id=<span class="string">&quot;getUserById&quot;</span> resultType=<span class="string">&quot;com.example.User&quot;</span>&gt;</span><br><span class="line">    SELECT id, username, email FROM users <span class="type">WHERE</span> <span class="variable">id</span> <span class="operator">=</span> #&#123;id&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><h5 id="2-è¿”å›-å¯¹è±¡åˆ—è¡¨ï¼ˆListï¼‰">2. è¿”å› <strong>å¯¹è±¡åˆ—è¡¨ï¼ˆListï¼‰</strong></h5><p><strong>è¯´æ˜ï¼š</strong></p><p>å½“æŸ¥è¯¢ç»“æœæ˜¯å¤šæ¡è®°å½•æ—¶ï¼Œå¯ä»¥æ˜ å°„ä¸ºä¸€ä¸ªå¯¹è±¡åˆ—è¡¨ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;User&gt; <span class="title function_">getAllUsers</span><span class="params">()</span>;</span><br><span class="line">&lt;select id=<span class="string">&quot;getAllUsers&quot;</span> resultType=<span class="string">&quot;com.example.User&quot;</span>&gt;</span><br><span class="line">    SELECT id, username, email FROM users</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><h5 id="3-è¿”å›-Map">3. è¿”å› <strong>Map</strong></h5><p><strong>æ–¹å¼ä¸€ï¼šä¸€è¡Œç»“æœæ˜ å°„ä¸ºä¸€ä¸ª Mapï¼ˆåˆ—å â†’ å€¼ï¼‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">getAllUsersAsMap</span><span class="params">()</span>;</span><br><span class="line">&lt;select id=<span class="string">&quot;getAllUsersAsMap&quot;</span> resultType=<span class="string">&quot;map&quot;</span>&gt;</span><br><span class="line">    SELECT id, username, email FROM users</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><p>è¿”å›ç»“æœç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;id=<span class="number">1</span>, username=<span class="string">&quot;Alice&quot;</span>, email=<span class="string">&quot;alice@example.com&quot;</span>&#125;,</span><br><span class="line">  &#123;id=<span class="number">2</span>, username=<span class="string">&quot;Bob&quot;</span>, email=<span class="string">&quot;bob@example.com&quot;</span>&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p><strong>æ–¹å¼äºŒï¼šå¤šè¡Œç»“æœä»¥æŸåˆ—ä¸º key æ˜ å°„æˆä¸€ä¸ªå¤§ Map</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MapKey(&quot;id&quot;)</span></span><br><span class="line">Map&lt;Integer, User&gt; <span class="title function_">getUsersMappedById</span><span class="params">()</span>;</span><br><span class="line">&lt;select id=<span class="string">&quot;getUsersMappedById&quot;</span> resultType=<span class="string">&quot;com.example.User&quot;</span>&gt;</span><br><span class="line">    SELECT id, username, email FROM users</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><p>è¿”å›ç»“æœç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="number">1</span>: User&#123;id=<span class="number">1</span>, username=<span class="string">&quot;Alice&quot;</span>, ...&#125;,</span><br><span class="line">  <span class="number">2</span>: User&#123;id=<span class="number">2</span>, username=<span class="string">&quot;Bob&quot;</span>, ...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="4-è¿”å›-åµŒå¥—å¯¹è±¡ï¼ˆå¤šè¡¨è”åˆæŸ¥è¯¢ï¼‰">4. è¿”å› <strong>åµŒå¥—å¯¹è±¡ï¼ˆå¤šè¡¨è”åˆæŸ¥è¯¢ï¼‰</strong></h5><p><strong>è¯´æ˜ï¼š</strong></p><p>ç”¨äºä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šç­‰åµŒå¥—ç»“æ„ï¼Œéœ€è¦ä½¿ç”¨ <code>resultMap</code>ã€‚</p><p><strong>ç¤ºä¾‹ï¼šç”¨æˆ·å’Œåœ°å€ä¸€å¯¹ä¸€</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">User <span class="title function_">getUserWithAddress</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&lt;resultMap id=<span class="string">&quot;userMap&quot;</span> type=<span class="string">&quot;User&quot;</span>&gt;</span><br><span class="line">    &lt;id property=<span class="string">&quot;id&quot;</span> column=<span class="string">&quot;id&quot;</span>/&gt;</span><br><span class="line">    &lt;result property=<span class="string">&quot;username&quot;</span> column=<span class="string">&quot;username&quot;</span>/&gt;</span><br><span class="line">    &lt;association property=<span class="string">&quot;address&quot;</span> javaType=<span class="string">&quot;Address&quot;</span>&gt;</span><br><span class="line">        &lt;result property=<span class="string">&quot;city&quot;</span> column=<span class="string">&quot;city&quot;</span>/&gt;</span><br><span class="line">        &lt;result property=<span class="string">&quot;zipcode&quot;</span> column=<span class="string">&quot;zipcode&quot;</span>/&gt;</span><br><span class="line">    &lt;/association&gt;</span><br><span class="line">&lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line">&lt;select id=<span class="string">&quot;getUserWithAddress&quot;</span> resultMap=<span class="string">&quot;userMap&quot;</span>&gt;</span><br><span class="line">    SELECT u.id, u.username, a.city, a.zipcode</span><br><span class="line">    FROM users u</span><br><span class="line">    JOIN address a ON u.id = a.user_id</span><br><span class="line">    WHERE u.id = #&#123;id&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><h5 id="5-è¿”å›-åŸºæœ¬ç±»å‹æˆ–åŒ…è£…ç±»å‹">5. è¿”å› <strong>åŸºæœ¬ç±»å‹æˆ–åŒ…è£…ç±»å‹</strong></h5><p><strong>è¯´æ˜ï¼š</strong></p><p>å½“æŸ¥è¯¢ç»“æœåªæœ‰å•ä¸ªå­—æ®µæ—¶ï¼Œå¯ç›´æ¥æ˜ å°„ä¸º <code>String</code>ã€<code>Integer</code> ç­‰åŸºæœ¬ç±»å‹ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; <span class="title function_">getAllUsernames</span><span class="params">()</span>;</span><br><span class="line">&lt;select id=<span class="string">&quot;getAllUsernames&quot;</span> resultType=<span class="string">&quot;string&quot;</span>&gt;</span><br><span class="line">    SELECT username FROM users</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><h3 id="5-åœ¨-MyBatis-ä¸­é’ˆå¯¹ä¸åŒçš„æ•°æ®åº“è½¯ä»¶ï¼Œ-insert-å…ƒç´ å¦‚ä½•å°†ä¸»é”®å›å¡«ï¼Ÿ">5. åœ¨ MyBatis ä¸­é’ˆå¯¹ä¸åŒçš„æ•°æ®åº“è½¯ä»¶ï¼Œ&lt;insert&gt;å…ƒç´ å¦‚ä½•å°†ä¸»é”®å›å¡«ï¼Ÿ</h3><h4 id="ä¸€ã€ä½¿ç”¨-useGeneratedKeys">ä¸€ã€ä½¿ç”¨ <code>useGeneratedKeys</code></h4><p>æ¨èç”¨äº MySQLã€H2 ç­‰æ”¯æŒ JDBC è‡ªåŠ¨ç”Ÿæˆä¸»é”®çš„æ•°æ®åº“,é€‚ç”¨äºï¼š</p><ul><li>MySQLã€SQL Serverï¼ˆéƒ¨åˆ†ç‰ˆæœ¬ï¼‰ã€H2</li><li>è¦æ±‚æ•°æ®åº“é©±åŠ¨æ”¯æŒ <code>getGeneratedKeys()</code></li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertUser&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">    INSERT INTO users (username, email)</span><br><span class="line">    VALUES (#&#123;username&#125;, #&#123;email&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><code>useGeneratedKeys=&quot;true&quot;</code>ï¼šè¡¨ç¤ºä½¿ç”¨ JDBC çš„è‡ªåŠ¨ç”Ÿæˆä¸»é”®åŠŸèƒ½ã€‚</li><li><code>keyProperty=&quot;id&quot;</code>ï¼šè¡¨ç¤ºå°†ç”Ÿæˆçš„ä¸»é”®å›å¡«åˆ° Java å¯¹è±¡çš„ <code>id</code> å±æ€§ä¸­ã€‚</li></ul><p>Java å®ä½“ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;  <span class="comment">// æ•°æ®åº“è‡ªå¢ä¸»é”®</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="comment">// ...getter/setter...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="äºŒã€ä½¿ç”¨-selectKey-å­å…ƒç´ ï¼ˆé€‚ç”¨äº-Oracleã€PostgreSQLã€DB2-ç­‰ï¼‰">äºŒã€ä½¿ç”¨ <code>selectKey</code> å­å…ƒç´ ï¼ˆé€‚ç”¨äº Oracleã€PostgreSQLã€DB2 ç­‰ï¼‰</h4><p>é€‚ç”¨äºï¼š</p><ul><li>ä¸æ”¯æŒ JDBC <code>getGeneratedKeys()</code> çš„æ•°æ®åº“</li><li>é€šå¸¸ä½¿ç”¨æ•°æ®åº“å‡½æ•°/åºåˆ—ï¼Œå¦‚ Oracle çš„ <code>SEQUENCE</code></li></ul><p><strong>Oracle ç¤ºä¾‹ï¼ˆæ’å…¥å‰è·å–ä¸»é”®ï¼‰ï¼š</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">order</span>=<span class="string">&quot;BEFORE&quot;</span>&gt;</span></span><br><span class="line">        SELECT user_seq.NEXTVAL FROM dual</span><br><span class="line">    <span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    INSERT INTO users (id, username, email)</span><br><span class="line">    VALUES (#&#123;id&#125;, #&#123;username&#125;, #&#123;email&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>keyProperty=&quot;id&quot;</code>ï¼šå›å¡«åˆ° Java å¯¹è±¡çš„ <code>id</code> å­—æ®µ</li><li><code>order=&quot;BEFORE&quot;</code>ï¼šåœ¨æ‰§è¡Œ <code>INSERT</code> è¯­å¥ <strong>ä¹‹å‰</strong> å…ˆæ‰§è¡Œ <code>selectKey</code></li></ul><p><strong>PostgreSQL ç¤ºä¾‹ï¼ˆæ’å…¥åè·å–ä¸»é”®ï¼‰ï¼š</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    INSERT INTO users (username, email)</span><br><span class="line">    VALUES (#&#123;username&#125;, #&#123;email&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">order</span>=<span class="string">&quot;AFTER&quot;</span>&gt;</span></span><br><span class="line">        SELECT currval(&#x27;users_id_seq&#x27;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="6-åœ¨-MyBatis-ä¸­ï¼Œå¦‚ä½•ç»™-SQL-è¯­å¥ä¼ é€’å‚æ•°ï¼Ÿ">6. åœ¨ MyBatis ä¸­ï¼Œå¦‚ä½•ç»™ SQL è¯­å¥ä¼ é€’å‚æ•°ï¼Ÿ</h3><h5 id="1-å•ä¸ªå‚æ•°">1. <strong>å•ä¸ªå‚æ•°</strong></h5><p><strong>ç¤ºä¾‹ï¼š</strong></p><p>Mapper æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User <span class="title function_">getUserById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br></pre></td></tr></table></figure><p>å¯¹åº” Mapper XMLï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    SELECT * FROM users WHERE id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨ <code>#&#123;id&#125;</code> ç»‘å®šå‚æ•°ï¼ŒMyBatis ä¼šè‡ªåŠ¨å°†æ–¹æ³•å‚æ•°ä¸ SQL ä¸­çš„å ä½ç¬¦ç»‘å®šã€‚</p></blockquote><h5 id="2-å¤šä¸ªå‚æ•°">2. <strong>å¤šä¸ªå‚æ•°</strong></h5><p>Java æ–¹æ³•çš„å¤šä¸ªå‚æ•°ï¼ŒMyBatis é»˜è®¤ä¼šä½¿ç”¨ <strong>param1ã€param2ã€â€¦</strong> æ¥å‘½åï¼Œæˆ–è€…ä½ å¯ä»¥ä½¿ç”¨ <code>@Param</code> æ³¨è§£å‘½åã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">User <span class="title function_">getUserByUsernameAndEmail</span><span class="params">(<span class="meta">@Param(&quot;username&quot;)</span> String username,</span></span><br><span class="line"><span class="params">                               <span class="meta">@Param(&quot;email&quot;)</span> String email)</span>;</span><br><span class="line">&lt;select id=<span class="string">&quot;getUserByUsernameAndEmail&quot;</span> resultType=<span class="string">&quot;User&quot;</span>&gt;</span><br><span class="line">    SELECT * FROM users</span><br><span class="line">    <span class="type">WHERE</span> <span class="variable">username</span> <span class="operator">=</span> #&#123;username&#125; <span class="type">AND</span> <span class="variable">email</span> <span class="operator">=</span> #&#123;email&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><blockquote><p>ğŸ’¡ <code>#&#123;&#125;</code> ä¸­çš„åå­—å¿…é¡»å’Œ <code>@Param(&quot;xxx&quot;)</code> å¯¹åº”ã€‚</p></blockquote><h5 id="3-ä¼ é€’-JavaBean-æˆ–-Map-ç±»å‹å‚æ•°">3. <strong>ä¼ é€’ JavaBean æˆ– Map ç±»å‹å‚æ•°</strong></h5><p>æ–¹å¼ä¸€ï¼šJavaBean</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">insertUser</span><span class="params">(User user)</span>;</span><br><span class="line">&lt;insert id=<span class="string">&quot;insertUser&quot;</span>&gt;</span><br><span class="line">    INSERT INTO <span class="title function_">users</span> <span class="params">(username, email)</span></span><br><span class="line">    VALUES (#&#123;username&#125;, #&#123;email&#125;)</span><br><span class="line">&lt;/insert&gt;</span><br></pre></td></tr></table></figure><blockquote><p>ç›´æ¥ä½¿ç”¨ JavaBean çš„å±æ€§åä½œä¸ºå ä½ç¬¦ï¼š<code>#&#123;å±æ€§å&#125;</code></p></blockquote><hr><p>æ–¹å¼äºŒï¼šMap</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">User <span class="title function_">getUser</span><span class="params">(Map&lt;String, Object&gt; params)</span>;</span><br><span class="line">&lt;select id=<span class="string">&quot;getUser&quot;</span> resultType=<span class="string">&quot;User&quot;</span>&gt;</span><br><span class="line">    SELECT * FROM users <span class="type">WHERE</span> <span class="variable">username</span> <span class="operator">=</span> #&#123;username&#125; <span class="type">AND</span> <span class="variable">email</span> <span class="operator">=</span> #&#123;email&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><blockquote><p>ç”¨æ³•ä¸ JavaBean ä¸€è‡´ï¼Œéƒ½æ˜¯ <code>#&#123;key&#125;</code></p></blockquote><h5 id="4-é›†åˆå‚æ•°ï¼ˆç”¨äº-IN-æŸ¥è¯¢ï¼‰">4. <strong>é›†åˆå‚æ•°ï¼ˆç”¨äº <code>IN</code> æŸ¥è¯¢ï¼‰</strong></h5><p>å½“ä¼ å…¥çš„æ˜¯é›†åˆæˆ–æ•°ç»„ï¼Œç”¨äº SQL çš„ <code>IN</code> å­å¥æ—¶ï¼Œéœ€è¦ä½¿ç”¨ <code>foreach</code> æ ‡ç­¾ã€‚ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">List&lt;User&gt; <span class="title function_">getUsersByIds</span><span class="params">(<span class="meta">@Param(&quot;ids&quot;)</span> List&lt;Integer&gt; ids)</span>;</span><br><span class="line">&lt;select id=<span class="string">&quot;getUsersByIds&quot;</span> resultType=<span class="string">&quot;User&quot;</span>&gt;</span><br><span class="line">    SELECT * FROM users</span><br><span class="line">    WHERE id IN</span><br><span class="line">    &lt;foreach collection=<span class="string">&quot;ids&quot;</span> item=<span class="string">&quot;id&quot;</span> open=<span class="string">&quot;(&quot;</span> separator=<span class="string">&quot;,&quot;</span> close=<span class="string">&quot;)&quot;</span>&gt;</span><br><span class="line">        #&#123;id&#125;</span><br><span class="line">    &lt;/foreach&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><h5 id="5-vs-çš„åŒºåˆ«">5. <code>#&#123;&#125; </code> vs <code>$&#123;&#125;</code> çš„åŒºåˆ«</h5><table><thead><tr><th>å†™æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>#&#123;&#125;</code></td><td>å®‰å…¨é¢„ç¼–è¯‘å‚æ•°ï¼Œé˜² SQL æ³¨å…¥</td></tr><tr><td><code>$&#123;&#125;</code></td><td>å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå®¹æ˜“ SQL æ³¨å…¥</td></tr></tbody></table><h3 id="7-Maven-å’Œ-ANT-çš„åŒºåˆ«">7. Maven å’Œ ANT çš„åŒºåˆ«</h3><p>Maven çš„ç‰¹ç‚¹ï¼š</p><ul><li><strong>çº¦å®šä¼˜äºé…ç½®</strong>ï¼šåªè¦éµå¾ª Maven çš„ç›®å½•è§„èŒƒï¼Œå°±èƒ½å‡å°‘é…ç½®ã€‚</li><li><strong>å†…ç½®ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šæ¯”å¦‚ <code>compile</code>, <code>test</code>, <code>package</code>, <code>install</code>ï¼Œç»Ÿä¸€æ ‡å‡†ã€‚</li><li><strong>ä¾èµ–ç®¡ç†å¼ºå¤§</strong>ï¼šè‡ªåŠ¨ä¸‹è½½å¹¶ç»´æŠ¤ä¾èµ–çš„ç‰ˆæœ¬ã€ä¼ é€’ä¾èµ–ã€‚</li><li><strong>é€‚åˆå¤§å‹é¡¹ç›®/å¤šæ¨¡å—é¡¹ç›®</strong>ã€‚</li></ul><p>Ant çš„ç‰¹ç‚¹ï¼š</p><ul><li><strong>è‡ªç”±åº¦é«˜</strong>ï¼šæ„å»ºè¿‡ç¨‹ç”±å¼€å‘è€…å®Œå…¨æ§åˆ¶ã€‚</li><li><strong>åƒå†™è„šæœ¬ä¸€æ ·çµæ´»</strong>ï¼šé€‚åˆéæ ‡å‡†æ„å»ºæµç¨‹ã€‚</li><li><strong>éœ€è¦æ‰‹åŠ¨ç®¡ç†ä¾èµ–</strong>ï¼Œå¦‚æ‹·è´ <code>.jar</code> æ–‡ä»¶åˆ° <code>lib/</code>ã€‚</li><li><strong>é€‚åˆç®€å•é¡¹ç›®æˆ–è‡ªå®šä¹‰æµç¨‹åœºæ™¯</strong>ã€‚</li></ul><table><thead><tr><th>ç»´åº¦</th><th>Maven</th><th>Ant</th></tr></thead><tbody><tr><td><strong>æ„å»ºæ–¹å¼</strong></td><td>å£°æ˜å¼ï¼ˆDeclarativeï¼‰</td><td>å‘½ä»¤å¼ï¼ˆProceduralï¼‰</td></tr><tr><td><strong>é…ç½®æ–‡ä»¶</strong></td><td><code>pom.xml</code>ï¼ˆä½¿ç”¨ XML æè¿°é¡¹ç›®ç»“æ„ï¼‰</td><td><code>build.xml</code>ï¼ˆä½¿ç”¨ XML ç¼–å†™æ„å»ºè„šæœ¬ï¼‰</td></tr><tr><td><strong>ä¾èµ–ç®¡ç†</strong></td><td>è‡ªåŠ¨ä¾èµ–ç®¡ç†ï¼ˆé€šè¿‡ Maven ä»“åº“ï¼‰</td><td>æ— å†…å»ºä¾èµ–ç®¡ç†ï¼ˆéœ€æ‰‹åŠ¨ä¸‹è½½ JAR åŒ…ï¼‰</td></tr><tr><td><strong>æ ‡å‡†åŒ–ç›®å½•ç»“æ„</strong></td><td>æœ‰å›ºå®šçš„æ ‡å‡†ç»“æ„ï¼ˆå¦‚ <code>src/main/java</code>ï¼‰</td><td>æ— æ ‡å‡†ç»“æ„ï¼Œè‡ªå®šä¹‰é¡¹ç›®ç›®å½•</td></tr><tr><td><strong>æ’ä»¶æ”¯æŒ</strong></td><td>ä¸°å¯Œçš„æ’ä»¶ä½“ç³»ï¼ˆç”Ÿå‘½å‘¨æœŸé›†æˆï¼‰</td><td>ä¹Ÿæœ‰æ’ä»¶ï¼Œä½†é€šå¸¸æ˜¯æ‰‹åŠ¨è°ƒç”¨ä»»åŠ¡</td></tr><tr><td><strong>æ„å»ºç”Ÿå‘½å‘¨æœŸ</strong></td><td>å†…ç½®ç”Ÿå‘½å‘¨æœŸï¼ˆcompile, test, packageï¼‰</td><td>æ— ç”Ÿå‘½å‘¨æœŸæ¦‚å¿µï¼Œä»»åŠ¡å®Œå…¨æ‰‹åŠ¨ç»„åˆ</td></tr><tr><td><strong>å­¦ä¹ æ›²çº¿</strong></td><td>ç›¸å¯¹é™¡å³­ï¼Œä¾èµ–æŠ½è±¡æ¦‚å¿µ</td><td>ç›¸å¯¹å¹³ç¼“ï¼Œåƒå†™è„šæœ¬ä¸€æ ·ç®€å•</td></tr><tr><td><strong>å¯ç»´æŠ¤æ€§</strong></td><td>é«˜ï¼ˆç»Ÿä¸€ç»“æ„ã€è‡ªåŠ¨åŒ–å¼ºï¼‰</td><td>ä½ï¼ˆæ„å»ºæµç¨‹å¤æ‚æ—¶éš¾ç»´æŠ¤ï¼‰</td></tr><tr><td><strong>æ‰©å±•èƒ½åŠ›</strong></td><td>å¼ºï¼Œç¤¾åŒºç”Ÿæ€æ´»è·ƒ</td><td>è¾ƒå¼±ï¼Œéœ€è¦è‡ªå®šä¹‰ä»»åŠ¡å®ç°</td></tr></tbody></table><h3 id="8-ä»€ä¹ˆæ˜¯-Spring-Boot-Stater-ï¼Ÿ">8. ä»€ä¹ˆæ˜¯ Spring Boot Stater ï¼Ÿ</h3><p><strong>Spring Boot Starter</strong> æ˜¯ä¸€ç§ <strong>è‡ªåŠ¨åŒ–é…ç½®ä¾èµ–æ¨¡å—</strong>ï¼Œå®ƒå°è£…äº†ä¸€ç»„ç›¸å…³åŠŸèƒ½æ‰€éœ€çš„ä¾èµ–ï¼Œå¼€å‘è€…åªéœ€å¼•å…¥ä¸€ä¸ª Starterï¼Œå°±èƒ½å¿«é€Ÿæ‹¥æœ‰è¯¥åŠŸèƒ½ã€‚Starter çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ª <strong>Maven ä¾èµ–åŒ…ï¼ˆPOM æ–‡ä»¶ï¼‰</strong>ï¼Œå†…éƒ¨é€šè¿‡ <code>&lt;dependency&gt;</code> èšåˆå¤šä¸ªç›¸å…³ä¾èµ–ï¼Œèµ·åˆ°äº†â€œæ¨¡å—å…¥å£â€çš„ä½œç”¨ã€‚</p><p><strong>Spring Boot Starter æ˜¯ä¸€ç§çº¦å®šå¥½çš„ä¾èµ–é›†åˆ</strong>ï¼Œé€šè¿‡å®ƒå¯ä»¥â€œä¸€é”®æ¥å…¥â€å„ç§ Spring åŠŸèƒ½ï¼Œçœå»äº†ç¹ççš„é…ç½®å’Œä¾èµ–ç®¡ç†ï¼Œæ˜¯ Spring Boot å®ç°è‡ªåŠ¨é…ç½®ä¸å¿«é€Ÿå¼€å‘çš„åŸºç¡€è®¾æ–½ã€‚</p><h3 id="9-Springboot-å¦‚ä½•é›†æˆ-MyBatisï¼Ÿ">9. Springboot å¦‚ä½•é›†æˆ MyBatisï¼Ÿ</h3><p>Spring Boot é›†æˆ MyBatis é€šå¸¸é€šè¿‡å®˜æ–¹æä¾›çš„ <code>mybatis-spring-boot-starter</code> æ¥ç®€åŒ–é…ç½®ã€‚å®Œæ•´çš„é›†æˆæ­¥éª¤å’Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><h5 id="1-æ·»åŠ ä¾èµ–">1. æ·»åŠ ä¾èµ–</h5><p>åœ¨ <code>pom.xml</code> ä¸­åŠ å…¥ MyBatis Starter å’Œæ•°æ®åº“é©±åŠ¨ä¾èµ–ï¼ˆä»¥ MySQL ä¸ºä¾‹ï¼‰ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Spring Boot Starter --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- MyBatis Spring Boot Starter --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span> <span class="comment">&lt;!-- æ ¹æ®å®é™…ç‰ˆæœ¬è°ƒæ•´ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- MySQL é©±åŠ¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="2-é…ç½®æ•°æ®æº">2. é…ç½®æ•°æ®æº</h5><p>åœ¨ <code>application.properties</code> æˆ– <code>application.yml</code> é…ç½®æ•°æ®åº“è¿æ¥ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/testdb?useSSL=false&amp;serverTimezone=UTC</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">your_password</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br></pre></td></tr></table></figure><h5 id="3-ç¼–å†™-Mapper-æ¥å£å’Œ-XML">3. ç¼–å†™ Mapper æ¥å£å’Œ XML</h5><ul><li><strong>Mapper æ¥å£</strong></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    User <span class="title function_">getUserById</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>Mapper XML</strong>ï¼ˆæ”¾åœ¨ <code>resources/mapper/UserMapper.xml</code>ï¼‰</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.example.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.example.model.User&quot;</span>&gt;</span></span><br><span class="line">        SELECT id, username, email FROM users WHERE id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="4-Mapper-æ‰«æé…ç½®ï¼ˆå¯é€‰ï¼‰">4. Mapper æ‰«æé…ç½®ï¼ˆå¯é€‰ï¼‰</h5><p>å¦‚æœ Mapper æ¥å£ä¸Šæ²¡æœ‰ä½¿ç”¨ <code>@Mapper</code> æ³¨è§£ï¼Œå¯ä»¥åœ¨ä¸»å¯åŠ¨ç±»æˆ–è€…é…ç½®ç±»æ·»åŠ ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MapperScan(&quot;com.example.mapper&quot;)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(DemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="5-ä½¿ç”¨-Mapper">5. ä½¿ç”¨ Mapper</h5><p>åœ¨ Service æˆ– Controller ä¸­æ³¨å…¥å¹¶è°ƒç”¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getUserById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.getUserById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="6-å¸¸ç”¨é…ç½®ï¼ˆapplication-propertiesï¼‰">6. å¸¸ç”¨é…ç½®ï¼ˆapplication.propertiesï¼‰</h5><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŒ‡å®š Mapper XML æ–‡ä»¶è·¯å¾„ï¼ˆé»˜è®¤æ˜¯ classpath:mapper/*.xmlï¼‰</span></span><br><span class="line"><span class="attr">mybatis.mapper-locations</span>=<span class="string">classpath:mapper/*.xml</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># æ˜¯å¦æ‰“å° SQL</span></span><br><span class="line"><span class="attr">mybatis.configuration.log-impl</span>=<span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># é©¼å³°å‘½åè½¬æ¢</span></span><br><span class="line"><span class="attr">mybatis.configuration.map-underscore-to-camel-case</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javaä¼ä¸šçº§å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
            <tag> åç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaä¼ä¸šçº§å¼€å‘ç®€ç­”é¢˜1ï¼ˆSpringï¼‰</title>
      <link href="/2025/07/11/Java%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BC%80%E5%8F%91%E7%AE%80%E7%AD%94%E9%A2%981%EF%BC%88Spring%EF%BC%89/"/>
      <url>/2025/07/11/Java%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BC%80%E5%8F%91%E7%AE%80%E7%AD%94%E9%A2%981%EF%BC%88Spring%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½œä¸š-1ï¼šç®€ç­”é¢˜">ä½œä¸š 1ï¼šç®€ç­”é¢˜</h1><blockquote><p>22371495 å´è‡ªå¼º</p></blockquote><p>[TOC]</p><h3 id="1-Spring-çš„æ ¸å¿ƒå®¹å™¨æœ‰å“ªäº›æ¨¡å—ç»„æˆï¼Ÿåˆ—ä¸¾-Spring-æ¡†æ¶çš„ä¼˜ç‚¹">1. Spring çš„æ ¸å¿ƒå®¹å™¨æœ‰å“ªäº›æ¨¡å—ç»„æˆï¼Ÿåˆ—ä¸¾ Spring æ¡†æ¶çš„ä¼˜ç‚¹</h3><p><u>Springæ ¸å¿ƒå®¹å™¨çš„å››ä¸ªæ¨¡å—ä¸º</u>ï¼š</p><ul><li>Spring-coreæ¨¡å—ï¼šæä¾›äº†æ¡†æ¶çš„åŸºæœ¬åŠŸèƒ½ï¼ŒåŒ…æ‹¬ IoCï¼ˆæ§åˆ¶åè½¬ï¼‰å’Œä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰æœºåˆ¶ã€‚</li><li>Spring-beansæ¨¡å—ï¼šæä¾›å¯¹ Bean çš„é…ç½®ã€åˆ›å»ºå’Œç®¡ç†ï¼Œæ˜¯ IoC çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚</li><li>Spring-contextæ¨¡å—ï¼šåŸºäº Core å’Œ Beans æ¨¡å—æ„å»ºï¼Œæä¾›æ›´é«˜çº§çš„åº”ç”¨æ¡†æ¶ï¼ˆå¦‚å›½é™…åŒ–ã€äº‹ä»¶ä¼ æ’­ã€èµ„æºè®¿é—®ç­‰ï¼‰ï¼Œå¸¸ç”¨ç±»å¦‚ <code>ApplicationContext</code>ã€‚</li><li>Spring-expressionæ¨¡å—ï¼šæä¾›å¼ºå¤§çš„è¡¨è¾¾å¼è¯­è¨€ï¼Œç”¨äºåœ¨è¿è¡Œæ—¶æŸ¥è¯¢å’Œæ“ä½œå¯¹è±¡å›¾ï¼ˆå¦‚ <code>#&#123;user.name&#125;</code>ï¼‰ã€‚</li></ul><p><u>Spring æ¡†æ¶çš„ä¼˜ç‚¹</u>ï¼š</p><ol><li><strong>è½»é‡çº§ã€éä¾µå…¥æ€§</strong><br>Spring æ˜¯è½»é‡çº§çš„ï¼Œä¾èµ–æ³¨å…¥ä¸ä¾èµ–äºå…·ä½“å®ç°ç±»ï¼Œä¸šåŠ¡ä»£ç ä¸éœ€è¦ç»§æ‰¿ç‰¹å®šç±»ï¼Œé™ä½è€¦åˆã€‚</li><li><strong>IoCï¼ˆæ§åˆ¶åè½¬ï¼‰å’Œ DIï¼ˆä¾èµ–æ³¨å…¥ï¼‰</strong><br>é€šè¿‡ IoC å®¹å™¨ç®¡ç†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸå’Œä¾èµ–å…³ç³»ï¼Œä½¿å¾—ç»„ä»¶æ›´å®¹æ˜“è§£è€¦å’Œæµ‹è¯•ã€‚</li><li><strong>AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰æ”¯æŒ</strong><br>æ–¹ä¾¿å®ç°äº‹åŠ¡ç®¡ç†ã€æ—¥å¿—è®°å½•ã€å®‰å…¨æ§åˆ¶ç­‰æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚</li><li><strong>ç»Ÿä¸€äº‹åŠ¡ç®¡ç†</strong><br>æä¾›å¯¹å£°æ˜å¼å’Œç¼–ç¨‹å¼äº‹åŠ¡çš„æ”¯æŒï¼Œèƒ½æ•´åˆ JDBCã€Hibernateã€JPAã€MyBatis ç­‰äº‹åŠ¡å¤„ç†ã€‚</li><li><strong>è‰¯å¥½çš„é›†æˆèƒ½åŠ›</strong><br>èƒ½å¾ˆå¥½åœ°æ•´åˆç¬¬ä¸‰æ–¹æ¡†æ¶ï¼ˆå¦‚ Hibernateã€MyBatisã€Quartzã€Redisï¼‰å’Œ Java EE æŠ€æœ¯ï¼ˆå¦‚ JPAã€JMSã€Servletï¼‰ã€‚</li><li><strong>æ¨¡å—åŒ–è®¾è®¡</strong><br>å„æ¨¡å—ç›¸äº’ç‹¬ç«‹ï¼Œå¯æŒ‰éœ€å¼•å…¥ï¼Œé¿å…è‡ƒè‚¿ã€‚</li><li><strong>æ”¯æŒå¤šç§è§†å›¾æŠ€æœ¯</strong><br>å¦‚ JSPã€Thymeleafã€FreeMarker ç­‰ï¼Œé€‚ç”¨äºä¸åŒå‰ç«¯æŠ€æœ¯æ ˆã€‚</li><li><strong>å¼ºå¤§çš„ç¤¾åŒºå’Œç”Ÿæ€</strong><br>Spring Bootã€Spring Cloud ç­‰é¡¹ç›®ç®€åŒ–äº†å¾®æœåŠ¡å’Œä¼ä¸šçº§å¼€å‘çš„å¤æ‚æ€§ã€‚</li></ol><h3 id="2-åœ¨-Spring-æ¡†æ¶ä¸­ï¼Œä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬ï¼Ÿä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿä½¿ç”¨æ§åˆ¶åè½¬ä¸ä¾èµ–æ³¨å…¥æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ">2. åœ¨ Spring æ¡†æ¶ä¸­ï¼Œä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬ï¼Ÿä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿä½¿ç”¨æ§åˆ¶åè½¬ä¸ä¾èµ–æ³¨å…¥æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ</h3><p><u>æ§åˆ¶åè½¬</u>æŒ‡çš„æ˜¯<strong>å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–å…³ç³»çš„ç®¡ç†ä¸å†ç”±ç¨‹åºæœ¬èº«æ§åˆ¶ï¼Œè€Œæ˜¯äº¤ç”± Spring å®¹å™¨ç»Ÿä¸€ç®¡ç†</strong>ã€‚<br>ä¼ ç»Ÿæ–¹å¼ä¸­ï¼Œç±»é€šå¸¸ä¼šé€šè¿‡ <code>new</code> åˆ›å»ºä¾èµ–å¯¹è±¡ï¼›ä½¿ç”¨ IoC åï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«â€œåè½¬â€åˆ°äº†æ¡†æ¶ä¸­ã€‚æ§åˆ¶æƒç”±è°ƒç”¨è€…è½¬ç§»åˆ°Springå®¹å™¨ï¼Œæ§åˆ¶æƒå‘ç”Ÿäº†åè½¬ï¼Œè¿™å°±æ˜¯Springçš„æ§åˆ¶åè½¬ã€‚</p><p><u>ä¾èµ–æ³¨å…¥</u>æ˜¯æ§åˆ¶åè½¬çš„ä¸€ç§å®ç°æ–¹å¼ï¼ŒæŒ‡çš„æ˜¯<strong>ç”± Spring å®¹å™¨å°†å¯¹è±¡æ‰€ä¾èµ–çš„ç»„ä»¶ï¼ˆä¾èµ–é¡¹ï¼‰â€œæ³¨å…¥â€åˆ°å¯¹è±¡ä¸­</strong>ï¼Œè€Œä¸æ˜¯ç”±å¯¹è±¡è‡ªå·±åˆ›å»ºä¾èµ–ã€‚</p><p><u>ä½¿ç”¨æ§åˆ¶åè½¬ä¸ä¾èµ–æ³¨å…¥çš„ä¼˜ç‚¹</u>ï¼š</p><table><thead><tr><th>ä¼˜ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>è§£è€¦</strong></td><td>å¯¹è±¡ä¹‹é—´é€šè¿‡æ¥å£å’Œå®¹å™¨è”ç³»ï¼Œé™ä½æ¨¡å—é—´ä¾èµ–</td></tr><tr><td><strong>æé«˜å¯æµ‹è¯•æ€§</strong></td><td>æ˜“äºä½¿ç”¨ Mock æ›¿ä»£çœŸå®ä¾èµ–è¿›è¡Œå•å…ƒæµ‹è¯•</td></tr><tr><td><strong>å¯é…ç½®æ€§å¼º</strong></td><td>å¯¹è±¡å…³ç³»å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æˆ–æ³¨è§£çµæ´»ç®¡ç†</td></tr><tr><td><strong>å¤ç”¨æ€§é«˜</strong></td><td>å¯é‡ç”¨ç»„ä»¶è¢«å®¹å™¨ç»Ÿä¸€ç®¡ç†ï¼Œé¿å…é‡å¤åˆ›å»º</td></tr><tr><td><strong>å¢å¼ºæ‰©å±•æ€§</strong></td><td>å®¹æ˜“å®ç° AOPï¼ˆå¦‚äº‹åŠ¡ã€æ—¥å¿—ï¼‰ç­‰åŠŸèƒ½</td></tr><tr><td><strong>é™ä½ç»´æŠ¤æˆæœ¬</strong></td><td>å¯¹è±¡å…³ç³»é›†ä¸­ç®¡ç†ï¼Œä¿®æ”¹å½±å“èŒƒå›´å°</td></tr></tbody></table><h3 id="3-åœ¨-Spring-æ¡†æ¶ä¸­ï¼Œæœ‰å“ªäº›ä¸åŒç±»å‹çš„ä¾èµ–æ³¨å…¥å®ç°æ–¹å¼ï¼Ÿ">3. åœ¨ Spring æ¡†æ¶ä¸­ï¼Œæœ‰å“ªäº›ä¸åŒç±»å‹çš„ä¾èµ–æ³¨å…¥å®ç°æ–¹å¼ï¼Ÿ</h3><p>Springæ¡†æ¶çš„ä¾èµ–æ³¨å…¥é€šå¸¸æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š</p><ul><li>ä¸€ç§æ˜¯<strong>æ„é€ æ–¹æ³•</strong>æ³¨å…¥</li><li>å¦ä¸€ç§æ˜¯<strong>å±æ€§setteræ–¹æ³•</strong>æ³¨å…¥ã€‚</li></ul><p>å¯¹äºä¸¤ç§æ–¹æ³•æ³¨å…¥ï¼ŒSpringæ¡†æ¶éƒ½æ˜¯åŸºäºJavaçš„åå°„æœºåˆ¶å®ç°çš„ã€‚</p><h3 id="4-åœ¨Spring-æ¡†æ¶ä¸­ï¼ŒBeanFactoryä¸AppliacationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸApplicationContextçš„å®ç°ç±»æœ‰å“ªäº›">4. åœ¨Spring æ¡†æ¶ä¸­ï¼ŒBeanFactoryä¸AppliacationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸApplicationContextçš„å®ç°ç±»æœ‰å“ªäº›?</h3><p>ApplicaitonContextæ˜¯BeanFactoryçš„å­æ¥å£ã€‚</p><ul><li>BeanFactoryï¼šIOC å®¹å™¨åŸºæœ¬å®ç°ï¼Œæ˜¯ Spring å†…éƒ¨çš„ä½¿ç”¨æ¥å£ï¼Œä¸æä¾›å¼€å‘äººå‘˜è¿›è¡Œä½¿ç”¨ï¼Œè¿™ç§æ–¹å¼åŠ è½½é…ç½®æ–‡ä»¶æ—¶å€™ä¸ä¼šåˆ›å»ºå¯¹è±¡ï¼Œåœ¨è·å–å¯¹è±¡ï¼ˆä½¿ç”¨æ—¶ï¼‰æ‰å»åˆ›å»ºå¯¹è±¡ ã€‚ï¼ˆæ™šåŠ è½½ï¼‰</li><li>ApplicationContextï¼šBeanFactory æ¥å£çš„å­æ¥å£ï¼Œæä¾›æ›´å¤šæ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œä¸€èˆ¬ç”±å¼€å‘äººå‘˜è¿›è¡Œä½¿ç”¨,è¿™ç§æ–¹å¼åœ¨åŠ è½½é…ç½®æ–‡ä»¶æ—¶å€™å°±ä¼šæŠŠé…ç½®æ–‡ä»¶ä¸­çš„å¯¹è±¡è¿›è¡Œåˆ›å»ºã€‚(æ—©åŠ è½½)</li></ul><table><thead><tr><th>ç‰¹æ€§</th><th><code>BeanFactory</code></th><th><code>ApplicationContext</code></th></tr></thead><tbody><tr><td><strong>å±‚æ¬¡å…³ç³»</strong></td><td>æœ€åŸºæœ¬çš„å®¹å™¨æ¥å£</td><td>æ˜¯ <code>BeanFactory</code> çš„å­æ¥å£ï¼Œæ‰©å±•åŠŸèƒ½æ›´å¼º</td></tr><tr><td><strong>åŠ è½½æ–¹å¼</strong></td><td><strong>æ‡’åŠ è½½</strong>ï¼ˆå»¶è¿ŸåŠ è½½ Beanï¼Œä½¿ç”¨æ—¶æ‰åˆ›å»ºï¼‰</td><td><strong>é¢„åŠ è½½</strong>ï¼ˆå¯åŠ¨æ—¶åˆ›å»ºæ‰€æœ‰å•ä¾‹ Beanï¼‰</td></tr><tr><td><strong>å›½é™…åŒ–æ”¯æŒ</strong></td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒï¼ˆå¦‚ <code>getMessage()</code>ï¼‰</td></tr><tr><td><strong>äº‹ä»¶å‘å¸ƒæœºåˆ¶</strong></td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒï¼ˆå¦‚ <code>ApplicationEventPublisher</code>ï¼‰</td></tr><tr><td><strong>AOP æ”¯æŒ</strong></td><td>æ”¯æŒï¼ˆéœ€æ‰‹åŠ¨é…ç½®ï¼‰</td><td>æ›´å¥½æ”¯æŒï¼Œé›†æˆæ›´æ–¹ä¾¿</td></tr><tr><td><strong>èµ„æºè®¿é—®</strong></td><td>åŸºæœ¬æ— </td><td>æä¾›èµ„æºåŠ è½½ï¼ˆå¦‚ ClassPathã€FileSystemï¼‰</td></tr><tr><td><strong>ä½¿ç”¨åœºæ™¯</strong></td><td>å†…å­˜èµ„æºç´§å¼ ã€ä»…ç®¡ç†å°‘é‡ Bean</td><td>å¸¸è§„å¼€å‘ä¸­æ¨èä½¿ç”¨</td></tr></tbody></table><p><u>ApplicationContext çš„å¸¸è§å®ç°ç±»</u>ï¼š</p><table><thead><tr><th>å®ç°ç±»</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>ClassPathXmlApplicationContext</strong></td><td>ä»ç±»è·¯å¾„ä¸‹åŠ è½½ XML é…ç½®æ–‡ä»¶</td></tr><tr><td><strong>FileSystemXmlApplicationContext</strong></td><td>ä»æ–‡ä»¶ç³»ç»Ÿä¸­åŠ è½½ XML é…ç½®æ–‡ä»¶</td></tr><tr><td><strong>AnnotationConfigApplicationContext</strong></td><td>ç”¨äºåŸºäºæ³¨è§£çš„é…ç½®ï¼ˆå¦‚ <code>@Configuration</code>ï¼‰</td></tr><tr><td><strong>WebApplicationContext</strong></td><td>ä¸“ç”¨äº Web åº”ç”¨ï¼ˆSpring MVC ä¸­ä½¿ç”¨ï¼‰</td></tr><tr><td><strong>ConfigurableWebApplicationContext</strong></td><td>æ‰©å±•äº† WebApplicationContextï¼Œå®ƒå…è®¸é€šè¿‡é…ç½®çš„æ–¹å¼å®ä¾‹åŒ–WebApplicationContext</td></tr></tbody></table><h3 id="5-Spring-æ”¯æŒ-bean-çš„ä½œç”¨åŸŸæœ‰å‡ ç§ï¼Ÿ">5. Spring æ”¯æŒ bean çš„ä½œç”¨åŸŸæœ‰å‡ ç§ï¼Ÿ</h3><p>Spring æ”¯æŒçš„ bean çš„ä½œç”¨åŸŸå¦‚ä¸‹ï¼š</p><table><thead><tr><th>ä½œç”¨åŸŸ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>singleton</code></td><td>é»˜è®¤çš„ä½œç”¨åŸŸï¼Œä½¿ç”¨singletonå®šä¹‰çš„Beanåœ¨Springå®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªBeanå®ä¾‹ã€‚</td></tr><tr><td><code>prototype</code></td><td>Springå®¹å™¨æ¯æ¬¡è·å–prototypeå®šä¹‰çš„Beanï¼Œå®¹å™¨éƒ½å°†åˆ›å»ºä¸€ä¸ªæ–°çš„Beanå®ä¾‹ã€‚</td></tr><tr><td><code>request</code></td><td>åœ¨ä¸€æ¬¡HTTPè¯·æ±‚ä¸­å®¹å™¨å°†è¿”å›ä¸€ä¸ªBeanå®ä¾‹ï¼Œä¸åŒçš„HTTPè¯·æ±‚è¿”å›ä¸åŒçš„Beanå®ä¾‹ã€‚ä»…åœ¨Web Springåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ã€‚</td></tr><tr><td><code>session</code></td><td>åœ¨ä¸€ä¸ªHTTP Sessionä¸­ï¼Œå®¹å™¨å°†è¿”å›åŒä¸€ä¸ªBeanå®ä¾‹ã€‚ä»…åœ¨WebSpringåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ã€‚</td></tr><tr><td><code>application</code></td><td>ä¸ºæ¯ä¸ªServletContextå¯¹è±¡åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œå³åŒä¸€ä¸ªåº”ç”¨å…±äº«ä¸€ä¸ªBeanå®ä¾‹ã€‚ä»…åœ¨Web Springåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ã€‚</td></tr><tr><td><code>websocket</code></td><td>ä¸ºæ¯ä¸ªWebSocketå¯¹è±¡åˆ›å»ºä¸€ä¸ªBeanå®ä¾‹ã€‚ä»…åœ¨Web Springåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ã€‚</td></tr></tbody></table><h3 id="6-Spring-æœ‰å‡ ç§é…ç½®æ–¹å¼ï¼Ÿï¼ˆåŸºäº-xmlã€åŸºäºæ³¨è§£ã€åŸºäº-Java-é…ç½®ï¼‰é’ˆå¯¹ä¸Šè¿°é…ç½®ï¼Œè¯·ä¸¾ä¾‹è¯´æ˜ã€‚">6. Spring æœ‰å‡ ç§é…ç½®æ–¹å¼ï¼Ÿï¼ˆåŸºäº xmlã€åŸºäºæ³¨è§£ã€åŸºäº Java é…ç½®ï¼‰é’ˆå¯¹ä¸Šè¿°é…ç½®ï¼Œè¯·ä¸¾ä¾‹è¯´æ˜ã€‚</h3><p><u>ä¸€ã€åŸºäº XML çš„é…ç½®æ–¹å¼</u></p><p>ç‰¹ç‚¹ï¼š</p><ul><li>é…ç½®é›†ä¸­ï¼Œæ¸…æ™°å¯è§ï¼Œé€‚åˆé…ç½®å¤§é‡ Beanã€‚</li><li>ä¸éœ€è¦ä¿®æ”¹ä»£ç å³å¯æ”¹å˜é…ç½®ï¼ˆä¾‹å¦‚æ•°æ®æºç­‰ï¼‰ã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><p><strong>beans.xml</strong>ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.example.UserService&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userRepository&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userRepository&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userRepository&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.example.UserRepository&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨æ–¹å¼</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line"><span class="type">UserService</span> <span class="variable">service</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;userService&quot;</span>, UserService.class);</span><br></pre></td></tr></table></figure><p><u>äºŒã€åŸºäºæ³¨è§£çš„é…ç½®æ–¹å¼ï¼ˆå¸¸ç”¨äº Spring Bootï¼‰</u></p><p>ç‰¹ç‚¹ï¼š</p><ul><li>ä½¿ç”¨æ³¨è§£å‡å°‘ XML é…ç½®ï¼Œä»£ç æ›´ç´§å‡‘ã€‚</li><li>ä¸ Java ç±»ç´§è€¦åˆï¼Œé€‚åˆå°é¡¹ç›®æˆ–ç»„ä»¶å†…éƒ¨ã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserRepository</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserRepository userRepository;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å¼€å¯æ³¨è§£æ‰«æ</strong>ï¼ˆXML æ–¹å¼æˆ– Java é…ç½®æ–¹å¼ï¼‰ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.example&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.example&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig</span> &#123;&#125;</span><br></pre></td></tr></table></figure><p><u>ä¸‰ã€åŸºäº Java é…ç½®ç±»ï¼ˆJavaConfigï¼‰</u></p><p>ç‰¹ç‚¹ï¼š</p><ul><li>å®Œå…¨ç”¨ Java ä»£ç ä»£æ›¿ XMLã€‚</li><li>å¼ºç±»å‹æ£€æŸ¥ï¼Œç¼–è¯‘æœŸå°±èƒ½å‘ç°é”™è¯¯ã€‚</li><li>é€‚ç”¨äºä¸­å¤§å‹é¡¹ç›®ã€Spring Boot æ¨èæ–¹å¼ã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.example&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> UserRepository <span class="title function_">userRepository</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UserRepository</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> UserService <span class="title function_">userService</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UserService</span>(userRepository());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨æ–¹å¼</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(AppConfig.class);</span><br><span class="line"><span class="type">UserService</span> <span class="variable">service</span> <span class="operator">=</span> context.getBean(UserService.class);</span><br></pre></td></tr></table></figure><h3 id="7-ä»€ä¹ˆæ˜¯åŸºäº-Java-çš„-Spring-æ³¨è§£é…ç½®-è¯·ä¸¾ä¾‹è¯´æ˜ï¼Ÿ">7. ä»€ä¹ˆæ˜¯åŸºäº Java çš„ Spring æ³¨è§£é…ç½®? è¯·ä¸¾ä¾‹è¯´æ˜ï¼Ÿ</h3><p><strong><u>åŸºäº Java çš„ Spring æ³¨è§£é…ç½®</u>ï¼ˆJava-based configurationï¼‰</strong> æ˜¯æŒ‡ï¼šä½¿ç”¨æ™®é€šçš„ Java ç±»å’Œæ³¨è§£ï¼ˆå¦‚ <code>@Configuration</code>ã€<code>@Bean</code>ã€<code>@ComponentScan</code> ç­‰ï¼‰æ¥ä»£æ›¿ä¼ ç»Ÿçš„ XML é…ç½®æ–‡ä»¶ï¼Œå®Œæˆ Spring å®¹å™¨çš„åˆå§‹åŒ–ä¸ Bean çš„å®šä¹‰ä¸è£…é…ã€‚è¿™æ˜¯ <strong>Spring 3.0+</strong> å¼•å…¥çš„ä¸€ç§æ›´çµæ´»ã€ç±»å‹å®‰å…¨çš„é…ç½®æ–¹å¼ï¼Œä¹Ÿæ˜¯ <strong>Spring Boot æ¨èçš„ä¸»æµæ–¹å¼</strong>ã€‚</p><p><u>ä¸¾ä¾‹å¦‚ä¸‹</u>ï¼š</p><ol><li><p>å®šä¹‰ä¸šåŠ¡ç±»å’Œä¾èµ–</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¾èµ–ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserRepository</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;UserRepository.save()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœåŠ¡ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> UserRepository userRepository;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserService</span><span class="params">(UserRepository userRepository)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userRepository = userRepository;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">()</span> &#123;</span><br><span class="line">        userRepository.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®ç±»ï¼ˆJavaConfigï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> UserRepository <span class="title function_">userRepository</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UserRepository</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> UserService <span class="title function_">userService</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// æ‰‹åŠ¨æ³¨å…¥ä¾èµ–</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UserService</span>(userRepository());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨ Spring å®¹å™¨å¹¶ä½¿ç”¨ Bean</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainApp</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(AppConfig.class);</span><br><span class="line">        <span class="type">UserService</span> <span class="variable">service</span> <span class="operator">=</span> context.getBean(UserService.class);</span><br><span class="line">        service.doSomething();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="8-ä»€ä¹ˆæ˜¯æ³¨è§£ï¼ŸSpring-çš„å¸¸ç”¨æ³¨è§£æœ‰å“ªäº›ï¼Ÿæ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ">8. ä»€ä¹ˆæ˜¯æ³¨è§£ï¼ŸSpring çš„å¸¸ç”¨æ³¨è§£æœ‰å“ªäº›ï¼Ÿæ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ</h3><p><strong><u>æ³¨è§£</u></strong> æ˜¯ Java 5 å¼•å…¥çš„ä¸€ç§ <strong>å…ƒæ•°æ®æœºåˆ¶</strong>ï¼Œç”¨äºä¸ºç¨‹åºä¸­çš„ç±»ã€æ–¹æ³•ã€å­—æ®µç­‰æ·»åŠ é¢å¤–çš„ä¿¡æ¯ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯æ ‡è®°ï¼Œç”¨äºè¢«ç¼–è¯‘å™¨æˆ–æ¡†æ¶è¯†åˆ«å¹¶æ‰§è¡Œç‰¹å®šé€»è¾‘ã€‚åœ¨ Spring ä¸­ï¼Œæ³¨è§£è¢«å¹¿æ³›ç”¨äºå®ç°é…ç½®ã€ä¾èµ–æ³¨å…¥ã€é¢å‘åˆ‡é¢ç¼–ç¨‹ç­‰åŠŸèƒ½ï¼Œæ˜¯æ›¿ä»£ XML é…ç½®çš„ä¸»æµæ–¹å¼ã€‚</p><hr><p><u>Spring å¸¸ç”¨æ³¨è§£</u>ï¼š</p><ol><li><p>é€šç”¨ç»„ä»¶å£°æ˜æ³¨è§£ï¼ˆç”¨äºæ ‡è®°ä¸º Beanï¼‰</p><table><thead><tr><th>æ³¨è§£</th><th>ç”¨é€”</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>@Component</code></td><td>é€šç”¨ç»„ä»¶</td><td>è¡¨ç¤ºä¸€ä¸ªé€šç”¨ Beanï¼Œä¼šè¢«æ‰«æåˆ°å®¹å™¨ä¸­</td></tr><tr><td><code>@Service</code></td><td>ä¸šåŠ¡é€»è¾‘ç»„ä»¶</td><td>è¡¨ç¤º Service å±‚ Bean</td></tr><tr><td><code>@Repository</code></td><td>æ•°æ®è®¿é—®ç»„ä»¶</td><td>è¡¨ç¤º DAO å±‚ Beanï¼Œæ”¯æŒæ•°æ®è®¿é—®å¼‚å¸¸è½¬æ¢</td></tr><tr><td><code>@Controller</code></td><td>Web æ§åˆ¶å™¨</td><td>Spring MVC æ§åˆ¶å™¨ç±»</td></tr></tbody></table></li><li><p>ä¾èµ–æ³¨å…¥ç›¸å…³æ³¨è§£</p><table><thead><tr><th>æ³¨è§£</th><th>ç”¨é€”</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>@Autowired</code></td><td>è‡ªåŠ¨æ³¨å…¥</td><td>é»˜è®¤æŒ‰ç±»å‹æ³¨å…¥ Beanï¼Œå¯ä¸ <code>@Qualifier</code> é…åˆæŒ‡å®šåç§°</td></tr><tr><td><code>@Qualifier</code></td><td>æŒ‡å®š Bean åç§°æ³¨å…¥</td><td>é…åˆ <code>@Autowired</code> ä½¿ç”¨</td></tr><tr><td><code>@Value</code></td><td>æ³¨å…¥å¸¸é‡ã€é…ç½®å€¼</td><td>å¯ä» <code>application.properties</code> æ³¨å…¥å€¼</td></tr><tr><td><code>@Inject</code>ï¼ˆJSR-330ï¼‰</td><td>è‡ªåŠ¨æ³¨å…¥ï¼ˆæ ‡å‡†ï¼‰</td><td>ä¸ <code>@Autowired</code> ç±»ä¼¼ï¼Œä½†æ—  Spring ç‰¹æœ‰åŠŸèƒ½</td></tr><tr><td><code>@Resource</code>ï¼ˆJSR-250ï¼‰</td><td>è‡ªåŠ¨æ³¨å…¥</td><td>é»˜è®¤æŒ‰åç§°æ³¨å…¥ï¼Œä¹Ÿå¯æŒ‰ç±»å‹</td></tr></tbody></table></li><li><p>é…ç½®ç›¸å…³æ³¨è§£</p><table><thead><tr><th>æ³¨è§£</th><th>ç”¨é€”</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>@Configuration</code></td><td>é…ç½®ç±»</td><td>ç­‰ä»·äºä¸€ä¸ª XML é…ç½®æ–‡ä»¶</td></tr><tr><td><code>@Bean</code></td><td>å®šä¹‰ Bean</td><td>åœ¨é…ç½®ç±»ä¸­å®šä¹‰æ–¹æ³•å¹¶è¿”å› Bean</td></tr><tr><td><code>@ComponentScan</code></td><td>æ‰«æç»„ä»¶</td><td>æŒ‡å®šæ‰«æçš„åŒ…è·¯å¾„</td></tr><tr><td><code>@Import</code></td><td>å¯¼å…¥å…¶ä»–é…ç½®ç±»</td><td>ç”¨äºæ¨¡å—åŒ–é…ç½®</td></tr><tr><td><code>@PropertySource</code></td><td>åŠ è½½é…ç½®æ–‡ä»¶</td><td>ä¾‹å¦‚åŠ è½½ <code>application.properties</code></td></tr></tbody></table></li></ol><hr><p><u>å¼€å¯æ³¨è§£è£…é…çš„ä¸¤ç§æ–¹æ³•</u>ï¼š</p><ol><li><p>åŸºäº Java é…ç½®å¼€å¯ç»„ä»¶æ‰«æï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &quot;com.example&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åŸºäº XML å¼€å¯ç»„ä»¶æ‰«æ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.example&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="9-Component-Controller-Repository-Service-æœ‰ä½•åŒºåˆ«ï¼Ÿ">9. @Component, @Controller, @Repository, @Service æœ‰ä½•åŒºåˆ«ï¼Ÿ</h3><table><thead><tr><th>æ³¨è§£</th><th>é€‚ç”¨å±‚</th><th>è¯­ä¹‰ä½œç”¨</th><th>ç‰¹æ®Šæ”¯æŒ</th></tr></thead><tbody><tr><td><code>@Component</code></td><td>é€šç”¨ç»„ä»¶å±‚</td><td>æ ‡å‡†çš„ç»„ä»¶ç±»ï¼Œæ— ç‰¹å®šè§’è‰²</td><td>æ— </td></tr><tr><td><code>@Service</code></td><td><strong>ä¸šåŠ¡é€»è¾‘å±‚</strong></td><td>è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª Service ç»„ä»¶</td><td>ç”¨äºä¸šåŠ¡é€»è¾‘å°è£…ï¼Œå¯èƒ½ä¸ AOP æ­é…ä½¿ç”¨</td></tr><tr><td><code>@Repository</code></td><td><strong>æŒä¹…å±‚ï¼ˆDAOï¼‰</strong></td><td>è¡¨ç¤ºæ•°æ®è®¿é—®ç»„ä»¶</td><td>è‡ªåŠ¨è½¬æ¢æ•°æ®åº“ç›¸å…³å¼‚å¸¸ä¸º Spring å¼‚å¸¸</td></tr><tr><td><code>@Controller</code></td><td><strong>è¡¨ç°å±‚ï¼ˆMVC æ§åˆ¶å™¨ï¼‰</strong></td><td>è¡¨ç¤ºæ§åˆ¶å™¨ç±»ï¼Œå¤„ç† Web è¯·æ±‚</td><td>é…åˆ Spring MVC å¤„ç†å‰ç«¯è¯·æ±‚</td></tr></tbody></table><h3 id="10-Autowired-å’Œ-Resource-ä¹‹é—´çš„åŒºåˆ«ï¼Œ-Qualifier-æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ">10. @Autowired å’Œ@Resource ä¹‹é—´çš„åŒºåˆ«ï¼Œ@Qualifier æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h3><p><u>@Autowired å’Œ@Resource ä¹‹é—´çš„åŒºåˆ«å¦‚ä¸‹</u>ï¼š</p><table><thead><tr><th>å¯¹æ¯”é¡¹</th><th><code>@Autowired</code>ï¼ˆSpring æä¾›ï¼‰</th><th><code>@Resource</code>ï¼ˆJDK æä¾›ï¼ŒJSR-250ï¼‰</th></tr></thead><tbody><tr><td>æ‰€å±æ¡†æ¶</td><td>Spring ä¸“å±æ³¨è§£</td><td>Java æ ‡å‡†æ³¨è§£</td></tr><tr><td>ä¾èµ–æ³¨å…¥æ–¹å¼</td><td><strong>é»˜è®¤æŒ‰ç±»å‹æ³¨å…¥</strong>ï¼ˆbyTypeï¼‰</td><td><strong>é»˜è®¤æŒ‰åç§°æ³¨å…¥</strong>ï¼ˆbyNameï¼‰</td></tr><tr><td>æ˜¯å¦æ”¯æŒæŒ‰åç§°æ³¨å…¥</td><td>å¯ä»¥æ­é… <code>@Qualifier(&quot;beanName&quot;)</code> å®ç°</td><td>é»˜è®¤å°±æŒ‰åç§°æ³¨å…¥</td></tr><tr><td>æ˜¯å¦æ”¯æŒæ„é€ æ–¹æ³•æ³¨å…¥</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒï¼ˆåªèƒ½å­—æ®µæˆ– setterï¼‰</td></tr><tr><td>æ˜¯å¦æ”¯æŒ <code>@Primary</code></td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>æ˜¯å¦æ”¯æŒ <code>required = false</code></td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>æ˜¯å¦æ¨è</td><td>Spring æ¨èä½¿ç”¨</td><td>å…¼å®¹æ ‡å‡†ä½†åŠŸèƒ½æœ‰é™</td></tr></tbody></table><p><u>@Qualifier æ³¨è§£çš„ä½œç”¨å¦‚ä¸‹</u>ï¼š</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ@Autowired æŒ‰ç±»å‹è£…é… Spring Beanã€‚å½“å­˜åœ¨ <strong>å¤šä¸ªç›¸åŒç±»å‹çš„ Bean</strong> æ—¶ï¼Œ<code>@Autowired</code> æ— æ³•å”¯ä¸€ç¡®å®šæ³¨å…¥å“ªä¸ª Beanï¼Œå°±ä¼šæŠ¥é”™ã€‚</p><p>æ­¤æ—¶ä½¿ç”¨ <code>@Qualifier</code> æŒ‡å®š <strong>Bean çš„åç§°</strong>ï¼Œç”¨äºæ˜ç¡®é€‰æ‹©å“ªä¸€ä¸ª Beanã€‚</p><h3 id="11-Spring-æ”¯æŒä¸¤ç§ç±»å‹çš„äº‹åŠ¡ç®¡ç†ï¼Œåˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å®ç°çš„ï¼Ÿä½ æ›´å€¾å‘ç”¨é‚£ç§äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ">11. Spring æ”¯æŒä¸¤ç§ç±»å‹çš„äº‹åŠ¡ç®¡ç†ï¼Œåˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å®ç°çš„ï¼Ÿä½ æ›´å€¾å‘ç”¨é‚£ç§äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</h3><p><u>Spring æ”¯æŒä¸¤ç§ç±»å‹çš„äº‹åŠ¡ç®¡ç†</u>ï¼š</p><p><strong>1. ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼ˆProgrammatic Transaction Managementï¼‰</strong></p><ul><li><p>ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†æ˜¯é€šè¿‡ç¼–å†™ä»£ç å®ç°çš„äº‹åŠ¡ç®¡ç†ã€‚è¿™ç§æ–¹å¼èƒ½å¤Ÿåœ¨ä»£ç ä¸­ç²¾ç¡®åœ°å®šä¹‰äº‹åŠ¡çš„è¾¹ç•Œ,æˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€æ±‚è§„å®šäº‹åŠ¡ä»å“ªé‡Œå¼€å§‹,åˆ°å“ªé‡Œç»“æŸã€‚</p></li><li><p><strong>å®ç°æ–¹å¼</strong>ï¼šç¨‹åºå‘˜é€šè¿‡ä»£ç æ˜¾å¼åœ°æ§åˆ¶äº‹åŠ¡çš„å¼€å¯ã€æäº¤å’Œå›æ»šã€‚é€šå¸¸é€šè¿‡ Spring æä¾›çš„ <code>PlatformTransactionManager</code> å’Œ <code>TransactionTemplate</code> æ¥å®ç°ã€‚</p></li><li><p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">TransactionTemplate</span> <span class="variable">transactionTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TransactionTemplate</span>(transactionManager);</span><br><span class="line">transactionTemplate.execute(status -&gt; &#123;</span><br><span class="line">    <span class="comment">// ä¸šåŠ¡ä»£ç </span></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>ç»†ç²’åº¦æ§åˆ¶ï¼Œçµæ´»ã€‚</li><li>ä»£ç ä¾µå…¥æ€§å¼ºï¼Œä¸šåŠ¡ä»£ç å’Œäº‹åŠ¡ç®¡ç†è€¦åˆåº¦é«˜ã€‚</li><li>ç»´æŠ¤æˆæœ¬è¾ƒé«˜ï¼Œä¸åˆ©äºä»£ç å¤ç”¨ã€‚</li></ul></li></ul><p><strong>2. å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼ˆDeclarative Transaction Managementï¼‰</strong></p><ul><li><p>Springå£°æ˜å¼äº‹åŠ¡ç®¡ç†åœ¨åº•å±‚é‡‡ç”¨äº†AOPæŠ€æœ¯ï¼Œå…¶æœ€å¤§çš„ä¼˜ç‚¹åœ¨äºæ— é¡»é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼ç®¡ç†äº‹åŠ¡ï¼Œåªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œç›¸å…³çš„è§„åˆ™å£°æ˜,å°±å¯ä»¥å°†äº‹åŠ¡è§„åˆ™åº”ç”¨åˆ°ä¸šåŠ¡é€»è¾‘ä¸­ã€‚</p></li><li><p><strong>å®ç°æ–¹å¼</strong>ï¼šé€šè¿‡é…ç½®ï¼ˆXML æˆ–æ³¨è§£ï¼‰å£°æ˜äº‹åŠ¡çš„è¾¹ç•Œï¼ŒSpring AOPï¼ˆä»£ç†æœºåˆ¶ï¼‰è‡ªåŠ¨ä¸ºç›®æ ‡æ–¹æ³•ç”Ÿæˆäº‹åŠ¡ä»£ç†ï¼Œæ— éœ€åœ¨ä»£ç ä¸­æ‰‹åŠ¨æ§åˆ¶äº‹åŠ¡ã€‚</p></li><li><p><strong>å¸¸ç”¨å®ç°</strong>ï¼š</p><ul><li>ä½¿ç”¨ <code>@Transactional</code> æ³¨è§£</li><li>XML é…ç½® <code>&lt;tx:advice&gt;</code> å’Œäº‹åŠ¡åˆ‡é¢</li></ul></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">someServiceMethod</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// ä¸šåŠ¡ä»£ç ï¼ŒSpring è‡ªåŠ¨ç®¡ç†äº‹åŠ¡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>ä»£ç ä¸äº‹åŠ¡é€»è¾‘åˆ†ç¦»ï¼Œä¸šåŠ¡ä»£ç æ›´ç®€æ´ã€‚</li><li>æ˜“äºç»´æŠ¤å’Œç®¡ç†ã€‚</li><li>çµæ´»é…ç½®äº‹åŠ¡å±æ€§ï¼ˆä¼ æ’­è¡Œä¸ºã€éš”ç¦»çº§åˆ«ã€è¶…æ—¶ç­‰ï¼‰ã€‚</li></ul></li></ul><hr><p>æˆ‘æ›´å€¾å‘äºä½¿ç”¨<strong>å£°æ˜å¼äº‹åŠ¡ç®¡ç†</strong>ï¼ŒåŸå› å¦‚ä¸‹ï¼š</p><ol><li><strong>ç®€æ´æ¸…æ™°</strong>ï¼šä½¿ç”¨æ³¨è§£æˆ–é…ç½®å³å¯å®ç°äº‹åŠ¡ç®¡ç†ï¼Œæ— éœ€åœ¨ä¸šåŠ¡ä»£ç ä¸­å†™å¤§é‡äº‹åŠ¡æ§åˆ¶é€»è¾‘ã€‚</li><li><strong>ä½è€¦åˆ</strong>ï¼šä¸šåŠ¡é€»è¾‘å’Œäº‹åŠ¡æ§åˆ¶åˆ†ç¦»ï¼Œä»£ç æ›´æ˜“äºç»´æŠ¤å’Œç†è§£ã€‚</li><li><strong>çµæ´»é…ç½®</strong>ï¼šå¯ä»¥é€šè¿‡é…ç½®çµæ´»è°ƒæ•´äº‹åŠ¡å±æ€§ï¼Œæ”¯æŒä¸åŒæ–¹æ³•ä½¿ç”¨ä¸åŒäº‹åŠ¡ç­–ç•¥ã€‚</li><li><strong>Spring æ¨èæ–¹å¼</strong>ï¼šSpring å®˜æ–¹å’Œç¤¾åŒºæ™®éæ¨èå£°æ˜å¼äº‹åŠ¡ï¼Œé€‚åˆç»å¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯ã€‚</li></ol><p>å¦‚æœéœ€è¦éå¸¸ç»†ç²’åº¦æˆ–åŠ¨æ€çš„äº‹åŠ¡æ§åˆ¶ï¼Œæˆ–è€…åœ¨ç‰¹å®šå¤æ‚åœºæ™¯ä¸‹ï¼Œæ‰ä¼šè€ƒè™‘ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ã€‚å¤§å¤šæ•°æ—¥å¸¸å¼€å‘æ¨èç”¨å£°æ˜å¼äº‹åŠ¡ã€‚</p><h3 id="12-Spring-æ¡†æ¶çš„äº‹åŠ¡ç®¡ç†æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ">12. Spring æ¡†æ¶çš„äº‹åŠ¡ç®¡ç†æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ</h3><p><u>Spring æ¡†æ¶çš„äº‹åŠ¡ç®¡ç†æœ‰ä»¥ä¸‹å‡ ä¸ªä¼˜ç‚¹</u>ï¼š</p><ol><li><strong>ç»Ÿä¸€çš„äº‹åŠ¡ç®¡ç†æ¥å£</strong><br>Spring æä¾›ç»Ÿä¸€çš„ <code>PlatformTransactionManager</code> æ¥å£ï¼Œæ”¯æŒå¤šç§äº‹åŠ¡ç®¡ç†å™¨ï¼ˆJDBCã€JTAã€Hibernateã€JPA ç­‰ï¼‰ï¼Œæ–¹ä¾¿å¼€å‘è€…åœ¨ä¸åŒæŒä¹…åŒ–æŠ€æœ¯é—´åˆ‡æ¢è€Œä¸æ”¹ä¸šåŠ¡ä»£ç ã€‚</li><li><strong>å£°æ˜å¼äº‹åŠ¡æ”¯æŒï¼Œç®€åŒ–å¼€å‘</strong><br>é€šè¿‡æ³¨è§£ï¼ˆå¦‚ <code>@Transactional</code>ï¼‰æˆ– XML é…ç½®å³å¯å®ç°äº‹åŠ¡ç®¡ç†ï¼Œä¸šåŠ¡ä»£ç æ— éœ€æ˜¾å¼ç®¡ç†äº‹åŠ¡ï¼Œå‡å°‘ä»£ç ä¾µå…¥ï¼Œå¢å¼ºä»£ç çš„å¯è¯»æ€§å’Œç»´æŠ¤æ€§ã€‚</li><li><strong>çµæ´»çš„äº‹åŠ¡é…ç½®</strong><br>å¯ä»¥é’ˆå¯¹ä¸åŒæ–¹æ³•è®¾ç½®ä¸åŒçš„äº‹åŠ¡å±æ€§ï¼Œå¦‚ä¼ æ’­è¡Œä¸ºï¼ˆPropagationï¼‰ã€éš”ç¦»çº§åˆ«ï¼ˆIsolationï¼‰ã€è¶…æ—¶ï¼ˆTimeoutï¼‰ã€åªè¯»ï¼ˆRead-onlyï¼‰ç­‰ï¼Œæ»¡è¶³å¤æ‚ä¸šåŠ¡éœ€æ±‚ã€‚</li><li><strong>æ”¯æŒå¤šç§äº‹åŠ¡ä¼ æ’­è¡Œä¸º</strong><br>Spring æ”¯æŒå¤šç§ä¼ æ’­æœºåˆ¶ï¼Œæ¯”å¦‚ <code>REQUIRED</code>ã€<code>REQUIRES_NEW</code> ç­‰ï¼Œèƒ½å¤Ÿå¤„ç†å¤æ‚çš„äº‹åŠ¡åµŒå¥—å’Œäº‹åŠ¡è¾¹ç•Œï¼Œä¿è¯äº‹åŠ¡çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚</li><li><strong>è·¨å¤šä¸ªèµ„æºçš„åˆ†å¸ƒå¼äº‹åŠ¡æ”¯æŒ</strong><br>Spring èƒ½é›†æˆ JTA äº‹åŠ¡ç®¡ç†å™¨ï¼Œæ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œåè°ƒå¤šä¸ªèµ„æºç®¡ç†å™¨ï¼ˆå¦‚å¤šä¸ªæ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ï¼‰çš„ä¸€è‡´æäº¤å’Œå›æ»šã€‚</li><li><strong>è‰¯å¥½çš„å¼‚å¸¸å›æ»šæœºåˆ¶</strong><br>æ”¯æŒæ ¹æ®å¼‚å¸¸ç±»å‹è‡ªåŠ¨å†³å®šäº‹åŠ¡æ˜¯å¦å›æ»šï¼Œé»˜è®¤è¿è¡Œæ—¶å¼‚å¸¸è§¦å‘å›æ»šï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰è§„åˆ™ï¼Œæé«˜äº‹åŠ¡çš„å¯é æ€§ã€‚</li><li><strong>åŸºäº AOP å®ç°ï¼Œéä¾µå…¥å¼</strong><br>åˆ©ç”¨ Spring AOP å®ç°äº‹åŠ¡ç®¡ç†ï¼Œä¸éœ€è¦ä¿®æ”¹ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œåšåˆ°å…³æ³¨ç‚¹åˆ†ç¦»ï¼Œæé«˜ä»£ç æ•´æ´åº¦ã€‚</li><li><strong>æ˜“äºé›†æˆä¸æ‰©å±•</strong><br>Spring äº‹åŠ¡ç®¡ç†ä¸å…¶ä»– Spring ç»„ä»¶ï¼ˆå¦‚ Spring Dataã€Spring MVCã€Spring Bootï¼‰æ— ç¼é›†æˆï¼Œæ–¹ä¾¿æ„å»ºä¼ä¸šçº§åº”ç”¨ã€‚</li></ol><h3 id="13-ä»€ä¹ˆæ˜¯-AOPï¼ŒAOP-ä¸­æœ‰å“ªäº›å…³é”®æœ¯è¯­ï¼Œä»€ä¹ˆæ˜¯åˆ‡é¢ï¼ˆAspectï¼‰ï¼Œä»€ä¹ˆæ˜¯é€šçŸ¥ï¼ˆAdviceï¼‰ï¼ŸSpring-é€šçŸ¥æœ‰å“ªäº›ç±»å‹ï¼Ÿ">13. ä»€ä¹ˆæ˜¯ AOPï¼ŒAOP ä¸­æœ‰å“ªäº›å…³é”®æœ¯è¯­ï¼Œä»€ä¹ˆæ˜¯åˆ‡é¢ï¼ˆAspectï¼‰ï¼Œä»€ä¹ˆæ˜¯é€šçŸ¥ï¼ˆAdviceï¼‰ï¼ŸSpring é€šçŸ¥æœ‰å“ªäº›ç±»å‹ï¼Ÿ</h3><p><strong><u>AOP</u>ï¼ˆAspect-Oriented Programmingï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰</strong> æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œå®ƒé€šè¿‡å°†æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆcross-cutting concernsï¼Œå¦‚äº‹åŠ¡ç®¡ç†ã€æ—¥å¿—ã€å®‰å…¨ç­‰ï¼‰ä»ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œå®ç°å…³æ³¨ç‚¹çš„æ¨¡å—åŒ–ã€‚<br>ç®€è€Œè¨€ä¹‹ï¼ŒAOP èƒ½å¸®åŠ©æˆ‘ä»¬åœ¨ä¸æ”¹å˜ä¸šåŠ¡ä»£ç çš„æƒ…å†µä¸‹ï¼ŒæŠŠä¸€äº›å…¬å…±åŠŸèƒ½ï¼ˆå¦‚æ—¥å¿—ã€äº‹åŠ¡ï¼‰â€œåˆ‡å…¥â€åˆ°ç¨‹åºçš„æ‰§è¡Œæµç¨‹ä¸­ã€‚</p><p><u>AOP ä¸­çš„å…³é”®æœ¯è¯­</u>ï¼š</p><ul><li><strong>åˆ‡é¢ï¼ˆAspectï¼‰</strong><br>åˆ‡é¢æ˜¯æŒ‡å°è£…æ¨ªåˆ‡åˆ°ç³»ç»ŸåŠŸèƒ½ï¼ˆå¦‚äº‹åŠ¡å¤„ç†ï¼‰çš„ç±»ï¼Œæ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹çš„æ¨¡å—åŒ–è¡¨ç°ï¼Œæ˜¯é€šçŸ¥å’Œåˆ‡ç‚¹çš„ç»“åˆä½“ã€‚å®ƒå®šä¹‰äº†å…·ä½“åœ¨å“ªäº›ä½ç½®ï¼ˆåˆ‡ç‚¹ï¼‰æ‰§è¡Œä»€ä¹ˆæ ·çš„é¢å¤–è¡Œä¸ºï¼ˆé€šçŸ¥ï¼‰ã€‚</li><li><strong>è¿æ¥ç‚¹ï¼ˆJoin pointï¼‰</strong><br>ç¨‹åºæ‰§è¡Œä¸­çš„æŸä¸ªç‰¹å®šç‚¹ï¼Œæ¯”å¦‚æ–¹æ³•è°ƒç”¨ã€æ–¹æ³•æ‰§è¡Œã€å¼‚å¸¸æŠ›å‡ºç­‰ã€‚åœ¨ Spring AOP ä¸­ï¼Œè¿æ¥ç‚¹é€šå¸¸æŒ‡ä¸æ–¹æ³•æ‰§è¡Œç›¸å…³çš„ç‰¹å®šèŠ‚ç‚¹ã€‚</li><li><strong>åˆ‡å…¥ç‚¹ï¼ˆPointcutï¼‰</strong><br>åˆ‡å…¥ç‚¹æ˜¯å¯¹è¿æ¥ç‚¹çš„å®šä¹‰å’Œç­›é€‰ï¼Œæ˜¯æŒ‡é‚£äº›éœ€è¦å¤„ç†çš„è¿æ¥ç‚¹çš„é›†åˆï¼Œå‘Šè¯‰ AOP æ¡†æ¶åœ¨å“ªäº›è¿æ¥ç‚¹ä¸Šåº”ç”¨é€šçŸ¥ã€‚å®ƒé€šè¿‡è¡¨è¾¾å¼åŒ¹é…ç‰¹å®šçš„æ–¹æ³•æˆ–ç±»ã€‚</li><li><strong>é€šçŸ¥ï¼ˆAdviceï¼‰</strong><br>é€šçŸ¥æ˜¯ç”±åˆ‡é¢æ·»åŠ åˆ°ç‰¹å®šçš„è¿æ¥ç‚¹ï¼ˆæ»¡è¶³åˆ‡å…¥ç‚¹è§„åˆ™ï¼‰çš„ä¸€æ®µä»£ç ï¼Œæ˜¯åˆ‡é¢ä¸­å®šä¹‰çš„å…·ä½“åŠ¨ä½œï¼ŒæŒ‡åœ¨åˆ‡ç‚¹ä¸Šè¦æ‰§è¡Œçš„ä»£ç ï¼Œæ¯”å¦‚å‰ç½®é€šçŸ¥ã€åç½®é€šçŸ¥ç­‰ã€‚</li><li><strong>ç›®æ ‡å¯¹è±¡ï¼ˆTarget Objectï¼‰</strong><br>è¢«é€šçŸ¥çš„ä¸šåŠ¡å¯¹è±¡ï¼Œé€šçŸ¥æ‰€ä½œç”¨çš„ç›®æ ‡ä¸šåŠ¡ç±»å°±æ˜¯ç›®æ ‡å¯¹è±¡ã€‚</li><li><strong>ä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰</strong><br>ç”± Spring AOP åˆ›å»ºçš„åŒ…è£…äº†ç›®æ ‡å¯¹è±¡çš„å¯¹è±¡ï¼Œé€šè¿‡ä»£ç†å®ç°å¯¹ç›®æ ‡å¯¹è±¡æ–¹æ³•çš„å¢å¼ºã€‚ç›®æ ‡ç±»è¢«AOPç»‡å…¥å¢å¼ºåäº§ç”Ÿçš„ä¸€ä¸ªç»“æœç±»ï¼Œè¿™ä¸ªç»“æœç±»å°±æ˜¯ä»£ç†ç±»ï¼Œä»£ç†ç±»èåˆäº†åŸç±»å’Œå¢å¼ºçš„é€»è¾‘ã€‚</li><li><strong>ç»‡å…¥ï¼ˆWeavingï¼‰</strong><br>ç»‡å…¥æ˜¯å°†é€šçŸ¥æ·»åŠ åˆ°ç›®æ ‡ç±»å…·ä½“è¿æ¥ç‚¹çš„è¿‡ç¨‹ï¼Œè¿™äº›å¯ä»¥åœ¨ç¼–è¯‘æ—¶ã€ç±»åŠ è½½æ—¶å’Œè¿è¡Œæ—¶å®Œæˆã€‚</li><li><strong>å¼•å…¥ï¼ˆIntroductionï¼‰</strong><br>å¼•ä»‹æ˜¯ä¸€ç§ç‰¹æ®Šçš„é€šçŸ¥ï¼Œå®ƒä¸ºç±»æ·»åŠ ä¸€äº›å±æ€§å’Œæ–¹æ³•ã€‚å³ä½¿ä¸€ä¸ªä¸šåŠ¡ç±»åŸæœ¬æ²¡æœ‰å®ç°æŸä¸€ä¸ªæ¥å£ï¼Œé€šè¿‡AOPçš„å¼•ä»‹åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥åŠ¨æ€åœ°ä¸ºè¯¥ä¸šåŠ¡ç±»æ·»åŠ æ¥å£çš„å®ç°é€»è¾‘ï¼Œè®©ä¸šåŠ¡ç±»æˆä¸ºè¿™ä¸ªæ¥å£çš„å®ç°ç±»ã€‚</li></ul><hr><p><u>Spring é€šçŸ¥çš„ç±»å‹</u>ï¼š</p><ul><li><p>**ç¯ç»•é€šçŸ¥<br>ç¯ç»•é€šçŸ¥æ˜¯åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰å’Œæ‰§è¡Œåå®æ–½å¢å¼ºï¼Œå¯ä»¥åº”ç”¨äºæ—¥å¿—è®°å½•ã€äº‹åŠ¡å¤„ç†ç­‰åŠŸèƒ½ã€‚</p></li><li><p>**å‰ç½®é€šçŸ¥<br>å‰ç½®é€šçŸ¥æ˜¯åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰å®æ–½å¢å¼ºï¼Œå¯åº”ç”¨äºæƒé™ç®¡ç†ç­‰åŠŸèƒ½ã€‚</p></li><li><p><strong>åç½®é€šçŸ¥</strong><br>åç½®è¿”å›é€šçŸ¥æ˜¯åœ¨ç›®æ ‡æ–¹æ³•æˆåŠŸæ‰§è¡Œåå®æ–½å¢å¼ºï¼Œå¯åº”ç”¨äºå…³é—­æµã€åˆ é™¤ä¸´æ—¶æ–‡ä»¶ç­‰åŠŸèƒ½ã€‚</p></li><li><p><strong>åç½®ï¼ˆæœ€ç»ˆï¼‰é€šçŸ¥</strong><br>åç½®é€šçŸ¥æ˜¯åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œåå®æ–½å¢å¼ºï¼Œä¸åç½®è¿”å›é€šçŸ¥ä¸åŒçš„æ˜¯ï¼Œä¸ç®¡æ˜¯å¦å‘ç”Ÿå¼‚å¸¸éƒ½è¦æ‰§è¡Œè¯¥é€šçŸ¥ï¼Œå¯åº”ç”¨äºé‡Šæ”¾èµ„æºã€‚</p></li><li><p>**å¼‚å¸¸é€šçŸ¥<br>å¼‚å¸¸é€šçŸ¥æ˜¯åœ¨æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åå®æ–½å¢å¼ºï¼Œå¯ä»¥åº”ç”¨äºå¤„ç†å¼‚å¸¸ã€è®°å½•æ—¥å¿—ç­‰åŠŸèƒ½ã€‚</p></li><li><p><strong>å¼•å…¥é€šçŸ¥</strong><br>å¼•å…¥é€šçŸ¥æ˜¯åœ¨ç›®æ ‡ç±»ä¸­æ·»åŠ ä¸€äº›æ–°çš„æ–¹æ³•å’Œå±æ€§ï¼Œå¯ä»¥åº”ç”¨äºä¿®æ”¹ç›®æ ‡ç±»ï¼ˆå¢å¼ºç±»ï¼‰ã€‚</p></li></ul><h3 id="14-Spring-AOP-and-AspectJ-AOP-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸAOP-æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ">14. Spring AOP and AspectJ AOP æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸAOP æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ</h3><p><u>Spring AOP ä¸ AspectJ AOP çš„åŒºåˆ«</u>ï¼š</p><table><thead><tr><th>ç‰¹ç‚¹</th><th>Spring AOP</th><th>AspectJ AOP</th></tr></thead><tbody><tr><td><strong>å®ç°æœºåˆ¶</strong></td><td>åŸºäº <strong>åŠ¨æ€ä»£ç†</strong>ï¼ˆJDK æˆ– CGLIBï¼‰</td><td>åŸºäº <strong>ç¼–è¯‘æ—¶ç»‡å…¥</strong> æˆ– <strong>ç±»åŠ è½½æ—¶ç»‡å…¥</strong></td></tr><tr><td><strong>ç»‡å…¥æ—¶æœº</strong></td><td>è¿è¡Œæ—¶ï¼ˆRuntimeï¼‰</td><td>ç¼–è¯‘æœŸæˆ–ç±»åŠ è½½æœŸ</td></tr><tr><td><strong>ç›®æ ‡</strong></td><td>ä¸»è¦ç”¨äºæ–¹æ³•çº§åˆ«å¢å¼º</td><td>æ”¯æŒæ–¹æ³•ã€æ„é€ å‡½æ•°ã€å­—æ®µç­‰æ›´ç»†ç²’åº¦çš„å¢å¼º</td></tr><tr><td><strong>é…ç½®å¤æ‚åº¦</strong></td><td>ç®€å•ï¼ˆåŸºäº Spring é…ç½®æˆ–æ³¨è§£ï¼‰</td><td>ç›¸å¯¹å¤æ‚ï¼ˆéœ€è¦é¢å¤–ç¼–è¯‘å™¨æˆ–æ’ä»¶æ”¯æŒï¼‰</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>æ€§èƒ½è¾ƒå¥½ï¼ˆåªå¢å¼º Spring ç®¡ç†çš„ Beanï¼‰</td><td>æ€§èƒ½æœ€ä½³ï¼ˆç›´æ¥ç»‡å…¥å­—èŠ‚ç ï¼‰</td></tr><tr><td><strong>çµæ´»æ€§ä¸åŠŸèƒ½å¼ºå¤§ç¨‹åº¦</strong></td><td>åŠŸèƒ½ç›¸å¯¹æœ‰é™ï¼ˆä¸»è¦æ–¹æ³•çº§åˆ«ï¼‰</td><td>åŠŸèƒ½å¼ºå¤§ï¼ˆæ”¯æŒæ›´å¤šè¿æ¥ç‚¹ç±»å‹ï¼‰</td></tr><tr><td><strong>å¸¸è§ä½¿ç”¨åœºæ™¯</strong></td><td>å¤§å¤šæ•°ä¼ä¸šå¼€å‘ä¸­è¶³å¤Ÿä½¿ç”¨</td><td>å¯¹æ€§èƒ½å’Œç»‡å…¥ç²’åº¦è¦æ±‚æ›´é«˜çš„é¡¹ç›®ä¸­ä½¿ç”¨</td></tr></tbody></table><p><u>AOP çš„å®ç°æ–¹å¼</u>ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š</p><ol><li><p><strong>åŸºäºä»£ç†çš„ AOP</strong></p><ul><li><p>Spring AOP çš„æ ¸å¿ƒæ–¹å¼ã€‚</p></li><li><p>ä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ï¼ˆé’ˆå¯¹æ¥å£ï¼‰æˆ– CGLIB å­—èŠ‚ç ç”Ÿæˆï¼ˆé’ˆå¯¹ç±»ï¼‰ã€‚</p></li><li><p>è¿è¡Œæ—¶é€šè¿‡ä»£ç†å¯¹è±¡ç»‡å…¥å¢å¼ºé€»è¾‘ã€‚</p></li><li><p>ä¼˜ç‚¹ï¼šä¸ä¿®æ”¹åŸå§‹ç±»ï¼ŒSpring è‡ªåŠ¨ç®¡ç†ï¼›ç¼ºç‚¹ï¼šåªèƒ½ä½œç”¨äº Spring å®¹å™¨ä¸­çš„ Bean ä¸”ä¸»è¦æ”¯æŒæ–¹æ³•çº§åˆ«å¢å¼ºã€‚</p></li></ul></li><li><p><strong>åŸºäºå­—èŠ‚ç ç»‡å…¥çš„ AOPï¼ˆå¦‚ AspectJï¼‰</strong></p><ul><li><p>åœ¨ç¼–è¯‘é˜¶æ®µæˆ–ç±»åŠ è½½é˜¶æ®µä¿®æ”¹å­—èŠ‚ç ï¼Œç›´æ¥å°†å¢å¼ºä»£ç åµŒå…¥åˆ°ç›®æ ‡ç±»ä¸­ã€‚</p></li><li><p>æ”¯æŒæ›´ä¸°å¯Œçš„è¿æ¥ç‚¹ï¼ˆå¦‚å­—æ®µã€æ„é€ å™¨ï¼‰ã€‚</p></li><li><p>ä¼˜ç‚¹ï¼šæ€§èƒ½é«˜ï¼Œçµæ´»æ€§å¼ºï¼›ç¼ºç‚¹ï¼šé…ç½®å¤æ‚ï¼Œä¾èµ– AspectJ ç¼–è¯‘å™¨æˆ– LTWï¼ˆLoad-Time Weavingï¼‰æœºåˆ¶ã€‚</p></li></ul></li><li><p><strong>åŸºäºå­—èŠ‚ç æ“ä½œæ¡†æ¶ï¼ˆå¦‚ ASMã€Javassistï¼‰</strong></p><ul><li><p>æ‰‹åŠ¨æˆ–é€šè¿‡æ¡†æ¶ä¿®æ”¹ç±»å­—èŠ‚ç ï¼Œå®ç° AOP åŠŸèƒ½ã€‚</p></li><li><p>æ›´åº•å±‚ï¼Œé€šå¸¸ç”¨äºæ„å»ºè‡ªå·±çš„ AOP æ¡†æ¶æˆ–è¿›è¡Œåº•å±‚æ€§èƒ½ä¼˜åŒ–ã€‚</p></li><li><p>ä¸€èˆ¬ä¸æ¨èç›´æ¥ä½¿ç”¨ï¼Œé™¤éæœ‰ç‰¹æ®Šéœ€æ±‚ã€‚</p></li></ul></li><li><p><strong>åŸºäºè‡ªå®šä¹‰æ³¨è§£ + åå°„ +ä»£ç†</strong></p><ul><li><p>ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£æ ‡è®°æ–¹æ³• + åå°„æ‹¦æˆªæ‰§è¡Œ + åŠ¨æ€ä»£ç†æ³¨å…¥å¢å¼ºé€»è¾‘ã€‚</p></li><li><p>æ¯”è¾ƒåŸå§‹ï¼Œä½†å¯ä»¥æ»¡è¶³ç®€å• AOP éœ€æ±‚ï¼Œå¸¸ç”¨äºå­¦ä¹ æˆ–ç‰¹å®šè½»é‡åœºæ™¯ã€‚</p></li></ul></li></ol><h3 id="15-ä»€ä¹ˆæ˜¯-Spring-MVC-ï¼Ÿç®€å•ä»‹ç»ä¸‹ä½ å¯¹-springMVC-çš„ç†è§£">15. ä»€ä¹ˆæ˜¯ Spring MVC ï¼Ÿç®€å•ä»‹ç»ä¸‹ä½ å¯¹ springMVC çš„ç†è§£</h3><p>Spring MVCï¼ˆModel-View-Controllerï¼‰æ˜¯ Spring æ¡†æ¶ä¸­çš„ä¸€ä¸ª<strong>åŸºäºè¯·æ±‚é©±åŠ¨çš„ Web æ¡†æ¶</strong>ï¼Œç”¨äºæ„å»º<strong>Web åº”ç”¨ç¨‹åº</strong>ã€‚å®ƒé‡‡ç”¨äº†ç»å…¸çš„ MVC è®¾è®¡æ¨¡å¼ï¼Œç›®çš„æ˜¯å°†è¡¨ç°å±‚ï¼ˆå‰ç«¯å±•ç¤ºï¼‰å’Œä¸šåŠ¡é€»è¾‘å±‚ï¼ˆåç«¯å¤„ç†ï¼‰è§£è€¦ï¼Œä½¿ Web åº”ç”¨æ›´æ¸…æ™°ã€æ›´æ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚</p><hr><p>æˆ‘çš„ç†è§£ï¼šSpring MVC æ˜¯ä¸€ä¸ªè½»é‡çº§ã€é«˜æ‰©å±•æ€§çš„ Web æ¡†æ¶ï¼Œèƒ½å¤Ÿå¿«é€Ÿå¼€å‘æ¸…æ™°ã€æ¨¡å—åŒ–çš„ Web åº”ç”¨ï¼Œå°¤å…¶é€‚åˆæ„å»º RESTful æ¥å£ã€‚</p><hr><ol><li><strong>Spring MVC çš„æ ¸å¿ƒæµç¨‹</strong></li></ol><p>ä¸€æ¬¡è¯·æ±‚åœ¨ Spring MVC ä¸­çš„å¤„ç†æµç¨‹å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">å®¢æˆ·ç«¯ --&gt; DispatcherServlet --&gt; HandlerMapping</span><br><span class="line">             â†“</span><br><span class="line">         Controllerï¼ˆå¤„ç†å™¨ï¼‰  </span><br><span class="line">             â†“</span><br><span class="line">         è¿”å› ModelAndView</span><br><span class="line">             â†“</span><br><span class="line">        ViewResolverï¼ˆè§†å›¾è§£æå™¨ï¼‰</span><br><span class="line">             â†“</span><br><span class="line">            æ¸²æŸ“é¡µé¢ / JSON</span><br><span class="line">             â†“</span><br><span class="line">           è¿”å›å®¢æˆ·ç«¯</span><br></pre></td></tr></table></figure><ol start="2"><li><strong>æ ¸å¿ƒç»„ä»¶è¯´æ˜</strong></li></ol><table><thead><tr><th>ç»„ä»¶</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><strong>DispatcherServlet</strong></td><td>å‰ç«¯æ§åˆ¶å™¨ï¼Œæ¥æ”¶è¯·æ±‚å¹¶ç»Ÿä¸€è°ƒåº¦å¤„ç†ã€‚</td></tr><tr><td><strong>HandlerMapping</strong></td><td>è´Ÿè´£æ ¹æ® URL æŸ¥æ‰¾å¯¹åº”çš„æ§åˆ¶å™¨ï¼ˆControllerï¼‰ã€‚</td></tr><tr><td><strong>Controller</strong></td><td>æ§åˆ¶å™¨ï¼Œå¤„ç†è¯·æ±‚å¹¶è¿”å›æ•°æ®æˆ–è§†å›¾åã€‚</td></tr><tr><td><strong>ModelAndView</strong></td><td>å°è£…æ¨¡å‹æ•°æ®å’Œè§†å›¾åã€‚</td></tr><tr><td><strong>ViewResolver</strong></td><td>å°†é€»è¾‘è§†å›¾åè§£æä¸ºå®é™…è§†å›¾ï¼ˆå¦‚ JSPã€Thymeleafã€JSON ç­‰ï¼‰ã€‚</td></tr><tr><td><strong>View</strong></td><td>è´Ÿè´£å±•ç¤ºé¡µé¢æˆ–æ•°æ®ç»™ç”¨æˆ·ã€‚</td></tr></tbody></table><ol start="3"><li><p><strong>Spring MVC çš„ç‰¹ç‚¹</strong></p><ul><li><p><strong>åŸºäºæ³¨è§£çš„å¼€å‘ç®€æ´é«˜æ•ˆ</strong>ï¼ˆå¦‚ <code>@Controller</code>, <code>@RequestMapping</code>, <code>@RestController</code>ï¼‰</p></li><li><p><strong>æ”¯æŒ RESTful é£æ ¼ URL è·¯ç”±</strong></p></li><li><p><strong>ä¸ Spring æ¡†æ¶æ— ç¼æ•´åˆ</strong>ï¼ˆå¦‚ä¾èµ–æ³¨å…¥ã€äº‹åŠ¡ç®¡ç†ï¼‰</p></li><li><p><strong>çµæ´»çš„è§†å›¾è§£æ</strong>ï¼ˆæ”¯æŒ JSPã€FreeMarkerã€Thymeleafã€JSON ç­‰ï¼‰</p></li><li><p><strong>æ‹¦æˆªå™¨æ”¯æŒ</strong>ï¼Œå¯ç”¨äºç™»å½•éªŒè¯ã€æƒé™æ§åˆ¶ç­‰æ¨ªåˆ‡é€»è¾‘</p></li><li><p><strong>è‰¯å¥½çš„æ‰©å±•æ€§ä¸æ’ä»¶æœºåˆ¶</strong></p></li></ul></li><li><p><strong>ä½¿ç”¨åœºæ™¯</strong></p><ul><li><p>æ„å»ºä¼ ç»Ÿ Web é¡µé¢ï¼ˆå¦‚åå°ç®¡ç†ç³»ç»Ÿï¼‰</p></li><li><p>æ„å»º REST API æ¥å£ï¼ˆç»“åˆ <code>@RestController</code> å’Œ JSON åºåˆ—åŒ–ï¼‰</p></li><li><p>ä¸å‰ç«¯åˆ†ç¦»å¼å¼€å‘ï¼ˆå¦‚å‰åç«¯åˆ†ç¦»æ¶æ„ï¼šVue + SpringBootï¼‰</p></li></ul></li></ol><h3 id="16-SpringMVC-ä¸»è¦æœ‰å‡ éƒ¨åˆ†ç»„æˆï¼Œç®€å•æè¿°-SpringMVC-çš„å·¥ä½œæµç¨‹ï¼Ÿ">16. SpringMVC ä¸»è¦æœ‰å‡ éƒ¨åˆ†ç»„æˆï¼Œç®€å•æè¿° SpringMVC çš„å·¥ä½œæµç¨‹ï¼Ÿ</h3><p><u>SpringMVC çš„ä¸»è¦ç»„æˆéƒ¨åˆ†</u>ï¼ˆ7 ä¸ªæ ¸å¿ƒç»„ä»¶ï¼‰ï¼š</p><table><thead><tr><th>ç»„ä»¶å</th><th>ç®€è¦è¯´æ˜</th></tr></thead><tbody><tr><td><strong>1. DispatcherServletï¼ˆå‰ç«¯æ§åˆ¶å™¨ï¼‰</strong></td><td>æ ¸å¿ƒè°ƒåº¦å™¨ï¼Œæ‰€æœ‰è¯·æ±‚å…ˆåˆ°å®ƒï¼Œç”±å®ƒç»Ÿä¸€åˆ†å‘ã€‚</td></tr><tr><td><strong>2. HandlerMappingï¼ˆå¤„ç†å™¨æ˜ å°„å™¨ï¼‰</strong></td><td>æ ¹æ®è¯·æ±‚ URL åŒ¹é…å¯¹åº”çš„æ§åˆ¶å™¨ï¼ˆHandlerï¼‰ã€‚</td></tr><tr><td><strong>3. Handlerï¼ˆå¤„ç†å™¨ï¼‰</strong></td><td>å³ <code>@Controller</code> ç±»ä¸­çš„æ–¹æ³•ï¼ŒçœŸæ­£å¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚</td></tr><tr><td><strong>4. HandlerAdapterï¼ˆå¤„ç†å™¨é€‚é…å™¨ï¼‰</strong></td><td>è°ƒç”¨å…·ä½“çš„ Handler æ–¹æ³•ï¼Œå¹¶å°è£…ç»“æœã€‚</td></tr><tr><td><strong>5. ModelAndViewï¼ˆæ¨¡å‹å’Œè§†å›¾ï¼‰</strong></td><td>Handler è¿”å›çš„å¯¹è±¡ï¼ŒåŒ…å«æ¨¡å‹æ•°æ®å’Œè§†å›¾åã€‚</td></tr><tr><td><strong>6. ViewResolverï¼ˆè§†å›¾è§£æå™¨ï¼‰</strong></td><td>å°†è§†å›¾åè§£æä¸ºå…·ä½“çš„è§†å›¾ï¼ˆå¦‚ JSP é¡µé¢æˆ– JSONï¼‰ã€‚</td></tr><tr><td><strong>7. Viewï¼ˆè§†å›¾ï¼‰</strong></td><td>è´Ÿè´£æ¸²æŸ“é¡µé¢æˆ–æ•°æ®ï¼Œæœ€ç»ˆè¿”å›ç»™ç”¨æˆ·ã€‚</td></tr></tbody></table><p><u>Spring MVCçš„å·¥ä½œæµç¨‹å¦‚ä¸‹</u>ï¼š</p><ol><li><strong>ç”¨æˆ·å‘èµ·è¯·æ±‚</strong>ï¼š<br>æµè§ˆå™¨æˆ–å®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼ˆå¦‚ <code>/user/list</code>ï¼‰åˆ°æœåŠ¡å™¨ã€‚</li><li><strong>DispatcherServlet æ¥æ”¶è¯·æ±‚</strong>ï¼š<br>æ‰€æœ‰è¯·æ±‚é¦–å…ˆè¢« <code>DispatcherServlet</code> æ‹¦æˆªï¼Œè¿™æ˜¯ SpringMVC çš„å…¥å£ã€‚</li><li><strong>æŸ¥æ‰¾ HandlerMapping</strong>ï¼š<br><code>DispatcherServlet</code> æ ¹æ®è¯·æ±‚ URLï¼Œå‘ <code>HandlerMapping</code> æŸ¥æ‰¾åŒ¹é…çš„ <code>Controller</code> æ–¹æ³•ã€‚</li><li><strong>æ‰¾åˆ° Handler å¹¶è°ƒç”¨é€‚é…å™¨</strong>ï¼š<br>æ‰¾åˆ°ç›®æ ‡æ–¹æ³•åï¼Œé€šè¿‡ <code>HandlerAdapter</code> è°ƒç”¨å¯¹åº”çš„ <code>@Controller</code> æ–¹æ³•ã€‚</li><li><strong>æ‰§è¡Œ Controller æ–¹æ³•</strong>ï¼š<br>æ§åˆ¶å™¨æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œè¿”å›ä¸€ä¸ª <code>ModelAndView</code> å¯¹è±¡ï¼ˆåŒ…å«æ•°æ®å’Œè§†å›¾åï¼‰ã€‚</li><li><strong>è§†å›¾è§£æå™¨å¤„ç†è§†å›¾å</strong>ï¼š<br><code>DispatcherServlet</code> è°ƒç”¨ <code>ViewResolver</code> æŠŠé€»è¾‘è§†å›¾åï¼ˆå¦‚ <code>&quot;userList&quot;</code>ï¼‰è§£æä¸ºå…·ä½“è§†å›¾ï¼ˆå¦‚ <code>/WEB-INF/views/userList.jsp</code> æˆ– JSONï¼‰ã€‚</li><li><strong>è§†å›¾æ¸²æŸ“å¹¶å“åº”å®¢æˆ·ç«¯</strong>ï¼š<br>ç”±è§†å›¾å¯¹è±¡ï¼ˆå¦‚ JSP å¼•æ“æˆ– JSON åºåˆ—åŒ–ï¼‰å®Œæˆæœ€ç»ˆé¡µé¢æˆ–æ•°æ®æ¸²æŸ“ï¼Œå“åº”è¿”å›ç»™ç”¨æˆ·ã€‚</li></ol><h3 id="17-åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å…±å­¦ä¹ äº†å“ªäº›æ³¨è§£ï¼Ÿè¯·æ€»ç»“åˆ—ä¸¾ï¼Œè¶Šå¤šè¶Šå¥½">17. åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å…±å­¦ä¹ äº†å“ªäº›æ³¨è§£ï¼Ÿè¯·æ€»ç»“åˆ—ä¸¾ï¼Œè¶Šå¤šè¶Šå¥½</h3><h4 id="ä¸€ã€Spring-æ ¸å¿ƒæ³¨è§£">ä¸€ã€Spring æ ¸å¿ƒæ³¨è§£</h4><table><thead><tr><th>æ³¨è§£</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>@Component</code></td><td>æ ‡æ³¨ä¸ºç»„ä»¶ç±»ï¼Œç”± Spring å®¹å™¨ç®¡ç†</td></tr><tr><td><code>@Controller</code></td><td>æ ‡æ³¨ä¸ºæ§åˆ¶å™¨ç±»ï¼Œå¤„ç† Web è¯·æ±‚</td></tr><tr><td><code>@Service</code></td><td>æ ‡æ³¨ä¸ºæœåŠ¡å±‚ç»„ä»¶</td></tr><tr><td><code>@Repository</code></td><td>æ ‡æ³¨ä¸ºæŒä¹…å±‚ç»„ä»¶ï¼Œè‡ªåŠ¨å¤„ç†å¼‚å¸¸è½¬æ¢</td></tr><tr><td><code>@Autowired</code></td><td>è‡ªåŠ¨æ³¨å…¥ä¾èµ–ï¼ˆæŒ‰ç±»å‹æ³¨å…¥ï¼‰</td></tr><tr><td><code>@Qualifier</code></td><td>ä¸ <code>@Autowired</code> é…åˆï¼ŒæŒ‰åç§°æ³¨å…¥</td></tr><tr><td><code>@Value</code></td><td>æ³¨å…¥é…ç½®æ–‡ä»¶ä¸­çš„å€¼</td></tr><tr><td><code>@Bean</code></td><td>å®šä¹‰ä¸€ä¸ª Bean å®ä¾‹ï¼Œå¸¸ç”¨äº Java é…ç½®ç±»ä¸­</td></tr><tr><td><code>@Configuration</code></td><td>è¡¨ç¤ºå½“å‰ç±»æ˜¯é…ç½®ç±»ï¼ˆæ›¿ä»£ XML é…ç½®ï¼‰</td></tr><tr><td><code>@Import</code></td><td>å¼•å…¥å…¶ä»–é…ç½®ç±»</td></tr><tr><td><code>@ComponentScan</code></td><td>æŒ‡å®šè¦æ‰«æçš„åŒ…è·¯å¾„</td></tr><tr><td><code>@Lazy</code></td><td>å»¶è¿Ÿåˆå§‹åŒ– Bean</td></tr><tr><td><code>@Primary</code></td><td>å½“æœ‰å¤šä¸ªå€™é€‰ Bean æ—¶ä¼˜å…ˆä½¿ç”¨</td></tr></tbody></table><h4 id="äºŒã€Spring-Boot-æ³¨è§£">äºŒã€Spring Boot æ³¨è§£</h4><table><thead><tr><th>æ³¨è§£</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>@SpringBootApplication</code></td><td>åŒ…å« <code>@Configuration</code>ã€<code>@ComponentScan</code>ã€<code>@EnableAutoConfiguration</code></td></tr><tr><td><code>@EnableAutoConfiguration</code></td><td>å¯ç”¨ Spring Boot è‡ªåŠ¨é…ç½®</td></tr><tr><td><code>@ConfigurationProperties</code></td><td>å°†é…ç½®æ–‡ä»¶ç»‘å®šä¸ºå¯¹è±¡</td></tr><tr><td><code>@RestController</code></td><td>ç›¸å½“äº <code>@Controller + @ResponseBody</code>ï¼Œç”¨äº REST æ¥å£</td></tr><tr><td><code>@RequestMapping</code></td><td>æ˜ å°„è¯·æ±‚è·¯å¾„</td></tr><tr><td><code>@GetMapping / @PostMapping / @PutMapping / @DeleteMapping</code></td><td>æ˜ å°„ HTTP è¯·æ±‚æ–¹å¼</td></tr><tr><td><code>@PathVariable</code></td><td>è·å– URL ä¸­çš„è·¯å¾„å‚æ•°</td></tr><tr><td><code>@RequestParam</code></td><td>è·å–è¯·æ±‚å‚æ•°ï¼ˆå¦‚ ?id=1ï¼‰</td></tr><tr><td><code>@RequestBody</code></td><td>æ¥æ”¶ JSON æ•°æ®å¹¶è½¬æ¢ä¸º Java å¯¹è±¡</td></tr><tr><td><code>@ResponseBody</code></td><td>å°†æ–¹æ³•è¿”å›å€¼ç›´æ¥ä½œä¸ºå“åº”ä½“</td></tr><tr><td><code>@CrossOrigin</code></td><td>è§£å†³è·¨åŸŸè¯·æ±‚é—®é¢˜</td></tr></tbody></table><h4 id="ä¸‰ã€Spring-AOP-äº‹åŠ¡ç›¸å…³æ³¨è§£">ä¸‰ã€Spring AOP / äº‹åŠ¡ç›¸å…³æ³¨è§£</h4><table><thead><tr><th>æ³¨è§£</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>@Transactional</code></td><td>å£°æ˜äº‹åŠ¡ï¼ˆå¯é…ç½®ä¼ æ’­è¡Œä¸ºã€éš”ç¦»çº§åˆ«ç­‰ï¼‰</td></tr><tr><td><code>@EnableTransactionManagement</code></td><td>å¯ç”¨åŸºäºæ³¨è§£çš„äº‹åŠ¡ç®¡ç†</td></tr><tr><td><code>@Aspect</code></td><td>å£°æ˜ä¸€ä¸ªåˆ‡é¢ç±»</td></tr><tr><td><code>@Before / @After / @Around / @AfterReturning / @AfterThrowing</code></td><td>AOP é€šçŸ¥ç±»å‹</td></tr><tr><td><code>@Pointcut</code></td><td>å®šä¹‰åˆ‡ç‚¹è¡¨è¾¾å¼</td></tr></tbody></table><h4 id="å››ã€Spring-Security-å¸¸ç”¨æ³¨è§£">å››ã€Spring Security å¸¸ç”¨æ³¨è§£</h4><table><thead><tr><th>æ³¨è§£</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>@EnableWebSecurity</code></td><td>å¯ç”¨ Spring Security å®‰å…¨é…ç½®</td></tr><tr><td><code>@PreAuthorize</code></td><td>æ–¹æ³•è°ƒç”¨å‰è¿›è¡Œæƒé™æ ¡éªŒï¼ˆåŸºäºè¡¨è¾¾å¼ï¼‰</td></tr><tr><td><code>@Secured</code></td><td>åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶</td></tr><tr><td><code>@RolesAllowed</code></td><td>åŸºäºè§’è‰²æ§åˆ¶è®¿é—®æƒé™ï¼ˆJDK æ ‡å‡†ï¼‰</td></tr><tr><td><code>@AuthenticationPrincipal</code></td><td>è·å–å½“å‰ç™»å½•ç”¨æˆ·å¯¹è±¡</td></tr></tbody></table><h4 id="äº”ã€JPA-Hibernate-æ³¨è§£ï¼ˆORM-æ˜ å°„ï¼‰">äº”ã€JPA / Hibernate æ³¨è§£ï¼ˆORM æ˜ å°„ï¼‰</h4><table><thead><tr><th>æ³¨è§£</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>@Entity</code></td><td>å®ä½“ç±»æ˜ å°„æ•°æ®åº“è¡¨</td></tr><tr><td><code>@Table(name=&quot;...&quot;)</code></td><td>æ˜ å°„æ•°æ®åº“è¡¨å</td></tr><tr><td><code>@Id</code></td><td>ä¸»é”®å­—æ®µ</td></tr><tr><td><code>@GeneratedValue</code></td><td>ä¸»é”®ç”Ÿæˆç­–ç•¥</td></tr><tr><td><code>@Column(name=&quot;...&quot;)</code></td><td>æ˜ å°„æ•°æ®åº“åˆ—</td></tr><tr><td><code>@OneToMany</code> / <code>@ManyToOne</code> / <code>@OneToOne</code> / <code>@ManyToMany</code></td><td>å…³ç³»æ˜ å°„æ³¨è§£</td></tr><tr><td><code>@JoinColumn</code></td><td>å¤–é”®å…³è”å­—æ®µ</td></tr><tr><td><code>@Transient</code></td><td>ä¸æ˜ å°„åˆ°æ•°æ®åº“å­—æ®µ</td></tr><tr><td><code>@Enumerated</code></td><td>æšä¸¾æ˜ å°„</td></tr></tbody></table><h4 id="å…­ã€MyBatis-æ³¨è§£">å…­ã€MyBatis æ³¨è§£</h4><table><thead><tr><th>æ³¨è§£</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>@Mapper</code></td><td>æ ‡è®° Mapper æ¥å£ï¼Œè®© Spring å®¹å™¨è¯†åˆ«</td></tr><tr><td><code>@Select / @Insert / @Update / @Delete</code></td><td>ç¼–å†™ SQL è¯­å¥</td></tr><tr><td><code>@Results</code> / <code>@Result</code></td><td>ç»“æœæ˜ å°„å…³ç³»</td></tr><tr><td><code>@Param</code></td><td>ä¸ºæ–¹æ³•å‚æ•°æŒ‡å®šåç§°ï¼Œç”¨äº SQL ä¸­å¼•ç”¨</td></tr></tbody></table><h4 id="ä¸ƒã€éªŒè¯æ³¨è§£ï¼ˆJSR-303-Hibernate-Validatorï¼‰">ä¸ƒã€éªŒè¯æ³¨è§£ï¼ˆJSR 303 / Hibernate Validatorï¼‰</h4><table><thead><tr><th>æ³¨è§£</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>@NotNull</code></td><td>å€¼ä¸èƒ½ä¸º null</td></tr><tr><td><code>@NotBlank</code></td><td>å­—ç¬¦ä¸²ä¸èƒ½ä¸ºç©ºï¼ˆä¸ä¸ºç©ºä¸”å»ç©ºæ ¼åé•¿åº¦ &gt; 0ï¼‰</td></tr><tr><td><code>@Size(min=, max=)</code></td><td>å­—ç¬¦ä¸²æˆ–é›†åˆé•¿åº¦é™åˆ¶</td></tr><tr><td><code>@Email</code></td><td>é‚®ç®±æ ¼å¼éªŒè¯</td></tr><tr><td><code>@Pattern</code></td><td>æ­£åˆ™è¡¨è¾¾å¼éªŒè¯</td></tr><tr><td><code>@Min</code> / <code>@Max</code></td><td>æœ€å°/æœ€å¤§å€¼é™åˆ¶</td></tr><tr><td><code>@Valid</code> / <code>@Validated</code></td><td>è§¦å‘å¯¹è±¡çº§åˆ«çš„æ ¡éªŒ</td></tr></tbody></table><h4 id="å…«ã€å…¶ä»–å¸¸ç”¨æ³¨è§£">å…«ã€å…¶ä»–å¸¸ç”¨æ³¨è§£</h4><table><thead><tr><th>æ³¨è§£</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>@Slf4j</code>ï¼ˆLombokï¼‰</td><td>è‡ªåŠ¨ç”Ÿæˆ <code>log</code> å¯¹è±¡</td></tr><tr><td><code>@Data</code>ï¼ˆLombokï¼‰</td><td>è‡ªåŠ¨ç”Ÿæˆ getter/setterã€equalsã€toString</td></tr><tr><td><code>@Builder</code>ï¼ˆLombokï¼‰</td><td>æ”¯æŒé“¾å¼æ„å»ºå¯¹è±¡</td></tr><tr><td><code>@PostConstruct</code></td><td>Bean åˆå§‹åŒ–åæ‰§è¡Œæ–¹æ³•</td></tr><tr><td><code>@PreDestroy</code></td><td>Bean é”€æ¯å‰æ‰§è¡Œæ–¹æ³•</td></tr><tr><td><code>@Scheduled</code></td><td>å®šæ—¶ä»»åŠ¡æ‰§è¡Œæ–¹æ³•</td></tr><tr><td><code>@Async</code></td><td>å¼‚æ­¥æ‰§è¡Œæ–¹æ³•</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Javaä¼ä¸šçº§å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
            <tag> åç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•å¯¼è®ºç¬”è®°æ•´ç†å›é¡¾</title>
      <link href="/2025/07/10/%E7%AE%97%E6%B3%95%E5%AF%BC%E8%AE%BA%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86%E5%9B%9E%E9%A1%BE/"/>
      <url>/2025/07/10/%E7%AE%97%E6%B3%95%E5%AF%BC%E8%AE%BA%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86%E5%9B%9E%E9%A1%BE/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è¿™æ˜¯ç¬”è€…å¤§äºŒä¸Šå­¦çš„è¯¾äº†ï¼Œç°åœ¨æŠŠä¹‹å‰çš„ç¬”è®°æ•´ç†å¤ä¹ ä¸€éã€‚</p><p>éƒ¨åˆ†å†…å®¹ç”±AIç”Ÿæˆã€‚ã€‚ã€‚</p></blockquote><h1 id="ç¬¬2ç« -ç®—æ³•åŸºç¡€">ç¬¬2ç«  ç®—æ³•åŸºç¡€</h1><h2 id="2-1-æ’å…¥æ’åº">2.1 æ’å…¥æ’åº</h2><p>c++ä»£ç ï¼š</p><figure class="highlight pascal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">INSERTION-SORT(A)</span><br><span class="line"><span class="keyword">for</span> j = <span class="number">2</span> <span class="keyword">to</span> A.length</span><br><span class="line">key = A[j]</span><br><span class="line">i = j - <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> i &gt; <span class="number">0</span> <span class="keyword">and</span> A[i] &gt; key</span><br><span class="line">A[i+<span class="number">1</span>] =A[i];</span><br><span class="line">i = i - <span class="number">1</span>;</span><br><span class="line">A[i + <span class="number">1</span>] = key</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**æ’å…¥æ’åº</span></span><br><span class="line"><span class="comment">@para array and array&#x27;s length</span></span><br><span class="line"><span class="comment">ä¸‹æ ‡ä»0å¼€å§‹</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">insertion_sort</span><span class="params">(<span class="type">int</span>&amp; A, <span class="type">int</span> n)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt; n; j++)&#123;</span><br><span class="line"><span class="type">int</span> key = A[j];</span><br><span class="line">i = j - <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(i &gt;= <span class="number">0</span> &amp;&amp; A[i] &gt; key)&#123;</span><br><span class="line">A[i + <span class="number">1</span>] = A[i];</span><br><span class="line">i = i - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"> A[i + <span class="number">1</span>] = key;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-2-åˆ†æç®—æ³•">2.2 åˆ†æç®—æ³•</h2><h2 id="2-3-è®¾è®¡ç®—æ³•">2.3 è®¾è®¡ç®—æ³•</h2><h3 id="åˆ†æ²»æ³•ï¼š">åˆ†æ²»æ³•ï¼š</h3><ol><li>**åˆ†è§£ï¼š**åŸé—®é¢˜ä¸ºè‹¥å¹²å­é—®é¢˜ï¼Œè¿™äº›å­é—®é¢˜æ˜¯åŸé—®é¢˜çš„è§„æ¨¡è¾ƒå°çš„å®ä¾‹</li><li>**è§£å†³ï¼š**è§£å†³è¿™äº›å­é—®é¢˜ï¼Œé€’å½’åœ°æ±‚è§£å„å­é—®é¢˜</li><li>**åˆå¹¶ï¼š**åˆå¹¶è¿™äº›å­é—®é¢˜çš„è§£æˆåŸé—®é¢˜çš„è§£</li></ol><h3 id="å½’å¹¶æ’åºï¼š">å½’å¹¶æ’åºï¼š</h3><p>å½’å¹¶æ’åºæ˜¯ä¸€ç§é‡‡ç”¨åˆ†æ²»æ³•æ€æƒ³çš„æ’åºç®—æ³•ã€‚å®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯å°†å¾…æ’åºçš„åºåˆ—ä¸æ–­åˆ’åˆ†ä¸ºæ›´å°çš„å­åºåˆ—ï¼Œç›´åˆ°æ¯ä¸ªå­åºåˆ—åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åå†å°†è¿™äº›å­åºåˆ—ä¸¤ä¸¤åˆå¹¶ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªæœ‰åºçš„åºåˆ—ã€‚</p><p>ä¸‹é¢æ˜¯å½’å¹¶æ’åºçš„C++ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">merge</span><span class="params">(<span class="type">int</span>* arr, <span class="type">int</span> p, <span class="type">int</span> q, <span class="type">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n1 = q - p + <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> n2 = r - q;</span><br><span class="line"><span class="comment">//åˆ†å‰²æˆA[p,q],A[q+1,r]</span></span><br><span class="line">    <span class="type">int</span>* L = <span class="keyword">new</span> <span class="type">int</span>[n1];</span><br><span class="line">    <span class="type">int</span>* R = <span class="keyword">new</span> <span class="type">int</span>[n2];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n1; i++)</span><br><span class="line">        L[i] = arr[p + i];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n2; j++)</span><br><span class="line">        R[j] = arr[q + <span class="number">1</span> + j];</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> k = p;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (i &lt; n1 &amp;&amp; j &lt; n2) &#123;</span><br><span class="line">        <span class="keyword">if</span> (L[i] &lt;= R[j]) &#123;</span><br><span class="line">            arr[k] = L[i];</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            arr[k] = R[j];</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">        k++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (i &lt; n1) &#123;</span><br><span class="line">        arr[k] = L[i];</span><br><span class="line">        i++;</span><br><span class="line">        k++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (j &lt; n2) &#123;</span><br><span class="line">        arr[k] = R[j];</span><br><span class="line">        j++;</span><br><span class="line">        k++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">delete</span>[] L;</span><br><span class="line">    <span class="keyword">delete</span>[] R;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mergeSort</span><span class="params">(<span class="type">int</span>* arr, <span class="type">int</span> p, <span class="type">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (p &lt; r) &#123;</span><br><span class="line">        <span class="type">int</span> q = (p + r) / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">mergeSort</span>(arr, p, q);</span><br><span class="line">        <span class="built_in">mergeSort</span>(arr, q + <span class="number">1</span>, r);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">merge</span>(arr, p, q, r);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨å½’å¹¶æ’åºç®—æ³•å¯ä»¥å¯¹æ•°ç»„è¿›è¡Œæ’åºã€‚</p><h3 id="é€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åˆ†æ">é€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åˆ†æ</h3><p>å¯¹äºé€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åˆ†æï¼Œå¯ä»¥ä½¿ç”¨é€’å½’æ ‘æ¥è¿›è¡Œæ¨å¯¼ã€‚é€’å½’æ ‘çš„æ¯ä¸€å±‚è¡¨ç¤ºé€’å½’ç®—æ³•çš„ä¸€æ¬¡è°ƒç”¨ï¼Œè€Œæ¯ä¸€å±‚ä¸­çš„èŠ‚ç‚¹è¡¨ç¤ºè¯¥å±‚ä¸­æ‰§è¡Œçš„åŸºæœ¬æ“ä½œæ¬¡æ•°ã€‚</p><p>ä»¥å½’å¹¶æ’åºç®—æ³•ä¸ºä¾‹ï¼Œè®¾åŸå§‹åºåˆ—çš„é•¿åº¦ä¸ºnã€‚åœ¨æ¯æ¬¡é€’å½’è°ƒç”¨ä¸­ï¼Œå°†åºåˆ—åˆ’åˆ†ä¸ºä¸¤ä¸ªå­åºåˆ—ï¼Œç›´åˆ°æ¯ä¸ªå­åºåˆ—åªæœ‰ä¸€ä¸ªå…ƒç´ ä¸ºæ­¢ã€‚å› æ­¤ï¼Œé€’å½’æ ‘çš„é«˜åº¦ä¸ºlog(n)ã€‚</p><p>åœ¨æ¯ä¸€å±‚çš„åˆå¹¶æ“ä½œä¸­ï¼Œéœ€è¦å°†ä¸¤ä¸ªå­åºåˆ—åˆå¹¶ä¸ºä¸€ä¸ªæœ‰åºçš„åºåˆ—ã€‚åˆå¹¶æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œå…¶ä¸­nè¡¨ç¤ºå½“å‰å±‚çš„åºåˆ—é•¿åº¦ã€‚</p><p>å› æ­¤ï¼Œé€’å½’ç®—æ³•çš„æ€»æ—¶é—´å¤æ‚åº¦å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">T(n) = 2T(n/2) + O(n)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ ¹æ®ä¸»å®šç†ï¼Œå¯ä»¥å¾—åˆ°å½’å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(nlog(n))ã€‚</p><p>æ€»ç»“ï¼šé€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åˆ†æéœ€è¦è€ƒè™‘é€’å½’æ ‘çš„é«˜åº¦å’Œæ¯å±‚çš„æ“ä½œæ¬¡æ•°ï¼Œé€šè¿‡é€’å½’å…³ç³»å¼å’Œä¸»å®šç†æ¥è®¡ç®—æ€»çš„æ—¶é—´å¤æ‚åº¦ã€‚</p><h1 id="ç¬¬3ç« -å‡½æ•°çš„å¢é•¿">ç¬¬3ç«  å‡½æ•°çš„å¢é•¿</h1><h2 id="3-1-æ¸è¿›è®°å·">3.1 æ¸è¿›è®°å·</h2><h3 id="ç®—æ³•çš„æ¸è¿›è®°å·åŠå«ä¹‰">ç®—æ³•çš„æ¸è¿›è®°å·åŠå«ä¹‰</h3><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¸è¿›è®°å·æ¥æè¿°ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ã€‚ä»¥ä¸‹æ˜¯å¸¸è§çš„æ¸è¿›è®°å·åŠå…¶å«ä¹‰ï¼š</p><ul><li>å¤§Oè®°å·ï¼ˆOï¼‰ï¼šè¡¨ç¤ºç®—æ³•çš„ä¸Šç•Œï¼Œå³ç®—æ³•çš„æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦ã€‚ä¾‹å¦‚ï¼ŒO(n)è¡¨ç¤ºçº¿æ€§æ—¶é—´å¤æ‚åº¦ï¼ŒO(n^2)è¡¨ç¤ºå¹³æ–¹æ—¶é—´å¤æ‚åº¦ã€‚</li><li>Î©è®°å·ï¼ˆÎ©ï¼‰ï¼šè¡¨ç¤ºç®—æ³•çš„ä¸‹ç•Œï¼Œå³ç®—æ³•çš„æœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦ã€‚ä¾‹å¦‚ï¼ŒÎ©(n)è¡¨ç¤ºçº¿æ€§æ—¶é—´å¤æ‚åº¦ï¼ŒÎ©(1)è¡¨ç¤ºå¸¸æ•°æ—¶é—´å¤æ‚åº¦ã€‚</li><li>Î˜è®°å·ï¼ˆÎ˜ï¼‰ï¼šè¡¨ç¤ºç®—æ³•çš„ç´§å¯†ç•Œé™ï¼Œå³ç®—æ³•çš„å¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦ã€‚ä¾‹å¦‚ï¼ŒÎ˜(n)è¡¨ç¤ºçº¿æ€§æ—¶é—´å¤æ‚åº¦ï¼ŒÎ˜(1)è¡¨ç¤ºå¸¸æ•°æ—¶é—´å¤æ‚åº¦ã€‚</li><li>å°oè®°å·ï¼ˆoï¼‰ï¼šè¡¨ç¤ºç®—æ³•çš„éç´§å¯†ç•Œé™ï¼Œå³ç®—æ³•çš„æœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦æ²¡æœ‰ä¸Šç•Œã€‚ä¾‹å¦‚ï¼Œo(n)è¡¨ç¤ºæ¯”çº¿æ€§æ—¶é—´å¤æ‚åº¦æ›´å¥½çš„å¤æ‚åº¦ã€‚</li><li>å°Ï‰è®°å·ï¼ˆÏ‰ï¼‰ï¼šè¡¨ç¤ºç®—æ³•çš„éç´§å¯†ç•Œé™ï¼Œå³ç®—æ³•çš„æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦æ²¡æœ‰ä¸‹ç•Œã€‚ä¾‹å¦‚ï¼ŒÏ‰(n)è¡¨ç¤ºæ¯”çº¿æ€§æ—¶é—´å¤æ‚åº¦æ›´å·®çš„å¤æ‚åº¦ã€‚</li></ul><p>è¿™äº›æ¸è¿›è®°å·å¸®åŠ©æˆ‘ä»¬æ¯”è¾ƒå’Œåˆ†æä¸åŒç®—æ³•çš„æ€§èƒ½ï¼Œä»¥ä¾¿é€‰æ‹©æœ€é€‚åˆç‰¹å®šé—®é¢˜çš„ç®—æ³•ã€‚</p><h1 id="ç¬¬4ç« -åˆ†æ²»ç­–ç•¥">ç¬¬4ç«  åˆ†æ²»ç­–ç•¥</h1><p>åœ¨ç®—æ³•ä¸­ï¼Œæ±‚è§£é€’å½’å¼ï¼ˆrecurrence relationï¼‰çš„æ–¹æ³•æœ‰å‡ ç§å¸¸è§çš„æŠ€å·§ã€‚è¿™äº›æ–¹æ³•å¯¹äºåˆ†æç®—æ³•çš„æ—¶é—´å¤æ‚åº¦éå¸¸æœ‰å¸®åŠ©ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„æ±‚è§£é€’å½’å¼çš„æ–¹æ³•ï¼š</p><ol><li><strong>ä»£å…¥æ³•ï¼ˆSubstitution Methodï¼‰ï¼š</strong> è¿™æ˜¯ä¸€ç§ç›´è§‚çš„æ–¹æ³•ï¼Œå…¶ä¸­ä½ çŒœæµ‹è§£çš„å½¢å¼ï¼Œç„¶åç”¨æ•°å­¦å½’çº³æ³•è¯æ˜ä½ çš„çŒœæµ‹æ˜¯æ­£ç¡®çš„ã€‚</li><li><strong>é€’å½’æ ‘æ³•ï¼ˆRecurrence Tree Methodï¼‰ï¼š</strong> å°†é€’å½’å¼è¡¨ç¤ºä¸ºä¸€æ£µæ ‘ï¼Œç„¶ååˆ†æè¿™æ£µæ ‘çš„æ·±åº¦å’Œæ¯ä¸ªå±‚æ¬¡çš„ä»£ä»·ã€‚è¿™å¯¹äºç†è§£é€’å½’è°ƒç”¨çš„æ¬¡æ•°ä»¥åŠæ¯æ¬¡è°ƒç”¨çš„ä»£ä»·å¾ˆæœ‰å¸®åŠ©ã€‚</li><li><strong>ä¸»æ–¹æ³•ï¼ˆMaster Theoremï¼‰ï¼š</strong> ä¸»æ–¹æ³•æ˜¯ä¸€ç§ç‰¹å®šå½¢å¼é€’å½’å¼çš„é€šç”¨è§£æ³•ï¼Œé€‚ç”¨äºå…·æœ‰ç‰¹å®šå½¢å¼çš„åˆ†æ²»ç®—æ³•ã€‚ä¸»æ–¹æ³•æœ‰ä¸‰ç§æƒ…å†µï¼Œæ¯ç§æƒ…å†µå¯¹åº”äºä¸åŒç±»å‹çš„é€’å½’å¼ã€‚</li></ol><p>è¿™äº›æ–¹æ³•é€šå¸¸åœ¨åˆ†æé€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ—¶ä½¿ç”¨ã€‚é€‰æ‹©å“ªç§æ–¹æ³•å–å†³äºé€’å½’å¼çš„å½¢å¼ä»¥åŠä½ å¸Œæœ›åˆ†æçš„ç²’åº¦ã€‚åœ¨å­¦ä¹ ç®—æ³•å’Œæ•°æ®ç»“æ„æ—¶ï¼Œè¿™äº›æ–¹æ³•é€šå¸¸ä¼šåœ¨è¯¾ç¨‹ä¸­è¿›è¡Œè¯¦ç»†è®²è§£ã€‚</p><p>ä¸»æ–¹æ³•ï¼ˆMaster Theoremï¼‰æ˜¯ä¸€ç§ç”¨äºåˆ†æé€’å½’ç®—æ³•æ—¶é—´å¤æ‚åº¦çš„æŠ€æœ¯ï¼Œç‰¹åˆ«é€‚ç”¨äºåˆ†æ²»ç®—æ³•ã€‚ä¸»æ–¹æ³•æä¾›äº†ä¸€ç§ç®€åŒ–çš„æ–¹å¼æ¥ç¡®å®šé€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ï¼Œå°¤å…¶æ˜¯å¯¹äºå…·æœ‰ç‰¹å®šå½¢å¼çš„é€’å½’å¼ã€‚ä¸»æ–¹æ³•é€šå¸¸ç”¨äºè§£å†³ä»¥ä¸‹å½¢å¼çš„é€’å½’å…³ç³»ï¼š</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>a</mi><mo>â‹…</mo><mi>T</mi><mrow><mo fence="true">(</mo><mfrac><mi>n</mi><mi>b</mi></mfrac><mo fence="true">)</mo></mrow><mo>+</mo><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n) = a \cdot T\left(\frac{n}{b}\right) + f(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.2em;vertical-align:-0.35em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">)</span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></p><p>å…¶ä¸­ï¼š</p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> æ˜¯é€’å½’å‡½æ•°çš„æ—¶é—´å¤æ‚åº¦ã€‚</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span> æ˜¯é€’å½’è°ƒç”¨çš„æ¬¡æ•°ã€‚</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span> æ˜¯é—®é¢˜è§„æ¨¡ç¼©å°çš„æ¯”ä¾‹ã€‚</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> æ˜¯é€’å½’ä¹‹å¤–çš„å…¶ä»–æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ã€‚</li></ul><p>ä¸»æ–¹æ³•çš„ä¸€èˆ¬å½¢å¼ä¸ºï¼š</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">Î˜</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo separator="true">,</mo><mi>n</mi><mo>=</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>a</mi><mo>â‹…</mo><mi>T</mi><mrow><mo fence="true">(</mo><mfrac><mi>n</mi><mi>b</mi></mfrac><mo fence="true">)</mo></mrow><mo>+</mo><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo separator="true">,</mo><mi>n</mi><mo>=</mo><msup><mi>b</mi><mi>i</mi></msup></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">T(n) = \begin{cases} \Theta (1) &amp; ,n=1\\a \cdot T\left(\frac{n}{b}\right) + f(n)&amp;,n=b^i\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">Î˜</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">)</span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8247em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p><p>å…¶ä¸­ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>â‰¥</mo><mn>1</mn><mo separator="true">,</mo><mi>b</mi><mo>&gt;</mo><mn>1</mn><mo separator="true">,</mo><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">a \geq 1, b &gt; 1 , f(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> æ˜¯æ¸è¿›æ­£å‡½æ•°ã€‚</p><p>ä¸»æ–¹æ³•å®šç†æä¾›äº†å¯¹è¿™ç±»é€’å½’å¼çš„é€šç”¨è§£å†³æ–¹æ¡ˆï¼Œå…¶ä¸­åŒ…å«äº†ä¸‰ç§æƒ…å†µã€‚è¿™äº›æƒ…å†µæ¶µç›–äº†è®¸å¤šå¸¸è§çš„é€’å½’ç®—æ³•ã€‚å…·ä½“çš„æƒ…å†µå–å†³äº aï¼Œbï¼Œå’Œ f(n) çš„å…³ç³»ã€‚</p><p>ä¸»æ–¹æ³•çš„ä¸‰ç§æƒ…å†µå¦‚ä¸‹ï¼š</p><ol><li><p><strong>æƒ…å†µä¸€ï¼š</strong> å¦‚æœ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mrow><msub><mrow><mi>log</mi><mo>â¡</mo></mrow><mi>b</mi></msub><mrow><mi>a</mi><mo>âˆ’</mo><mi>Ïµ</mi></mrow></mrow></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^{\log_b{a - \epsilon}})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0991em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2302em;"><span style="top:-2.2341em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2659em;"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.1952em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mbin mtight">âˆ’</span><span class="mord mathnormal mtight">Ïµ</span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼ˆå…¶ä¸­ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïµ</mi><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\epsilon &gt; 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">Ïµ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>ï¼‰ï¼Œé‚£ä¹ˆ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î˜</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mrow><msub><mrow><mi>log</mi><mo>â¡</mo></mrow><mi>b</mi></msub><mi>a</mi></mrow></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Î˜(n^{\log_b{a}})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0991em;vertical-align:-0.25em;"></span><span class="mord">Î˜</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2302em;"><span style="top:-2.2341em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2659em;"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.1952em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">a</span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ã€‚</p></li><li><p><strong>æƒ…å†µäºŒï¼š</strong> å¦‚æœ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î˜</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mrow><msub><mrow><mi>log</mi><mo>â¡</mo></mrow><mi>b</mi></msub><mi>a</mi></mrow></msup><mo>â‹…</mo><msup><mrow><mi>log</mi><mo>â¡</mo></mrow><mi>k</mi></msup><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Î˜(n^{\log_b{a}} \cdot \log^k n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0991em;vertical-align:-0.25em;"></span><span class="mord">Î˜</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2302em;"><span style="top:-2.2341em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2659em;"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.1952em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">a</span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1834em;vertical-align:-0.25em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9334em;"><span style="top:-3.1473em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ï¼ˆå…¶ä¸­ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>â‰¥</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">k \geq 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8304em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>ï¼‰ï¼Œé‚£ä¹ˆ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î˜</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mrow><msub><mrow><mi>log</mi><mo>â¡</mo></mrow><mi>b</mi></msub><mi>a</mi></mrow></msup><mo>â‹…</mo><msup><mrow><mi>log</mi><mo>â¡</mo></mrow><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msup><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Î˜(n^{\log_b{a}} \cdot \log^{k+1} n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0991em;vertical-align:-0.25em;"></span><span class="mord">Î˜</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2302em;"><span style="top:-2.2341em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2659em;"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.1952em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">a</span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1834em;vertical-align:-0.25em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9334em;"><span style="top:-3.1473em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ã€‚</p><blockquote><p>ğŸ’¡ ç‰¹åˆ«åœ°ï¼Œå¦‚æœ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">Î˜</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mrow><msub><mrow><mi>log</mi><mo>â¡</mo></mrow><mi>b</mi></msub><mi>a</mi></mrow></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(n)=\Theta(n^{\log_ba})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0991em;vertical-align:-0.25em;"></span><span class="mord">Î˜</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2302em;"><span style="top:-2.2341em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2659em;"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.1952em;"></span><span class="mord mathnormal mtight">a</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼Œåˆ™<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">Î˜</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mrow><msub><mrow><mi>log</mi><mo>â¡</mo></mrow><mi>b</mi></msub><mi>a</mi></mrow></msup><mo>â‹…</mo><mi>log</mi><mo>â¡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n)=\Theta(n^{\log_ba}\cdot \log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0991em;vertical-align:-0.25em;"></span><span class="mord">Î˜</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2302em;"><span style="top:-2.2341em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2659em;"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.1952em;"></span><span class="mord mathnormal mtight">a</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ã€‚</p></blockquote></li><li><p><strong>æƒ…å†µä¸‰ï¼š</strong> å¦‚æœ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î©</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mrow><msub><mrow><mi>log</mi><mo>â¡</mo></mrow><mi>b</mi></msub><mrow><mi>a</mi><mo>+</mo><mi>Ïµ</mi></mrow></mrow></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Î©(n^{\log_b{a + \epsilon}})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0991em;vertical-align:-0.25em;"></span><span class="mord">Î©</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2302em;"><span style="top:-2.2341em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2659em;"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.1952em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">Ïµ</span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼ˆå…¶ä¸­ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïµ</mi><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\epsilon &gt; 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">Ïµ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>ï¼‰ï¼Œå¦‚æœ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>f</mi><mrow><mo fence="true">(</mo><mfrac><mi>n</mi><mi>b</mi></mfrac><mo fence="true">)</mo></mrow><mo>â‰¤</mo><mi>k</mi><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">a f\left(\frac{n}{b}\right) \leq kf(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2em;vertical-align:-0.35em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">)</span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ï¼ˆå…¶ä¸­ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>&lt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">k &lt; 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>ï¼‰å¯¹äºè¶³å¤Ÿå¤§çš„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> æˆç«‹ï¼Œé‚£ä¹ˆ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î˜</mi><mo stretchy="false">(</mo><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Î˜(f(n))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Î˜</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">))</span></span></span></span>ã€‚</p></li></ol><p>åœ¨åº”ç”¨ä¸»æ–¹æ³•æ—¶ï¼Œé¦–å…ˆéœ€è¦å°†é€’å½’å¼ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> è¡¨è¾¾ä¸ºä¸Šè¿°å½¢å¼ï¼Œç„¶åæ ¹æ® <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> çš„å¢é•¿é€Ÿåº¦ä¸ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>n</mi><mrow><msub><mrow><mi>log</mi><mo>â¡</mo></mrow><mi>b</mi></msub><mi>a</mi></mrow></msup></mrow><annotation encoding="application/x-tex">n^{\log_b{a}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2302em;"><span style="top:-2.2341em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2659em;"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.1952em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">a</span></span></span></span></span></span></span></span></span></span></span></span></span> è¿›è¡Œæ¯”è¾ƒï¼Œç¡®å®šé€‚ç”¨äºå“ªä¸€ç§æƒ…å†µã€‚è¿™æ ·å¯ä»¥æ›´æ–¹ä¾¿åœ°æ¨å¯¼é€’å½’ç®—æ³•çš„æ¸è¿›æ—¶é—´å¤æ‚åº¦ã€‚</p><hr><p>P55 ç»ƒä¹ 4.5-1</p><ol><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mn>2</mn><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mi mathvariant="normal">/</mi><mn>4</mn><mo stretchy="false">)</mo><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">T(n)=2T(n/4)+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord">/4</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>ï¼Œa=2ï¼Œb=4ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mi>b</mi></msub><mi>a</mi></mrow><annotation encoding="application/x-tex">log_ba</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">a</span></span></span></span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">=\frac 12</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><msup><mi>n</mi><mn>0</mn></msup></mrow><annotation encoding="application/x-tex">f(n)=n^0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mi>b</mi></msub><mi>a</mi></mrow></msup><mo>âˆ’</mo><mi>Ïµ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">=O(n^{log_ba}-\epsilon)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0991em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">o</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span></span></span></span></span></span></span><span class="mord mathnormal mtight">a</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">Ïµ</span><span class="mclose">)</span></span></span></span>ï¼Œå› æ­¤<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">Î˜</mi><mo stretchy="false">(</mo><msqrt><mi>n</mi></msqrt><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n)=\Theta(\sqrt n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0503em;vertical-align:-0.25em;"></span><span class="mord">Î˜</span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8003em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="padding-left:0.833em;">n</span></span><span style="top:-2.7603em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2397em;"><span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ã€‚ã€</li><li>åŒç†ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">Î˜</mi><mo stretchy="false">(</mo><msqrt><mi>n</mi></msqrt><mi>log</mi><mo>â¡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n)=\Theta(\sqrt n\log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0503em;vertical-align:-0.25em;"></span><span class="mord">Î˜</span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8003em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="padding-left:0.833em;">n</span></span><span style="top:-2.7603em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2397em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">Î˜</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n)=\Theta(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Î˜</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">Î˜</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n)=\Theta(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord">Î˜</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li></ol><hr><h1 id="ç¬¬6ç« -å †æ’åº">ç¬¬6ç«  å †æ’åº</h1><h2 id="å †ã€å †æ’åºç®—æ³•">å †ã€å †æ’åºç®—æ³•</h2><p>å †ï¼ˆHeapï¼‰æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œé€šå¸¸ç”¨äºå®ç°ä¼˜å…ˆé˜Ÿåˆ—ã€‚å †åˆ†ä¸ºæœ€å¤§å †å’Œæœ€å°å †ï¼Œæœ€å¤§å †çš„æ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å¤§äºæˆ–ç­‰äºå…¶å­èŠ‚ç‚¹ï¼Œè€Œæœ€å°å †çš„æ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å°äºæˆ–ç­‰äºå…¶å­èŠ‚ç‚¹ã€‚</p><p>å †æ’åºç®—æ³•æ˜¯ä¸€ç§åŸºäºå †æ•°æ®ç»“æ„çš„æ’åºæ–¹æ³•ã€‚å®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯é¦–å…ˆå°†å¾…æ’åºçš„å…ƒç´ æ„å»ºæˆä¸€ä¸ªæœ€å¤§å †æˆ–æœ€å°å †ï¼Œç„¶åä¾æ¬¡å°†å †é¡¶å…ƒç´ ï¼ˆæœ€å¤§å€¼æˆ–æœ€å°å€¼ï¼‰å–å‡ºå¹¶è°ƒæ•´å †ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ éƒ½è¢«å–å‡ºï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªæœ‰åºåºåˆ—ã€‚</p><p>å †æ’åºçš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>æ„å»ºå †ï¼šå°†å¾…æ’åºçš„å…ƒç´ æŒ‰é¡ºåºæ’å…¥åˆ°å †ä¸­ï¼Œç„¶åä¾æ¬¡è°ƒæ•´å †ï¼Œä½¿å¾—æ¯ä¸ªèŠ‚ç‚¹éƒ½æ»¡è¶³å †çš„æ€§è´¨ã€‚</li><li>å †é¡¶å…ƒç´ ä¸æœ«å°¾å…ƒç´ äº¤æ¢ï¼šå°†å †é¡¶å…ƒç´ ä¸å †çš„æœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ä½ç½®ã€‚</li><li>è°ƒæ•´å †ï¼šå°†äº¤æ¢åçš„å †é¡¶å…ƒç´ é‡æ–°è°ƒæ•´ä¸ºå †ï¼Œä¿æŒå †çš„æ€§è´¨ã€‚</li><li>é‡å¤æ­¥éª¤2å’Œæ­¥éª¤3ï¼Œç›´åˆ°å †ä¸ºç©ºã€‚</li></ol><p>å †æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ï¼Œå…¶ä¸­næ˜¯å¾…æ’åºå…ƒç´ çš„ä¸ªæ•°ã€‚å®ƒæ˜¯ä¸€ç§åŸåœ°æ’åºç®—æ³•ï¼Œä¸éœ€è¦é¢å¤–çš„ç©ºé—´ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒæ•´å †çš„å‡½æ•°ï¼Œç¡®ä¿ä»¥iä¸ºæ ¹çš„å­æ ‘æ˜¯ä¸€ä¸ªæœ€å¤§å †</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">heapify</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; arr, <span class="type">int</span> n, <span class="type">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> largest = i;    <span class="comment">// åˆå§‹åŒ–æœ€å¤§å…ƒç´ çš„ç´¢å¼•ä¸ºå½“å‰èŠ‚ç‚¹</span></span><br><span class="line">    <span class="type">int</span> left = <span class="number">2</span> * i + <span class="number">1</span>;   <span class="comment">// å·¦å­èŠ‚ç‚¹çš„ç´¢å¼•</span></span><br><span class="line">    <span class="type">int</span> right = <span class="number">2</span> * i + <span class="number">2</span>;  <span class="comment">// å³å­èŠ‚ç‚¹çš„ç´¢å¼•</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¯”è¾ƒå·¦å­èŠ‚ç‚¹ä¸å½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œæ‰¾å‡ºè¾ƒå¤§å€¼çš„ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">if</span> (left &lt; n &amp;&amp; arr[left] &gt; arr[largest])</span><br><span class="line">        largest = left;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¯”è¾ƒå³å­èŠ‚ç‚¹ä¸å½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œæ‰¾å‡ºè¾ƒå¤§å€¼çš„ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">if</span> (right &lt; n &amp;&amp; arr[right] &gt; arr[largest])</span><br><span class="line">        largest = right;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœæœ€å¤§å€¼çš„ç´¢å¼•ä¸æ˜¯å½“å‰èŠ‚ç‚¹ï¼Œäº¤æ¢å®ƒä»¬ï¼Œå¹¶é€’å½’è°ƒæ•´äº¤æ¢åçš„å­æ ‘</span></span><br><span class="line">    <span class="keyword">if</span> (largest != i) &#123;</span><br><span class="line">        <span class="built_in">swap</span>(arr[i], arr[largest]);</span><br><span class="line">        <span class="built_in">heapify</span>(arr, n, largest);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å †æ’åºä¸»å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">heapSort</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; arr)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n = arr.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„å»ºæœ€å¤§å †</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = n / <span class="number">2</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        <span class="built_in">heapify</span>(arr, n, i);</span><br><span class="line"><span class="comment">// æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„ä¸‹æ ‡ä¸ºn-1ï¼Œåˆ™çˆ¶èŠ‚ç‚¹çš„ä¸‹æ ‡ä¸ºn/2-1ï¼š</span></span><br><span class="line"><span class="comment">// è‹¥ä¸ºå·¦èŠ‚ç‚¹ï¼Œn-1ä¸ºå¥‡ï¼Œnä¸ºå¶ï¼Œï¼ˆn-1-1ï¼‰/2=n/2-1</span></span><br><span class="line"><span class="comment">// è‹¥ä¸ºå³èŠ‚ç‚¹ï¼Œn-1ä¸ºå¶ï¼Œnä¸ºå¥‡ï¼Œï¼ˆn-1-2ï¼‰/2=ï¼ˆn-1ï¼‰/2-1=[n/2]-1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// äº¤æ¢å †é¡¶å…ƒç´ ä¸æœ«å°¾å…ƒç´ ï¼Œç„¶åè°ƒæ•´å †</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = n - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="built_in">swap</span>(arr[<span class="number">0</span>], arr[i]);</span><br><span class="line">        <span class="built_in">heapify</span>(arr, i, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; arr = &#123;<span class="number">12</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125;;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;åŸå§‹æ•°ç»„ï¼š&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> num : arr) &#123;</span><br><span class="line">        cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒç”¨å †æ’åºå‡½æ•°</span></span><br><span class="line">    <span class="built_in">heapSort</span>(arr);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;æ’åºåçš„æ•°ç»„ï¼š&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> num : arr) &#123;</span><br><span class="line">        cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¿«é€Ÿæ’åº">å¿«é€Ÿæ’åº</h2><p>å¿«é€Ÿæ’åºæ˜¯ä¸€ç§å¸¸ç”¨çš„æ’åºç®—æ³•ï¼Œå®ƒåŸºäºåˆ†æ²»çš„æ€æƒ³ã€‚å…¶ä¸»è¦æ­¥éª¤åŒ…æ‹¬é€‰æ‹©ä¸€ä¸ªåŸºå‡†å…ƒç´ ï¼Œå°†æ•°ç»„åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œå°äºåŸºå‡†çš„å…ƒç´ æ”¾åœ¨å·¦è¾¹ï¼Œå¤§äºåŸºå‡†çš„å…ƒç´ æ”¾åœ¨å³è¾¹ï¼Œç„¶åå¯¹å·¦å³ä¸¤éƒ¨åˆ†åˆ†åˆ«é€’å½’è¿›è¡Œå¿«é€Ÿæ’åºã€‚</p><p>ä»¥ä¸‹æ˜¯å¿«é€Ÿæ’åºçš„åŸºæœ¬åŸç†ï¼š</p><ol><li><strong>é€‰æ‹©åŸºå‡†å…ƒç´ ï¼š</strong> ä»æ•°ç»„ä¸­é€‰æ‹©ä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†ï¼Œé€šå¸¸é€‰æ‹©æœ€åä¸€ä¸ªå…ƒç´ ã€‚</li><li><strong>åˆ†åŒºï¼š</strong> å°†æ•°ç»„é‡æ–°æ’åˆ—ï¼Œä½¿å¾—å°äºåŸºå‡†çš„å…ƒç´ åœ¨åŸºå‡†çš„å·¦è¾¹ï¼Œå¤§äºåŸºå‡†çš„å…ƒç´ åœ¨åŸºå‡†çš„å³è¾¹ã€‚åŸºå‡†å…ƒç´ æœ€ç»ˆåœ¨å…¶æœ€ç»ˆæ’åºçš„ä½ç½®ä¸Šã€‚</li><li><strong>é€’å½’ï¼š</strong> å¯¹åŸºå‡†å…ƒç´ å·¦å³ä¸¤è¾¹çš„å­æ•°ç»„åˆ†åˆ«é€’å½’åº”ç”¨å¿«é€Ÿæ’åºã€‚</li></ol><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„C++å®ç°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ†åŒºå‡½æ•°ï¼Œé€‰å–æœ€åä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†å€¼ï¼Œå°†å°äºåŸºå‡†å€¼çš„å…ƒç´ æ”¾åœ¨å·¦ä¾§ï¼Œå¤§äºåŸºå‡†å€¼çš„å…ƒç´ æ”¾åœ¨å³ä¾§</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">partition</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; arr, <span class="type">int</span> low, <span class="type">int</span> high)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> pivot = arr[high];  <span class="comment">// é€‰æ‹©æœ€åä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†å€¼</span></span><br><span class="line">    <span class="type">int</span> i = low - <span class="number">1</span>;  <span class="comment">// åˆå§‹åŒ–iä¸ºæ¯”åŸºå‡†å€¼å°çš„å…ƒç´ çš„æœ€åä¸€ä¸ªç´¢å¼•</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// éå†æ•°ç»„ï¼Œå°†å°äºåŸºå‡†å€¼çš„å…ƒç´ äº¤æ¢åˆ°å·¦ä¾§</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = low; j &lt; high; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[j] &lt; pivot) &#123;</span><br><span class="line">            i++;</span><br><span class="line">            <span class="built_in">swap</span>(arr[i], arr[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†åŸºå‡†å€¼æ”¾åˆ°æœ€ç»ˆçš„ä½ç½®ä¸Š</span></span><br><span class="line">    <span class="built_in">swap</span>(arr[i + <span class="number">1</span>], arr[high]);</span><br><span class="line">    <span class="keyword">return</span> i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¿«é€Ÿæ’åºä¸»å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">quickSort</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; arr, <span class="type">int</span> low, <span class="type">int</span> high)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (low &lt; high) &#123;</span><br><span class="line">        <span class="comment">// æ‰¾åˆ°åŸºå‡†å€¼çš„ä½ç½®</span></span><br><span class="line">        <span class="type">int</span> pivotIndex = <span class="built_in">partition</span>(arr, low, high);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é€’å½’å¯¹åŸºå‡†å€¼å·¦å³ä¸¤ä¾§çš„å­æ•°ç»„è¿›è¡Œå¿«é€Ÿæ’åº</span></span><br><span class="line">        <span class="built_in">quickSort</span>(arr, low, pivotIndex - <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">quickSort</span>(arr, pivotIndex + <span class="number">1</span>, high);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; arr = &#123;<span class="number">12</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125;;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;åŸå§‹æ•°ç»„ï¼š&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> num : arr) &#123;</span><br><span class="line">        cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒç”¨å¿«é€Ÿæ’åºå‡½æ•°</span></span><br><span class="line">    <span class="built_in">quickSort</span>(arr, <span class="number">0</span>, arr.<span class="built_in">size</span>() - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;æ’åºåçš„æ•°ç»„ï¼š&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> num : arr) &#123;</span><br><span class="line">        cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>partition</code> å‡½æ•°ç”¨äºå¯¹æ•°ç»„è¿›è¡Œåˆ†åŒºï¼Œç¡®å®šåŸºå‡†å€¼çš„ä½ç½®ã€‚ç„¶åï¼Œ<code>quickSort</code> å‡½æ•°é€’å½’åœ°å¯¹åŸºå‡†å€¼å·¦å³ä¸¤ä¾§çš„å­æ•°ç»„è¿›è¡Œå¿«é€Ÿæ’åºã€‚æ•´ä½“çš„å¿«é€Ÿæ’åºç®—æ³•æ—¶é—´å¤æ‚åº¦ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ã€‚</p><hr><p>å¿«é€Ÿæ’åºçš„å¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯ O(n log n)ã€‚è¿™ä½¿å¾—å®ƒæˆä¸ºä¸€ç§éå¸¸é«˜æ•ˆçš„æ’åºç®—æ³•ã€‚</p><p>ä»¥ä¸‹æ˜¯å¿«é€Ÿæ’åºæ—¶é—´å¤æ‚åº¦çš„è¯¦ç»†åˆ†æï¼š</p><ol><li><strong>æœ€å¥½æƒ…å†µï¼š</strong><ul><li>åœ¨æœ€å¥½çš„æƒ…å†µä¸‹ï¼Œæ¯æ¬¡é€‰æ‹©çš„åŸºå‡†å€¼éƒ½å°†æ•°ç»„å‡†ç¡®åœ°åˆ†æˆä¸¤ä¸ªå¤§å°ç›¸ç­‰çš„å­æ•°ç»„ã€‚è¿™å¯¼è‡´é€’å½’æ ‘æ˜¯å¹³è¡¡çš„ï¼Œæ¯ä¸€å±‚éƒ½æœ‰ O(n) ä¸ªå…ƒç´ ã€‚</li><li>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé€’å½’çš„æ·±åº¦æ˜¯ O(log n)ï¼Œå› ä¸ºæ¯æ¬¡éƒ½å°†æ•°ç»„ä¸€åˆ†ä¸ºäºŒã€‚</li><li>æœ€å¥½æƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n log n)ã€‚</li></ul></li><li><strong>æœ€åæƒ…å†µï¼š</strong><ul><li>åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œæ¯æ¬¡é€‰æ‹©çš„åŸºå‡†å€¼éƒ½æ˜¯æ•°ç»„ä¸­çš„æœ€å°æˆ–æœ€å¤§å…ƒç´ ã€‚è¿™å¯¼è‡´é€’å½’æ ‘æ˜¯ä¸å¹³è¡¡çš„ï¼Œå…¶ä¸­ä¸€ä¸ªåˆ†æ”¯æ²¡æœ‰å…ƒç´ ï¼Œè€Œå¦ä¸€ä¸ªåˆ†æ”¯æœ‰ n-1 ä¸ªå…ƒç´ ã€‚</li><li>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé€’å½’çš„æ·±åº¦æ˜¯ O(n)ã€‚</li><li>æœ€åæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n^2)ã€‚</li></ul></li><li><strong>å¹³å‡æƒ…å†µï¼š</strong><ul><li>å¹³å‡æƒ…å†µä¸‹ï¼Œå¿«é€Ÿæ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º O(n log n)ã€‚</li><li>è¿™æ˜¯é€šè¿‡å¯¹æ‰€æœ‰å¯èƒ½çš„è¾“å…¥æƒ…å†µè¿›è¡Œå¹³å‡è®¡ç®—å¾—å‡ºçš„ç»“æœã€‚</li><li>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¿«é€Ÿæ’åºé€šå¸¸æ˜¯æœ€å¥½çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒçš„å¹³å‡æ€§èƒ½éå¸¸å¥½ã€‚</li></ul></li></ol><p>æ€»ä½“è€Œè¨€ï¼Œå¿«é€Ÿæ’åºåœ¨å¹³å‡æƒ…å†µä¸‹çš„æ€§èƒ½è¾ƒå¥½ï¼Œä½†åœ¨æœ€åæƒ…å†µä¸‹å¯èƒ½å˜å¾—ä¸å¤ªç†æƒ³ã€‚ä¸ºäº†é™ä½æœ€åæƒ…å†µçš„å‘ç”Ÿæ¦‚ç‡ï¼Œé€šå¸¸å¯ä»¥é‡‡ç”¨éšæœºåŒ–çš„æ–¹æ³•æ¥é€‰æ‹©åŸºå‡†å€¼ï¼Œæˆ–è€…é‡‡ç”¨ä¸‰æ•°ä¸­å€¼åˆ†å‰²æ³•ç­‰ç­–ç•¥æ¥é€‰æ‹©æ›´å¥½çš„åŸºå‡†å€¼ã€‚è¿™äº›æ–¹æ³•å¯ä»¥æé«˜å¿«é€Ÿæ’åºçš„ç¨³å®šæ€§ã€‚</p><h1 id="ç¬¬7ç« -å¿«é€Ÿæ’åº">ç¬¬7ç«  å¿«é€Ÿæ’åº</h1><p>å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰æ˜¯ä¸€ç§å¸¸ç”¨çš„æ’åºç®—æ³•ï¼Œå®ƒåŸºäºåˆ†æ²»æ³•ï¼ˆDivide and Conquerï¼‰çš„æ€æƒ³ã€‚åˆ†æ²»æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯å°†é—®é¢˜åˆ†æˆä¸€äº›å°çš„å­é—®é¢˜ï¼Œé€’å½’åœ°è§£å†³è¿™äº›å­é—®é¢˜ï¼Œç„¶ååˆå¹¶å…¶ç»“æœä»¥è§£å†³åŸå§‹é—®é¢˜ã€‚</p><p>ä»¥ä¸‹æ˜¯å¿«é€Ÿæ’åºçš„è¯¦ç»†è¿‡ç¨‹ï¼š</p><ol><li><strong>é€‰æ‹©æ¢çº½å…ƒç´ ï¼š</strong> ä»æ•°ç»„ä¸­é€‰æ‹©ä¸€ä¸ªå…ƒç´ ä½œä¸ºæ¢çº½å…ƒç´ ï¼ˆpivotï¼‰ã€‚é€šå¸¸é€‰æ‹©æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œä½†ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–ä½ç½®çš„å…ƒç´ ã€‚</li><li><strong>åˆ†å‰²é˜¶æ®µï¼š</strong> å°†æ•°ç»„ä¸­çš„å…ƒç´ é‡æ–°æ’åˆ—ï¼Œä½¿å¾—å°äºæ¢çº½å…ƒç´ çš„å…ƒç´ ä½äºå…¶å·¦ä¾§ï¼Œè€Œå¤§äºæ¢çº½å…ƒç´ çš„å…ƒç´ ä½äºå…¶å³ä¾§ã€‚æ¢çº½å…ƒç´ æ­¤æ—¶å·²ç»å¤„äºæ­£ç¡®çš„ä½ç½®ï¼Œç§°ä¸ºåˆ†å‰²ç‚¹ï¼ˆpivot pointï¼‰ã€‚<ul><li>è®¾ç½®ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡å‘å½“å‰å¤„ç†çš„å…ƒç´ ï¼Œä¸€ä¸ªæŒ‡å‘æ•°ç»„çš„èµ·å§‹ä½ç½®ã€‚å¼€å§‹æ—¶ï¼Œä¸¤ä¸ªæŒ‡é’ˆé‡åˆã€‚</li><li>ä»æ•°ç»„çš„èµ·å§‹ä½ç½®éå†åˆ°å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼Œå°†å°äºæ¢çº½å…ƒç´ çš„å…ƒç´ äº¤æ¢åˆ°å·¦ä¾§ï¼ŒåŒæ—¶ç§»åŠ¨æŒ‡é’ˆã€‚</li><li>æœ€åï¼Œå°†æ¢çº½å…ƒç´ äº¤æ¢åˆ°æ­£ç¡®çš„ä½ç½®ï¼Œä½¿å¾—å·¦ä¾§çš„å…ƒç´ éƒ½å°äºå®ƒï¼Œå³ä¾§çš„å…ƒç´ éƒ½å¤§äºå®ƒã€‚</li><li>åˆ†å‰²ç‚¹çš„ä½ç½®ç¡®å®šåï¼Œæ•°ç»„è¢«åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«å¯¹è¿™ä¸¤ä¸ªéƒ¨åˆ†é€’å½’åœ°åº”ç”¨å¿«é€Ÿæ’åºã€‚</li></ul></li><li><strong>é€’å½’æ’åºï¼š</strong> å¯¹åˆ†å‰²ç‚¹å·¦å³ä¸¤ä¾§çš„å­æ•°ç»„åˆ†åˆ«è¿›è¡Œé€’å½’æ’åºã€‚</li><li><strong>åˆå¹¶ï¼š</strong> é€’å½’æ’åºçš„æœ€ç»ˆç»“æœå°±æ˜¯æ•´ä¸ªæ•°ç»„æœ‰åºã€‚ç”±äºåˆ†æ²»æ³•çš„ç‰¹æ€§ï¼Œå„ä¸ªå­æ•°ç»„åœ¨æ’åºå®Œæˆåï¼Œæ•´ä¸ªæ•°ç»„ä¹Ÿå°±è‡ªç„¶æœ‰åºäº†ã€‚</li></ol><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œæ¼”ç¤ºäº†å¿«é€Ÿæ’åºçš„è¿‡ç¨‹ï¼š</p><p>å‡è®¾æ•°ç»„ä¸º <code>[12, 7, 11, 8, 5, 3, 2, 10]</code>ï¼Œé€‰æ‹©æœ€åä¸€ä¸ªå…ƒç´  10 ä½œä¸ºæ¢çº½å…ƒç´ ï¼š</p><ol><li>åˆå§‹æ•°ç»„ï¼š<code>[12, 7, 11, 8, 5, 3, 2, 10]</code></li><li>æ¢çº½å…ƒç´ é€‰æ‹©ä¸º 10ï¼Œåˆ†å‰²ç‚¹ä½ç½®ï¼š4</li><li>åˆ†å‰²åçš„æ•°ç»„ï¼š<code>[7, 8, 5, 3, 2, 10, 12, 11]</code></li><li>é€’å½’æ’åºå·¦ä¾§å­æ•°ç»„ <code>[7, 8, 5, 3, 2]</code></li><li>é€’å½’æ’åºå³ä¾§å­æ•°ç»„ <code>[12, 11]</code></li><li>æœ€ç»ˆæœ‰åºæ•°ç»„ï¼š<code>[2, 3, 5, 7, 8, 10, 11, 12]</code></li></ol><p>è¿™å°±æ˜¯å¿«é€Ÿæ’åºçš„åŸºæœ¬æ€æƒ³å’Œå®ç°è¿‡ç¨‹ã€‚å®ƒçš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ï¼Œå…¶ä¸­ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚å¿«é€Ÿæ’åºåœ¨å®è·µä¸­è¡¨ç°å‡ºè‰²ï¼Œè¢«å¹¿æ³›åº”ç”¨äºå„ç§åº”ç”¨åœºæ™¯ã€‚</p><p>å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰æ˜¯ä¸€ç§å¸¸ç”¨çš„æ’åºç®—æ³•ï¼Œå±äºåˆ†æ²»æ³•çš„ä¸€ç§ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„C++å®ç°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°å£°æ˜</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">partition</span><span class="params">(std::vector&lt;<span class="type">int</span>&gt;&amp; arr, <span class="type">int</span> low, <span class="type">int</span> high)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">quickSort</span><span class="params">(std::vector&lt;<span class="type">int</span>&gt;&amp; arr, <span class="type">int</span> low, <span class="type">int</span> high)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ†å‰²æ•°ç»„å¹¶è¿”å›åˆ†å‰²ç‚¹</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">partition</span><span class="params">(std::vector&lt;<span class="type">int</span>&gt;&amp; arr, <span class="type">int</span> low, <span class="type">int</span> high)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> pivot = arr[high];  <span class="comment">// é€‰æ‹©æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ ä½œä¸ºæ¢çº½å…ƒç´ </span></span><br><span class="line">    <span class="type">int</span> i = (low - <span class="number">1</span>);      <span class="comment">// è®¾ç½®åˆ†å‰²ç‚¹çš„åˆå§‹ä½ç½®</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡æ–°æ’åˆ—æ•°ç»„ï¼Œå°†å°äºæ¢çº½å…ƒç´ çš„å…ƒç´ ç§»åˆ°å·¦ä¾§ï¼Œå¤§äºçš„ç§»åˆ°å³ä¾§</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = low; j &lt;= high - <span class="number">1</span>; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[j] &lt; pivot) &#123;</span><br><span class="line">            i++;</span><br><span class="line">            std::<span class="built_in">swap</span>(arr[i], arr[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†æ¢çº½å…ƒç´ æ”¾åˆ°æ­£ç¡®çš„ä½ç½®</span></span><br><span class="line">    std::<span class="built_in">swap</span>(arr[i + <span class="number">1</span>], arr[high]);</span><br><span class="line">    <span class="keyword">return</span> (i + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€’å½’å®ç°å¿«é€Ÿæ’åº</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">quickSort</span><span class="params">(std::vector&lt;<span class="type">int</span>&gt;&amp; arr, <span class="type">int</span> low, <span class="type">int</span> high)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (low &lt; high) &#123;</span><br><span class="line">        <span class="comment">// è·å–åˆ†å‰²ç‚¹</span></span><br><span class="line">        <span class="type">int</span> pi = <span class="built_in">partition</span>(arr, low, high);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¯¹åˆ†å‰²ç‚¹å·¦å³ä¸¤ä¾§çš„å­æ•°ç»„è¿›è¡Œé€’å½’æ’åº</span></span><br><span class="line">        <span class="built_in">quickSort</span>(arr, low, pi - <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">quickSort</span>(arr, pi + <span class="number">1</span>, high);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; arr = &#123;<span class="number">12</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">10</span>&#125;;</span><br><span class="line">    <span class="type">int</span> n = arr.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;åŸå§‹æ•°ç»„: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        std::cout &lt;&lt; arr[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">quickSort</span>(arr, <span class="number">0</span>, n - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;\\næ’åºåçš„æ•°ç»„: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        std::cout &lt;&lt; arr[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç¨‹åºæ¼”ç¤ºäº†å¿«é€Ÿæ’åºçš„åŸºæœ¬åŸç†ï¼Œé€šè¿‡é€’å½’è°ƒç”¨å¯¹æ•°ç»„è¿›è¡Œæ’åºã€‚å¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ï¼å¦‚æœæœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿æé—®ã€‚</p><h1 id="ç¬¬15ç« -åŠ¨æ€è§„åˆ’">ç¬¬15ç«  åŠ¨æ€è§„åˆ’</h1><p>åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programmingï¼Œç®€ç§°DPï¼‰æ˜¯ä¸€ç§è§£å†³å¤æ‚é—®é¢˜çš„ä¼˜åŒ–æ–¹æ³•ï¼Œå®ƒé€šå¸¸ç”¨äºè§£å†³å…·æœ‰é‡å å­é—®é¢˜å’Œæœ€ä¼˜å­ç»“æ„æ€§è´¨çš„é—®é¢˜ã€‚åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†é—®é¢˜åˆ†è§£æˆå­é—®é¢˜ï¼Œå¹¶é€šè¿‡å­˜å‚¨å­é—®é¢˜çš„è§£æ¥é¿å…é‡å¤è®¡ç®—ï¼Œä»è€Œæé«˜æ•ˆç‡ã€‚</p><p>åŠ¨æ€è§„åˆ’çš„ä¸€èˆ¬æ­¥éª¤åŒ…æ‹¬ï¼š</p><ol><li><strong>å®šä¹‰å­é—®é¢˜ï¼š</strong> å°†åŸé—®é¢˜åˆ†è§£æˆæ›´å°çš„å­é—®é¢˜ã€‚</li><li><strong>æ‰¾åˆ°çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</strong> å®šä¹‰é—®é¢˜çš„çŠ¶æ€ä»¥åŠçŠ¶æ€ä¹‹é—´çš„å…³ç³»ï¼Œå³å¦‚ä½•é€šè¿‡å·²è§£å†³çš„å­é—®é¢˜çš„è§£æ¥è®¡ç®—åŸé—®é¢˜çš„è§£ã€‚</li><li><strong>è§£å†³åŸºæœ¬é—®é¢˜ï¼š</strong> æ‰¾åˆ°æœ€å°å­é—®é¢˜çš„è§£ï¼Œé€šå¸¸æ˜¯é€šè¿‡åˆå§‹æ¡ä»¶æˆ–è¾¹ç•Œæ¡ä»¶æ¥å®šä¹‰çš„ã€‚</li><li><strong>è‡ªåº•å‘ä¸Šæˆ–è‡ªé¡¶å‘ä¸‹æ±‚è§£ï¼š</strong> åŠ¨æ€è§„åˆ’å¯ä»¥é‡‡ç”¨è‡ªåº•å‘ä¸Šçš„è¿­ä»£æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨è‡ªé¡¶å‘ä¸‹çš„é€’å½’æ–¹æ³•ã€‚</li></ol><p>åŠ¨æ€è§„åˆ’å¸¸è§çš„åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</p><ul><li><strong>æœ€ä¼˜å­ç»“æ„ï¼š</strong> é—®é¢˜çš„æœ€ä¼˜è§£å¯ä»¥é€šè¿‡å­é—®é¢˜çš„æœ€ä¼˜è§£æ¥æ„é€ ã€‚</li><li><strong>é‡å å­é—®é¢˜ï¼š</strong> é—®é¢˜å¯ä»¥è¢«åˆ†è§£æˆä¸€äº›ç›¸åŒçš„å­é—®é¢˜ï¼Œè¿™äº›å­é—®é¢˜åœ¨æ±‚è§£è¿‡ç¨‹ä¸­ä¼šè¢«é‡å¤è®¡ç®—ã€‚</li><li><strong>çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</strong> é—®é¢˜çš„è§£å¯ä»¥é€šè¿‡çŠ¶æ€ä¹‹é—´çš„è½¬ç§»å¾—åˆ°ã€‚</li></ul><p>ä¸€äº›ç»å…¸çš„åŠ¨æ€è§„åˆ’é—®é¢˜åŒ…æ‹¬ï¼š</p><ol><li><strong>æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼š</strong> å¯»æ‰¾ç¬¬nä¸ªæ–æ³¢é‚£å¥‘æ•°ã€‚</li><li><strong>æœ€é•¿é€’å¢å­åºåˆ—ï¼š</strong> æ‰¾åˆ°ç»™å®šæ•°ç»„ä¸­çš„æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦ã€‚</li><li><strong>èƒŒåŒ…é—®é¢˜ï¼š</strong> ç»™å®šä¸€ç»„ç‰©å“çš„é‡é‡å’Œä»·å€¼ï¼Œç¡®å®šå¦‚ä½•é€‰æ‹©è¿™äº›ç‰©å“ä»¥è·å¾—æœ€å¤§çš„æ€»ä»·å€¼ï¼Œåœ¨é™å®šæ€»é‡é‡çš„æƒ…å†µä¸‹ã€‚</li><li><strong>ç¼–è¾‘è·ç¦»ï¼š</strong> è®¡ç®—ä¸¤ä¸ªå­—ç¬¦ä¸²ä¹‹é—´çš„æœ€å°ç¼–è¾‘æ“ä½œæ•°ï¼Œå¦‚æ’å…¥ã€åˆ é™¤ã€æ›¿æ¢ï¼Œä½¿å¾—ä¸€ä¸ªå­—ç¬¦ä¸²å˜æˆå¦ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</li><li><strong>æœ€çŸ­è·¯å¾„é—®é¢˜ï¼š</strong> åœ¨å›¾ä¸­æ‰¾åˆ°ä»ä¸€ä¸ªé¡¶ç‚¹åˆ°å¦ä¸€ä¸ªé¡¶ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚</li></ol><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„åŠ¨æ€è§„åˆ’ç¤ºä¾‹ï¼Œè®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fibonacci</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dp</span><span class="params">(n + <span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">    dp[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    dp[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        dp[i] = dp[i - <span class="number">1</span>] + dp[i - <span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dp[n];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n = <span class="number">6</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Fibonacci(&quot;</span> &lt;&lt; n &lt;&lt; <span class="string">&quot;) = &quot;</span> &lt;&lt; <span class="built_in">fibonacci</span>(n) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>dp</code> æ•°ç»„å­˜å‚¨äº†è®¡ç®—è¿‡çš„å­é—®é¢˜çš„è§£ï¼Œé€šè¿‡è¿­ä»£çš„æ–¹å¼è‡ªåº•å‘ä¸Šè®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—ã€‚</p><h2 id="ç»å…¸åŠ¨æ€è§„åˆ’é—®é¢˜">ç»å…¸åŠ¨æ€è§„åˆ’é—®é¢˜</h2><ul><li><p>é’¢æ¡åˆ‡å‰²é—®é¢˜</p><p>é’¢æ¡åˆ‡å‰²é—®é¢˜æ˜¯åŠ¨æ€è§„åˆ’ä¸­ç»å…¸çš„ä¾‹å­ä¹‹ä¸€ã€‚é—®é¢˜çš„æè¿°æ˜¯ç»™å®šä¸€æ®µé•¿åº¦ä¸ºnçš„é’¢æ¡å’Œä¸€ä¸ªä»·æ ¼è¡¨ï¼Œå¦‚ä½•åˆ‡å‰²é’¢æ¡ä½¿å¾—é”€å”®æ”¶ç›Šæœ€å¤§ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€åŒ–çš„é—®é¢˜æè¿°ï¼š</p><ul><li>é’¢æ¡é•¿åº¦ä¸ºiçš„ä»·æ ¼ä¸ºp[i]ã€‚</li><li>å¦‚æœè¦åˆ‡å‰²é’¢æ¡ï¼Œä¼šæœ‰ä¸åŒçš„ä»·æ ¼ã€‚</li></ul><p>é—®é¢˜çš„ç›®æ ‡æ˜¯æ‰¾åˆ°ä¸€ç§åˆ‡å‰²æ–¹å¼ï¼Œä½¿å¾—é”€å”®æ”¶ç›Šæœ€å¤§ã€‚è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„åŠ¨æ€è§„åˆ’é—®é¢˜ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„C++ä»£ç ï¼Œç”¨äºè§£å†³é’¢æ¡åˆ‡å‰²é—®é¢˜ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">cutRod</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; price, <span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dp</span><span class="params">(n + <span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123; <span class="comment">// é’¢æ¡ä¸ºiæ—¶</span></span><br><span class="line">        <span class="type">int</span> maxVal = INT_MIN;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= i; ++j) &#123; <span class="comment">// åˆ‡å‰²æˆjå’Œi-jä¸¤æ®µ</span></span><br><span class="line">            maxVal = <span class="built_in">max</span>(maxVal, price[j] + dp[i - j]);</span><br><span class="line">        &#125;</span><br><span class="line">        dp[i] = maxVal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dp[n];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; price = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">17</span>, <span class="number">17</span>, <span class="number">20</span>, <span class="number">24</span>, <span class="number">30</span>&#125;;  <span class="comment">// ä»·æ ¼è¡¨ï¼Œä¸‹æ ‡å¯¹åº”é’¢æ¡é•¿åº¦</span></span><br><span class="line">    <span class="type">int</span> n = <span class="number">8</span>;  <span class="comment">// é’¢æ¡é•¿åº¦</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> maxRevenue = <span class="built_in">cutRod</span>(price, n);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Maximum revenue for a rod of length &quot;</span> &lt;&lt; n &lt;&lt; <span class="string">&quot;: &quot;</span> &lt;&lt; maxRevenue &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>price</code>å‘é‡è¡¨ç¤ºæ¯ä¸ªé•¿åº¦çš„é’¢æ¡çš„ä»·æ ¼ï¼Œ<code>cutRod</code>å‡½æ•°é€šè¿‡åŠ¨æ€è§„åˆ’è®¡ç®—æœ€å¤§çš„é”€å”®æ”¶ç›Šã€‚åœ¨ä¸»å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹å˜é’¢æ¡é•¿åº¦å’Œä»·æ ¼è¡¨ï¼Œä»¥æµ‹è¯•ä¸åŒæƒ…å†µä¸‹çš„æœ€å¤§æ”¶ç›Šã€‚</p><p>è¯·æ³¨æ„ï¼Œè¿™åªæ˜¯é’¢æ¡åˆ‡å‰²é—®é¢˜çš„ä¸€ç§è§£æ³•ï¼Œå…·ä½“é—®é¢˜å’Œå®é™…åº”ç”¨å¯èƒ½éœ€è¦é€‚å½“çš„è°ƒæ•´ã€‚</p></li></ul><h1 id="ç¬¬17ç« -æ‘Šè¿˜åˆ†æ">ç¬¬17ç«  æ‘Šè¿˜åˆ†æ</h1><h3 id="ä»€ä¹ˆæ˜¯æ‘Šè¿˜åˆ†æï¼Ÿ"><strong>ä»€ä¹ˆæ˜¯æ‘Šè¿˜åˆ†æï¼Ÿ</strong></h3><p>æ‘Šè¿˜åˆ†æå…¶å®å°±æ˜¯è¯„ä»·æŸä¸€ä¸ªæ“ä½œçš„ä»£ä»·ï¼Œæ–¹æ³•å°±æ˜¯æ±‚æŸ<a href="https://so.csdn.net/so/search?q=%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84&amp;spm=1001.2101.3001.7020">æ•°æ®ç»“æ„</a>ä¸­ä¸€ç³»åˆ—æ“ä½œçš„å¹³å‡æ—¶é—´ã€‚</p><p>æ‘Šè¿˜åˆ†æä¸æ¦‚ç‡æ— å…³ï¼Œå¯ä»¥ä¿è¯æŸä¸€ç³»åˆ—æ“ä½œåœ¨æœ€åæƒ…å†µä¸‹çš„å¹³å‡æ€§èƒ½ã€‚</p><ol><li><p>èšåˆåˆ†æï¼šä¸€ä¸ªnä¸ªæ“ä½œçš„åºåˆ—æœ€åæƒ…å†µä¸‹èŠ±è´¹çš„æ€»æ—¶é—´ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ã€‚åœ¨æœ€åæƒ…å†µä¸‹ï¼Œæ¯ä¸ªæ“ä½œçš„å¹³å‡ä»£ä»·ï¼Œæˆ–<strong>æ‘Šè¿˜ä»£ä»·</strong>ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">T(n)/n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mord">/</span><span class="mord mathnormal">n</span></span></span></span>ã€‚</p></li><li><p>æ ¸ç®—æ³•ï¼ˆaccounting methodï¼‰</p></li><li><p>åŠ¿èƒ½æ³•</p></li></ol><h1 id="ç¬¬22ç« -åŸºæœ¬çš„å›¾ç®—æ³•">ç¬¬22ç«  åŸºæœ¬çš„å›¾ç®—æ³•</h1><h2 id="å›¾çš„è¡¨ç¤º">å›¾çš„è¡¨ç¤º</h2><p>æœ‰ä¸¤ç§ä¸»è¦çš„å›¾è¡¨ç¤ºæ–¹æ³•ï¼š</p><ol><li><strong>é‚»æ¥çŸ©é˜µï¼š</strong> é‚»æ¥çŸ©é˜µæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œç”¨äºè¡¨ç¤ºå›¾ä¸­èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ã€‚å¦‚æœå›¾æ˜¯æœ‰å‘çš„ï¼Œé‚»æ¥çŸ©é˜µæ˜¯ä¸€ä¸ªæ–¹é˜µã€‚å¯¹äºæ— å‘å›¾ï¼Œé‚»æ¥çŸ©é˜µæ˜¯å¯¹ç§°çš„ã€‚çŸ©é˜µçš„è¡Œå’Œåˆ—ä»£è¡¨å›¾ä¸­çš„èŠ‚ç‚¹ï¼ŒçŸ©é˜µä¸­çš„å€¼è¡¨ç¤ºå¯¹åº”èŠ‚ç‚¹ä¹‹é—´æ˜¯å¦æœ‰è¾¹ä»¥åŠè¾¹çš„æƒé‡ã€‚</li><li><strong>é‚»æ¥åˆ—è¡¨ï¼š</strong> é‚»æ¥åˆ—è¡¨æ˜¯ä¸€ç§ä»¥åˆ—è¡¨çš„å½¢å¼è¡¨ç¤ºå›¾çš„æ–¹æ³•ã€‚å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹ç›¸é‚»çš„èŠ‚ç‚¹åˆ—è¡¨ã€‚è¿™ç§è¡¨ç¤ºæ–¹æ³•æ›´èŠ‚çœç©ºé—´ï¼Œç‰¹åˆ«æ˜¯åœ¨ç¨€ç–å›¾ï¼ˆè¾¹ç›¸å¯¹è¾ƒå°‘ï¼‰çš„æƒ…å†µä¸‹ã€‚</li></ol><p>åœ¨å®é™…ç¼–ç¨‹ä¸­ï¼Œé€‰æ‹©å“ªç§å›¾è¡¨ç¤ºæ–¹æ³•å–å†³äºå…·ä½“é—®é¢˜çš„è¦æ±‚å’Œå›¾çš„è§„æ¨¡ã€‚å¦‚æœå›¾æ˜¯ç¨ å¯†çš„ï¼ˆè¾¹ç›¸å¯¹è¾ƒå¤šï¼‰ï¼Œé‚»æ¥çŸ©é˜µå¯èƒ½æ›´é€‚åˆã€‚è€Œå¯¹äºç¨€ç–å›¾ï¼Œé‚»æ¥åˆ—è¡¨å¯èƒ½æ›´æœ‰æ•ˆã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line">vector&lt;<span class="type">bool</span>&gt; vis;</span><br><span class="line">vector&lt;vector&lt;<span class="type">bool</span>&gt; &gt; adj;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">find_edge</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v)</span> </span>&#123; <span class="keyword">return</span> adj[u][v]; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (vis[u]) <span class="keyword">return</span>;</span><br><span class="line">  vis[u] = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> v = <span class="number">1</span>; v &lt;= n; ++v) &#123;</span><br><span class="line">    <span class="keyword">if</span> (adj[u][v]) &#123;</span><br><span class="line">      <span class="built_in">dfs</span>(v);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line"></span><br><span class="line">  vis.<span class="built_in">resize</span>(n + <span class="number">1</span>, <span class="literal">false</span>);</span><br><span class="line">  adj.<span class="built_in">resize</span>(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="type">bool</span>&gt;(n + <span class="number">1</span>, <span class="literal">false</span>));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">    <span class="type">int</span> u, v;</span><br><span class="line">    cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">    adj[u][v] = <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¹¿åº¦ä¼˜å…ˆæœç´¢ã€æ·±åº¦ä¼˜å…ˆæœç´¢">å¹¿åº¦ä¼˜å…ˆæœç´¢ã€æ·±åº¦ä¼˜å…ˆæœç´¢</h2><p>å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBreadth-First Searchï¼Œç®€ç§°BFSï¼‰æ˜¯ä¸€ç§å›¾æœç´¢ç®—æ³•ï¼Œç”¨äºéå†æˆ–æœç´¢å›¾çš„ç»“æ„ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„C++å®ç°ï¼Œå‡è®¾å›¾çš„è¡¨ç¤ºæ˜¯é‚»æ¥åˆ—è¡¨ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Graph</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> vertices;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; adjacencyList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Graph</span>(<span class="type">int</span> v) : <span class="built_in">vertices</span>(v), <span class="built_in">adjacencyList</span>(v) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">addEdge</span><span class="params">(<span class="type">int</span> v, <span class="type">int</span> w)</span> </span>&#123;</span><br><span class="line">        adjacencyList[v].<span class="built_in">push_back</span>(w);</span><br><span class="line">        adjacencyList[w].<span class="built_in">push_back</span>(v);  <span class="comment">// undirected graph</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">BFS</span><span class="params">(<span class="type">int</span> startVertex)</span> </span>&#123;</span><br><span class="line">        <span class="function">vector&lt;<span class="type">bool</span>&gt; <span class="title">visited</span><span class="params">(vertices, <span class="literal">false</span>)</span></span>;  <span class="comment">// Mark all vertices as not visited</span></span><br><span class="line">        queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line"></span><br><span class="line">        visited[startVertex] = <span class="literal">true</span>;</span><br><span class="line">        q.<span class="built_in">push</span>(startVertex);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            <span class="type">int</span> currentVertex = q.<span class="built_in">front</span>();</span><br><span class="line">            cout &lt;&lt; currentVertex &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">            q.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> neighbor : adjacencyList[currentVertex]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!visited[neighbor]) &#123;</span><br><span class="line">                    visited[neighbor] = <span class="literal">true</span>;</span><br><span class="line">                    q.<span class="built_in">push</span>(neighbor);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">DFS</span><span class="params">(<span class="type">int</span> startVertex)</span> </span>&#123;</span><br><span class="line">        <span class="function">vector&lt;<span class="type">bool</span>&gt; <span class="title">visited</span><span class="params">(vertices, <span class="literal">false</span>)</span></span>;  <span class="comment">// Mark all vertices as not visited</span></span><br><span class="line">        stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line"></span><br><span class="line">        visited[startVertex] = <span class="literal">true</span>;</span><br><span class="line">        s.<span class="built_in">push</span>(startVertex);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!s.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            <span class="type">int</span> currentVertex = s.<span class="built_in">top</span>();</span><br><span class="line">            cout &lt;&lt; currentVertex &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">            s.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> neighbor : adjacencyList[currentVertex]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!visited[neighbor]) &#123;</span><br><span class="line">                    visited[neighbor] = <span class="literal">true</span>;</span><br><span class="line">                    s.<span class="built_in">push</span>(neighbor);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Example usage</span></span><br><span class="line">    <span class="function">Graph <span class="title">g</span><span class="params">(<span class="number">6</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    g.<span class="built_in">addEdge</span>(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">    g.<span class="built_in">addEdge</span>(<span class="number">0</span>, <span class="number">2</span>);</span><br><span class="line">    g.<span class="built_in">addEdge</span>(<span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line">    g.<span class="built_in">addEdge</span>(<span class="number">1</span>, <span class="number">4</span>);</span><br><span class="line">    g.<span class="built_in">addEdge</span>(<span class="number">2</span>, <span class="number">4</span>);</span><br><span class="line">    g.<span class="built_in">addEdge</span>(<span class="number">3</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;BFS starting from vertex 0: &quot;</span>;</span><br><span class="line">    g.<span class="built_in">BFS</span>(<span class="number">0</span>);</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;DFS starting from vertex 0: &quot;</span>;</span><br><span class="line">    g.<span class="built_in">DFS</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>Graph</code> ç±»è¡¨ç¤ºå›¾ï¼Œ<code>addEdge</code> æ–¹æ³•ç”¨äºæ·»åŠ è¾¹ï¼Œè€Œ<code>BFS</code> æ–¹æ³•å®ç°äº†å¹¿åº¦ä¼˜å…ˆæœç´¢ã€‚ä½ å¯ä»¥æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹å›¾çš„è¡¨ç¤ºå’Œç®—æ³•çš„å®ç°ã€‚è¿™ä¸ªç¤ºä¾‹æ˜¯åŸºäºé‚»æ¥åˆ—è¡¨çš„å›¾è¡¨ç¤ºã€‚å¦‚æœä½ ä½¿ç”¨é‚»æ¥çŸ©é˜µæˆ–å…¶ä»–è¡¨ç¤ºæ–¹æ³•ï¼Œç›¸åº”çš„æ•°æ®ç»“æ„å’Œç®—æ³•å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚</p><blockquote><p>ğŸ’¡ <strong>é‡ç‚¹ï¼šDFSï¼ˆæ¥ä¸‹æ¥çš„æ‹“æ‰‘æ’åºè¦ç”¨åˆ°ï¼‰</strong></p></blockquote><h3 id="ç®—æ³•ç‰¹ç‚¹"><strong>ç®—æ³•ç‰¹ç‚¹</strong></h3><ul><li>æ·±åº¦ä¼˜å…ˆæœç´¢æ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ã€‚<ul><li>é¦–å…ˆï¼Œé€‰å®šä¸€ä¸ªå‡ºå‘ç‚¹åè¿›è¡Œéå†ï¼Œå¦‚æœæœ‰é‚»æ¥çš„æœªè¢«è®¿é—®è¿‡çš„èŠ‚ç‚¹åˆ™ç»§ç»­å‰è¿›ã€‚</li><li>è‹¥ä¸èƒ½ç»§ç»­å‰è¿›ï¼Œåˆ™å›é€€ä¸€æ­¥å†å‰è¿›</li><li>è‹¥å›é€€ä¸€æ­¥ä»ç„¶ä¸èƒ½å‰è¿›ï¼Œåˆ™è¿ç»­å›é€€è‡³å¯ä»¥å‰è¿›çš„ä½ç½®ä¸ºæ­¢ã€‚</li><li>é‡å¤æ­¤è¿‡ç¨‹ï¼Œç›´åˆ°æ‰€æœ‰ä¸é€‰å®šç‚¹ç›¸é€šçš„æ‰€æœ‰é¡¶ç‚¹éƒ½è¢«éå†ã€‚</li></ul></li><li>æ·±åº¦ä¼˜å…ˆæœç´¢æ˜¯é€’å½’è¿‡ç¨‹ï¼Œå¸¦æœ‰å›é€€æ“ä½œï¼Œå› æ­¤éœ€è¦ä½¿ç”¨æ ˆå­˜å‚¨è®¿é—®çš„è·¯å¾„ä¿¡æ¯ã€‚å½“è®¿é—®åˆ°çš„å½“å‰é¡¶ç‚¹æ²¡æœ‰å¯ä»¥å‰è¿›çš„é‚»æ¥é¡¶ç‚¹æ—¶ï¼Œéœ€è¦è¿›è¡Œå‡ºæ ˆæ“ä½œï¼Œå°†å½“å‰ä½ç½®å›é€€è‡³å‡ºæ ˆå…ƒç´ ä½ç½®ã€‚</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é‚»æ¥è¡¨çš„æ·±åº¦æœ‰é™é€’å½’ç®—æ³•</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> TRUE 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> FALSE 0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAX 256</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> Boolean; <span class="comment">// è¿™é‡Œæˆ‘ä»¬å®šä¹‰Booleanä¸ºå¸ƒå°”ç±»å‹ï¼Œå…¶å€¼ä¸ºTRUEæˆ–FALSE</span></span><br><span class="line">Boolean visited[MAX]; <span class="comment">// è®¿é—®æ ‡å¿—çš„æ•°ç»„</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">DFS</span><span class="params">(GraphAdjList GL, <span class="type">int</span> i)</span></span><br><span class="line">&#123;</span><br><span class="line">  EdgeNode *p;</span><br><span class="line">  </span><br><span class="line">  visited[i] = TRUE;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;%c &quot;</span> GL-&gt;adjList[i].data);</span><br><span class="line">  p = GL-&gt;adjList[i].firstEdge;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">while</span>(p)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">if</span>( !visited[p-&gt;adjvex] )</span><br><span class="line">    &#123;</span><br><span class="line">      DFS(GL, p-&gt;adjvex);</span><br><span class="line">    &#125;</span><br><span class="line">    p = p-&gt;next;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é‚»æ¥è¡¨çš„æ·±åº¦éå†æ“ä½œ</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">DFSTraverse</span><span class="params">(GraphAdjList GL)</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="type">int</span> i;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">for</span>( i=<span class="number">0</span>; i &lt; GL-&gt;numVertexes; i++ )</span><br><span class="line">  &#123;</span><br><span class="line">    visited[i] = FALSE; <span class="comment">// åˆå§‹åŒ–æ‰€æœ‰é¡¶ç‚¹çŠ¶æ€éƒ½æ˜¯æœªè®¿é—®è¿‡çŠ¶æ€</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">for</span>( i=<span class="number">0</span>; i &lt; GL-&gt;numVertexes; i++ )</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">if</span>( !visited[i] ) <span class="comment">// è‹¥æ˜¯è¿é€šå›¾ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">    &#123;</span><br><span class="line">      DFS(GL, i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="æ‹“æ‰‘æ’åº">æ‹“æ‰‘æ’åº</h2><p><img src="https://cdn.jsdelivr.net/gh/bush-cn/TyporaImages@main/img/2025/07/10/20250710223149.png" alt="Untitled"></p><p>å®ç°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> n, m;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; G[MAXN];</span><br><span class="line"><span class="type">int</span> in[MAXN];  <span class="comment">// å­˜å‚¨æ¯ä¸ªç»“ç‚¹çš„å…¥åº¦</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">toposort</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  vector&lt;<span class="type">int</span>&gt; L;</span><br><span class="line">  queue&lt;<span class="type">int</span>&gt; S;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    <span class="keyword">if</span> (in[i] == <span class="number">0</span>) S.<span class="built_in">push</span>(i);</span><br><span class="line">  <span class="keyword">while</span> (!S.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">    <span class="type">int</span> u = S.<span class="built_in">front</span>();</span><br><span class="line">    S.<span class="built_in">pop</span>();</span><br><span class="line">    L.<span class="built_in">push_back</span>(u);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> v : G[u]) &#123;</span><br><span class="line">      <span class="keyword">if</span> (--in[v] == <span class="number">0</span>) &#123;</span><br><span class="line">        S.<span class="built_in">push</span>(v);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (L.<span class="built_in">size</span>() == n) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> i : L) cout &lt;&lt; i &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="DFSå®ç°æ‹“æ‰‘æ’åº">DFSå®ç°æ‹“æ‰‘æ’åº</h2><p><a href="http://t.csdnimg.cn/8NATr">åŸºæœ¬å›¾ç®—æ³•(äºŒ) æ‹“æ‰‘æ’åº_æ‹“æ‰‘æ’åºç®—æ³•-CSDNåšå®¢</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¾¹çš„ç»“æ„ä½“ï¼Œè¡¨ç¤ºå›¾ä¸­çš„è¾¹</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">EdgeNode</span> &#123;</span><br><span class="line">    <span class="type">int</span> adjVertex;       <span class="comment">// ç›¸é‚»é¡¶ç‚¹çš„ç´¢å¼•</span></span><br><span class="line">    <span class="comment">// å…¶ä»–è¾¹çš„ä¿¡æ¯ï¼Œä¾‹å¦‚æƒé‡ç­‰ï¼Œæ ¹æ®å®é™…æƒ…å†µæ·»åŠ </span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    EdgeNode* next;      <span class="comment">// æŒ‡å‘ä¸‹ä¸€æ¡è¾¹çš„æŒ‡é’ˆ</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é¡¶ç‚¹çš„ç»“æ„ä½“ï¼Œè¡¨ç¤ºå›¾ä¸­çš„é¡¶ç‚¹</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">VertexNode</span> &#123;</span><br><span class="line">    <span class="comment">// é¡¶ç‚¹çš„å…¶ä»–ä¿¡æ¯ï¼Œä¾‹å¦‚é¡¶ç‚¹å€¼ç­‰ï¼Œæ ¹æ®å®é™…æƒ…å†µæ·»åŠ </span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    EdgeNode* firstEdge;  <span class="comment">// æŒ‡å‘ç¬¬ä¸€æ¡ä¸è¯¥é¡¶ç‚¹ç›¸é‚»çš„è¾¹çš„æŒ‡é’ˆ</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å›¾çš„ç»“æ„ä½“ï¼Œä½¿ç”¨é‚»æ¥è¡¨è¡¨ç¤º</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ALGraph</span> &#123;</span><br><span class="line">    std::vector&lt;VertexNode&gt; vertices;  <span class="comment">// é¡¶ç‚¹æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ è¡¨ç¤ºä¸€ä¸ªé¡¶ç‚¹</span></span><br><span class="line">    <span class="comment">// å…¶ä»–å›¾çš„ä¿¡æ¯ï¼Œä¾‹å¦‚é¡¶ç‚¹æ•°ã€è¾¹æ•°ç­‰ï¼Œæ ¹æ®å®é™…æƒ…å†µæ·»åŠ </span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line">    </span><br></pre></td></tr></table></figure><p>è®¿é—®æ—¶ä¸‰ä¸ªçŠ¶æ€ï¼š</p><blockquote><p>â‹…ã€Œæœªæœç´¢ã€ï¼šæˆ‘ä»¬è¿˜æ²¡æœ‰æœç´¢åˆ°è¿™ä¸ªèŠ‚ç‚¹ï¼Œç”¨0è¡¨ç¤ºï¼Œæ ‡è®°ä¸ºç™½è‰²ï¼›</p><p>â‹…ã€Œæœç´¢ä¸­ã€ï¼šæˆ‘ä»¬æœç´¢è¿‡è¿™ä¸ªèŠ‚ç‚¹ï¼Œä½†è¿˜æ²¡æœ‰å›æº¯åˆ°è¯¥èŠ‚ç‚¹ï¼Œå³è¯¥èŠ‚ç‚¹è¿˜æ²¡æœ‰å…¥æ ˆï¼Œè¿˜æœ‰ç›¸é‚»çš„èŠ‚ç‚¹æ²¡æœ‰æœç´¢å®Œæˆï¼Œç”¨1è¡¨ç¤ºï¼Œæ ‡è®°ä¸ºç°è‰²ï¼›</p><p>â‹…ã€Œå·²å®Œæˆã€ï¼šæˆ‘ä»¬æœç´¢è¿‡å¹¶ä¸”å›æº¯è¿‡è¿™ä¸ªèŠ‚ç‚¹ï¼Œå³è¯¥èŠ‚ç‚¹å·²ç»å…¥æ ˆï¼Œå¹¶ä¸”æ‰€æœ‰è¯¥èŠ‚ç‚¹çš„ç›¸é‚»èŠ‚ç‚¹éƒ½å‡ºç°åœ¨æ ˆçš„æ›´åº•éƒ¨çš„ä½ç½®ï¼Œæ»¡è¶³æ‹“æ‰‘æ’åºçš„è¦æ±‚ï¼Œç”¨2è¡¨ç¤ºï¼Œæ ‡è®°ä¸ºç»¿è‰²ã€‚</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ¤æ–­æœ‰å‘å›¾ä¸­æ˜¯å¦æœ‰ç¯</span></span><br><span class="line"><span class="type">bool</span> valid;</span><br><span class="line"><span class="comment">// æ ˆ</span></span><br><span class="line"><span class="type">int</span>* stack;</span><br><span class="line"><span class="type">int</span> top;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(ALGraph G, <span class="type">int</span>* visited, <span class="type">int</span> u)</span> </span>&#123;</span><br><span class="line"><span class="comment">// è®¾ç½®å½“å‰èŠ‚ç‚¹çŠ¶æ€ä¸ºè®¿é—®ä¸­(1)</span></span><br><span class="line">visited[u] = <span class="number">1</span>;</span><br><span class="line"><span class="comment">// è®¿é—®èŠ‚ç‚¹uçš„æ‰€æœ‰ä¸´èŠ‚ç‚¹v</span></span><br><span class="line">EdgeNode* e = G.vertices[u].firstEdge;</span><br><span class="line"><span class="keyword">while</span> (e) &#123;</span><br><span class="line"><span class="type">int</span> v = e-&gt;adjvex;</span><br><span class="line"><span class="keyword">if</span> (!visited[v]) </span><br><span class="line"><span class="built_in">dfs</span>(G, visited, v);</span><br><span class="line"><span class="comment">// å¦‚æœèŠ‚ç‚¹vçš„çŠ¶æ€ä¸ºæœç´¢ä¸­(1),åˆ™æœ‰å‘å›¾æœ‰ç¯</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (visited[v] == <span class="number">1</span>) &#123;</span><br><span class="line">valid = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">e = e-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®å½“å‰èŠ‚ç‚¹çŠ¶æ€ä¸ºå·²è®¿é—®(2)å¹¶å…¥æ ˆ</span></span><br><span class="line">visited[u] = <span class="number">2</span>;</span><br><span class="line">stack[top++] = u;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">TopologicalSort</span><span class="params">(ALGraph G)</span> </span>&#123;</span><br><span class="line"><span class="comment">// è®¾ç½®æ¯ä¸ªé¡¶ç‚¹çš„çŠ¶æ€ä¸ºæœªæœç´¢(0)</span></span><br><span class="line"><span class="type">int</span>* visited = <span class="built_in">calloc</span>(G.vertexNum, <span class="built_in">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">stack = <span class="built_in">malloc</span>(<span class="built_in">sizeof</span>(<span class="type">int</span>) * G.vertexNum);</span><br><span class="line">valid = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; G.vertexNum; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (!valid)   <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">if</span> (!visited[i]) &#123;</span><br><span class="line"><span class="built_in">dfs</span>(G, visited, i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (!valid)</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;There are loops in Graph\n&quot;</span>);</span><br><span class="line"><span class="keyword">while</span> (top) </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, stack[--top]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ç¬¬23ç« -æœ€å°ç”Ÿæˆæ ‘">ç¬¬23ç«  æœ€å°ç”Ÿæˆæ ‘</h1><h2 id="ä¸€ã€æœ€å°ç”Ÿæˆæ ‘æ˜¯ä»€ä¹ˆï¼Ÿ">ä¸€ã€æœ€å°ç”Ÿæˆæ ‘æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>æœ€å°ç”Ÿæˆæ ‘ï¼Œå…¨ç§°æ˜¯Minimum Spanning Treeï¼Œç®€ç§°ä¸ºMSTï¼Œå…¶å…·ä½“å®šä¹‰å¦‚ä¸‹ï¼š<br>â€‚â€‚åœ¨ä¸€ç»™å®šçš„æ— å‘å›¾<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo>=</mo><mo stretchy="false">(</mo><mi>V</mi><mo separator="true">,</mo><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G = ( V , E )</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">G</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span></span></span></span>ä¸­ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">( u , v )</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span> ä»£è¡¨è¿æ¥é¡¶ç‚¹ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span> ä¸é¡¶ç‚¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span> çš„è¾¹ï¼Œè€Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">w ( u , v )</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span> ä»£è¡¨æ­¤è¾¹çš„æƒé‡ã€‚è‹¥å­˜åœ¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span> çš„å­é›†ä¸”ä¸ºæ— å¾ªç¯å›¾ï¼Œä½¿å¾—è”é€šæ‰€æœ‰ç»“ç‚¹çš„çš„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>T</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">w ( T )</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">)</span></span></span></span> æœ€å°ï¼Œåˆ™æ­¤<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> ä¸º<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">G</span></span></span></span> çš„æœ€å°ç”Ÿæˆæ ‘ã€‚å³ï¼š<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><mi><munder><mo><mo>âˆ‘</mo></mo><mrow><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo><mo>âˆˆ</mo><mi>t</mi></mrow></munder></mi><mi>w</mi><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">w(t)=\underset{(u,v)\in t}{\sum}w(u,v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.966em;vertical-align:-1.216em;"></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.75em;"><span style="top:-2.059em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">u</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="mclose mtight">)</span><span class="mrel mtight">âˆˆ</span><span class="mord mathnormal mtight">t</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.216em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span></p><p>å› æ­¤ï¼Œæœ€å°ç”Ÿæˆæ ‘å…¶å®æ˜¯æœ€å°æƒé‡ç”Ÿæˆæ ‘çš„ç®€ç§°ã€‚</p><h2 id="äºŒã€æœ€å°ç”Ÿæˆæ ‘çš„ç®—æ³•"><strong>äºŒã€æœ€å°ç”Ÿæˆæ ‘çš„ç®—æ³•</strong></h2><h3 id="1-Kurskalç®—æ³•">1. Kurskalç®—æ³•</h3><p><em>ä¿—ç§°â€œåŠ è¾¹æ³•â€ï¼Œç®—æ³•å¤æ‚åº¦ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>E</mi><mi>log</mi><mo>â¡</mo><mi>V</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(E\log V)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span></span></span></span>,å…¶ä¸­Eæ˜¯è¾¹çš„æ•°é‡ï¼ŒVæ˜¯é¡¶ç‚¹æ•°é‡ï¼Œé€‚åˆäºè¾¹æ¯”è¾ƒå°‘çš„ã€ç¨€ç–å›¾ã€‘ã€‚</em></p><p>Kruskal ç®—æ³•æä¾›ä¸€ç§åœ¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>E</mi><mi>log</mi><mo>â¡</mo><mi>V</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(E\log V)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span></span></span></span> è¿è¡Œæ—¶é—´ç¡®å®šæœ€å°ç”Ÿæˆæ ‘çš„æ–¹æ¡ˆã€‚Kruskal ç®—æ³•åŸºäºè´ªå¿ƒç®—æ³•ï¼ˆGreedy Algorithmï¼‰çš„æ€æƒ³è¿›è¡Œè®¾è®¡ï¼Œå…¶é€‰æ‹©çš„è´ªå¿ƒç­–ç•¥å°±æ˜¯ï¼Œæ¯æ¬¡éƒ½é€‰æ‹©æƒé‡æœ€å°çš„ä½†æœªå½¢æˆç¯è·¯çš„è¾¹åŠ å…¥åˆ°ç”Ÿæˆæ ‘ä¸­ã€‚å®ç°åˆ©ç”¨ã€å¹¶æŸ¥é›†ã€‘åˆå¹¶å’Œæ£€æŸ¥æ˜¯å¦å½¢æˆç¯ã€‚å…¶ç®—æ³•ç»“æ„å¦‚ä¸‹ï¼š</p><blockquote><p>ğŸ‘‰</p><p>1ã€å°†æ‰€æœ‰çš„è¾¹æŒ‰ç…§æƒé‡éé€’å‡æ’åºï¼›<br>2ã€é€‰æ‹©æœ€å°æƒé‡çš„è¾¹ï¼Œåˆ¤æ–­æ˜¯å¦å…¶åœ¨å½“å‰çš„ç”Ÿæˆæ ‘ä¸­å½¢æˆäº†ä¸€ä¸ªç¯è·¯ã€‚<br>å¦‚æœç¯è·¯æ²¡æœ‰å½¢æˆï¼Œåˆ™å°†è¯¥è¾¹åŠ å…¥æ ‘ä¸­ï¼Œå¦åˆ™æ”¾å¼ƒã€‚<br>3ã€é‡å¤æ­¥éª¤ 2ï¼Œç›´åˆ°æœ‰ V â€“ 1 æ¡è¾¹åœ¨ç”Ÿæˆæ ‘ä¸­ã€‚</p></blockquote><p>Kruskalç®—æ³•æ˜¯ä¸€ç§ç”¨äºæ±‚è§£æœ€å°ç”Ÿæˆæ ‘ï¼ˆMinimum Spanning Treeï¼‰çš„è´ªå¿ƒç®—æ³•ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„C++å®ç°ï¼Œå‡è®¾å›¾æ˜¯ä»¥è¾¹çš„å½¢å¼è¡¨ç¤ºçš„ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾¹çš„ç»“æ„ä½“ï¼ŒåŒ…å«èµ·ç‚¹ã€ç»ˆç‚¹å’Œæƒé‡</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Edge</span> &#123;</span><br><span class="line">    <span class="type">int</span> start;</span><br><span class="line">    <span class="type">int</span> end;</span><br><span class="line">    <span class="type">int</span> weight;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¯”è¾ƒå‡½æ•°ï¼Œç”¨äºæ’åº</span></span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> Edge&amp; other) <span class="type">const</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> weight &lt; other.weight;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¹¶æŸ¥é›†ï¼ˆUnion-Findï¼‰çš„å®ç°</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UnionFind</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">UnionFind</span>(<span class="type">int</span> size) &#123;</span><br><span class="line">        parent.<span class="built_in">resize</span>(size);</span><br><span class="line">        rank.<span class="built_in">resize</span>(size, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; ++i) &#123;</span><br><span class="line">            parent[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥æ‰¾æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (parent[x] != x) &#123;</span><br><span class="line">            parent[x] = <span class="built_in">find</span>(parent[x]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> parent[x];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆå¹¶ä¸¤ä¸ªé›†åˆ</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">unite</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> rootX = <span class="built_in">find</span>(x);</span><br><span class="line">        <span class="type">int</span> rootY = <span class="built_in">find</span>(y);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (rootX != rootY) &#123;</span><br><span class="line">            <span class="comment">// å°†rankè¾ƒå°çš„æ ‘è¿æ¥åˆ°rankè¾ƒå¤§çš„æ ‘ä¸Š</span></span><br><span class="line">            <span class="keyword">if</span> (rank[rootX] &lt; rank[rootY]) &#123;</span><br><span class="line">                parent[rootX] = rootY;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (rank[rootX] &gt; rank[rootY]) &#123;</span><br><span class="line">                parent[rootY] = rootX;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœrankç›¸ç­‰ï¼Œåˆ™é€‰æ‹©ä¸€ä¸ªä½œä¸ºæ ¹ï¼Œå¹¶å¢åŠ å…¶rank</span></span><br><span class="line">                parent[rootX] = rootY;</span><br><span class="line">                rank[rootY]++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; parent;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; rank;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Kruskalç®—æ³•å®ç°</span></span><br><span class="line"><span class="function">vector&lt;Edge&gt; <span class="title">kruskal</span><span class="params">(vector&lt;Edge&gt;&amp; edges, <span class="type">int</span> numVertices)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å°†è¾¹æŒ‰æƒé‡å‡åºæ’åº</span></span><br><span class="line">    <span class="built_in">sort</span>(edges.<span class="built_in">begin</span>(), edges.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–å¹¶æŸ¥é›†</span></span><br><span class="line">    <span class="function">UnionFind <span class="title">uf</span><span class="params">(numVertices)</span></span>;</span><br><span class="line"></span><br><span class="line">    vector&lt;Edge&gt; result; <span class="comment">// å­˜å‚¨æœ€å°ç”Ÿæˆæ ‘çš„è¾¹</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> Edge&amp; edge : edges) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœåŠ å…¥è¿™æ¡è¾¹ä¸ä¼šå½¢æˆç¯ï¼Œåˆ™åŠ å…¥æœ€å°ç”Ÿæˆæ ‘</span></span><br><span class="line">        <span class="keyword">if</span> (uf.<span class="built_in">find</span>(edge.start) != uf.<span class="built_in">find</span>(edge.end)) &#123;</span><br><span class="line">            result.<span class="built_in">push_back</span>(edge);</span><br><span class="line">            uf.<span class="built_in">unite</span>(edge.start, edge.end);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ä½¿ç”¨ç±»ï¼š</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Edge</span> &#123;</span><br><span class="line">    <span class="type">int</span> src, dest, weight;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">compareEdges</span><span class="params">(<span class="type">const</span> Edge&amp; a, <span class="type">const</span> Edge&amp; b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a.weight &lt; b.weight;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">findParent</span><span class="params">(<span class="type">int</span> u, vector&lt;<span class="type">int</span>&gt;&amp; parent)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (parent[u] == u) ? u : (parent[u] = <span class="built_in">findParent</span>(parent[u], parent));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">merge</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v, vector&lt;<span class="type">int</span>&gt;&amp; parent, vector&lt;<span class="type">int</span>&gt;&amp; rank)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> rootU = <span class="built_in">findParent</span>(u, parent);</span><br><span class="line">    <span class="type">int</span> rootV = <span class="built_in">findParent</span>(v, parent);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (rank[rootU] &gt; rank[rootV]) &#123;</span><br><span class="line">        parent[rootV] = rootU;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (rank[rootU] &lt; rank[rootV]) &#123;</span><br><span class="line">        parent[rootU] = rootV;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        parent[rootV] = rootU;</span><br><span class="line">        rank[rootU]++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">vector&lt;Edge&gt; <span class="title">kruskal</span><span class="params">(vector&lt;Edge&gt;&amp; edges, <span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    vector&lt;Edge&gt; result;</span><br><span class="line">    <span class="built_in">sort</span>(edges.<span class="built_in">begin</span>(), edges.<span class="built_in">end</span>(), compareEdges);</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">parent</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">rank</span><span class="params">(n, <span class="number">0</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        parent[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> Edge&amp; edge : edges) &#123;</span><br><span class="line">        <span class="type">int</span> rootSrc = <span class="built_in">findParent</span>(edge.src, parent);</span><br><span class="line">        <span class="type">int</span> rootDest = <span class="built_in">findParent</span>(edge.dest, parent);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (rootSrc != rootDest) &#123;</span><br><span class="line">            result.<span class="built_in">push_back</span>(edge);</span><br><span class="line">            <span class="built_in">merge</span>(rootSrc, rootDest, parent, rank);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ç¤ºä¾‹å›¾çš„è¾¹é›†åˆï¼ŒåŒ…æ‹¬èµ·ç‚¹ã€ç»ˆç‚¹å’Œæƒé‡</span></span><br><span class="line">    vector&lt;Edge&gt; edges = &#123;</span><br><span class="line">        &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>&#125;,</span><br><span class="line">        &#123;<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>&#125;,</span><br><span class="line">        &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>&#125;,</span><br><span class="line">        &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">7</span>&#125;,</span><br><span class="line">        &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>&#125;</span><br><span class="line">        <span class="comment">// å¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ æ›´å¤šçš„è¾¹</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å›¾çš„é¡¶ç‚¹æ•°</span></span><br><span class="line">    <span class="type">int</span> numVertices = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒç”¨Kruskalç®—æ³•æ±‚æœ€å°ç”Ÿæˆæ ‘</span></span><br><span class="line">    vector&lt;Edge&gt; minSpanningTree = <span class="built_in">kruskal</span>(edges, numVertices);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¾“å‡ºæœ€å°ç”Ÿæˆæ ‘çš„è¾¹</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Edges in the Minimum Spanning Tree:\\n&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> Edge&amp; edge : minSpanningTree) &#123;</span><br><span class="line">        cout &lt;&lt; edge.start &lt;&lt; <span class="string">&quot; - &quot;</span> &lt;&lt; edge.end &lt;&lt; <span class="string">&quot; : &quot;</span> &lt;&lt; edge.weight &lt;&lt; <span class="string">&quot;\\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç¤ºä¾‹å®ç°äº†ä¸€ä¸ªç®€å•çš„Kruskalç®—æ³•ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹è¾¹çš„é›†åˆå’Œé¡¶ç‚¹æ•°ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>Edge</code>ç»“æ„ä½“è¡¨ç¤ºå›¾çš„è¾¹ï¼Œ<code>UnionFind</code>ç±»è¡¨ç¤ºå¹¶æŸ¥é›†ï¼Œ<code>kruskal</code>å‡½æ•°æ‰§è¡ŒKruskalç®—æ³•ï¼Œæœ€ååœ¨<code>main</code>å‡½æ•°ä¸­è¾“å‡ºæœ€å°ç”Ÿæˆæ ‘çš„è¾¹ã€‚</p><h3 id="2-Primç®—æ³•">2. Primç®—æ³•</h3><p><em>ä¿—ç§°â€œåŠ ç‚¹æ³•â€ï¼Œç®—æ³•å¤æ‚åº¦ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>V</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(V^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> ,å…¶ä¸­Væ˜¯é¡¶ç‚¹æ•°é‡ï¼Œé€‚åˆäºè¾¹æ¯”è¾ƒå¤šï¼Œé¡¶ç‚¹è¾ƒå°‘çš„ã€ç¨ å¯†å›¾ã€‘ã€‚</em></p><p>ğŸ’¡ ä»å›¾<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo>=</mo><mrow><mi>V</mi><mo separator="true">,</mo><mi>E</mi></mrow></mrow><annotation encoding="application/x-tex">G={V,E}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">G</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span></span>ä¸­çš„æŸä¸€é¡¶ç‚¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>U</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">U_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>å‡ºå‘ï¼Œé€‰æ‹©ä¸å®ƒå…³è”çš„å…·æœ‰æœ€å°æƒå€¼çš„è¾¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>U</mi><mn>0</mn></msub><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(U_0,v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span>ï¼Œå°†å…¶é¡¶ç‚¹åŠ å…¥åˆ°ç”Ÿæˆæ ‘çš„é¡¶ç‚¹é›†åˆ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span></span></span></span>ä¸­ã€‚ä»¥åæ¯ä¸€æ­¥ä»ä¸€ä¸ªé¡¶ç‚¹åœ¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span></span></span></span>ä¸­ï¼Œè€Œå¦ä¸€ä¸ªé¡¶ç‚¹ä¸åœ¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span></span></span></span>ä¸­çš„å„æ¡è¾¹ä¸­é€‰æ‹©æƒå€¼æœ€å°çš„è¾¹(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">u,v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span>,æŠŠå®ƒçš„é¡¶ç‚¹åŠ å…¥åˆ°é›†åˆUä¸­ã€‚å¦‚æ­¤ç»§ç»­ä¸‹å»ï¼Œç›´åˆ°ç½‘ä¸­çš„æ‰€æœ‰é¡¶ç‚¹éƒ½åŠ å…¥åˆ°ç”Ÿæˆæ ‘é¡¶ç‚¹é›†åˆUä¸­ä¸ºæ­¢ã€‚</p><p>Primç®—æ³•æ˜¯ä¸€ç§ç”¨äºæ±‚è§£æœ€å°ç”Ÿæˆæ ‘ï¼ˆMinimum Spanning Treeï¼‰çš„è´ªå¿ƒç®—æ³•ï¼Œä¸Kruskalç®—æ³•ç±»ä¼¼ï¼Œä½†å®ç°æ–¹å¼ç•¥æœ‰ä¸åŒã€‚Primç®—æ³•ä»ä¸€ä¸ªåˆå§‹é¡¶ç‚¹å¼€å§‹ï¼Œé€æ­¥é€‰æ‹©è¿æ¥åˆ°å½“å‰ç”Ÿæˆæ ‘çš„æœ€çŸ­è¾¹ï¼Œç›´åˆ°ç”Ÿæˆæ ‘è¦†ç›–äº†å›¾ä¸­æ‰€æœ‰çš„é¡¶ç‚¹ã€‚ä»¥ä¸‹æ˜¯Primç®—æ³•çš„è¯¦ç»†è§£é‡Šå’ŒC++å®ç°ç¤ºä¾‹ï¼š</p><h3 id="Primç®—æ³•æ­¥éª¤ï¼š">Primç®—æ³•æ­¥éª¤ï¼š</h3><ol><li><strong>é€‰æ‹©ä¸€ä¸ªèµ·å§‹é¡¶ç‚¹ä½œä¸ºåˆå§‹ç”Ÿæˆæ ‘</strong>ã€‚</li><li><strong>å°†é€‰æ‹©çš„é¡¶ç‚¹æ ‡è®°ä¸ºå·²è®¿é—®</strong>ã€‚</li><li><strong>åœ¨ä¸å½“å‰ç”Ÿæˆæ ‘ç›¸é‚»çš„æ‰€æœ‰æœªè®¿é—®é¡¶ç‚¹ä¸­ï¼Œé€‰æ‹©æƒå€¼æœ€å°çš„è¾¹</strong>ã€‚</li><li><strong>å°†é€‰æ‹©çš„è¾¹åŠ å…¥ç”Ÿæˆæ ‘ï¼Œå°†è¿æ¥çš„é¡¶ç‚¹æ ‡è®°ä¸ºå·²è®¿é—®</strong>ã€‚</li><li><strong>é‡å¤æ­¥éª¤3å’Œæ­¥éª¤4ï¼Œç›´åˆ°ç”Ÿæˆæ ‘åŒ…å«äº†å›¾ä¸­çš„æ‰€æœ‰é¡¶ç‚¹</strong>ã€‚</li></ol><h3 id="Primç®—æ³•C-å®ç°ï¼š">Primç®—æ³•C++å®ç°ï¼š</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;climits&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰è¾¹çš„ç»“æ„ä½“</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Edge</span> &#123;</span><br><span class="line">    <span class="type">int</span> dest, weight;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ç”¨äºæœ€å°å †çš„æ¯”è¾ƒå‡½æ•°</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Compare</span> &#123;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> Edge&amp; a, <span class="type">const</span> Edge&amp; b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a.weight &gt; b.weight;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Primç®—æ³•å®ç°</span></span><br><span class="line"><span class="function">vector&lt;Edge&gt; <span class="title">prim</span><span class="params">(vector&lt;vector&lt;Edge&gt;&gt;&amp; graph, <span class="type">int</span> start)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n = graph.<span class="built_in">size</span>();</span><br><span class="line">    <span class="function">vector&lt;<span class="type">bool</span>&gt; <span class="title">visited</span><span class="params">(n, <span class="literal">false</span>)</span></span>;</span><br><span class="line">    vector&lt;Edge&gt; result;</span><br><span class="line">    priority_queue&lt;Edge, vector&lt;Edge&gt;, Compare&gt; pq;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†èµ·å§‹é¡¶ç‚¹æ ‡è®°ä¸ºå·²è®¿é—®</span></span><br><span class="line">    visited[start] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†èµ·å§‹é¡¶ç‚¹çš„æ‰€æœ‰è¾¹åŠ å…¥æœ€å°å †</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> Edge&amp; edge : graph[start]) &#123;</span><br><span class="line">        pq.<span class="built_in">push</span>(edge);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (!pq.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="comment">// ä»æœ€å°å †ä¸­å–å‡ºæƒå€¼æœ€å°çš„è¾¹</span></span><br><span class="line">        Edge current = pq.<span class="built_in">top</span>();</span><br><span class="line">        pq.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> dest = current.dest;</span><br><span class="line">        <span class="type">int</span> weight = current.weight;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœç›®æ ‡é¡¶ç‚¹æœªè®¿é—®ï¼Œåˆ™å°†è¾¹åŠ å…¥ç”Ÿæˆæ ‘ï¼Œå¹¶å°†ç›®æ ‡é¡¶ç‚¹æ ‡è®°ä¸ºå·²è®¿é—®</span></span><br><span class="line">        <span class="keyword">if</span> (!visited[dest]) &#123;</span><br><span class="line">            result.<span class="built_in">push_back</span>(&#123;dest, weight&#125;);</span><br><span class="line">            visited[dest] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å°†ç›®æ ‡é¡¶ç‚¹çš„æ‰€æœ‰è¾¹åŠ å…¥æœ€å°å †</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">const</span> Edge&amp; edge : graph[dest]) &#123;</span><br><span class="line">                pq.<span class="built_in">push</span>(edge);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n = <span class="number">5</span>; <span class="comment">// èŠ‚ç‚¹æ•°</span></span><br><span class="line">    vector&lt;vector&lt;Edge&gt;&gt; <span class="built_in">graph</span>(n);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ·»åŠ è¾¹ä¿¡æ¯ï¼ˆæ— å‘å›¾ï¼‰</span></span><br><span class="line">    graph[<span class="number">0</span>].<span class="built_in">push_back</span>(&#123;<span class="number">1</span>, <span class="number">2</span>&#125;);</span><br><span class="line">    graph[<span class="number">0</span>].<span class="built_in">push_back</span>(&#123;<span class="number">3</span>, <span class="number">6</span>&#125;);</span><br><span class="line">    graph[<span class="number">1</span>].<span class="built_in">push_back</span>(&#123;<span class="number">0</span>, <span class="number">2</span>&#125;);</span><br><span class="line">    graph[<span class="number">1</span>].<span class="built_in">push_back</span>(&#123;<span class="number">2</span>, <span class="number">3</span>&#125;);</span><br><span class="line">    graph[<span class="number">1</span>].<span class="built_in">push_back</span>(&#123;<span class="number">3</span>, <span class="number">8</span>&#125;);</span><br><span class="line">    graph[<span class="number">2</span>].<span class="built_in">push_back</span>(&#123;<span class="number">1</span>, <span class="number">3</span>&#125;);</span><br><span class="line">    graph[<span class="number">2</span>].<span class="built_in">push_back</span>(&#123;<span class="number">4</span>, <span class="number">5</span>&#125;);</span><br><span class="line">    graph[<span class="number">3</span>].<span class="built_in">push_back</span>(&#123;<span class="number">0</span>, <span class="number">6</span>&#125;);</span><br><span class="line">    graph[<span class="number">3</span>].<span class="built_in">push_back</span>(&#123;<span class="number">1</span>, <span class="number">8</span>&#125;);</span><br><span class="line">    graph[<span class="number">4</span>].<span class="built_in">push_back</span>(&#123;<span class="number">2</span>, <span class="number">5</span>&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> startVertex = <span class="number">0</span>; <span class="comment">// é€‰æ‹©èµ·å§‹é¡¶ç‚¹</span></span><br><span class="line"></span><br><span class="line">    vector&lt;Edge&gt; result = <span class="built_in">prim</span>(graph, startVertex);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¾“å‡ºæœ€å°ç”Ÿæˆæ ‘çš„è¾¹</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Edges in the Minimum Spanning Tree:\\n&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> Edge&amp; edge : result) &#123;</span><br><span class="line">        cout &lt;&lt; startVertex &lt;&lt; <span class="string">&quot; - &quot;</span> &lt;&lt; edge.dest &lt;&lt; <span class="string">&quot; : &quot;</span> &lt;&lt; edge.weight &lt;&lt; <span class="string">&quot;\\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„Primç®—æ³•å®ç°ç¤ºä¾‹ã€‚è¯·æ³¨æ„ï¼ŒPrimç®—æ³•çš„å®ç°å¯èƒ½å› å›¾çš„è¡¨ç¤ºæ–¹å¼è€Œå¼‚ï¼Œä¸Šè¿°ä»£ç ä½¿ç”¨é‚»æ¥è¡¨æ¥è¡¨ç¤ºå›¾ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä½ å¯èƒ½éœ€è¦æ ¹æ®å…·ä½“æƒ…å†µè¿›è¡Œé€‚å½“çš„ä¿®æ”¹ã€‚</p><h1 id="ç¬¬24ç« -å•æºæœ€çŸ­è·¯å¾„">ç¬¬24ç«  å•æºæœ€çŸ­è·¯å¾„</h1><p>æˆ‘ä»¬ç»™å®šä¸€ä¸ªå¸¦æƒé‡çš„æœ‰å‘å›¾<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo stretchy="false">(</mo><mi>V</mi><mo separator="true">,</mo><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G(V,E)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">G</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span></span></span></span> å’Œæƒé‡å‡½æ•°<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo>:</mo><mi>E</mi><mo>â†’</mo><mi mathvariant="bold-italic">R</mi></mrow><annotation encoding="application/x-tex">w:E\to \bm{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.00421em;">R</span></span></span></span></span></span> ï¼Œè¯¥æƒé‡å‡½æ•°å°†æ¯æ¡è¾¹æ˜ å°„åˆ°å®æ•°å€¼çš„æƒé‡ä¸Šã€‚å›¾ä¸­ä¸€æ¡è·¯å¾„<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>=</mo><mo stretchy="false">âŸ¨</mo><msub><mi>v</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>v</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>â‹¯</mo><mtext>â€‰</mtext><mo separator="true">,</mo><msub><mi>v</mi><mi>k</mi></msub><mo stretchy="false">âŸ©</mo></mrow><annotation encoding="application/x-tex">p=\langle v_0,v_1,\cdots,v_k\rangle</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">âŸ¨</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â‹¯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">âŸ©</span></span></span></span> çš„æƒé‡<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">w(p)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mclose">)</span></span></span></span>æ˜¯æ„æˆè¯¥è·¯å¾„çš„æ‰€æœ‰è¾¹çš„æƒé‡ä¹‹å’Œï¼š</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo><mo>=</mo><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>k</mi></msubsup><mi>w</mi><mo stretchy="false">(</mo><msub><mi>v</mi><mrow><mi>i</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>v</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">w(p)=\sum_{i=1}^kw(v_{i-1},v_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2887em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.989em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p><h2 id="æ¾å¼›æ“ä½œï¼ˆrelaxationï¼‰">æ¾å¼›æ“ä½œï¼ˆrelaxationï¼‰</h2><p>ç»´æŒä¸€ä¸ªå±æ€§<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mi mathvariant="normal">.</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">v.d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord">.</span><span class="mord mathnormal">d</span></span></span></span>ï¼Œç”¨æ¥è®°å½•ä»æºèŠ‚ç‚¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span>åˆ°èŠ‚ç‚¹<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span>çš„æœ€çŸ­è·¯å¾„çš„ä¸Šç•Œã€‚</p><figure class="highlight pascal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">INITIALIZE-SINGLE-SOURCE(G,s)</span><br><span class="line"><span class="keyword">for</span> each vertex v \belong G.V</span><br><span class="line">v.d = \infty </span><br><span class="line">v.\pi = <span class="keyword">NIL</span></span><br><span class="line">s.d = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">RELAX(u,v,w)</span><br><span class="line"><span class="keyword">if</span> v.d&gt;u.d+w(u.v)</span><br><span class="line">v.d = u.d+w(u,v)</span><br><span class="line">v.\pi = u</span><br></pre></td></tr></table></figure><h2 id="Bellman-Fordç®—æ³•">Bellman-Fordç®—æ³•</h2><p>Bellman-Fordç®—æ³•æ˜¯ä¸€ç§ç”¨äºè§£å†³å•æºæœ€çŸ­è·¯å¾„é—®é¢˜çš„ç®—æ³•ï¼Œå®ƒå¯ä»¥å¤„ç†å¸¦æœ‰è´Ÿæƒè¾¹çš„å›¾ã€‚ä»¥ä¸‹æ˜¯Bellman-Fordç®—æ³•çš„è¯¦ç»†è¯´æ˜ä»¥åŠä¸€ä¸ªç®€å•çš„C++å®ç°ã€‚</p><h3 id="Bellman-Fordç®—æ³•ç®€ä»‹ï¼š">Bellman-Fordç®—æ³•ç®€ä»‹ï¼š</h3><p>Bellman-Fordç®—æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯é€šè¿‡ä¸æ–­è¿­ä»£ï¼Œæ›´æ–°ä»æºèŠ‚ç‚¹åˆ°å…¶ä»–èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ä¼°è®¡å€¼ï¼Œç›´åˆ°æ‰¾åˆ°æœ€çŸ­è·¯å¾„æˆ–è€…ç¡®å®šå›¾ä¸­å­˜åœ¨è´Ÿæƒç¯ã€‚</p><p>ç®—æ³•æ­¥éª¤ï¼š</p><ol><li>åˆå§‹åŒ–ï¼šå°†æºèŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ä¼°è®¡å€¼è®¾ä¸º0ï¼Œå…¶ä»–èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ä¼°è®¡å€¼è®¾ä¸ºæ­£æ— ç©·å¤§ã€‚</li><li>è¿›è¡Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆ£</mi><mi>V</mi><mi mathvariant="normal">âˆ£</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">|V| - 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">âˆ£</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mord">âˆ£</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>è½®è¿­ä»£ï¼Œå…¶ä¸­<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆ£</mi><mi>V</mi><mi mathvariant="normal">âˆ£</mi></mrow><annotation encoding="application/x-tex">|V|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">âˆ£</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mord">âˆ£</span></span></span></span>æ˜¯å›¾ä¸­èŠ‚ç‚¹çš„æ•°é‡ã€‚</li><li>åœ¨æ¯ä¸€è½®è¿­ä»£ä¸­ï¼Œéå†å›¾ä¸­çš„æ‰€æœ‰è¾¹ï¼Œæ›´æ–°èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ä¼°è®¡å€¼ã€‚</li><li>å¦‚æœåœ¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆ£</mi><mi>V</mi><mi mathvariant="normal">âˆ£</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">|V| - 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">âˆ£</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mord">âˆ£</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>è½®è¿­ä»£åï¼Œä»ç„¶å­˜åœ¨å¯ä»¥æ¾å¼›çš„è¾¹ï¼Œè¯´æ˜å›¾ä¸­å­˜åœ¨è´Ÿæƒç¯ã€‚</li></ol><blockquote><p>ğŸ’¡ æ—¶é—´å¤æ‚åº¦ï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>V</mi><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(VE)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span></span></span></span></p></blockquote><h3 id="C-å®ç°ï¼š">C++å®ç°ï¼š</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Edge</span> &#123;</span><br><span class="line">    <span class="type">int</span> src, dest, weight;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">bellmanFord</span><span class="params">(vector&lt;Edge&gt;&amp; edges, <span class="type">int</span> V, <span class="type">int</span> E, <span class="type">int</span> src)</span> </span>&#123;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">distance</span><span class="params">(V, INT_MAX)</span></span>;</span><br><span class="line">    distance[src] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Relaxation step</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= V - <span class="number">1</span>; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; E; ++j) &#123;</span><br><span class="line">            <span class="type">int</span> u = edges[j].src;</span><br><span class="line">            <span class="type">int</span> v = edges[j].dest;</span><br><span class="line">            <span class="type">int</span> w = edges[j].weight;</span><br><span class="line">            <span class="keyword">if</span> (distance[u] != INT_MAX &amp;&amp; distance[u] + w &lt; distance[v]) &#123;</span><br><span class="line">                distance[v] = distance[u] + w;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check for negative-weight cycles</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; E; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> u = edges[i].src;</span><br><span class="line">        <span class="type">int</span> v = edges[i].dest;</span><br><span class="line">        <span class="type">int</span> w = edges[i].weight;</span><br><span class="line">        <span class="keyword">if</span> (distance[u] != INT_MAX &amp;&amp; distance[u] + w &lt; distance[v]) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;Graph contains negative weight cycle!&quot;</span> &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Print the result</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Shortest distances from source &quot;</span> &lt;&lt; src &lt;&lt; <span class="string">&quot; to all other vertices:&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; V; ++i) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Vertex &quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot;: &quot;</span> &lt;&lt; distance[i] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> V, E; <span class="comment">// V is the number of vertices, E is the number of edges</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Enter the number of vertices and edges: &quot;</span>;</span><br><span class="line">    cin &gt;&gt; V &gt;&gt; E;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;Edge&gt; <span class="title">edges</span><span class="params">(E)</span></span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Enter the source, destination, and weight for each edge:&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; E; ++i) &#123;</span><br><span class="line">        cin &gt;&gt; edges[i].src &gt;&gt; edges[i].dest &gt;&gt; edges[i].weight;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> src;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Enter the source vertex: &quot;</span>;</span><br><span class="line">    cin &gt;&gt; src;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">bellmanFord</span>(edges, V, E, src);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šè¿°C++ä»£ç ä¸­ï¼Œ<code>Edge</code>ç»“æ„ä½“è¡¨ç¤ºå›¾çš„è¾¹ï¼Œ<code>bellmanFord</code>å‡½æ•°å®ç°äº†Bellman-Fordç®—æ³•ï¼Œå…¶ä¸­<code>distance</code>æ•°ç»„å­˜å‚¨äº†ä»æºèŠ‚ç‚¹åˆ°å„ä¸ªèŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ä¼°è®¡å€¼ã€‚åœ¨ç®—æ³•ç»“æŸåï¼Œå®ƒä¼šè¾“å‡ºä»æºèŠ‚ç‚¹åˆ°æ‰€æœ‰å…¶ä»–èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚å¦‚æœå­˜åœ¨è´Ÿæƒç¯ï¼Œåˆ™ä¼šè¾“å‡ºç›¸åº”çš„æç¤ºã€‚</p><h2 id="Dijkstraç®—æ³•">Dijkstraç®—æ³•</h2><p>Dijkstraç®—æ³•æ˜¯ä¸€ç§ç”¨äºè§£å†³å•æºæœ€çŸ­è·¯å¾„é—®é¢˜çš„è´ªå¿ƒç®—æ³•ã€‚å®ƒé€šè¿‡ä¸æ–­é€‰æ‹©è·ç¦»æºèŠ‚ç‚¹æœ€è¿‘çš„èŠ‚ç‚¹æ¥é€æ­¥ç¡®å®šæœ€çŸ­è·¯å¾„ã€‚ä»¥ä¸‹æ˜¯Dijkstraç®—æ³•çš„è¯¦ç»†è¯´æ˜ä»¥åŠä¸€ä¸ªç®€å•çš„C++å®ç°ã€‚</p><blockquote><p>ğŸ’¡ è¯¥ç®—æ³•è¦æ±‚æ‰€æœ‰è¾¹çš„æƒé‡éƒ½ä¸ºéè´Ÿå€¼</p></blockquote><h3 id="Dijkstraç®—æ³•ç®€ä»‹ï¼š">Dijkstraç®—æ³•ç®€ä»‹ï¼š</h3><p>Dijkstraç®—æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯ç»´æŠ¤ä¸€ä¸ªé›†åˆï¼Œå…¶ä¸­åŒ…å«äº†å·²ç»æ‰¾åˆ°æœ€çŸ­è·¯å¾„çš„èŠ‚ç‚¹ï¼Œä»¥åŠä¸€ä¸ªæ•°ç»„ç”¨äºå­˜å‚¨ä»æºèŠ‚ç‚¹åˆ°å…¶ä»–èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ä¼°è®¡å€¼ã€‚åœ¨æ¯ä¸€æ­¥ï¼Œé€‰æ‹©è·ç¦»æºèŠ‚ç‚¹æœ€è¿‘çš„æœªæ ‡è®°èŠ‚ç‚¹ï¼Œå¹¶é€šè¿‡è¿™ä¸ªèŠ‚ç‚¹æ›´æ–°å…¶ä»–èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ä¼°è®¡å€¼ã€‚é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°æ‰¾åˆ°ä»æºèŠ‚ç‚¹åˆ°ç›®æ ‡èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„æˆ–è€…æ‰€æœ‰èŠ‚ç‚¹éƒ½è¢«æ ‡è®°ã€‚</p><p>ç®—æ³•æ­¥éª¤ï¼š</p><ol><li>åˆå§‹åŒ–ï¼šå°†æºèŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ä¼°è®¡å€¼è®¾ä¸º0ï¼Œå…¶ä»–èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ä¼°è®¡å€¼è®¾ä¸ºæ­£æ— ç©·å¤§ã€‚</li><li>åœ¨æ¯ä¸€æ­¥ä¸­ï¼Œé€‰æ‹©æœªæ ‡è®°èŠ‚ç‚¹ä¸­è·ç¦»æºèŠ‚ç‚¹æœ€è¿‘çš„èŠ‚ç‚¹ï¼Œæ ‡è®°å®ƒï¼Œå¹¶æ›´æ–°é€šè¿‡è¿™ä¸ªèŠ‚ç‚¹åˆ°å…¶ä»–æœªæ ‡è®°èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ä¼°è®¡å€¼ã€‚</li><li>é‡å¤æ­¥éª¤2ï¼Œç›´åˆ°æ‰¾åˆ°ä»æºèŠ‚ç‚¹åˆ°ç›®æ ‡èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„æˆ–è€…æ‰€æœ‰èŠ‚ç‚¹éƒ½è¢«æ ‡è®°ã€‚</li></ol><h3 id="C-å®ç°ï¼š-2">C++å®ç°ï¼š</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;climits&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Edge</span> &#123;</span><br><span class="line">    <span class="type">int</span> dest, weight;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Graph</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> V; <span class="comment">// Number of vertices</span></span><br><span class="line">    vector&lt;vector&lt;Edge&gt;&gt; adj; <span class="comment">// Adjacency list</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">Graph</span>(<span class="type">int</span> V) &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;V = V;</span><br><span class="line">        adj.<span class="built_in">resize</span>(V);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">addEdge</span><span class="params">(<span class="type">int</span> src, <span class="type">int</span> dest, <span class="type">int</span> weight)</span> </span>&#123;</span><br><span class="line">        Edge edge = &#123;dest, weight&#125;;</span><br><span class="line">        adj[src].<span class="built_in">push_back</span>(edge);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">dijkstra</span><span class="params">(<span class="type">int</span> src)</span> </span>&#123;</span><br><span class="line">        priority_queue&lt;pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;, vector&lt;pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt;, greater&lt;pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt;&gt; pq;</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">distance</span><span class="params">(V, INT_MAX)</span></span>;</span><br><span class="line"></span><br><span class="line">        pq.<span class="built_in">push</span>(&#123;<span class="number">0</span>, src&#125;);</span><br><span class="line">        distance[src] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!pq.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            <span class="type">int</span> u = pq.<span class="built_in">top</span>().second;</span><br><span class="line">            pq.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">const</span> Edge&amp; edge : adj[u]) &#123;</span><br><span class="line">                <span class="type">int</span> v = edge.dest;</span><br><span class="line">                <span class="type">int</span> w = edge.weight;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (distance[u] != INT_MAX &amp;&amp; distance[u] + w &lt; distance[v]) &#123;</span><br><span class="line">                    distance[v] = distance[u] + w;</span><br><span class="line">                    pq.<span class="built_in">push</span>(&#123;distance[v], v&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Print the result</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Shortest distances from source &quot;</span> &lt;&lt; src &lt;&lt; <span class="string">&quot; to all other vertices:&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; V; ++i) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;Vertex &quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot;: &quot;</span> &lt;&lt; distance[i] &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> V, E; <span class="comment">// V is the number of vertices, E is the number of edges</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Enter the number of vertices and edges: &quot;</span>;</span><br><span class="line">    cin &gt;&gt; V &gt;&gt; E;</span><br><span class="line"></span><br><span class="line">    <span class="function">Graph <span class="title">graph</span><span class="params">(V)</span></span>;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Enter the source, destination, and weight for each edge:&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; E; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> src, dest, weight;</span><br><span class="line">        cin &gt;&gt; src &gt;&gt; dest &gt;&gt; weight;</span><br><span class="line">        graph.<span class="built_in">addEdge</span>(src, dest, weight);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> src;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Enter the source vertex: &quot;</span>;</span><br><span class="line">    cin &gt;&gt; src;</span><br><span class="line"></span><br><span class="line">    graph.<span class="built_in">dijkstra</span>(src);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šè¿°C++ä»£ç ä¸­ï¼Œ<code>Edge</code>ç»“æ„ä½“è¡¨ç¤ºå›¾çš„è¾¹ï¼Œ<code>Graph</code>ç±»å°è£…äº†å›¾çš„é‚»æ¥åˆ—è¡¨å’ŒDijkstraç®—æ³•çš„å®ç°ã€‚åœ¨ç®—æ³•ç»“æŸåï¼Œå®ƒä¼šè¾“å‡ºä»æºèŠ‚ç‚¹åˆ°æ‰€æœ‰å…¶ä»–èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚</p><h3 id="é“¾å¼å‰å‘æ˜Ÿ">é“¾å¼å‰å‘æ˜Ÿ</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn (int)1e6 + 10</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> inf 2e9</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pr pair<span class="string">&lt;int, int&gt;</span></span></span><br><span class="line">priority_queue&lt;pr, vector&lt;pr&gt;, greater&lt;pr&gt;&gt; q;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">edgex</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> to;</span><br><span class="line">    <span class="type">int</span> next;</span><br><span class="line">    <span class="type">int</span> weight;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> head[maxn];</span><br><span class="line">edgex edge[maxn * <span class="number">2</span>];</span><br><span class="line"><span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v, <span class="type">int</span> w)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    edge[++cnt].next = head[u];</span><br><span class="line">    edge[cnt].to = v;</span><br><span class="line">    edge[cnt].weight = w;</span><br><span class="line">    head[u] = cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> dis[maxn];</span><br><span class="line"><span class="type">bool</span> visit[maxn];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="type">int</span> u, v, w;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v &gt;&gt; w;</span><br><span class="line">        <span class="built_in">add</span>(u, v, w);</span><br><span class="line">        <span class="built_in">add</span>(v, u, w);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        dis[i] = inf;</span><br><span class="line">    &#125;</span><br><span class="line">    q.<span class="built_in">push</span>(<span class="built_in">make_pair</span>(<span class="number">0</span>, <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">while</span> (!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">auto</span> it = q.<span class="built_in">top</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="type">int</span> num = it.second;</span><br><span class="line">        <span class="keyword">if</span> (visit[num])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        visit[num] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = head[num]; i; i = edge[i].next)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> to = edge[i].to;</span><br><span class="line">            <span class="type">int</span> weight = edge[i].weight;</span><br><span class="line">            dis[to] = <span class="built_in">min</span>(dis[to], <span class="built_in">max</span>(weight, dis[num]));</span><br><span class="line">            q.<span class="built_in">push</span>(<span class="built_in">make_pair</span>(dis[to], to));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (dis[i] == inf)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;-1\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; dis[i] &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ç¬¬25ç« -æ‰€æœ‰èŠ‚ç‚¹å¯¹çš„æœ€çŸ­è·¯å¾„é—®é¢˜">ç¬¬25ç«  æ‰€æœ‰èŠ‚ç‚¹å¯¹çš„æœ€çŸ­è·¯å¾„é—®é¢˜</h1><h2 id="Floyd-Warshallç®—æ³•">Floyd-Warshallç®—æ³•</h2><p>Floyd-Warshallç®—æ³•æ˜¯ä¸€ç§ç»å…¸çš„å›¾ç®—æ³•ï¼Œç”¨äºæ±‚è§£æ‰€æœ‰ç‚¹å¯¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„ã€‚è¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºO<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msup><mi>V</mi><mn>3</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(V^3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼Œå…¶ä¸­Væ˜¯å›¾ä¸­é¡¶ç‚¹çš„æ•°é‡ã€‚å®ƒåŸºäºåŠ¨æ€è§„åˆ’çš„æ€æƒ³ï¼Œ<strong>é€‚ç”¨äºæœ‰å‘å›¾æˆ–æ— å‘å›¾ï¼Œå¯ä»¥å¤„ç†å¸¦æœ‰è´Ÿæƒè¾¹ä½†æ— è´Ÿæƒç¯è·¯çš„å›¾ã€‚</strong></p><hr><p><strong>åŠ¨æ€è§„åˆ’çš„æ€è·¯ï¼š</strong></p><pre><code>æ±‚å›¾ä¸Šä¸¤ç‚¹ iã€j ä¹‹é—´çš„æœ€çŸ­è·ç¦»ï¼Œå¯ä»¥æŒ‰â€œä»å°å›¾åˆ°å…¨å›¾â€çš„æ­¥éª¤ï¼Œåœ¨é€æ­¥æ‰©å¤§å›¾çš„è¿‡ç¨‹ä¸­è®¡ç®—å’Œæ›´æ–°æœ€çŸ­è·¯ã€‚æƒ³è±¡å›¾ä¸­çš„æ¯ä¸ªç‚¹æ˜¯ä¸€ä¸ªç¯ï¼Œå¼€å§‹æ—¶æ‰€æœ‰ç¯éƒ½æ˜¯ç­çš„ã€‚ç„¶åé€ä¸ªç‚¹äº®ç¯ï¼Œæ¯ç‚¹äº®ä¸€ä¸ªç¯ï¼Œå°±é‡æ–°è®¡ç®— iã€j çš„æœ€çŸ­è·¯ï¼Œè¦æ±‚è·¯å¾„åªèƒ½ç»è¿‡ç‚¹äº®çš„ç¯ã€‚æ‰€æœ‰ç¯éƒ½ç‚¹äº®åï¼Œè®¡ç®—ç»“æŸã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç‚¹äº®ç¬¬ k ä¸ªç¯æ—¶ï¼Œèƒ½ç”¨åˆ° 1âˆ¼kâˆ’1 ä¸ªäº®ç¯çš„ç»“æœã€‚å®šä¹‰çŠ¶æ€ä¸º dp[k][i][j]ï¼Œiã€jã€k æ˜¯ç‚¹çš„ç¼–å·ï¼ŒèŒƒå›´ 1âˆ¼n ã€‚çŠ¶æ€ dp[k][i][j] è¡¨ç¤ºåœ¨åŒ…å« 1âˆ¼k ç‚¹çš„å­å›¾ä¸Šï¼Œç‚¹å¯¹ iã€j ä¹‹é—´çš„æœ€çŸ­è·¯ã€‚å½“ä»å­å›¾ 1âˆ¼kâˆ’1 æ‰©å±•åˆ°å­å›¾ 1âˆ¼k æ—¶ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹è¿™æ ·è®¾è®¡ï¼š</code></pre><blockquote><p>ğŸ’¡ dp[k][i][j] = min(dp[k-1][i][j], dp[k-1][i][k] + dp[k-1][k][j])</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/bush-cn/TyporaImages@main/img/2025/07/10/20250710223227.png" alt="Untitled"></p><pre><code>è®¡ç®—è¿‡ç¨‹å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè™šçº¿åœ†åœˆå†…æ˜¯åŒ…å«äº† 1âˆ¼kâˆ’1 ç‚¹çš„å­å›¾ã€‚æ–¹ç¨‹ä¸­çš„ dp[kâˆ’1][i][j] æ˜¯è™šçº¿å­å›¾å†…çš„ç‚¹å¯¹ iã€j çš„æœ€çŸ­è·¯ï¼›dp[kâˆ’1][i][k]+dp[kâˆ’1][k][j] æ˜¯ç»è¿‡ k ç‚¹çš„æ–°è·¯å¾„çš„é•¿åº¦ï¼Œå³è¿™æ¡è·¯å¾„ä» i å‡ºå‘ï¼Œå…ˆåˆ° kï¼Œå†ä» k åˆ°ç»ˆç‚¹ jã€‚æ¯”è¾ƒä¸ç»è¿‡ k çš„æœ€çŸ­è·¯å¾„ dp[kâˆ’1][i][j] å’Œç»è¿‡ k çš„æ–°è·¯å¾„ï¼Œè¾ƒå°è€…å°±æ˜¯æ–°çš„ dp[k][i][j]ã€‚æ¯æ¬¡æ‰©å±•ä¸€ä¸ªæ–°ç‚¹ k æ—¶ï¼Œéƒ½èƒ½ç”¨åˆ° 1âˆ¼kâˆ’1 çš„ç»“æœï¼Œä»è€Œæé«˜äº†æ•ˆç‡ã€‚è¿™å°±æ˜¯**åŠ¨æ€è§„åˆ’**çš„æ–¹æ³•ã€‚å½“ k ä» 1 é€æ­¥æ‰©å±•åˆ° n æ—¶ï¼Œæœ€åå¾—åˆ°çš„ dp[n][i][j] æ˜¯ç‚¹å¯¹ iã€j ä¹‹é—´çš„æœ€çŸ­è·¯å¾„é•¿åº¦ã€‚ç”±äº i å’Œ j æ˜¯å›¾ä¸­æ‰€æœ‰çš„ç‚¹å¯¹ï¼Œæ‰€ä»¥èƒ½å¾—åˆ°æ‰€æœ‰ç‚¹å¯¹ä¹‹é—´çš„æœ€çŸ­è·¯ã€‚</code></pre><hr><h3 id="ç®—æ³•æ­¥éª¤ï¼š">ç®—æ³•æ­¥éª¤ï¼š</h3><ol><li><strong>åˆå§‹åŒ–</strong>ï¼šåˆ›å»ºä¸€ä¸ªäºŒç»´æ•°ç»„ <code>dist[][]</code> ç”¨äºå­˜å‚¨èŠ‚ç‚¹ä¹‹é—´çš„æœ€çŸ­è·ç¦»ã€‚åˆå§‹åŒ–è¿™ä¸ªæ•°ç»„ï¼Œä½¿å¾— <code>dist[i][j]</code> è¡¨ç¤ºèŠ‚ç‚¹ <code>i</code> åˆ°èŠ‚ç‚¹ <code>j</code> çš„æœ€çŸ­è·¯å¾„è·ç¦»ã€‚å¦‚æœä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æœ‰ç›´æ¥çš„è¾¹ï¼Œåˆ™ <code>dist[i][j]</code> è®¾ä¸ºè¿™æ¡è¾¹çš„æƒé‡å€¼ï¼Œå¦åˆ™è®¾ä¸ºä¸€ä¸ªè¾ƒå¤§çš„æ•°æˆ–è€…æ— ç©·å¤§ã€‚</li><li><strong>è¿›è¡Œè¿­ä»£</strong>ï¼šä½¿ç”¨ä¸‰é‡å¾ªç¯éå†æ‰€æœ‰èŠ‚ç‚¹å¯¹ <code>(i, j)</code>ï¼Œåœ¨æ¯æ¬¡è¿­ä»£ä¸­å°è¯•æ‰¾åˆ°èŠ‚ç‚¹ <code>k</code> ä½œä¸ºä¸­é—´èŠ‚ç‚¹ï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨ä¸€æ¡è·¯å¾„ç»è¿‡èŠ‚ç‚¹ <code>k</code> ä½¿å¾—ä» <code>i</code> åˆ° <code>j</code> çš„è·¯å¾„é•¿åº¦å˜çŸ­ã€‚æ›´æ–° <code>dist[i][j]</code> ä¸º <code>min(dist[i][j], dist[i][k] + dist[k][j])</code>ã€‚</li></ol><h3 id="ç”¨é‚»æ¥çŸ©é˜µè¡¨ç¤ºå›¾ï¼š">ç”¨é‚»æ¥çŸ©é˜µè¡¨ç¤ºå›¾ï¼š</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INF 99999</span></span><br><span class="line"></span><br><span class="line">vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">floydWarshall</span>(vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; graph, <span class="type">int</span> V) &#123;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; dist = graph;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; V; k++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; V; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; V; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (dist[i][k] != INF &amp;&amp; dist[k][j] != INF &amp;&amp; dist[i][k] + dist[k][j] &lt; dist[i][j]) &#123;</span><br><span class="line">                    dist[i][j] = dist[i][k] + dist[k][j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dist;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> V;</span><br><span class="line">    cin &gt;&gt; V;</span><br><span class="line"></span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">graph</span>(V, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(V, INF));</span><br><span class="line"></span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; dist = <span class="built_in">floydWarshall</span>(graph, V);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç¤ºä¾‹é¦–å…ˆæ¥å—ç”¨æˆ·è¾“å…¥å›¾çš„èŠ‚ç‚¹æ•°å’Œ<strong>é‚»æ¥çŸ©é˜µ</strong>ï¼Œç„¶åä½¿ç”¨ Floyd-Warshall ç®—æ³•è®¡ç®—æœ€çŸ­è·¯å¾„çŸ©é˜µï¼Œå¹¶å°†ç»“æœè¾“å‡ºã€‚è®°å¾—å°†è¾“å…¥çš„è¾¹æƒé‡çŸ©é˜µä¸­ä¸å­˜åœ¨çš„è¾¹è¡¨ç¤ºä¸ºINFæˆ–è€…ä¸€ä¸ªè¶³å¤Ÿå¤§çš„æ•°ã€‚</p><h3 id="C5-ä¸ŠæœºAé¢˜ï¼šï¼ˆä¸‹é¢çš„ä»£ç è¿˜å¯ä»¥è¾“å‡ºæœ€çŸ­è·¯å¾„ï¼‰">C5 ä¸ŠæœºAé¢˜ï¼šï¼ˆä¸‹é¢çš„ä»£ç è¿˜å¯ä»¥è¾“å‡ºæœ€çŸ­è·¯å¾„ï¼‰</h3><p>æ­¤é¢˜ç‚¹çš„ä¸ªæ•°ä¸å¤šï¼ˆä¸è¶…è¿‡300ï¼‰ï¼Œä½†æ˜¯éœ€è¦æŸ¥è¯¢ä»»æ„ä¸¤ç‚¹çš„æœ€çŸ­è·ç¦»ï¼Œå¹¶ä¸”æŸ¥è¯¢æ¬¡æ•°åœ¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>10</mn><mn>5</mn></msup></mrow><annotation encoding="application/x-tex">10^5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span>ï¼Œå› æ­¤ç‰¹åˆ«é€‚åˆç”¨<strong>Floyd-Warshall</strong>ç®—æ³•ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Max 303 <span class="comment">// æœ€å¤§ç‚¹æ•°</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> INF = <span class="number">1e12</span> + <span class="number">1</span>; <span class="comment">// æƒå€¼æœ€å¤§ä¸º10^9ï¼ŒINFè¦å¼€å¾—æ¯”10^9å¤§å‡ ä¸ªæ•°é‡çº§</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">AMGraph</span> &#123;<span class="comment">//å®šä¹‰é‚»æ¥çŸ©é˜µ</span></span><br><span class="line"><span class="type">int</span> vex, arc;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> arcs[Max][Max];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> dis[Max][Max];</span><br><span class="line"><span class="type">int</span>  path[Max][Max];<span class="comment">//diså­˜æœ€çŸ­è·¯ç¨‹ï¼Œpathä¿å­˜è·¯å¾„</span></span><br><span class="line"><span class="comment">// path[i][j] = kè¡¨ç¤ºä»iåˆ°kç»è¿‡çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ä¸ºkï¼Œå¯ä»¥é€’å½’path[i][k]æ±‚å‡ºå®Œæ•´è·¯å¾„</span></span><br><span class="line"><span class="comment">// è‹¥kä¸º-1è¡¨ç¤ºiå’Œjä¸è¿é€š</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Floyd</span><span class="params">(AMGraph &amp;G)</span><span class="comment">//å¼—æ´›ä¼Šå¾·ç®—æ³•</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= G.vex; i++)<span class="comment">//åˆå§‹åŒ–diså’Œpath</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= G.vex; j++)</span><br><span class="line">&#123;</span><br><span class="line">dis[i][j] = G.arcs[i][j];</span><br><span class="line"><span class="keyword">if</span> (dis[i][j] != INF&amp;&amp;i != j) path[i][j] = i;</span><br><span class="line"><span class="keyword">else</span> path[i][j] = <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***************Floydæ ¸å¿ƒç®—æ³•****************/</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>; k&lt;=G.vex; k++)<span class="comment">//éå†æ¯ä¸ªç‚¹</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=G.vex; i++)<span class="comment">//éå†æ¯æ¡è¾¹</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= G.vex; j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (dis[i][k] + dis[k][j] &lt; dis[i][j]) &#123;</span><br><span class="line">dis[i][j] = dis[i][k] + dis[k][j];<span class="comment">//æ¾å¼›æ“ä½œ</span></span><br><span class="line">path[i][j] = k;<span class="comment">//ä¿å­˜jå‰é©±ç»“ç‚¹k</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">putin</span><span class="params">(AMGraph &amp;G)</span><span class="comment">//è¾“å…¥å›¾</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> u, v, w;</span><br><span class="line"></span><br><span class="line">cin &gt;&gt; G.vex &gt;&gt; G.arc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= G.vex; i++)<span class="comment">//åˆå§‹åŒ–é‚»æ¥çŸ©é˜µ</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= G.vex; j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (i == j) G.arcs[i][j] = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">else</span> G.arcs[i][j] = INF;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; G.arc; i++)</span><br><span class="line">&#123;</span><br><span class="line">cin &gt;&gt; u &gt;&gt; v &gt;&gt; w;</span><br><span class="line">        <span class="keyword">if</span>(w &lt; G.arcs[u][v])</span><br><span class="line">    G.arcs[u][v] = w;</span><br><span class="line"><span class="comment">//G.arcs[v][u] = w;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>), cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">AMGraph G;</span><br><span class="line"><span class="built_in">putin</span>(G);</span><br><span class="line"><span class="built_in">Floyd</span>(G);</span><br><span class="line">    <span class="type">int</span> q, u, v;</span><br><span class="line">    cin &gt;&gt; q;</span><br><span class="line">    <span class="keyword">while</span>(q--)&#123;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        <span class="keyword">if</span>((u != v) &amp;&amp; (path[u][v] == <span class="number">-1</span>))&#123;</span><br><span class="line">            cout &lt;&lt; <span class="number">-1</span> &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            cout &lt;&lt; dis[u][v] &lt;&lt; endl;</span><br><span class="line">        &#125;        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ç¬¬26ç« -æœ€å¤§æµ">ç¬¬26ç«  æœ€å¤§æµ</h1><h2 id="EKï¼ˆEdmondâ€”Karpï¼‰ç®—æ³•">EKï¼ˆEdmondâ€”Karpï¼‰ç®—æ³•</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> arraysize 201</span></span><br><span class="line"><span class="type">int</span> maxData = <span class="number">0x7fffffff</span>;</span><br><span class="line"><span class="type">int</span> capacity[arraysize][arraysize]; <span class="comment">//è®°å½•æ®‹ç•™ç½‘ç»œçš„å®¹é‡</span></span><br><span class="line"><span class="type">int</span> flow[arraysize];                <span class="comment">//æ ‡è®°ä»æºç‚¹åˆ°å½“å‰èŠ‚ç‚¹å®é™…è¿˜å‰©å¤šå°‘æµé‡å¯ç”¨</span></span><br><span class="line"><span class="type">int</span> pre[arraysize];                 <span class="comment">//æ ‡è®°åœ¨è¿™æ¡è·¯å¾„ä¸Šå½“å‰èŠ‚ç‚¹çš„å‰é©±,åŒæ—¶æ ‡è®°è¯¥èŠ‚ç‚¹æ˜¯å¦åœ¨é˜Ÿåˆ—ä¸­</span></span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line">queue&lt;<span class="type">int</span>&gt; myqueue;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">BFS</span><span class="params">(<span class="type">int</span> src,<span class="type">int</span> des)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> i,j;</span><br><span class="line">    <span class="keyword">while</span>(!myqueue.<span class="built_in">empty</span>())       <span class="comment">//é˜Ÿåˆ—æ¸…ç©º</span></span><br><span class="line">        myqueue.<span class="built_in">pop</span>();</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;m<span class="number">+1</span>;++i)</span><br><span class="line">    &#123;</span><br><span class="line">        pre[i]=<span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    pre[src]=<span class="number">0</span>;</span><br><span class="line">    flow[src]= maxData;</span><br><span class="line">    myqueue.<span class="built_in">push</span>(src);</span><br><span class="line">    <span class="keyword">while</span>(!myqueue.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> index = myqueue.<span class="built_in">front</span>();</span><br><span class="line">        myqueue.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">if</span>(index == des)            <span class="comment">//æ‰¾åˆ°äº†å¢å¹¿è·¯å¾„</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;m<span class="number">+1</span>;++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(i!=src &amp;&amp; capacity[index][i]&gt;<span class="number">0</span> &amp;&amp; pre[i]==<span class="number">-1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                 pre[i] = index; <span class="comment">//è®°å½•å‰é©±</span></span><br><span class="line">                 flow[i] = <span class="built_in">min</span>(capacity[index][i],flow[index]);   <span class="comment">//å…³é”®ï¼šè¿­ä»£çš„æ‰¾åˆ°å¢é‡</span></span><br><span class="line">                 myqueue.<span class="built_in">push</span>(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(pre[des]==<span class="number">-1</span>)      <span class="comment">//æ®‹ç•™å›¾ä¸­ä¸å†å­˜åœ¨å¢å¹¿è·¯å¾„</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> flow[des];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">maxFlow</span><span class="params">(<span class="type">int</span> src,<span class="type">int</span> des)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> increasement= <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> sumflow = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>((increasement=<span class="built_in">BFS</span>(src,des))!=<span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">         <span class="type">int</span> k = des;          <span class="comment">//åˆ©ç”¨å‰é©±å¯»æ‰¾è·¯å¾„</span></span><br><span class="line">         <span class="keyword">while</span>(k!=src)</span><br><span class="line">         &#123;</span><br><span class="line">              <span class="type">int</span> last = pre[k];</span><br><span class="line">              capacity[last][k] -= increasement; <span class="comment">//æ”¹å˜æ­£å‘è¾¹çš„å®¹é‡</span></span><br><span class="line">              capacity[k][last] += increasement; <span class="comment">//æ”¹å˜åå‘è¾¹çš„å®¹é‡</span></span><br><span class="line">              k = last;</span><br><span class="line">         &#125;</span><br><span class="line">         sumflow += increasement;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sumflow;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> i,j;</span><br><span class="line">    <span class="type">int</span> start,end,ci;</span><br><span class="line">    <span class="keyword">while</span>(cin&gt;&gt;n&gt;&gt;m)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(capacity,<span class="number">0</span>,<span class="built_in">sizeof</span>(capacity));</span><br><span class="line">        <span class="built_in">memset</span>(flow,<span class="number">0</span>,<span class="built_in">sizeof</span>(flow));</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;++i)</span><br><span class="line">        &#123;</span><br><span class="line">            cin&gt;&gt;start&gt;&gt;end&gt;&gt;ci;</span><br><span class="line">            <span class="keyword">if</span>(start == end)               <span class="comment">//è€ƒè™‘èµ·ç‚¹ç»ˆç‚¹ç›¸åŒçš„æƒ…å†µ</span></span><br><span class="line">               <span class="keyword">continue</span>;</span><br><span class="line">            capacity[start][end] +=ci;     <span class="comment">//æ­¤å¤„æ³¨æ„å¯èƒ½å‡ºç°å¤šæ¡åŒä¸€èµ·ç‚¹ç»ˆç‚¹çš„æƒ…å†µ</span></span><br><span class="line">        &#125;</span><br><span class="line">        cout&lt;&lt;<span class="built_in">maxFlow</span>(<span class="number">1</span>,m)&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Ford-Fulkersonç®—æ³•">Ford-Fulkersonç®—æ³•</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> map[<span class="number">300</span>][<span class="number">300</span>];</span><br><span class="line"><span class="type">int</span> used[<span class="number">300</span>];</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> INF = <span class="number">1000000000</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> s,<span class="type">int</span> t,<span class="type">int</span> f)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(s == t) <span class="keyword">return</span> f;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span> ; i &lt;= n ; i ++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(map[s][i] &gt; <span class="number">0</span> &amp;&amp; !used[i]) &#123;</span><br><span class="line">            used[i] = <span class="literal">true</span>;</span><br><span class="line">            <span class="type">int</span> d = <span class="built_in">dfs</span>(i,t,<span class="built_in">min</span>(f,map[s][i]));</span><br><span class="line">            <span class="keyword">if</span>(d &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                map[s][i] -= d;</span><br><span class="line">                map[i][s] += d;</span><br><span class="line">                <span class="keyword">return</span> d;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">maxflow</span><span class="params">(<span class="type">int</span> s,<span class="type">int</span> t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> flow = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(used,<span class="number">0</span>,<span class="built_in">sizeof</span>(used));</span><br><span class="line">        <span class="type">int</span> f = <span class="built_in">dfs</span>(s,t,INF);<span class="comment">//ä¸æ–­æ‰¾ä»såˆ°tçš„å¢å¹¿è·¯</span></span><br><span class="line">        <span class="keyword">if</span>(f == <span class="number">0</span>) <span class="keyword">return</span> flow;<span class="comment">//æ‰¾ä¸åˆ°äº†å°±å›å»</span></span><br><span class="line">        flow += f;<span class="comment">//æ‰¾åˆ°ä¸€ä¸ªæµé‡fçš„è·¯</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;m,&amp;n) != EOF) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(map,<span class="number">0</span>,<span class="built_in">sizeof</span>(map));</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ; i &lt; m ; i ++) &#123;</span><br><span class="line">            <span class="type">int</span> from,to,cap;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;from,&amp;to,&amp;cap);</span><br><span class="line">            map[from][to] += cap;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="built_in">maxflow</span>(<span class="number">1</span>,n) &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;&lt;/span&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Dinicç®—æ³•">Dinicç®—æ³•</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> <span class="type">const</span> inf = <span class="number">0x7fffffff</span>;</span><br><span class="line"><span class="type">int</span> <span class="type">const</span> MAX = <span class="number">105</span>;</span><br><span class="line"><span class="type">int</span> n, m; </span><br><span class="line"><span class="type">int</span> s, t;</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> c[MAX][MAX], dep[MAX];<span class="comment">//dep[MAX]ä»£è¡¨å½“å‰å±‚æ•°</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">bfs</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t)</span><span class="comment">//é‡æ–°å»ºå›¾ï¼ŒæŒ‰å±‚æ¬¡å»ºå›¾</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">    <span class="built_in">memset</span>(dep, <span class="number">-1</span>, <span class="built_in">sizeof</span>(dep));</span><br><span class="line">    dep[s] = <span class="number">0</span>;</span><br><span class="line">    q.<span class="built_in">push</span>(s);</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">        <span class="type">int</span> u = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> v = <span class="number">1</span>; v &lt;= n; v++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(c[u][v] &gt; <span class="number">0</span> &amp;&amp; dep[v] == <span class="number">-1</span>)&#123;<span class="comment">//å¦‚æœå¯ä»¥åˆ°è¾¾ä¸”è¿˜æ²¡æœ‰è®¿é—®ï¼Œå¯ä»¥åˆ°è¾¾çš„æ¡ä»¶æ˜¯å‰©ä½™å®¹é‡å¤§äº0ï¼Œæ²¡æœ‰è®¿é—®çš„æ¡ä»¶æ˜¯å½“å‰å±‚æ•°è¿˜æœªçŸ¥</span></span><br><span class="line">                dep[v] = dep[u] + <span class="number">1</span>;</span><br><span class="line">                q.<span class="built_in">push</span>(v);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dep[t] != <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">long</span> <span class="type">long</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u, <span class="type">long</span> <span class="type">long</span> mi, <span class="type">int</span> t)</span><span class="comment">//æŸ¥æ‰¾è·¯å¾„ä¸Šçš„æœ€å°æµé‡</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(u == t)</span><br><span class="line">        <span class="keyword">return</span> mi;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> tmp;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> v = <span class="number">1</span>; v &lt;= n; v++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(c[u][v] &gt; <span class="number">0</span> &amp;&amp; dep[v] == dep[u] + <span class="number">1</span>  &amp;&amp; (tmp = <span class="built_in">dfs</span>(v, <span class="built_in">min</span>(mi, c[u][v]), t)))&#123;</span><br><span class="line">            c[u][v] -= tmp;</span><br><span class="line">            c[v][u] += tmp;</span><br><span class="line">            <span class="keyword">return</span> tmp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">long</span> <span class="type">long</span> <span class="title">dinic</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> ans = <span class="number">0</span>, tmp;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">bfs</span>(s, t))&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">            tmp = <span class="built_in">dfs</span>(s, inf, t);</span><br><span class="line">            <span class="keyword">if</span>(tmp == <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            ans += tmp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> T;</span><br><span class="line">    cin &gt;&gt; T;</span><br><span class="line">    <span class="keyword">while</span>(T--)&#123;</span><br><span class="line">        cin &gt;&gt; n &gt;&gt; m &gt;&gt; s &gt;&gt; t;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">memset</span>(c, <span class="number">0</span>, <span class="built_in">sizeof</span>(c));</span><br><span class="line">        <span class="type">int</span> u, v, w;</span><br><span class="line">        <span class="keyword">while</span>(m--)&#123;</span><br><span class="line">            cin &gt;&gt; u &gt;&gt; v &gt;&gt; w;</span><br><span class="line">            c[u][v] += w;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="built_in">dinic</span>(s, t) &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ç®—æ³•é—®é¢˜é€‰ç¼–">ç®—æ³•é—®é¢˜é€‰ç¼–</h1><h2 id="è®¡ç®—å‡ ä½•">è®¡ç®—å‡ ä½•</h2><h3 id="åŸºç¡€æ¨¡æ¿">åŸºç¡€æ¨¡æ¿</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">double</span> pi = <span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="type">const</span> <span class="type">double</span> inf = <span class="number">1e100</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">double</span> eps = <span class="number">1e-6</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sgn</span><span class="params">(<span class="type">double</span> d)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">fabs</span>(d) &lt; eps)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(d &gt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">dcmp</span><span class="params">(<span class="type">double</span> x, <span class="type">double</span> y)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">fabs</span>(x - y) &lt; eps)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(x &gt; y)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">double</span> x = <span class="number">1.49999</span>;</span><br><span class="line">    <span class="type">int</span> fx = <span class="built_in">floor</span>(x);<span class="comment">//å‘ä¸‹å–æ•´å‡½æ•°</span></span><br><span class="line">    <span class="type">int</span> cx = <span class="built_in">ceil</span>(x);<span class="comment">//å‘ä¸Šå–æ•´å‡½æ•°</span></span><br><span class="line">    <span class="type">int</span> rx = <span class="built_in">round</span>(x);<span class="comment">//å››èˆäº”å…¥å‡½æ•°</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%f %d %d %d\n&quot;</span>, x, fx, cx, rx);</span><br><span class="line">    <span class="comment">//è¾“å‡ºç»“æœ 1.499990 1 2 1</span></span><br><span class="line">    <span class="keyword">return</span>  <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ğŸ’¡ ä¸è¦ç›´æ¥ç”¨ç­‰å·åˆ¤æ–­æµ®ç‚¹æ•°æ˜¯å¦ç›¸ç­‰ï¼</p></blockquote><ol><li>è¯¯å·®åˆ¤åˆ«æ³•</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">double</span> eps = <span class="number">1e-9</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">dcmp</span><span class="params">(<span class="type">double</span> x, <span class="type">double</span> y)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">fabs</span>(x - y) &lt; eps)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(x &gt; y)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>åŒ–æµ®ä¸ºæ•´</li></ol><p>åœ¨ä¸æº¢å‡ºæ•´æ•°èŒƒå›´çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡ä¹˜ä¸Š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>10</mn><mi>k</mi></msup></mrow><annotation encoding="application/x-tex">10^k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span>è½¬åŒ–ä¸ºæ•´æ•°è¿ç®—ï¼Œæœ€åå†å°†ç»“æœè½¬åŒ–ä¸ºæµ®ç‚¹æ•°è¾“å‡º</p><blockquote><p>ğŸ’¡ è¾“å‡ºæ—¶ä¸€å®šè¦å°å¿ƒä¸è¦è¾“å‡ºÂ âˆ’0</p></blockquote><h3 id="ç‚¹ä¸å‘é‡">ç‚¹ä¸å‘é‡</h3><p><img src="C:/Users/bush/Downloads/d8ccad17-591b-4ffd-839c-a7eff71de0d0_Export-d81b6b00-2ff1-46bc-ab30-566c925b0020/Untitled.png" alt="Untitled"></p><p><img src="https://cdn.jsdelivr.net/gh/bush-cn/TyporaImages@main/img/2025/07/10/20250710223846.png" alt="Untitled"></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Point</span>&#123;</span><br><span class="line">    <span class="type">double</span> x, y;</span><br><span class="line">    <span class="built_in">Point</span>(<span class="type">double</span> x = <span class="number">0</span>, <span class="type">double</span> y = <span class="number">0</span>):<span class="built_in">x</span>(x),<span class="built_in">y</span>(y)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> Point Vector;</span><br><span class="line"></span><br><span class="line">Vector <span class="keyword">operator</span> + (Vector A, Vector B)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Vector</span>(A.x+B.x, A.y+B.y);</span><br><span class="line">&#125;</span><br><span class="line">Vector <span class="keyword">operator</span> - (Point A, Point B)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Vector</span>(A.x-B.x, A.y-B.y);</span><br><span class="line">&#125;</span><br><span class="line">Vector <span class="keyword">operator</span> * (Vector A, <span class="type">double</span> p)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Vector</span>(A.x*p, A.y*p);</span><br><span class="line">&#125;</span><br><span class="line">Vector <span class="keyword">operator</span> / (Vector A, <span class="type">double</span> p)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Vector</span>(A.x/p, A.y/p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> &lt; (<span class="type">const</span> Point&amp; a, <span class="type">const</span> Point&amp; b)&#123;</span><br><span class="line">    <span class="keyword">if</span>(a.x == b.x)</span><br><span class="line">        <span class="keyword">return</span> a.y &lt; b.y;</span><br><span class="line">    <span class="keyword">return</span> a.x &lt; b.x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">const</span> <span class="type">double</span> eps = <span class="number">1e-6</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sgn</span><span class="params">(<span class="type">double</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">fabs</span>(x) &lt; eps)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(x &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> == (<span class="type">const</span> Point&amp; a, <span class="type">const</span> Point&amp; b)&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">sgn</span>(a.x-b.x) == <span class="number">0</span> &amp;&amp; <span class="built_in">sgn</span>(a.y-b.y) == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">Dot</span><span class="params">(Vector A, Vector B)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> A.x*B.x + A.y*B.y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å–æ¨¡ï¼ˆé•¿åº¦ï¼‰</span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">Length</span><span class="params">(Vector A)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sqrt</span>(<span class="built_in">Dot</span>(A, A));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">Angle</span><span class="params">(Vector A, Vector B)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">acos</span>(<span class="built_in">Dot</span>(A, B)/<span class="built_in">Length</span>(A)/<span class="built_in">Length</span>(B));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">Cross</span><span class="params">(Vector A, Vector B)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> A.x*B.y-A.y*B.x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¹³è¡Œå››è¾¹å½¢æœ‰å‘é¢ç§¯</span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">Area2</span><span class="params">(Point A, Point B, Point C)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Cross</span>(B-A, C-A);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// é€†æ—¶é’ˆæ—‹è½¬åçš„å‘é‡</span></span><br><span class="line"><span class="function">Vector <span class="title">Rotate</span><span class="params">(Vector A, <span class="type">double</span> rad)</span></span>&#123;<span class="comment">//radä¸ºå¼§åº¦ ä¸”ä¸ºé€†æ—¶é’ˆæ—‹è½¬çš„è§’</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Vector</span>(A.x*<span class="built_in">cos</span>(rad)-A.y*<span class="built_in">sin</span>(rad), A.x*<span class="built_in">sin</span>(rad)+A.y*<span class="built_in">cos</span>(rad));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è®¡ç®—å‘é‡é€†æ—¶é’ˆæ—‹è½¬ä¹ååº¦çš„å•ä½æ³•å‘é‡</span></span><br><span class="line"><span class="function">Vector <span class="title">Normal</span><span class="params">(Vector A)</span></span>&#123;<span class="comment">//å‘é‡Aå·¦è½¬90Â°çš„å•ä½æ³•å‘é‡</span></span><br><span class="line">    <span class="type">double</span> L = <span class="built_in">Length</span>(A);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Vector</span>(-A.y/L, A.x/L);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åˆ¤æ–­æŠ˜çº¿bcâ†’æ˜¯ä¸æ˜¯å‘abçš„é€†æ—¶é’ˆæ–¹å‘ï¼ˆå·¦è¾¹ï¼‰è½¬å‘</span></span><br><span class="line"><span class="comment">// å‡¸åŒ…æ„é€ æ—¶å°†ä¼šé¢‘ç¹ç”¨åˆ°æ­¤å…¬å¼</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">ToLeftTest</span><span class="params">(Point a, Point b, Point c)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Cross</span>(b - a, c - b) &gt; <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç‚¹ä¸çº¿">ç‚¹ä¸çº¿</h3><p>![Untitled](C:/Users/bush/Downloads/d8ccad17-591b-4ffd-839c-a7eff71de0d0_Export-d81b6b00-2ff1-46bc-ab30-566c925b0020/Untitled 2.png)</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Line</span>&#123;<span class="comment">//ç›´çº¿å®šä¹‰</span></span><br><span class="line">    Point v, p;</span><br><span class="line">    <span class="built_in">Line</span>(Point v, Point p):<span class="built_in">v</span>(v), <span class="built_in">p</span>(p) &#123;&#125;</span><br><span class="line">    <span class="function">Point <span class="title">point</span><span class="params">(<span class="type">double</span> t)</span></span>&#123;<span class="comment">//è¿”å›ç‚¹P = v + (p - v)*t</span></span><br><span class="line">        <span class="keyword">return</span> v + (p - v)*t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//è®¡ç®—ä¸¤ç›´çº¿äº¤ç‚¹</span></span><br><span class="line"><span class="comment">//è°ƒç”¨å‰éœ€ä¿è¯ Cross(v, w) != 0</span></span><br><span class="line"><span class="function">Point <span class="title">GetLineIntersection</span><span class="params">(Point P, Vector v, Point Q, Vector w)</span></span>&#123;</span><br><span class="line">    Vector u = P-Q;</span><br><span class="line">    <span class="type">double</span> t = <span class="built_in">Cross</span>(w, u)/<span class="built_in">Cross</span>(v, w);</span><br><span class="line">    <span class="keyword">return</span> P+v*t;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç‚¹Påˆ°ç›´çº¿ABè·ç¦»å…¬å¼</span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">DistanceToLine</span><span class="params">(Point P, Point A, Point B)</span></span>&#123;</span><br><span class="line">    Vector v1 = B-A, v2 = P-A;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">fabs</span>(<span class="built_in">Cross</span>(v1, v2)/<span class="built_in">Length</span>(v1));</span><br><span class="line">&#125;<span class="comment">//ä¸å»ç»å¯¹å€¼ï¼Œå¾—åˆ°çš„æ˜¯æœ‰å‘è·ç¦»</span></span><br><span class="line"><span class="comment">//ç‚¹Påˆ°çº¿æ®µABè·ç¦»å…¬å¼</span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">DistanceToSegment</span><span class="params">(Point P, Point A, Point B)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(A == B)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Length</span>(P-A);</span><br><span class="line">    Vector v1 = B-A, v2 = P-A, v3 = P-B;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">dcmp</span>(<span class="built_in">Dot</span>(v1, v2)) &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Length</span>(v2);</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">dcmp</span>(<span class="built_in">Dot</span>(v1, v3)) &gt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Length</span>(v3);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">DistanceToLine</span>(P, A, B);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç‚¹Påœ¨ç›´çº¿ABä¸Šçš„æŠ•å½±ç‚¹</span></span><br><span class="line"><span class="function">Point <span class="title">GetLineProjection</span><span class="params">(Point P, Point A, Point B)</span></span>&#123;</span><br><span class="line">    Vector v = B-A;</span><br><span class="line">    <span class="keyword">return</span> A+v*(<span class="built_in">Dot</span>(v, P-A)/<span class="built_in">Dot</span>(v, v));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ¤æ–­pç‚¹æ˜¯å¦åœ¨çº¿æ®µa1a2ä¸Š</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">OnSegment</span><span class="params">(Point p, Point a1, Point a2)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dcmp</span>(<span class="built_in">Cross</span>(a1-p, a2-p)) == <span class="number">0</span> &amp;&amp; <span class="built_in">dcmp</span>(<span class="built_in">Dot</span>(a1-p, a2-p)) &lt; <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ¤æ–­ä¸¤çº¿æ®µæ˜¯å¦ç›¸äº¤</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">SegmentProperIntersection</span><span class="params">(Point a1, Point a2, Point b1, Point b2)</span></span>&#123;</span><br><span class="line">    <span class="type">double</span> c1 = <span class="built_in">Cross</span>(a2-a1, b1-a1), c2 = <span class="built_in">Cross</span>(a2-a1, b2-a1);</span><br><span class="line">    <span class="type">double</span> c3 = <span class="built_in">Cross</span>(b2-b1, a1-b1), c4 = <span class="built_in">Cross</span>(b2-b1, a2-b1);</span><br><span class="line">    <span class="comment">//ifåˆ¤æ–­æ§åˆ¶æ˜¯å¦å…è®¸çº¿æ®µåœ¨ç«¯ç‚¹å¤„ç›¸äº¤ï¼Œæ ¹æ®éœ€è¦æ·»åŠ </span></span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">sgn</span>(c1) || !<span class="built_in">sgn</span>(c2) || !<span class="built_in">sgn</span>(c3) || !<span class="built_in">sgn</span>(c4))&#123;</span><br><span class="line">        <span class="type">bool</span> f1 = <span class="built_in">OnSegment</span>(b1, a1, a2);</span><br><span class="line">        <span class="type">bool</span> f2 = <span class="built_in">OnSegment</span>(b2, a1, a2);</span><br><span class="line">        <span class="type">bool</span> f3 = <span class="built_in">OnSegment</span>(a1, b1, b2);</span><br><span class="line">        <span class="type">bool</span> f4 = <span class="built_in">OnSegment</span>(a2, b1, b2);</span><br><span class="line">        <span class="type">bool</span> f = (f1|f2|f3|f4);</span><br><span class="line">        <span class="keyword">return</span> f;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">sgn</span>(c1)*<span class="built_in">sgn</span>(c2) &lt; <span class="number">0</span> &amp;&amp; <span class="built_in">sgn</span>(c3)*<span class="built_in">sgn</span>(c4) &lt; <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¤šè¾¹å½¢">å¤šè¾¹å½¢</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¤šè¾¹å½¢æœ‰å‘é¢ç§¯</span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">PolygonArea</span><span class="params">(Point* p, <span class="type">int</span> n)</span></span>&#123;<span class="comment">//pä¸ºç«¯ç‚¹é›†åˆï¼Œnä¸ºç«¯ç‚¹ä¸ªæ•°</span></span><br><span class="line">    <span class="type">double</span> s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; n<span class="number">-1</span>; ++i)</span><br><span class="line">        s += <span class="built_in">Cross</span>(p[i]-p[<span class="number">0</span>], p[i<span class="number">+1</span>]-p[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ¤æ–­ç‚¹æ˜¯å¦åœ¨å¤šè¾¹å½¢å†…ï¼Œè‹¥ç‚¹åœ¨å¤šè¾¹å½¢å†…è¿”å›1ï¼Œåœ¨å¤šè¾¹å½¢å¤–éƒ¨è¿”å›0ï¼Œåœ¨å¤šè¾¹å½¢ä¸Šè¿”å›-1</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">isPointInPolygon</span><span class="params">(Point p, vector&lt;Point&gt; poly)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> wn = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> n = poly.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">OnSegment</span>(p, poly[i], poly[(i<span class="number">+1</span>)%n])) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="type">int</span> k = <span class="built_in">sgn</span>(<span class="built_in">Cross</span>(poly[(i<span class="number">+1</span>)%n] - poly[i], p - poly[i]));</span><br><span class="line">        <span class="type">int</span> d1 = <span class="built_in">sgn</span>(poly[i].y - p.y);</span><br><span class="line">        <span class="type">int</span> d2 = <span class="built_in">sgn</span>(poly[(i<span class="number">+1</span>)%n].y - p.y);</span><br><span class="line">        <span class="keyword">if</span>(k &gt; <span class="number">0</span> &amp;&amp; d1 &lt;= <span class="number">0</span> &amp;&amp; d2 &gt; <span class="number">0</span>) wn++;</span><br><span class="line">        <span class="keyword">if</span>(k &lt; <span class="number">0</span> &amp;&amp; d2 &lt;= <span class="number">0</span> &amp;&amp; d1 &gt; <span class="number">0</span>) wn--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(wn != <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åœ†">åœ†</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Circle</span>&#123; <span class="comment">// å®šä¹‰</span></span><br><span class="line">    Point c;</span><br><span class="line">    <span class="type">double</span> r;</span><br><span class="line">    <span class="built_in">Circle</span>(Point c, <span class="type">double</span> r):<span class="built_in">c</span>(c), <span class="built_in">r</span>(r) &#123;&#125;</span><br><span class="line">    <span class="function">Point <span class="title">point</span><span class="params">(<span class="type">double</span> a)</span></span>&#123;<span class="comment">//é€šè¿‡åœ†å¿ƒè§’æ±‚åæ ‡</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Point</span>(c.x + <span class="built_in">cos</span>(a)*r, c.y + <span class="built_in">sin</span>(a)*r);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//æ±‚åœ†ä¸ç›´çº¿äº¤ç‚¹</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getLineCircleIntersection</span><span class="params">(Line L, Circle C, <span class="type">double</span>&amp; t1, <span class="type">double</span>&amp; t2, vector&lt;Point&gt;&amp; sol)</span></span>&#123;</span><br><span class="line">    <span class="type">double</span> a = L.v.x, b = L.p.x - C.c.x, c = L.v.y, d = L.p.y - C.c.y;</span><br><span class="line">    <span class="type">double</span> e = a*a + c*c, f = <span class="number">2</span>*(a*b + c*d), g = b*b + d*d - C.r*C.r;</span><br><span class="line">    <span class="type">double</span> delta = f*f - <span class="number">4</span>*e*g;<span class="comment">//åˆ¤åˆ«å¼</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">sgn</span>(delta) &lt; <span class="number">0</span>)<span class="comment">//ç›¸ç¦»</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">sgn</span>(delta) == <span class="number">0</span>)&#123;<span class="comment">//ç›¸åˆ‡</span></span><br><span class="line">        t1 = -f /(<span class="number">2</span>*e);</span><br><span class="line">        t2 = -f /(<span class="number">2</span>*e);</span><br><span class="line">        sol.<span class="built_in">push_back</span>(L.<span class="built_in">point</span>(t1));<span class="comment">//solå­˜æ”¾äº¤ç‚¹æœ¬èº«</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ç›¸äº¤</span></span><br><span class="line">    t1 = (-f - <span class="built_in">sqrt</span>(delta))/(<span class="number">2</span>*e);</span><br><span class="line">    sol.<span class="built_in">push_back</span>(L.<span class="built_in">point</span>(t1));</span><br><span class="line">    t2 = (-f + <span class="built_in">sqrt</span>(delta))/(<span class="number">2</span>*e);</span><br><span class="line">    sol.<span class="built_in">push_back</span>(L.<span class="built_in">point</span>(t2));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸¤åœ†ç›¸äº¤é¢ç§¯</span></span><br><span class="line"><span class="comment">// é€šè¿‡è®¡ç®—ä¸¤ä¸ªåœ†ç›¸äº¤æ‰€æ„æˆçš„ä¸¤ä¸ªæ‰‡å½¢é¢ç§¯å’Œå‡å»å…¶æ„æˆçš„ç­å½¢çš„é¢ç§¯</span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">AreaOfOverlap</span><span class="params">(Point c1, <span class="type">double</span> r1, Point c2, <span class="type">double</span> r2)</span></span>&#123;</span><br><span class="line">    <span class="type">double</span> d = <span class="built_in">Length</span>(c1 - c2);</span><br><span class="line">    <span class="keyword">if</span>(r1 + r2 &lt; d + eps)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">if</span>(d &lt; <span class="built_in">fabs</span>(r1 - r2) + eps)&#123;</span><br><span class="line">        <span class="type">double</span> r = <span class="built_in">min</span>(r1, r2);</span><br><span class="line">        <span class="keyword">return</span> pi*r*r;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">double</span> x = (d*d + r1*r1 - r2*r2)/(<span class="number">2.0</span>*d);</span><br><span class="line">    <span class="type">double</span> p = (r1 + r2 + d)/<span class="number">2.0</span>;</span><br><span class="line">    <span class="type">double</span> t1 = <span class="built_in">acos</span>(x/r1);</span><br><span class="line">    <span class="type">double</span> t2 = <span class="built_in">acos</span>((d - x)/r2);</span><br><span class="line">    <span class="type">double</span> s1 = r1*r1*t1;</span><br><span class="line">    <span class="type">double</span> s2 = r2*r2*t2;</span><br><span class="line">    <span class="type">double</span> s3 = <span class="number">2</span>*<span class="built_in">sqrt</span>(p*(p - r1)*(p - r2)*(p - d));</span><br><span class="line">    <span class="keyword">return</span> s1 + s2 - s3;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¯»æ‰¾å‡¸åŒ…">å¯»æ‰¾å‡¸åŒ…</h2><h3 id="Grahamæ‰«ææ³•">Grahamæ‰«ææ³•</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> maxn = <span class="number">1e3</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    <span class="type">double</span> x, y;</span><br><span class="line">    <span class="built_in">Point</span>(<span class="type">double</span> x = <span class="number">0</span>, <span class="type">double</span> y = <span class="number">0</span>):<span class="built_in">x</span>(x),<span class="built_in">y</span>(y)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> Point Vector;</span><br><span class="line">Point lst[maxn];</span><br><span class="line"><span class="type">int</span> stk[maxn], top;</span><br><span class="line">Vector <span class="keyword">operator</span> - (Point A, Point B)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Vector</span>(A.x-B.x, A.y-B.y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sgn</span><span class="params">(<span class="type">double</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">fabs</span>(x) &lt; eps)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(x &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">Cross</span><span class="params">(Vector v0, Vector v1)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> v<span class="number">0.</span>x*v<span class="number">1.</span>y - v<span class="number">1.</span>x*v<span class="number">0.</span>y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">Dis</span><span class="params">(Point p1, Point p2)</span> </span>&#123; <span class="comment">//è®¡ç®— p1p2çš„ è·ç¦»</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sqrt</span>((p<span class="number">2.</span>x-p<span class="number">1.</span>x)*(p<span class="number">2.</span>x-p<span class="number">1.</span>x)+(p<span class="number">2.</span>y-p<span class="number">1.</span>y)*(p<span class="number">2.</span>y-p<span class="number">1.</span>y));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp</span><span class="params">(Point p1, Point p2)</span> </span>&#123; <span class="comment">//æè§’æ’åºå‡½æ•° ï¼Œè§’åº¦ç›¸åŒåˆ™è·ç¦»å°çš„åœ¨å‰é¢</span></span><br><span class="line">    <span class="type">int</span> tmp = <span class="built_in">sgn</span>(<span class="built_in">Cross</span>(p1 - lst[<span class="number">0</span>], p2 - lst[<span class="number">0</span>]));</span><br><span class="line">    <span class="keyword">if</span>(tmp &gt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(tmp == <span class="number">0</span> &amp;&amp; <span class="built_in">Dis</span>(lst[<span class="number">0</span>], p1) &lt; <span class="built_in">Dis</span>(lst[<span class="number">0</span>], p2))</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç‚¹çš„ç¼–å·0 ~ n - 1</span></span><br><span class="line"><span class="comment">//è¿”å›å‡¸åŒ…ç»“æœstk[0 ~ top - 1]ä¸ºå‡¸åŒ…çš„ç¼–å·</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Graham</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> k = <span class="number">0</span>;</span><br><span class="line">    Point p0;</span><br><span class="line">    p<span class="number">0.</span>x = lst[<span class="number">0</span>].x;</span><br><span class="line">    p<span class="number">0.</span>y = lst[<span class="number">0</span>].y;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>( (p<span class="number">0.</span>y &gt; lst[i].y) || ((p<span class="number">0.</span>y == lst[i].y) &amp;&amp; (p<span class="number">0.</span>x &gt; lst[i].x)) ) &#123;</span><br><span class="line">            p<span class="number">0.</span>x = lst[i].x;</span><br><span class="line">            p<span class="number">0.</span>y = lst[i].y;</span><br><span class="line">            k = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    lst[k] = lst[<span class="number">0</span>];</span><br><span class="line">    lst[<span class="number">0</span>] = p0;</span><br><span class="line">    <span class="built_in">sort</span>(lst + <span class="number">1</span>, lst + n, cmp);</span><br><span class="line">    <span class="keyword">if</span>(n == <span class="number">1</span>) &#123;</span><br><span class="line">        top = <span class="number">1</span>;</span><br><span class="line">        stk[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(n == <span class="number">2</span>) &#123;</span><br><span class="line">        top = <span class="number">2</span>;</span><br><span class="line">        stk[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        stk[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    stk[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    stk[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    top = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">while</span>(top &gt; <span class="number">1</span> &amp;&amp; <span class="built_in">Cross</span>(lst[stk[top - <span class="number">1</span>]] - lst[stk[top - <span class="number">2</span>]], lst[i] - lst[stk[top - <span class="number">2</span>]]) &lt;= <span class="number">0</span>)</span><br><span class="line">            --top;</span><br><span class="line">        stk[top] = i;</span><br><span class="line">        ++top;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Andrewç®—æ³•">Andrewç®—æ³•</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    <span class="type">double</span> x, y;</span><br><span class="line">    <span class="built_in">Point</span>(<span class="type">double</span> x = <span class="number">0</span>, <span class="type">double</span> y = <span class="number">0</span>):<span class="built_in">x</span>(x),<span class="built_in">y</span>(y)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> Point Vector;</span><br><span class="line">Vector <span class="keyword">operator</span> - (Point A, Point B)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Vector</span>(A.x-B.x, A.y-B.y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> &lt; (<span class="type">const</span> Point&amp; a, <span class="type">const</span> Point&amp; b)&#123;</span><br><span class="line">    <span class="keyword">if</span>(a.x == b.x)</span><br><span class="line">        <span class="keyword">return</span> a.y &lt; b.y;</span><br><span class="line">    <span class="keyword">return</span> a.x &lt; b.x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">Cross</span><span class="params">(Vector v0, Vector v1)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> v<span class="number">0.</span>x*v<span class="number">1.</span>y - v<span class="number">1.</span>x*v<span class="number">0.</span>y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è®¡ç®—å‡¸åŒ…ï¼Œè¾“å…¥ç‚¹æ•°ç»„ä¸º pï¼Œä¸ªæ•°ä¸º nï¼Œ è¾“å‡ºç‚¹æ•°ç»„ä¸º chã€‚å‡½æ•°è¿”å›å‡¸åŒ…é¡¶ç‚¹æ•°</span></span><br><span class="line"><span class="comment">//å¦‚æœä¸å¸Œæœ›å‡¸åŒ…çš„è¾¹ä¸Šæœ‰è¾“å…¥ç‚¹ï¼Œåˆ™æŠŠä¸¤ä¸ª &lt;= æ”¹ä¸º &lt;</span></span><br><span class="line"><span class="comment">//åœ¨ç²¾åº¦è¦æ±‚é«˜æ—¶å»ºè®®ç”¨dcmpæ¯”è¾ƒ</span></span><br><span class="line"><span class="comment">//è¾“å…¥ä¸èƒ½æœ‰é‡å¤ç‚¹ï¼Œå‡½æ•°æ‰§è¡Œå®Œåè¾“å…¥ç‚¹çš„é¡ºåºè¢«ç ´å</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">ConvexHull</span><span class="params">(Point* p, <span class="type">int</span> n, Point* ch)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">sort</span>(p, p+n);</span><br><span class="line">    <span class="type">int</span> m = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">while</span>(m &gt; <span class="number">1</span> &amp;&amp; <span class="built_in">Cross</span>(ch[m<span class="number">-1</span>] - ch[m<span class="number">-2</span>], p[i] - ch[m<span class="number">-2</span>]) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            m--;</span><br><span class="line">        &#125;</span><br><span class="line">        ch[m++] = p[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> k = m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = n<span class="number">-2</span>; i&gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">        <span class="keyword">while</span>(m &gt; k &amp;&amp; <span class="built_in">Cross</span>(ch[m<span class="number">-1</span>] - ch[m<span class="number">-2</span>], p[i] - ch[m<span class="number">-2</span>]) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            m--;</span><br><span class="line">        &#125;</span><br><span class="line">        ch[m++] = p[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(n &gt; <span class="number">1</span>)</span><br><span class="line">        --m;</span><br><span class="line">    <span class="keyword">return</span> m;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¤šé¡¹å¼ä¸å¿«é€Ÿå‚…é‡Œå¶å˜æ¢">å¤šé¡¹å¼ä¸å¿«é€Ÿå‚…é‡Œå¶å˜æ¢</h2><p>å¤šé¡¹å¼ä¸å¿«é€Ÿå‚…é‡Œå¶å˜æ¢ï¼ˆFFTï¼‰ä¹‹é—´å­˜åœ¨å¯†åˆ‡çš„å…³ç³»ï¼Œç‰¹åˆ«æ˜¯åœ¨ç¦»æ•£å‚…é‡Œå¶å˜æ¢ï¼ˆDFTï¼‰çš„è®¡ç®—ä¸­ã€‚FFT æ˜¯ä¸€ç§é«˜æ•ˆè®¡ç®— DFT çš„ç®—æ³•ï¼Œè€Œ DFT åˆä¸å¤šé¡¹å¼çš„ä¹˜æ³•æœ‰å…³ã€‚</p><h3 id="å¤šé¡¹å¼">å¤šé¡¹å¼</h3><p>åœ¨ä»£æ•°ä¸­ï¼Œä¸€ä¸ªå¤šé¡¹å¼æ˜¯ç”±å˜é‡çš„å¹‚å’Œç³»æ•°çš„æœ‰é™å’Œç»„æˆçš„è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªä¸€å…ƒå¤šé¡¹å¼ï¼š</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>a</mi><mn>0</mn></msub><mo>+</mo><msub><mi>a</mi><mn>1</mn></msub><mi>x</mi><mo>+</mo><msub><mi>a</mi><mn>2</mn></msub><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mo>â€¦</mo><mo>+</mo><msub><mi>a</mi><mi>n</mi></msub><msup><mi>x</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">P(x) = a_0 + a_1x + a_2x^2 + \ldots + a_nx^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9641em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8144em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></p><p>å…¶ä¸­ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msub><mi>a</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">a_0, a_1, \ldots, a_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> æ˜¯å¤šé¡¹å¼çš„ç³»æ•°ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> æ˜¯å˜é‡ã€‚</p><h3 id="ç¦»æ•£å‚…é‡Œå¶å˜æ¢ï¼ˆDFTï¼‰">ç¦»æ•£å‚…é‡Œå¶å˜æ¢ï¼ˆDFTï¼‰</h3><p>ç¦»æ•£å‚…é‡Œå¶å˜æ¢å°†ä¸€ä¸ªç¦»æ•£åºåˆ—ï¼ˆé€šå¸¸æ˜¯æ—¶åŸŸä¸Šçš„ä¿¡å·ï¼‰è½¬æ¢ä¸ºå…¶åœ¨é¢‘åŸŸä¸Šçš„è¡¨ç¤ºã€‚å¯¹äºä¸€ä¸ª (N)-ç‚¹åºåˆ— <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msub><mi>x</mi><mrow><mi>N</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">x_0, x_1, \ldots, x_{N-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œå…¶ DFT å®šä¹‰å¦‚ä¸‹ï¼š</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mi>k</mi></msub><mo>=</mo><msubsup><mo>âˆ‘</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>N</mi><mo>âˆ’</mo><mn>1</mn></mrow></msubsup><msub><mi>x</mi><mi>n</mi></msub><mo>â‹…</mo><msup><mi>e</mi><mrow><mo>âˆ’</mo><mfrac><mrow><mn>2</mn><mi>Ï€</mi><mi>i</mi></mrow><mi>N</mi></mfrac><mi>k</mi><mi>n</mi></mrow></msup></mrow><annotation encoding="application/x-tex">X_k = \sum_{n=0}^{N-1} x_n \cdot e^{-\frac{2\pi i}{N}kn}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2809em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9812em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9616em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9616em;"><span style="top:-3.363em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8551em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">Ï€i</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span><span class="mord mathnormal mtight">kn</span></span></span></span></span></span></span></span></span></span></span></span></p><p>å…¶ä¸­ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">X_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> æ˜¯é¢‘åŸŸä¸Šçš„ç¬¬  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>  ä¸ªå¤æ•°ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span></span></span></span> æ˜¯è‡ªç„¶å¯¹æ•°çš„åº•ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> æ˜¯è™šæ•°å•ä½ã€‚</p><h3 id="å¿«é€Ÿå‚…é‡Œå¶å˜æ¢ï¼ˆFFTï¼‰">å¿«é€Ÿå‚…é‡Œå¶å˜æ¢ï¼ˆFFTï¼‰</h3><p>FFT æ˜¯ä¸€ç§é«˜æ•ˆè®¡ç®— DFT çš„ç®—æ³•ï¼Œé€šè¿‡å‡å°‘è¿ç®—æ¬¡æ•°ï¼Œä» <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> çš„å¤æ‚åº¦é™ä½åˆ° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mi>log</mi><mo>â¡</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N \log N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>ã€‚FFT çš„ç®—æ³•å®ç°å¤šç§ï¼Œå…¶ä¸­æœ€å¸¸è§çš„æ˜¯ Cooley-Tukey ç®—æ³•ã€‚</p><h3 id="FFTä¸å¤šé¡¹å¼ä¹˜æ³•">FFTä¸å¤šé¡¹å¼ä¹˜æ³•</h3><p>ç”±äº DFT ä¸å¤šé¡¹å¼çš„ç³»æ•°ä¹‹é—´å­˜åœ¨å¯¹åº”å…³ç³»ï¼ŒFFT è¢«å¹¿æ³›ç”¨äºå¤šé¡¹å¼ä¹˜æ³•ã€‚å¯¹äºä¸¤ä¸ªå¤šé¡¹å¼ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">A(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span> å’Œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">B(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>ï¼Œå®ƒä»¬çš„ä¹˜ç§¯çš„ç³»æ•°å¯ä»¥é€šè¿‡è®¡ç®—å®ƒä»¬çš„ DFTï¼Œç›¸ä¹˜ï¼Œå†é€šè¿‡é€† DFT å¾—åˆ°ã€‚è¿™æ ·ï¼Œå¯ä»¥å°†å¤šé¡¹å¼çš„ä¹˜æ³•å¤æ‚åº¦ä» <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼Œé™ä½åˆ° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>â¡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n \log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>ã€‚</p><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>multiply</code> å‡½æ•°ç”¨äºè®¡ç®—ä¸¤ä¸ªå¤šé¡¹å¼çš„å·ç§¯ã€‚ä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦è°ƒæ•´è¾“å…¥å¤šé¡¹å¼çš„ç³»æ•°ã€‚è¿™æ®µä»£ç ä½¿ç”¨äº†å¤æ•°ç±»å‹ <code>complex&lt;double&gt;</code> æ¥è¡¨ç¤ºå¤æ•°ï¼Œå…¶ä¸­ <code>real()</code> å‡½æ•°è·å–å®éƒ¨ã€‚æœ€åï¼Œç»“æœè¢«å››èˆäº”å…¥åˆ°æœ€æ¥è¿‘çš„æ•´æ•°ã€‚</p><p>å¯¹äºæ›´é«˜æ•ˆçš„è¿­ä»£FFTï¼Œä½ å¯ä»¥ä½¿ç”¨ä½é€†åºç½®æ¢ï¼ˆBit-Reversal Permutationï¼‰æ¥ä¼˜åŒ–æ•°æ®çš„å­˜å‚¨å’Œè®¿é—®ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ä½é€†åºç½®æ¢çš„è¿­ä»£FFTçš„C++å®ç°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;complex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> complex&lt;<span class="type">double</span>&gt; Complex;</span><br><span class="line"><span class="type">const</span> <span class="type">double</span> PI = <span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½é€†åºç½®æ¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">bitReverse</span><span class="params">(vector&lt;Complex&gt;&amp; a)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n = a.<span class="built_in">size</span>();</span><br><span class="line">    <span class="type">int</span> bits = <span class="built_in">log2</span>(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> j = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> bit = <span class="number">0</span>; bit &lt; bits; bit++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &amp; (<span class="number">1</span> &lt;&lt; bit)) &#123;</span><br><span class="line">                j |= <span class="number">1</span> &lt;&lt; (bits - <span class="number">1</span> - bit);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (j &gt; i) &#123;</span><br><span class="line">            <span class="built_in">swap</span>(a[i], a[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿­ä»£FFT</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">iterativeFFT</span><span class="params">(vector&lt;Complex&gt;&amp; a, <span class="type">bool</span> invert)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n = a.<span class="built_in">size</span>();</span><br><span class="line">    <span class="built_in">bitReverse</span>(a);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> len = <span class="number">2</span>; len &lt;= n; len &lt;&lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">double</span> angle = <span class="number">2</span> * PI / len * (invert ? <span class="number">-1</span> : <span class="number">1</span>);</span><br><span class="line">        <span class="function">Complex <span class="title">wlen</span><span class="params">(cos(angle), sin(angle))</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i += len) &#123;</span><br><span class="line">            <span class="function">Complex <span class="title">w</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; len / <span class="number">2</span>; j++) &#123;</span><br><span class="line">                Complex u = a[i + j];</span><br><span class="line">                Complex v = w * a[i + j + len / <span class="number">2</span>];</span><br><span class="line">                a[i + j] = u + v;</span><br><span class="line">                a[i + j + len / <span class="number">2</span>] = u - v;</span><br><span class="line">                w *= wlen;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (invert) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            a[i] /= n;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤šé¡¹å¼å·ç§¯</span></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">multiply</span><span class="params">(<span class="type">const</span> vector&lt;<span class="type">int</span>&gt;&amp; a, <span class="type">const</span> vector&lt;<span class="type">int</span>&gt;&amp; b)</span> </span>&#123;</span><br><span class="line">    <span class="function">vector&lt;Complex&gt; <span class="title">fa</span><span class="params">(a.begin(), a.end())</span>, <span class="title">fb</span><span class="params">(b.begin(), b.end())</span></span>;</span><br><span class="line">    <span class="type">int</span> n = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (n &lt; <span class="built_in">max</span>(a.<span class="built_in">size</span>(), b.<span class="built_in">size</span>())) n &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">    n &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">    fa.<span class="built_in">resize</span>(n);</span><br><span class="line">    fb.<span class="built_in">resize</span>(n);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">iterativeFFT</span>(fa, <span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">iterativeFFT</span>(fb, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        fa[i] *= fb[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">iterativeFFT</span>(fa, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">result</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        result[i] = <span class="built_in">round</span>(fa[i].<span class="built_in">real</span>());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; a = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;; <span class="comment">// ç¬¬ä¸€ä¸ªå¤šé¡¹å¼ç³»æ•°</span></span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; b = &#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&#125;; <span class="comment">// ç¬¬äºŒä¸ªå¤šé¡¹å¼ç³»æ•°</span></span><br><span class="line"></span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; result = <span class="built_in">multiply</span>(a, b);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Result of convolution: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i : result) &#123;</span><br><span class="line">        cout &lt;&lt; i &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªå®ç°ä¸­ï¼Œ<code>bitReverse</code> å‡½æ•°ç”¨äºæ‰§è¡Œä½é€†åºç½®æ¢ï¼Œç„¶ååœ¨è¿­ä»£FFTçš„è¿‡ç¨‹ä¸­ä½¿ç”¨è¿™ä¸ªç½®æ¢åçš„æ•°æ®ã€‚è¿™æœ‰åŠ©äºæé«˜æ•°æ®å­˜å‚¨å’Œè®¿é—®çš„æ•ˆç‡ã€‚</p><h2 id="å­—ç¬¦ä¸²åŒ¹é…">å­—ç¬¦ä¸²åŒ¹é…</h2><h3 id="1-æœ´ç´ å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ï¼ˆNaive-String-Matchingï¼‰ï¼š">1.<strong>æœ´ç´ å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ï¼ˆNaive String Matchingï¼‰ï¼š</strong></h3><p>ä¹Ÿç§°ä¸ºæš´åŠ›åŒ¹é…ç®—æ³•ï¼Œå®ƒä»æ–‡æœ¬çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹ä¸æ¨¡å¼çš„ç¬¬ä¸€ä¸ªå­—ç¬¦åŒ¹é…ï¼Œç„¶åé€ä¸ªå­—ç¬¦æ¯”è¾ƒï¼Œç›´åˆ°æ‰¾åˆ°åŒ¹é…æˆ–éå†å®Œæ•´ä¸ªæ–‡æœ¬ã€‚</p><h3 id="2-Rabin-Karpç®—æ³•ï¼š-åŸºäºå“ˆå¸Œçš„å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ã€‚">2. **Rabin-Karpç®—æ³•ï¼š**åŸºäºå“ˆå¸Œçš„å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ã€‚</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> prime = <span class="number">101</span>;  <span class="comment">// é€‰æ‹©ä¸€ä¸ªè¾ƒå¤§çš„è´¨æ•°ä½œä¸ºå“ˆå¸Œå‡½æ•°çš„æ¨¡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¡ç®—å­—ç¬¦ä¸²çš„å“ˆå¸Œå€¼</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">calculateHash</span><span class="params">(<span class="type">const</span> string&amp; str, <span class="type">int</span> length)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> hash = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; length; ++i) &#123;</span><br><span class="line">        hash += (<span class="type">int</span>)str[i] * <span class="built_in">pow</span>(prime, i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> hash;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°å“ˆå¸Œå€¼ï¼Œç”¨äºæ»‘åŠ¨çª—å£</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">recalculateHash</span><span class="params">(<span class="type">int</span> oldHash, <span class="type">char</span> oldChar, <span class="type">char</span> newChar, <span class="type">int</span> length)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (oldHash - oldChar + newChar * <span class="built_in">pow</span>(prime, length - <span class="number">1</span>)) * prime;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Rabin-Karpç®—æ³•å®ç°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">rabinKarpSearch</span><span class="params">(<span class="type">const</span> string&amp; pattern, <span class="type">const</span> string&amp; text)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> patternLength = pattern.<span class="built_in">length</span>();</span><br><span class="line">    <span class="type">int</span> textLength = text.<span class="built_in">length</span>();</span><br><span class="line">    <span class="type">int</span> patternHash = <span class="built_in">calculateHash</span>(pattern, patternLength);</span><br><span class="line">    <span class="type">int</span> textHash = <span class="built_in">calculateHash</span>(text, patternLength);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= textLength - patternLength; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (patternHash == textHash) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœå“ˆå¸Œå€¼ç›¸ç­‰ï¼Œå¯èƒ½æ‰¾åˆ°äº†åŒ¹é…ï¼Œè¿›ä¸€æ­¥æ£€æŸ¥å­—ç¬¦æ˜¯å¦çœŸçš„åŒ¹é…</span></span><br><span class="line">            <span class="type">bool</span> match = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; patternLength; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span> (pattern[j] != text[i + j]) &#123;</span><br><span class="line">                    match = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (match) &#123;</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;Pattern found at index &quot;</span> &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ›´æ–°å“ˆå¸Œå€¼ï¼Œå‡†å¤‡æ£€æŸ¥ä¸‹ä¸€ä¸ªå­ä¸²</span></span><br><span class="line">        <span class="keyword">if</span> (i &lt; textLength - patternLength) &#123;</span><br><span class="line">            textHash = <span class="built_in">recalculateHash</span>(textHash, text[i], text[i + patternLength], patternLength);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    string text = <span class="string">&quot;ABABCABABABCABCABABC&quot;</span>;</span><br><span class="line">    string pattern = <span class="string">&quot;ABABC&quot;</span>;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Text: &quot;</span> &lt;&lt; text &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Pattern: &quot;</span> &lt;&lt; pattern &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">rabinKarpSearch</span>(pattern, text);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-æœ‰é™è‡ªåŠ¨æœºæ³•ï¼š">3. <strong>æœ‰é™è‡ªåŠ¨æœºæ³•ï¼š</strong></h3><p>æœ‰é™çŠ¶æ€è‡ªåŠ¨æœºï¼ˆFinite State Machineï¼ŒFSMï¼‰æ˜¯ä¸€ç§ç”¨äºå­—ç¬¦ä¸²åŒ¹é…çš„æœ‰æ•ˆç®—æ³•ã€‚åœ¨è¿™ç§ç®—æ³•ä¸­ï¼Œæ¨¡å¼å­—ç¬¦ä¸²è¢«é¢„å¤„ç†æˆä¸€ä¸ªæœ‰é™çŠ¶æ€è‡ªåŠ¨æœºï¼Œç„¶ååˆ©ç”¨è¯¥è‡ªåŠ¨æœºåœ¨æ–‡æœ¬ä¸­è¿›è¡ŒåŒ¹é…ã€‚ä»¥ä¸‹æ˜¯æœ‰é™çŠ¶æ€è‡ªåŠ¨æœºå­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ï¼ˆAho-Corasickç®—æ³•ï¼‰çš„ç®€è¦è¯´æ˜å’ŒC++å®ç°ï¼š</p><h4 id="Aho-Corasickç®—æ³•">Aho-Corasickç®—æ³•</h4><p>Aho-Corasickç®—æ³•æ˜¯ä¸€ç§å¤šæ¨¡å¼å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ï¼Œå®ƒå¯ä»¥åŒæ—¶æœç´¢å¤šä¸ªæ¨¡å¼ä¸²ã€‚</p><h5 id="åŸºæœ¬æ€æƒ³ï¼š">åŸºæœ¬æ€æƒ³ï¼š</h5><ol><li>æ„å»ºTrieæ ‘ï¼šå°†æ‰€æœ‰æ¨¡å¼ä¸²æ„å»ºæˆä¸€ä¸ªTrieæ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„è¡¨ç¤ºä¸€ä¸ªæ¨¡å¼ä¸²ã€‚</li><li>æ·»åŠ å¤±è´¥è·¯å¾„ï¼ˆFailure Functionï¼‰ï¼šä¸ºTrieæ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹æ·»åŠ å¤±è´¥è·¯å¾„ï¼Œä½¿å¾—åœ¨åŒ¹é…å¤±è´¥æ—¶èƒ½å¤Ÿè·³è½¬åˆ°Trieæ ‘ä¸­çš„å…¶ä»–ä½ç½®ã€‚</li><li>åŒ¹é…è¿‡ç¨‹ï¼šåœ¨æ–‡æœ¬ä¸²ä¸­æŒ‰é¡ºåºéå†å­—ç¬¦ï¼Œå¹¶æ ¹æ®Trieæ ‘è¿›è¡ŒåŒ¹é…ï¼Œåˆ©ç”¨å¤±è´¥è·¯å¾„å®ç°å¿«é€Ÿè·³è½¬ã€‚</li></ol><h5 id="C-å®ç°ï¼š-3">C++å®ç°ï¼š</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unordered_map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TrieNode</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    unordered_map&lt;<span class="type">char</span>, TrieNode*&gt; children;</span><br><span class="line">    TrieNode* fail;</span><br><span class="line">    <span class="type">bool</span> isEnd;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">TrieNode</span>() : <span class="built_in">fail</span>(<span class="literal">nullptr</span>), <span class="built_in">isEnd</span>(<span class="literal">false</span>) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AhoCorasick</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    TrieNode* root;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">AhoCorasick</span>() : <span class="built_in">root</span>(<span class="keyword">new</span> <span class="built_in">TrieNode</span>()) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ·»åŠ æ¨¡å¼ä¸²åˆ°Trieæ ‘</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">addPattern</span><span class="params">(<span class="type">const</span> string&amp; pattern)</span> </span>&#123;</span><br><span class="line">        TrieNode* node = root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c : pattern) &#123;</span><br><span class="line">            <span class="keyword">if</span> (node-&gt;children.<span class="built_in">find</span>(c) == node-&gt;children.<span class="built_in">end</span>()) &#123;</span><br><span class="line">                node-&gt;children[c] = <span class="keyword">new</span> <span class="built_in">TrieNode</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            node = node-&gt;children[c];</span><br><span class="line">        &#125;</span><br><span class="line">        node-&gt;isEnd = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„å»ºå¤±è´¥è·¯å¾„</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">buildFailureFunction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        queue&lt;TrieNode*&gt; q;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span>&amp; kv : root-&gt;children) &#123;</span><br><span class="line">            kv.second-&gt;fail = root;</span><br><span class="line">            q.<span class="built_in">push</span>(kv.second);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            TrieNode* curr = q.<span class="built_in">front</span>();</span><br><span class="line">            q.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span>&amp; kv : curr-&gt;children) &#123;</span><br><span class="line">                <span class="type">char</span> symbol = kv.first;</span><br><span class="line">                TrieNode* child = kv.second;</span><br><span class="line">                q.<span class="built_in">push</span>(child);</span><br><span class="line"></span><br><span class="line">                TrieNode* failure = curr-&gt;fail;</span><br><span class="line">                <span class="keyword">while</span> (failure != <span class="literal">nullptr</span> &amp;&amp; failure-&gt;children.<span class="built_in">find</span>(symbol) == failure-&gt;children.<span class="built_in">end</span>()) &#123;</span><br><span class="line">                    failure = failure-&gt;fail;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (failure != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">                    child-&gt;fail = failure-&gt;children[symbol];</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    child-&gt;fail = root;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨æ–‡æœ¬ä¸­åŒ¹é…æ¨¡å¼ä¸²</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">match</span><span class="params">(<span class="type">const</span> string&amp; text)</span> </span>&#123;</span><br><span class="line">        TrieNode* node = root;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; text.<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">            <span class="type">char</span> c = text[i];</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (node != <span class="literal">nullptr</span> &amp;&amp; node-&gt;children.<span class="built_in">find</span>(c) == node-&gt;children.<span class="built_in">end</span>()) &#123;</span><br><span class="line">                node = node-&gt;fail;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (node == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">                node = root;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                node = node-&gt;children[c];</span><br><span class="line"></span><br><span class="line">                <span class="comment">// æ‰“å°åŒ¹é…çš„æ¨¡å¼ä¸²</span></span><br><span class="line">                <span class="built_in">printMatches</span>(node, i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰“å°åŒ¹é…çš„æ¨¡å¼ä¸²</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">printMatches</span><span class="params">(TrieNode* node, <span class="type">int</span> endIndex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (node != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (node-&gt;isEnd) &#123;</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;Pattern found at index &quot;</span> &lt;&lt; endIndex &lt;&lt; endl;</span><br><span class="line">            &#125;</span><br><span class="line">            node = node-&gt;fail;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    AhoCorasick ac;</span><br><span class="line">    ac.<span class="built_in">addPattern</span>(<span class="string">&quot;he&quot;</span>);</span><br><span class="line">    ac.<span class="built_in">addPattern</span>(<span class="string">&quot;she&quot;</span>);</span><br><span class="line">    ac.<span class="built_in">addPattern</span>(<span class="string">&quot;his&quot;</span>);</span><br><span class="line">    ac.<span class="built_in">addPattern</span>(<span class="string">&quot;hers&quot;</span>);</span><br><span class="line"></span><br><span class="line">    ac.<span class="built_in">buildFailureFunction</span>();</span><br><span class="line"></span><br><span class="line">    string text = <span class="string">&quot;ahishers&quot;</span>;</span><br><span class="line">    ac.<span class="built_in">match</span>(text);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„Aho-Corasickç®—æ³•çš„å®ç°ï¼Œå¯ä»¥æ ¹æ®å®é™…éœ€è¦è¿›è¡Œä¼˜åŒ–å’Œæ‰©å±•ã€‚</p><h3 id="4-KMPç®—æ³•">4. <strong>KMPç®—æ³•</strong></h3><p>KMPï¼ˆKnuth-Morris-Prattï¼‰ç®—æ³•æ˜¯ä¸€ç§é«˜æ•ˆçš„å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ï¼Œå®ƒé€šè¿‡åˆ©ç”¨å·²ç»åŒ¹é…è¿‡çš„ä¿¡æ¯æ¥é¿å…ä¸å¿…è¦çš„å­—ç¬¦æ¯”è¾ƒã€‚ä»¥ä¸‹æ˜¯KMPç®—æ³•çš„ç®€è¦è¯´æ˜å’ŒC++å®ç°ï¼š</p><h4 id="KMPç®—æ³•">KMPç®—æ³•</h4><h5 id="åŸºæœ¬æ€æƒ³ï¼š-2">åŸºæœ¬æ€æƒ³ï¼š</h5><ol><li>æ„å»ºéƒ¨åˆ†åŒ¹é…è¡¨ï¼ˆPartial Match Tableï¼ŒPMTï¼‰ï¼šPMTè®°å½•äº†æ¯ä¸ªå‰ç¼€çš„æœ€é•¿ç›¸ç­‰çš„çœŸå‰ç¼€å’ŒçœŸåç¼€çš„é•¿åº¦ã€‚</li><li>åˆ©ç”¨PMTè¿›è¡ŒåŒ¹é…ï¼šåœ¨åŒ¹é…è¿‡ç¨‹ä¸­ï¼Œå½“å‘ç”Ÿä¸åŒ¹é…æ—¶ï¼Œæ ¹æ®PMTæ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„ä½ç½®è·³è¿‡ä¸€éƒ¨åˆ†å­—ç¬¦ã€‚</li></ol><h5 id="C-å®ç°ï¼š-4">C++å®ç°ï¼š</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„å»ºéƒ¨åˆ†åŒ¹é…è¡¨ï¼ˆPartial Match Tableï¼‰</span></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">buildPMT</span><span class="params">(<span class="type">const</span> string&amp; pattern)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> patternLength = pattern.<span class="built_in">size</span>();</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">pmt</span><span class="params">(patternLength, <span class="number">0</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> length = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> i = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (i &lt; patternLength) &#123;</span><br><span class="line">        <span class="keyword">if</span> (pattern[i] == pattern[length]) &#123;</span><br><span class="line">            length++;</span><br><span class="line">            pmt[i] = length;</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (length != <span class="number">0</span>) &#123;</span><br><span class="line">                length = pmt[length - <span class="number">1</span>];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                pmt[i] = <span class="number">0</span>;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> pmt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// KMPç®—æ³•å®ç°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">kmpSearch</span><span class="params">(<span class="type">const</span> string&amp; pattern, <span class="type">const</span> string&amp; text)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> patternLength = pattern.<span class="built_in">size</span>();</span><br><span class="line">    <span class="type">int</span> textLength = text.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„å»ºéƒ¨åˆ†åŒ¹é…è¡¨</span></span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; pmt = <span class="built_in">buildPMT</span>(pattern);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> i = <span class="number">0</span>;  <span class="comment">// ç´¢å¼•ç”¨äºéå†text</span></span><br><span class="line">    <span class="type">int</span> j = <span class="number">0</span>;  <span class="comment">// ç´¢å¼•ç”¨äºéå†pattern</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (i &lt; textLength) &#123;</span><br><span class="line">        <span class="keyword">if</span> (pattern[j] == text[i]) &#123;</span><br><span class="line">            i++;</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (j == patternLength) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;Pattern found at index &quot;</span> &lt;&lt; i - j &lt;&lt; endl;</span><br><span class="line">            j = pmt[j - <span class="number">1</span>];</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i &lt; textLength &amp;&amp; pattern[j] != text[i]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (j != <span class="number">0</span>) &#123;</span><br><span class="line">                j = pmt[j - <span class="number">1</span>];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    string text = <span class="string">&quot;ABABDABACDABABCABAB&quot;</span>;</span><br><span class="line">    string pattern = <span class="string">&quot;ABABC&quot;</span>;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Text: &quot;</span> &lt;&lt; text &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Pattern: &quot;</span> &lt;&lt; pattern &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">kmpSearch</span>(pattern, text);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„KMPç®—æ³•çš„å®ç°ç¤ºä¾‹ï¼Œç”¨äºåœ¨æ–‡æœ¬ä¸­æŸ¥æ‰¾æ¨¡å¼ä¸²çš„å‡ºç°ã€‚è¿™ä¸ªç®—æ³•é€šè¿‡æ„å»ºéƒ¨åˆ†åŒ¹é…è¡¨æ¥æé«˜åŒ¹é…æ•ˆç‡ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œé€‚å½“çš„ä¼˜åŒ–ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•™æå®ç°ï¼š</span></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">computePrefix</span><span class="params">(<span class="type">const</span> string&amp; pattern)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> m = pattern.<span class="built_in">size</span>();</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">pi</span><span class="params">(m, <span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="type">int</span> k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="keyword">while</span>(k &gt; <span class="number">0</span> &amp;&amp; pattern[k] != pattern[i]) &#123;</span><br><span class="line">            k = pi[k - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(pattern[k] == pattern[i])&#123;</span><br><span class="line">            k = k + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        pi[i] = k;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pi;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> KMP-<span class="built_in">MATCHER</span>()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å®ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®åº“å¤ä¹ ç¬”è®°</title>
      <link href="/2025/07/10/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2025/07/10/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°æ®åº“ç›¸å…³æ¦‚å¿µ">æ•°æ®åº“ç›¸å…³æ¦‚å¿µ</h1><ul><li>æ•°æ® &amp; ä¿¡æ¯ï¼šæ•°æ®+è§£é‡Š=ä¿¡æ¯</li><li>æ•°æ®ç®¡ç†ï¼šæ•°æ®å­˜å‚¨/ç»´æŠ¤/æŸ¥è¯¢/å®‰å…¨ç­‰</li><li>æ•°æ®åº“ï¼šæ˜¯å­˜å‚¨ä»‹è´¨ä¸Šçš„ä¸€ä¸ª/ç»„æ–‡ä»¶ï¼Œä¸èƒ½ç›´æ¥ç¼–è¾‘ï¼Œéœ€é€šè¿‡æ•°æ®åº“ç®¡ç†ç³»ç»Ÿæ¥æ“ä½œ</li><li><strong>æ•°æ®åº“ç®¡ç†ç³»ç»ŸDBMS</strong>ï¼šç®¡ç†æ•°æ®åº“çš„ä¸€ç§å¤§å‹å¤æ‚è½¯ä»¶ç³»ç»Ÿ</li><li><strong>æ•°æ®åº“ç³»ç»ŸDMS</strong>ï¼šç”±åº”ç”¨ç¨‹åºã€æ•°æ®åº“ã€æ•°æ®åº“ç®¡ç†ç³»ç»Ÿå’Œç”¨æˆ·ç»„æˆ</li></ul><h1 id="ERæ¨¡å‹">ERæ¨¡å‹</h1><p><strong>ER å›¾</strong> å…¨ç§°æ˜¯ Entity Relationship Diagramï¼ˆå®ä½“è”ç³»å›¾ï¼‰ï¼Œæä¾›äº†è¡¨ç¤ºå®ä½“ç±»å‹ã€å±æ€§å’Œè”ç³»çš„æ–¹æ³•ã€‚</p><p>ER å›¾ç”±ä¸‹é¢ 3 ä¸ªè¦ç´ ç»„æˆï¼š</p><ul><li><strong>å®ä½“</strong>ï¼šé€šå¸¸æ˜¯ç°å®ä¸–ç•Œçš„ä¸šåŠ¡å¯¹è±¡ï¼Œå½“ç„¶ä½¿ç”¨ä¸€äº›é€»è¾‘å¯¹è±¡ä¹Ÿå¯ä»¥ã€‚åœ¨ ER å›¾ä¸­ï¼Œå®ä½“ä½¿ç”¨<strong>çŸ©å½¢æ¡†</strong>è¡¨ç¤ºã€‚</li><li><strong>å±æ€§</strong>ï¼šå³æŸä¸ªå®ä½“æ‹¥æœ‰çš„å±æ€§ï¼Œå±æ€§ç”¨æ¥æè¿°ç»„æˆå®ä½“çš„è¦ç´ ã€‚åœ¨ ER å›¾ä¸­ï¼Œå±æ€§ä½¿ç”¨<strong>æ¤­åœ†å½¢</strong>è¡¨ç¤ºã€‚</li><li><strong>è”ç³»</strong>ï¼šå³å®ä½“ä¸å®ä½“ä¹‹é—´çš„å…³ç³»ï¼Œåœ¨ ER å›¾ä¸­ç”¨<strong>è±å½¢</strong>è¡¨ç¤ºï¼Œè¿™ä¸ªå…³ç³»ä¸ä»…æœ‰ä¸šåŠ¡å…³è”å…³ç³»ï¼Œè¿˜èƒ½é€šè¿‡æ•°å­—è¡¨ç¤ºå®ä½“ä¹‹é—´çš„æ•°é‡å¯¹ç…§å…³ç³»ã€‚</li></ul><h1 id="å…³ç³»æ¨¡å‹">å…³ç³»æ¨¡å‹</h1><ul><li><strong>å…ƒç»„</strong>ï¼šå…ƒç»„ï¼ˆtupleï¼‰æ˜¯å…³ç³»æ•°æ®åº“ä¸­çš„åŸºæœ¬æ¦‚å¿µï¼Œå…³ç³»æ˜¯ä¸€å¼ è¡¨ï¼Œè¡¨ä¸­çš„æ¯è¡Œï¼ˆå³æ•°æ®åº“ä¸­çš„æ¯æ¡è®°å½•ï¼‰å°±æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œæ¯åˆ—å°±æ˜¯ä¸€ä¸ªå±æ€§ã€‚ åœ¨äºŒç»´è¡¨é‡Œï¼Œå…ƒç»„ä¹Ÿç§°ä¸ºè¡Œã€‚</li><li><strong>ç /é”®</strong>ï¼šç å°±æ˜¯èƒ½å”¯ä¸€æ ‡è¯†å®ä½“çš„å±æ€§ï¼Œå¯¹åº”è¡¨ä¸­çš„åˆ—ã€‚</li><li><strong>å€™é€‰ç /å€™é€‰é”®</strong>ï¼šè‹¥å…³ç³»ä¸­çš„æŸä¸€å±æ€§æˆ–å±æ€§ç»„çš„å€¼èƒ½å”¯ä¸€çš„æ ‡è¯†ä¸€ä¸ªå…ƒç»„ï¼Œè€Œå…¶ä»»ä½•ã€å­é›†éƒ½ä¸èƒ½å†æ ‡è¯†ï¼Œåˆ™ç§°è¯¥å±æ€§ç»„ä¸ºå€™é€‰ç ã€‚ä¾‹å¦‚ï¼šåœ¨å­¦ç”Ÿå®ä½“ä¸­ï¼Œâ€œå­¦å·â€æ˜¯èƒ½å”¯ä¸€çš„åŒºåˆ†å­¦ç”Ÿå®ä½“çš„ï¼ŒåŒæ—¶åˆå‡è®¾â€œå§“åâ€ã€â€œç­çº§â€çš„å±æ€§ç»„åˆè¶³ä»¥åŒºåˆ†å­¦ç”Ÿå®ä½“ï¼Œé‚£ä¹ˆ{å­¦å·}å’Œ{å§“åï¼Œç­çº§}éƒ½æ˜¯å€™é€‰ç ã€‚</li><li><strong>ä¸»ç /ä¸»é”®</strong> : ä¸»ç ä¹Ÿå«ä¸»é”®ã€‚ä¸»ç æ˜¯ä»å€™é€‰ç ä¸­é€‰å‡ºæ¥çš„ã€‚ ä¸€ä¸ªå®ä½“é›†ä¸­åªèƒ½æœ‰ä¸€ä¸ªä¸»ç ï¼Œä½†å¯ä»¥æœ‰å¤šä¸ªå€™é€‰ç ã€‚</li><li><strong>å¤–ç /å¤–é”®</strong> : å¤–ç ä¹Ÿå«å¤–é”®ã€‚å¦‚æœä¸€ä¸ªå…³ç³»ä¸­çš„ä¸€ä¸ªå±æ€§æ˜¯å¦å¤–ä¸€ä¸ªå…³ç³»ä¸­çš„ä¸»ç åˆ™è¿™ä¸ªå±æ€§ä¸ºå¤–ç ã€‚</li><li><strong>ä¸»å±æ€§</strong>ï¼šå€™é€‰ç ä¸­å‡ºç°è¿‡çš„å±æ€§ç§°ä¸ºä¸»å±æ€§ã€‚æ¯”å¦‚å…³ç³» å·¥äººï¼ˆå·¥å·ï¼Œèº«ä»½è¯å·ï¼Œå§“åï¼Œæ€§åˆ«ï¼Œéƒ¨é—¨ï¼‰. æ˜¾ç„¶å·¥å·å’Œèº«ä»½è¯å·éƒ½èƒ½å¤Ÿå”¯ä¸€æ ‡ç¤ºè¿™ä¸ªå…³ç³»ï¼Œæ‰€ä»¥éƒ½æ˜¯å€™é€‰ç ã€‚å·¥å·ã€èº«ä»½è¯å·è¿™ä¸¤ä¸ªå±æ€§å°±æ˜¯ä¸»å±æ€§ã€‚å¦‚æœä¸»ç æ˜¯ä¸€ä¸ªå±æ€§ç»„ï¼Œé‚£ä¹ˆå±æ€§ç»„ä¸­çš„å±æ€§éƒ½æ˜¯ä¸»å±æ€§ã€‚</li><li><strong>éä¸»å±æ€§ï¼š</strong> ä¸åŒ…å«åœ¨ä»»ä½•ä¸€ä¸ªå€™é€‰ç ä¸­çš„å±æ€§ç§°ä¸ºéä¸»å±æ€§ã€‚æ¯”å¦‚åœ¨å…³ç³»â€”â€”å­¦ç”Ÿï¼ˆå­¦å·ï¼Œå§“åï¼Œå¹´é¾„ï¼Œæ€§åˆ«ï¼Œç­çº§ï¼‰ä¸­ï¼Œä¸»ç æ˜¯â€œå­¦å·â€ï¼Œé‚£ä¹ˆå…¶ä»–çš„â€œå§“åâ€ã€â€œå¹´é¾„â€ã€â€œæ€§åˆ«â€ã€â€œç­çº§â€å°±éƒ½å¯ä»¥ç§°ä¸ºéä¸»å±æ€§ã€‚</li></ul><h1 id="èŒƒå¼">èŒƒå¼</h1><h2 id="1NF">1NF</h2><p>ç¬¬ä¸€èŒƒå¼ï¼ˆFirst Normal Formï¼‰æ˜¯æœ€åŸºæœ¬çš„è§„èŒƒå½¢å¼ï¼Œå³<strong>å…³ç³»ä¸­æ¯ä¸ªå±æ€§éƒ½æ˜¯ä¸å¯å†åˆ†çš„ç®€å•é¡¹</strong>ã€‚</p><h2 id="2NF">2NF</h2><p>å¦‚æœå…³ç³»æ¨¡å¼R âˆˆ 1NFï¼Œä¸”<strong>æ¯ä¸ªéä¸»å±æ€§éƒ½å®Œå…¨å‡½æ•°ä¾èµ–äºRçš„æ¯ä¸ªå…³ç³»é”®</strong>ï¼Œåˆ™ç§°Rå±äºç¬¬äºŒèŒƒå¼ï¼ˆSecond Normal Formï¼‰ï¼Œç®€ç§°2NFï¼Œè®°ä½œR âˆˆ 2NFã€‚</p><h2 id="3NF">3NF</h2><p>å¦‚æœå…³ç³»æ¨¡å¼R âˆˆ 2NFï¼Œä¸”æ¯ä¸ªéä¸»å±æ€§éƒ½ä¸ä¼ é€’ä¾èµ–äºRçš„æ¯ä¸ªå…³ç³»é”®ï¼Œåˆ™ç§°Rå±äºç¬¬ä¸‰èŒƒå¼ï¼ˆThird Normal  Formï¼‰ï¼Œç®€ç§°3NFï¼Œè®°ä½œR âˆˆ 3NFã€‚</p><h2 id="å…¶ä»–èŒƒå¼">å…¶ä»–èŒƒå¼</h2><ul><li>BCNFï¼šå¦‚æœå…³ç³»æ¨¡å¼R âˆˆ 1NFï¼Œä¸”æ‰€æœ‰çš„å‡½æ•°ä¾èµ–Xâ†’Yï¼ˆY âˆ‰ Xï¼‰ï¼Œå†³å®šå› ç´ Xéƒ½åŒ…å«äº†Rçš„ä¸€ä¸ªå€™é€‰é”®ï¼Œåˆ™ç§°Rå±äºBCèŒƒå¼ï¼ˆBoyce-Codd Normal Formï¼‰ï¼Œè®°ä½œR âˆˆ BCNFã€‚</li></ul><h1 id="SQLè¯­è¨€">SQLè¯­è¨€</h1><h2 id="DQL">DQL</h2><h3 id="å•è¡¨æŸ¥è¯¢">å•è¡¨æŸ¥è¯¢</h3><p>æŸ¥è¯¢è¯­å¥åŸºæœ¬ç»“æ„ï¼š</p><ul><li><p>SELECTå­å¥ï¼šæŒ‡å®šè¦æ˜¾ç¤ºçš„å±æ€§åˆ—ï¼ˆDISTNCTï¼‰</p></li><li><p>FROMå­å¥ï¼šæŒ‡å®šæŸ¥è¯¢å¯¹è±¡(åŸºæœ¬è¡¨æˆ–è§†å›¾)</p></li><li><p>WHEREå­å¥ï¼šæŒ‡å®šæŸ¥è¯¢æ¡ä»¶</p></li><li><p>GROUP BYå­å¥ï¼šå¯¹æŸ¥è¯¢ç»“æœæŒ‰æŒ‡å®šåˆ—çš„å€¼åˆ†ç»„ï¼Œè¯¥å±æ€§åˆ—å€¼ç›¸ç­‰çš„å…ƒç»„ä¸ºä¸€ä¸ªç»„ã€‚é€šå¸¸ä¼šåœ¨æ¯ç»„ä¸­ä½œç”¨é›†å‡½æ•°ã€‚</p></li><li><p>HAVINGçŸ­è¯­ï¼šç­›é€‰å‡ºåªæœ‰æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„ç»„</p></li><li><p>ORDER BYå­å¥ï¼šå¯¹æŸ¥è¯¢ç»“æœè¡¨æŒ‰æŒ‡å®šåˆ—å€¼çš„å‡åºæˆ–é™åºæ’åº</p></li></ul><hr><h3 id="å¤šè¡¨æŸ¥è¯¢">å¤šè¡¨æŸ¥è¯¢</h3><p>è¿æ¥æŸ¥è¯¢ï¼ˆåœ¨Fromå­å¥ä¸­æ¶‰åŠå¤šä¸ªè¡¨çš„æŸ¥è¯¢ï¼‰ï¼š</p><ul><li><p>å¹¿ä¹‰ç¬›å¡å°”ç§¯ï¼šä¸å¸¦è¿æ¥è°“è¯çš„è¿</p></li><li><p>ç­‰å€¼è¿æ¥(å«è‡ªç„¶è¿æ¥)ï¼š</p><ul><li>è‡ªç„¶è¿æ¥ï¼šç­‰å€¼è¿æ¥çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼ŒæŠŠç›®æ ‡åˆ—ä¸­é‡å¤çš„å±æ€§åˆ—å»æ‰</li></ul></li><li><p>éç­‰å€¼è¿æ¥æŸ¥è¯¢ï¼šè¿æ¥è¿ç®—ç¬¦ä¸æ˜¯=å·çš„è¿æ¥</p></li><li><p>è‡ªèº«è¿æ¥æŸ¥è¯¢ï¼šä¸€ä¸ªè¡¨ä¸å…¶è‡ªå·±è¿›è¡Œè¿æ¥ï¼Œéœ€è¦ç»™è¡¨çš„ä¸¤ä¸ªå‰¯æœ¬èµ·åˆ«åä»¥ç¤ºåŒºåˆ«</p></li><li><p>å¤–è¿æ¥æŸ¥è¯¢ï¼šæ™®é€šè¿æ¥ï¼ˆå†…è¿æ¥ï¼ŒINNER JOINï¼‰åªè¿”å›ä¸¤ä¸ªè¡¨ä¸­<strong>åŒ¹é…çš„è®°å½•</strong>ï¼›å¤–è¿æ¥ï¼ˆOUTTER JOINï¼‰ä¸ä»…è¿”å›<strong>åŒ¹é…çš„è®°å½•</strong>ï¼Œè¿˜è¿”å›<strong>æœªåŒ¹é…çš„ä¸€ä¾§æˆ–ä¸¤ä¾§çš„è®°å½•</strong>ï¼ŒæœªåŒ¹é…éƒ¨åˆ†ç”¨ <code>NULL</code> è¡¥é½ã€‚</p><ul><li>LEFT OUTER JOIN æˆ– LEFT JOIN</li><li>RIGHT OUTER JOIN æˆ– RIGHT JOIN</li><li>FULL OUTER JOIN æˆ– FULL JOIN</li></ul><blockquote><p>MySQL ä¸æ”¯æŒ FULL JOINï¼Œå¯ä»¥ç”¨ <code>UNION</code> å®ç°ï¼šLeft join Union Right join</p></blockquote></li><li><p>å¤åˆæ¡ä»¶è¿æ¥æŸ¥è¯¢</p></li></ul><hr><h3 id="å­æŸ¥è¯¢">å­æŸ¥è¯¢</h3><ul><li>ç›¸å…³å­æŸ¥è¯¢ï¼šå­æŸ¥è¯¢çš„æŸ¥è¯¢æ¡ä»¶ä¾èµ–äºçˆ¶æŸ¥è¯¢</li><li>ä¸ç›¸å…³å­æŸ¥è¯¢ï¼šç”±é‡Œå‘å¤–é€å±‚å¤„ç†</li></ul><p>WHEREå­å¥ä¸­å¼•å‡ºå­æŸ¥è¯¢çš„è°“è¯ï¼šIN/=ã€æ¯”è¾ƒè¿ç®—ç¬¦ã€ALL/ANYã€EXISTS/NOT EXISTSï¼›</p><p>FROMå­å¥ä¸­çš„å­æŸ¥è¯¢ç›¸å½“äºè¿”å›ä¸€å¼ ä¸´æ—¶è¡¨ã€‚</p><hr><h3 id="é›†åˆæŸ¥è¯¢">é›†åˆæŸ¥è¯¢</h3><p><code>UNION</code> ï¼šç”¨äº<strong>åˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ª <code>SELECT</code> æŸ¥è¯¢çš„ç»“æœ</strong>ï¼Œå½¢æˆä¸€ä¸ªç»Ÿä¸€çš„ç»“æœé›†ã€‚</p><blockquote><p>MySQLåªæ”¯æŒUNIONï¼ˆå¹¶ï¼‰ï¼Œä¸æ”¯æŒINTERSECT/EXCEPTï¼ˆäº¤/å·®ï¼‰ã€‚</p></blockquote><h2 id="DDL">DDL</h2><ul><li><p>åˆ›å»ºè¡¨</p><img src="https://cdn.jsdelivr.net/gh/bush-cn/TyporaImages@main/img/2025/07/10/20250710191512.png" alt="image-20250710191509273" style="zoom: 50%;" /></li><li><p>åˆ é™¤è¡¨ï¼š<code>DROP TABEL &lt;è¡¨å&gt;</code></p></li><li><p>ä¿®æ”¹è¡¨ï¼š</p><img src="https://cdn.jsdelivr.net/gh/bush-cn/TyporaImages@main/img/2025/07/10/20250710191658.png" alt="image-20250710191656484" style="zoom: 50%;" /></li></ul><h2 id="DML">DML</h2><ul><li><p>æ’å…¥æ•°æ®</p><ul><li><p>æ’å…¥å•æ¡å…ƒç»„</p><img src="https://cdn.jsdelivr.net/gh/bush-cn/TyporaImages@main/img/2025/07/10/20250710192434.png" alt="image-20250710192432361" style="zoom: 50%;" /></li><li><p>æ’å…¥å­æŸ¥è¯¢ç»“æœ</p><img src="https://cdn.jsdelivr.net/gh/bush-cn/TyporaImages@main/img/2025/07/10/20250710192532.png" alt="image-20250710192530527" style="zoom:50%;" /></li></ul></li><li><p>ä¿®æ”¹æ•°æ®</p><img src="https://cdn.jsdelivr.net/gh/bush-cn/TyporaImages@main/img/2025/07/10/20250710192639.png" alt="image-20250710192637371" style="zoom:50%;" /><ul><li>ä¿®æ”¹æŸä¸€ä¸ªå…ƒç»„çš„å€¼</li><li>ä¿®æ”¹å¤šä¸ªå…ƒç»„çš„å€¼</li><li>å¸¦å­æŸ¥è¯¢çš„ä¿®æ”¹è¯­å¥</li></ul></li><li><p>åˆ é™¤æ•°æ®</p><img src="https://cdn.jsdelivr.net/gh/bush-cn/TyporaImages@main/img/2025/07/10/20250710192759.png" alt="image-20250710192757239" style="zoom:50%;" /><ul><li>åˆ é™¤æŸä¸€ä¸ªå…ƒç»„çš„å€¼</li><li>åˆ é™¤å¤šä¸ªå…ƒç»„çš„å€¼</li><li>å¸¦å­æŸ¥è¯¢çš„åˆ é™¤è¯­å¥</li></ul></li></ul><h2 id="TCLï¼ˆäº‹åŠ¡æ§åˆ¶è¯­è¨€ï¼‰">TCLï¼ˆäº‹åŠ¡æ§åˆ¶è¯­è¨€ï¼‰</h2><p><strong>MySQL é»˜è®¤æ˜¯éšå¼æäº¤</strong>ï¼Œæ¯æ‰§è¡Œä¸€æ¡è¯­å¥å°±æŠŠè¿™æ¡è¯­å¥å½“æˆä¸€ä¸ªäº‹åŠ¡ç„¶åè¿›è¡Œæäº¤ã€‚å½“å‡ºç° <code>START TRANSACTION</code> è¯­å¥æ—¶ï¼Œä¼šå…³é—­éšå¼æäº¤ï¼›å½“ <code>COMMIT</code> æˆ– <code>ROLLBACK</code> è¯­å¥æ‰§è¡Œåï¼Œäº‹åŠ¡ä¼šè‡ªåŠ¨å…³é—­ï¼Œé‡æ–°æ¢å¤éšå¼æäº¤ã€‚</p><p>é€šè¿‡ <code>set autocommit=0</code> å¯ä»¥å–æ¶ˆè‡ªåŠ¨æäº¤ï¼Œç›´åˆ° <code>set autocommit=1</code> æ‰ä¼šæäº¤ï¼›<code>autocommit</code> æ ‡è®°æ˜¯é’ˆå¯¹æ¯ä¸ªè¿æ¥è€Œä¸æ˜¯é’ˆå¯¹æœåŠ¡å™¨çš„ã€‚</p><p>æŒ‡ä»¤ï¼š</p><ul><li><code>START TRANSACTION</code> - æŒ‡ä»¤ç”¨äºæ ‡è®°äº‹åŠ¡çš„èµ·å§‹ç‚¹ã€‚</li><li><code>SAVEPOINT</code> - æŒ‡ä»¤ç”¨äºåˆ›å»ºä¿ç•™ç‚¹ã€‚</li><li><code>ROLLBACK TO</code> - æŒ‡ä»¤ç”¨äºå›æ»šåˆ°æŒ‡å®šçš„ä¿ç•™ç‚¹ï¼›å¦‚æœæ²¡æœ‰è®¾ç½®ä¿ç•™ç‚¹ï¼Œåˆ™å›é€€åˆ° <code>START TRANSACTION</code> è¯­å¥å¤„ã€‚</li><li><code>COMMIT</code> - æäº¤äº‹åŠ¡ã€‚</li></ul><h2 id="DCL">DCL</h2><p><strong>DCL çš„ä¸»è¦åŠŸèƒ½æ˜¯æ§åˆ¶ç”¨æˆ·çš„è®¿é—®æƒé™ã€‚</strong></p><ul><li><p>æƒé™æˆäºˆ<code>GRANT</code>ï¼š</p><ul><li>å¦‚<code>Grant select on TableA on UserA</code>ï¼ˆè¡¨çº§ï¼‰<code>Grant select (a, b) on TableA on UserA</code>ï¼ˆåˆ—çº§ï¼‰</li></ul></li><li><p>æƒé™æ”¶å›<code>Revoke</code>ï¼š</p><ul><li>å¦‚<code>Revoke select on TableA from UserA</code></li></ul></li><li><p>åˆ›å»ºæ–°ç”¨æˆ·ï¼š</p><ul><li><code>Create user username IDENTIFIED BY â€˜passwordâ€™</code></li></ul></li><li><p>è§’è‰²ï¼šå‘½åçš„æƒé™é›†åˆï¼Œä½¿ç”¨è§’è‰²å¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œæˆæƒç®¡ç†</p><img src="https://cdn.jsdelivr.net/gh/bush-cn/TyporaImages@main/img/2025/07/10/20250710213003.png" alt="image-20250710213001894" style="zoom: 33%;" /></li></ul><h2 id="è§†å›¾">è§†å›¾</h2><p>è§†å›¾æ˜¯ä¸€ç§è™šè¡¨ï¼ˆvirtual tableï¼‰ï¼Œæ˜¯ä»ä¸€ä¸ªæˆ–å‡ ä¸ªåŸºæœ¬è¡¨ï¼ˆæˆ–è§†å›¾ï¼‰å¯¼å‡ºçš„è¡¨ã€‚</p><blockquote><p>è§†å›¾å…¶å®æ˜¯åœ¨æ•°æ®å­—å…¸ä¸­å­˜å‚¨çš„ä¸€æ¡Select è¯­å¥</p></blockquote><img src="https://cdn.jsdelivr.net/gh/bush-cn/TyporaImages@main/img/2025/07/10/20250710192931.png" alt="image-20250710192929826" style="zoom:50%;" /><p>è§†å›¾çš„ä½œç”¨ï¼š</p><ul><li>è§†å›¾èƒ½å¤Ÿç®€åŒ–ç”¨æˆ·çš„æ“ä½œ</li><li>è§†å›¾ä½¿ç”¨æˆ·èƒ½ä»¥å¤šç§è§’åº¦çœ‹å¾…åŒä¸€æ•°æ®</li><li>è§†å›¾å¯¹é‡æ„æ•°æ®åº“æä¾›äº†ä¸€å®šç¨‹åº¦çš„é€»è¾‘ç‹¬ç«‹æ€§</li><li>è§†å›¾èƒ½å¤Ÿå¯¹æœºå¯†æ•°æ®æä¾›å®‰å…¨ä¿æŠ¤</li></ul><h1 id="ç´¢å¼•ä¸æŸ¥è¯¢ä¼˜åŒ–">ç´¢å¼•ä¸æŸ¥è¯¢ä¼˜åŒ–</h1><h2 id="ç´¢å¼•">ç´¢å¼•</h2><p>ä»€ä¹ˆæ˜¯ç´¢å¼•ï¼š</p><ul><li>æ˜¯ä¸»è¡¨ä¸Šçš„ä¸€ç§è¾…åŠ©æ•°æ®ç»“æ„</li><li>å¯¹æ•°æ®åº“è¡¨ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—çš„å€¼è¿›è¡Œæ’åº</li><li>ç”¨äºæé«˜ä¸»è¡¨çš„æŸ¥è¯¢é€Ÿåº¦</li><li>å¦‚æœæƒ³æŒ‰ç‰¹å®šåˆ—çš„å€¼æ¥æŸ¥æ‰¾æ•°æ®ï¼Œåˆ™ä¸åœ¨è¡¨ä¸­æœç´¢æ‰€æœ‰çš„è¡Œç›¸æ¯”ï¼Œç´¢å¼•æœ‰åŠ©äºæ›´å¿«åœ°è·å–ä¿¡æ¯</li></ul><p><strong>ä¼˜ç‚¹</strong>ï¼š</p><ul><li>ä½¿ç”¨ç´¢å¼•å¯ä»¥å¤§å¤§åŠ å¿« æ•°æ®çš„æ£€ç´¢é€Ÿåº¦ï¼ˆå¤§å¤§å‡å°‘æ£€ç´¢çš„æ•°æ®é‡ï¼‰, è¿™ä¹Ÿæ˜¯åˆ›å»ºç´¢å¼•çš„æœ€ä¸»è¦çš„åŸå› ã€‚</li><li>é€šè¿‡åˆ›å»ºå”¯ä¸€æ€§ç´¢å¼•ï¼Œå¯ä»¥ä¿è¯æ•°æ®åº“è¡¨ä¸­æ¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ€§ã€‚</li></ul><p><strong>ç¼ºç‚¹</strong>ï¼š</p><ul><li>åˆ›å»ºç´¢å¼•å’Œç»´æŠ¤ç´¢å¼•éœ€è¦è€—è´¹è®¸å¤šæ—¶é—´ã€‚å½“å¯¹è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢åˆ æ”¹çš„æ—¶å€™ï¼Œå¦‚æœæ•°æ®æœ‰ç´¢å¼•ï¼Œé‚£ä¹ˆç´¢å¼•ä¹Ÿéœ€è¦åŠ¨æ€çš„ä¿®æ”¹ï¼Œä¼šé™ä½ SQL æ‰§è¡Œæ•ˆç‡ã€‚</li><li>ç´¢å¼•éœ€è¦ä½¿ç”¨ç‰©ç†æ–‡ä»¶å­˜å‚¨ï¼Œä¹Ÿä¼šè€—è´¹ä¸€å®šç©ºé—´ã€‚</li></ul><h2 id="B-æ ‘ç´¢å¼•">B+æ ‘ç´¢å¼•</h2><p>B+æ ‘ç´¢å¼•æ˜¯æ•°æ®åº“ç³»ç»Ÿä¸­ä½¿ç”¨æœ€å¹¿æ³›çš„å¤šçº§ç´¢å¼•ã€‚å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>å°†ç´¢å¼•é”®ç»„ç»‡æˆä¸€æ£µå¹³è¡¡æ ‘ï¼Œ å³ä»æ ‘æ ¹åˆ°æ ‘å¶çš„æ‰€æœ‰è·¯å¾„ä¸€æ ·é•¿</li><li>æ•°æ®ï¼ˆæŒ‡å‘åŸºæœ¬è¡¨è®°å½•å­˜å‚¨ä½ç½®çš„æŒ‡é’ˆï¼‰å­˜å‚¨åœ¨å¶ç»“ç‚¹</li><li>æœ€åº•å±‚çš„å¶èŠ‚ç‚¹åŒ…å«æ¯ä¸ªç´¢å¼•é”®å’ŒæŒ‡å‘è¢«ç´¢å¼•è¡Œçš„æŒ‡é’ˆï¼ˆè¡Œidï¼‰</li><li>å¶èŠ‚ç‚¹ä¹‹é—´æœ‰é€šé“å¯ä¾›å¹³è¡ŒæŸ¥è¯¢</li><li>æ¯ä¸€ä¸ªå¶èŠ‚ç‚¹éƒ½å’Œç£ç›˜é¡µé¢å¤§å°ä¸€è‡´</li><li>æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦ï¼š$O(log_mn) $(mä¸ºåˆ†å‰æ•°ï¼Œå³B+æ ‘çš„é˜¶ï¼‰</li></ul><h2 id="æŸ¥è¯¢ä¼˜åŒ–">æŸ¥è¯¢ä¼˜åŒ–</h2><p>SQLè¯­å¥æ‰§è¡Œè¿‡ç¨‹ï¼š</p><img src="https://cdn.jsdelivr.net/gh/bush-cn/TyporaImages@main/img/2025/07/10/20250710205450.png" alt="image-20250710205448837" style="zoom:50%;" /><p>æŸ¥è¯¢ä¼˜åŒ–çš„ä¸€èˆ¬å‡†åˆ™ï¼š</p><ul><li>é€‰æ‹©è¿ç®—åº”å°½å¯èƒ½å…ˆåš<ul><li>ç›®çš„ï¼šå‡å°ä¸­é—´å…³ç³»</li></ul></li><li>åœ¨æ‰§è¡Œè¿æ¥æ“ä½œå‰å¯¹å…³ç³»é€‚å½“è¿›è¡Œé¢„å¤„ç†<ul><li>æŒ‰è¿æ¥å±æ€§æ’åº</li><li>åœ¨è¿æ¥å±æ€§ä¸Šå»ºç«‹ç´¢å¼•</li></ul></li><li>æŠ•å½±è¿ç®—å’Œé€‰æ‹©è¿ç®—åŒæ—¶åš<ul><li>ç›®çš„ï¼šé¿å…é‡å¤æ‰«æå…³ç³»</li></ul></li><li>å°†æŠ•å½±è¿ç®—ä¸å…¶å‰é¢æˆ–åé¢çš„åŒç›®è¿ç®—ç»“åˆ<ul><li>ç›®çš„ï¼šå‡å°‘æ‰«æå…³ç³»çš„éæ•°</li></ul></li><li>æå–å…¬å…±å­è¡¨è¾¾å¼</li><li>â€¦</li></ul><hr><p>æŸ¥è¯¢ä¼˜åŒ–çš„ä¸€èˆ¬è¿‡ç¨‹ï¼š</p><ol><li><p>å°†æŸ¥è¯¢è½¬æ¢æˆæŸç§å†…éƒ¨è¡¨ç¤ºï¼Œé€šå¸¸æ˜¯è¯­æ³•æ ‘</p></li><li><p>æ ¹æ®ä¸€å®šçš„ç­‰ä»·å˜æ¢è§„åˆ™æŠŠè¯­æ³•æ ‘è½¬æ¢æˆæ ‡å‡†ï¼ˆä¼˜åŒ–ï¼‰å½¢å¼ ï¼ˆä»£æ•°ä¼˜åŒ–ï¼‰</p></li><li><p>é€‰æ‹©ä½å±‚çš„æ“ä½œç®—æ³•ï¼ˆç‰©ç†ä¼˜åŒ–ï¼‰</p><ul><li>å¯¹äºè¯­æ³•æ ‘ä¸­çš„æ¯ä¸€ä¸ªæ“ä½œè®¡ç®—å„ç§æ‰§è¡Œç®—æ³•çš„æ‰§è¡Œä»£ä»·</li><li>é€‰æ‹©ä»£ä»·å°çš„æ‰§è¡Œç®—æ³•</li></ul></li><li><p>ç”ŸæˆæŸ¥è¯¢è®¡åˆ’(æŸ¥è¯¢æ‰§è¡Œæ–¹æ¡ˆ)</p></li></ol><h1 id="å­˜å‚¨è¿‡ç¨‹">å­˜å‚¨è¿‡ç¨‹</h1><p>å­˜å‚¨è¿‡ç¨‹å¯ä»¥çœ‹æˆæ˜¯å¯¹ä¸€ç³»åˆ— SQL æ“ä½œçš„æ‰¹å¤„ç†ã€‚å­˜å‚¨è¿‡ç¨‹å¯ä»¥ç”±è§¦å‘å™¨ï¼Œå…¶ä»–å­˜å‚¨è¿‡ç¨‹ä»¥åŠ Javaï¼Œ Pythonï¼ŒPHP ç­‰åº”ç”¨ç¨‹åºè°ƒç”¨ã€‚</p><p>ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹çš„å¥½å¤„ï¼š</p><ul><li>ä»£ç å°è£…ï¼Œä¿è¯äº†ä¸€å®šçš„å®‰å…¨æ€§ï¼›</li><li>ä»£ç å¤ç”¨ï¼›</li><li>ç”±äºæ˜¯é¢„å…ˆç¼–è¯‘ï¼Œå› æ­¤å…·æœ‰å¾ˆé«˜çš„æ€§èƒ½ã€‚</li></ul><h1 id="è§¦å‘å™¨">è§¦å‘å™¨</h1><p>è§¦å‘å™¨æ˜¯ä¸€ç§ä¸è¡¨æ“ä½œæœ‰å…³çš„æ•°æ®åº“å¯¹è±¡ï¼Œå½“è§¦å‘å™¨æ‰€åœ¨è¡¨ä¸Šå‡ºç°æŒ‡å®šäº‹ä»¶æ—¶ï¼Œå°†è°ƒç”¨è¯¥å¯¹è±¡ï¼Œå³è¡¨çš„æ“ä½œäº‹ä»¶è§¦å‘è¡¨ä¸Šçš„è§¦å‘å™¨çš„æ‰§è¡Œã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è§¦å‘å™¨æ¥è¿›è¡Œå®¡è®¡è·Ÿè¸ªï¼ŒæŠŠä¿®æ”¹è®°å½•åˆ°å¦å¤–ä¸€å¼ è¡¨ä¸­ã€‚</p><p>ä½¿ç”¨è§¦å‘å™¨çš„ä¼˜ç‚¹ï¼š</p><ul><li>SQL è§¦å‘å™¨æä¾›äº†å¦ä¸€ç§æ£€æŸ¥æ•°æ®å®Œæ•´æ€§çš„æ–¹æ³•ã€‚</li><li>SQL è§¦å‘å™¨å¯ä»¥æ•è·æ•°æ®åº“å±‚ä¸­ä¸šåŠ¡é€»è¾‘ä¸­çš„é”™è¯¯ã€‚</li><li>SQL è§¦å‘å™¨æä¾›äº†å¦ä¸€ç§è¿è¡Œè®¡åˆ’ä»»åŠ¡çš„æ–¹æ³•ã€‚é€šè¿‡ä½¿ç”¨ SQL è§¦å‘å™¨ï¼Œæ‚¨ä¸å¿…ç­‰å¾…è¿è¡Œè®¡åˆ’ä»»åŠ¡ï¼Œå› ä¸ºåœ¨å¯¹è¡¨ä¸­çš„æ•°æ®è¿›è¡Œæ›´æ”¹ä¹‹å‰æˆ–ä¹‹åä¼šè‡ªåŠ¨è°ƒç”¨è§¦å‘å™¨ã€‚</li><li>SQL è§¦å‘å™¨å¯¹äºå®¡è®¡è¡¨ä¸­æ•°æ®çš„æ›´æ”¹éå¸¸æœ‰ç”¨ã€‚</li></ul><p>ä½¿ç”¨è§¦å‘å™¨çš„ç¼ºç‚¹ï¼š</p><ul><li>SQL è§¦å‘å™¨åªèƒ½æä¾›æ‰©å±•éªŒè¯ï¼Œå¹¶ä¸”ä¸èƒ½æ›¿æ¢æ‰€æœ‰éªŒè¯ã€‚å¿…é¡»åœ¨åº”ç”¨ç¨‹åºå±‚ä¸­å®Œæˆä¸€äº›ç®€å•çš„éªŒè¯ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ JavaScript åœ¨å®¢æˆ·ç«¯éªŒè¯ç”¨æˆ·çš„è¾“å…¥ï¼Œæˆ–è€…ä½¿ç”¨æœåŠ¡å™¨ç«¯è„šæœ¬è¯­è¨€ï¼ˆå¦‚ JSPï¼ŒPHPï¼Œ<a href="http://ASP.NET">ASP.NET</a>ï¼ŒPerlï¼‰åœ¨æœåŠ¡å™¨ç«¯éªŒè¯ç”¨æˆ·çš„è¾“å…¥ã€‚</li><li>ä»å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºè°ƒç”¨å’Œæ‰§è¡Œ SQL è§¦å‘å™¨æ˜¯ä¸å¯è§çš„ï¼Œå› æ­¤å¾ˆéš¾å¼„æ¸…æ¥šæ•°æ®åº“å±‚ä¸­å‘ç”Ÿäº†ä»€ä¹ˆã€‚</li><li>SQL è§¦å‘å™¨å¯èƒ½ä¼šå¢åŠ æ•°æ®åº“æœåŠ¡å™¨çš„å¼€é”€ã€‚</li></ul><blockquote><p>MySQL ä¸å…è®¸åœ¨è§¦å‘å™¨ä¸­ä½¿ç”¨ CALL è¯­å¥ ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ã€‚</p></blockquote><p>åˆ›å»ºè§¦å‘å™¨ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> trigger_name</span><br><span class="line">trigger_time</span><br><span class="line">trigger_event</span><br><span class="line"><span class="keyword">ON</span> table_name</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  trigger_statements</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> `trigger_insert_user`</span><br><span class="line">AFTER <span class="keyword">INSERT</span> <span class="keyword">ON</span> `<span class="keyword">user</span>`</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">INSERT INTO</span> `user_history`(user_id, operate_type, operate_time)</span><br><span class="line">    <span class="keyword">VALUES</span> (NEW.id, <span class="string">&#x27;add a user&#x27;</span>,  now());</span><br><span class="line"><span class="keyword">END</span> $</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure><h1 id="NoSQL">NoSQL</h1><p>NoSQLï¼ˆNot Only SQL çš„ç¼©å†™ï¼‰æ³›æŒ‡éå…³ç³»å‹çš„æ•°æ®åº“ï¼Œä¸»è¦é’ˆå¯¹çš„æ˜¯é”®å€¼ã€æ–‡æ¡£ä»¥åŠå›¾å½¢ç±»å‹æ•°æ®å­˜å‚¨ã€‚å¹¶ä¸”ï¼ŒNoSQL æ•°æ®åº“å¤©ç”Ÿæ”¯æŒåˆ†å¸ƒå¼ï¼Œæ•°æ®å†—ä½™å’Œæ•°æ®åˆ†ç‰‡ç­‰ç‰¹æ€§ï¼Œæ—¨åœ¨æä¾›å¯æ‰©å±•çš„é«˜å¯ç”¨é«˜æ€§èƒ½æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚</p><h2 id="NoSQLçš„ç±»å‹">NoSQLçš„ç±»å‹</h2><p>NoSQL æ•°æ®åº“ä¸»è¦å¯ä»¥åˆ†ä¸ºä¸‹é¢å››ç§ç±»å‹ï¼š</p><ul><li><strong>é”®å€¼</strong>ï¼šé”®å€¼æ•°æ®åº“æ˜¯ä¸€ç§è¾ƒç®€å•çš„æ•°æ®åº“ï¼Œå…¶ä¸­æ¯ä¸ªé¡¹ç›®éƒ½åŒ…å«é”®å’Œå€¼ã€‚è¿™æ˜¯æä¸ºçµæ´»çš„ NoSQL æ•°æ®åº“ç±»å‹ï¼Œå› ä¸ºåº”ç”¨å¯ä»¥å®Œå…¨æ§åˆ¶ value å­—æ®µä¸­å­˜å‚¨çš„å†…å®¹ï¼Œæ²¡æœ‰ä»»ä½•é™åˆ¶ã€‚Redis å’Œ DynanoDB æ˜¯ä¸¤æ¬¾éå¸¸æµè¡Œçš„é”®å€¼æ•°æ®åº“ã€‚</li><li><strong>æ–‡æ¡£</strong>ï¼šæ–‡æ¡£æ•°æ®åº“ä¸­çš„æ•°æ®è¢«å­˜å‚¨åœ¨ç±»ä¼¼äº JSONï¼ˆJavaScript å¯¹è±¡è¡¨ç¤ºæ³•ï¼‰å¯¹è±¡çš„æ–‡æ¡£ä¸­ï¼Œéå¸¸æ¸…æ™°ç›´è§‚ã€‚æ¯ä¸ªæ–‡æ¡£åŒ…å«æˆå¯¹çš„å­—æ®µå’Œå€¼ã€‚è¿™äº›å€¼é€šå¸¸å¯ä»¥æ˜¯å„ç§ç±»å‹ï¼ŒåŒ…æ‹¬å­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”å€¼ã€æ•°ç»„æˆ–å¯¹è±¡ç­‰ï¼Œå¹¶ä¸”å®ƒä»¬çš„ç»“æ„é€šå¸¸ä¸å¼€å‘è€…åœ¨ä»£ç ä¸­ä½¿ç”¨çš„å¯¹è±¡ä¿æŒä¸€è‡´ã€‚MongoDB å°±æ˜¯ä¸€æ¬¾éå¸¸æµè¡Œçš„æ–‡æ¡£æ•°æ®åº“ã€‚</li><li><strong>å›¾å½¢</strong>ï¼šå›¾å½¢æ•°æ®åº“æ—¨åœ¨è½»æ¾æ„å»ºå’Œè¿è¡Œä¸é«˜åº¦è¿æ¥çš„æ•°æ®é›†ä¸€èµ·ä½¿ç”¨çš„åº”ç”¨ç¨‹åºã€‚å›¾å½¢æ•°æ®åº“çš„å…¸å‹ä½¿ç”¨æ¡ˆä¾‹åŒ…æ‹¬ç¤¾äº¤ç½‘ç»œã€æ¨èå¼•æ“ã€æ¬ºè¯ˆæ£€æµ‹å’ŒçŸ¥è¯†å›¾å½¢ã€‚Neo4j å’Œ Giraph æ˜¯ä¸¤æ¬¾éå¸¸æµè¡Œçš„å›¾å½¢æ•°æ®åº“ã€‚</li><li><strong>å®½åˆ—</strong>ï¼šå®½åˆ—å­˜å‚¨æ•°æ®åº“éå¸¸é€‚åˆéœ€è¦å­˜å‚¨å¤§é‡çš„æ•°æ®ã€‚Cassandra å’Œ HBase æ˜¯ä¸¤æ¬¾éå¸¸æµè¡Œçš„å®½åˆ—å­˜å‚¨æ•°æ®åº“ã€‚</li></ul><h2 id="SQLä¸NoSQLçš„åŒºåˆ«">SQLä¸NoSQLçš„åŒºåˆ«</h2><table><thead><tr><th></th><th>SQL æ•°æ®åº“</th><th>NoSQL æ•°æ®åº“</th></tr></thead><tbody><tr><td>æ•°æ®å­˜å‚¨æ¨¡å‹</td><td>ç»“æ„åŒ–å­˜å‚¨ï¼Œå…·æœ‰å›ºå®šè¡Œå’Œåˆ—çš„è¡¨æ ¼</td><td>éç»“æ„åŒ–å­˜å‚¨ã€‚æ–‡æ¡£ï¼šJSON æ–‡æ¡£ï¼Œé”®å€¼ï¼šé”®å€¼å¯¹ï¼Œå®½åˆ—ï¼šåŒ…å«è¡Œå’ŒåŠ¨æ€åˆ—çš„è¡¨ï¼Œå›¾ï¼šèŠ‚ç‚¹å’Œè¾¹</td></tr><tr><td>å‘å±•å†ç¨‹</td><td>å¼€å‘äº 1970 å¹´ä»£ï¼Œé‡ç‚¹æ˜¯å‡å°‘æ•°æ®é‡å¤</td><td>å¼€å‘äº 2000 å¹´ä»£åæœŸï¼Œé‡ç‚¹æ˜¯æå‡å¯æ‰©å±•æ€§ï¼Œå‡å°‘å¤§è§„æ¨¡æ•°æ®çš„å­˜å‚¨æˆæœ¬</td></tr><tr><td>ä¾‹å­</td><td>Oracleã€MySQLã€Microsoft SQL Serverã€PostgreSQL</td><td>æ–‡æ¡£ï¼šMongoDBã€CouchDBï¼Œé”®å€¼ï¼šRedisã€DynamoDBï¼Œå®½åˆ—ï¼šCassandraã€HBaseï¼Œå›¾è¡¨ï¼šNeo4jã€Amazon Neptuneã€Giraph</td></tr><tr><td>ACID å±æ€§</td><td>æä¾›åŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§å’ŒæŒä¹…æ€§ (ACID) å±æ€§</td><td>é€šå¸¸ä¸æ”¯æŒ ACID äº‹åŠ¡ï¼Œä¸ºäº†å¯æ‰©å±•ã€é«˜æ€§èƒ½è¿›è¡Œäº†æƒè¡¡ï¼Œå°‘éƒ¨åˆ†æ”¯æŒæ¯”å¦‚ MongoDBã€‚ä¸è¿‡ï¼ŒMongoDB å¯¹ ACID äº‹åŠ¡çš„æ”¯æŒå’Œ MySQL è¿˜æ˜¯æœ‰æ‰€åŒºåˆ«çš„ã€‚</td></tr><tr><td>æ€§èƒ½</td><td>æ€§èƒ½é€šå¸¸å–å†³äºç£ç›˜å­ç³»ç»Ÿã€‚è¦è·å¾—æœ€ä½³æ€§èƒ½ï¼Œé€šå¸¸éœ€è¦ä¼˜åŒ–æŸ¥è¯¢ã€ç´¢å¼•å’Œè¡¨ç»“æ„</td><td>æ€§èƒ½é€šå¸¸ç”±åº•å±‚ç¡¬ä»¶é›†ç¾¤å¤§å°ã€ç½‘ç»œå»¶è¿Ÿä»¥åŠè°ƒç”¨åº”ç”¨ç¨‹åºæ¥å†³å®š</td></tr><tr><td>æ‰©å±•</td><td>å‚ç›´ï¼ˆä½¿ç”¨æ€§èƒ½æ›´å¼ºå¤§çš„æœåŠ¡å™¨è¿›è¡Œæ‰©å±•ï¼‰ã€è¯»å†™åˆ†ç¦»ã€åˆ†åº“åˆ†è¡¨</td><td>æ¨ªå‘ï¼ˆå¢åŠ æœåŠ¡å™¨çš„æ–¹å¼æ¨ªå‘æ‰©å±•ï¼Œé€šå¸¸æ˜¯åŸºäºåˆ†ç‰‡æœºåˆ¶ï¼‰</td></tr><tr><td>ç”¨é€”</td><td>æ™®é€šä¼ä¸šçº§çš„é¡¹ç›®çš„æ•°æ®å­˜å‚¨</td><td>ç”¨é€”å¹¿æ³›æ¯”å¦‚å›¾æ•°æ®åº“æ”¯æŒåˆ†æå’Œéå†è¿æ¥æ•°æ®ä¹‹é—´çš„å…³ç³»ã€é”®å€¼æ•°æ®åº“å¯ä»¥å¤„ç†å¤§é‡æ•°æ®æ‰©å±•å’Œæé«˜çš„çŠ¶æ€å˜åŒ–</td></tr><tr><td>æŸ¥è¯¢è¯­æ³•</td><td>ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ (SQL)</td><td>æ•°æ®è®¿é—®è¯­æ³•å¯èƒ½å› æ•°æ®åº“è€Œå¼‚</td></tr></tbody></table><hr><blockquote><p>å‚è€ƒï¼š<a href="https://javaguide.cn/">https://javaguide.cn/</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å®ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java SEå¤ä¹ ç¬”è®°</title>
      <link href="/2025/07/04/Java%20SE%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2025/07/04/Java%20SE%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç¬¬ä¸€æ¬¡æ‰¾å®ä¹ wwwwwwwwå¥½ç´§å¼ å¸Œæœ›èƒ½é¡ºåˆ©ã€‚</p></blockquote><h1 id="Java-SEå¤ä¹ ç¬”è®°">Java SEå¤ä¹ ç¬”è®°</h1><h2 id="JVM">JVM</h2><p>Javaè™šæ‹Ÿæœºï¼ˆJava Virtual Machineï¼Œç®€ç§°JVMï¼‰æ˜¯è¿è¡Œæ‰€æœ‰Javaç¨‹åºçš„æŠ½è±¡è®¡ç®—æœºï¼Œæ˜¯Javaè¯­è¨€çš„è¿è¡Œç¯å¢ƒã€‚</p><p>Javaè¯­è¨€çš„ä¸€ä¸ªéå¸¸é‡è¦çš„ç‰¹ç‚¹å°±æ˜¯<strong>ä¸å¹³å°çš„æ— å…³æ€§</strong>ï¼ˆä¸€æ¬¡ç¼–è¯‘ã€å¤„å¤„è¿è¡Œï¼‰ã€‚è€Œä½¿ç”¨Javaè™šæ‹Ÿæœºæ˜¯å®ç°è¿™ä¸€ç‰¹ç‚¹çš„å…³é”®ã€‚ä¸€èˆ¬çš„é«˜çº§è¯­è¨€å¦‚æœè¦åœ¨ä¸åŒçš„å¹³å°ä¸Šè¿è¡Œï¼Œè‡³å°‘éœ€è¦ç¼–è¯‘æˆä¸åŒçš„ç›®æ ‡ä»£ç ã€‚è€Œå¼•å…¥Javaè¯­è¨€è™šæ‹Ÿæœºåï¼ŒJavaè¯­è¨€åœ¨ä¸åŒå¹³å°ä¸Šè¿è¡Œæ—¶ä¸éœ€è¦é‡æ–°ç¼–è¯‘ã€‚Javaè¯­è¨€ä½¿ç”¨æ¨¡å¼Javaè™šæ‹Ÿæœºå±è”½äº†ä¸å…·ä½“å¹³å°ç›¸å…³çš„ä¿¡æ¯ï¼Œä½¿å¾—Javaè¯­è¨€ç¼–è¯‘ç¨‹åºåªéœ€ç”Ÿæˆåœ¨Javaè™šæ‹Ÿæœºä¸Šè¿è¡Œçš„ç›®æ ‡ä»£ç ï¼ˆå­—èŠ‚ç ï¼‰ï¼Œå°±å¯ä»¥åœ¨å¤šç§å¹³å°ä¸Šä¸åŠ ä¿®æ”¹åœ°è¿è¡Œã€‚Javaè™šæ‹Ÿæœºåœ¨æ‰§è¡Œå­—èŠ‚ç æ—¶ï¼ŒæŠŠå­—èŠ‚ç è§£é‡Šæˆå…·ä½“å¹³å°ä¸Šçš„æœºå™¨æŒ‡ä»¤æ‰§è¡Œã€‚</p><p>JVMä¸­æä¾›çš„JITï¼ˆå³æ—¶ç¼–è¯‘æ–¹å¼ï¼‰å°†å­—èŠ‚ç ç›´æ¥è½¬åŒ–æˆé«˜æ€§èƒ½çš„æœ¬åœ°æœºå™¨ç ï¼Œå³JITä½¿å¾—Javaç¨‹åºæ—¢èƒ½è·¨å¹³å°åˆèƒ½é«˜é€Ÿè¿è¡Œã€‚</p><h2 id="Javaé›†åˆ">Javaé›†åˆ</h2><p><img src="https://cdn.jsdelivr.net/gh/bush-cn/TyporaImages@main/img/2025/07/04/20250704183013.gif" alt="img"></p><h3 id="ArrayList">ArrayList</h3><p>Java ArrayList å¸¸ç”¨æ–¹æ³•åˆ—è¡¨å¦‚ä¸‹ï¼š</p><table><thead><tr><th style="text-align:left">æ–¹æ³•</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-add.html">add()</a></td><td style="text-align:left">å°†å…ƒç´ æ’å…¥åˆ°æŒ‡å®šä½ç½®çš„ arraylist ä¸­</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-addall.html">addAll()</a></td><td style="text-align:left">æ·»åŠ é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ åˆ° arraylist ä¸­</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-clear.html">clear()</a></td><td style="text-align:left">åˆ é™¤ arraylist ä¸­çš„æ‰€æœ‰å…ƒç´ </td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-clone.html">clone()</a></td><td style="text-align:left">å¤åˆ¶ä¸€ä»½ arraylist</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-contains.html">contains()</a></td><td style="text-align:left">åˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨ arraylist</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-get.html">get()</a></td><td style="text-align:left">é€šè¿‡ç´¢å¼•å€¼è·å– arraylist ä¸­çš„å…ƒç´ </td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-indexof.html">indexOf()</a></td><td style="text-align:left">è¿”å› arraylist ä¸­å…ƒç´ çš„ç´¢å¼•å€¼</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-removeall.html">removeAll()</a></td><td style="text-align:left">åˆ é™¤å­˜åœ¨äºæŒ‡å®šé›†åˆä¸­çš„ arraylist é‡Œçš„æ‰€æœ‰å…ƒç´ </td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-remove.html">remove()</a></td><td style="text-align:left">åˆ é™¤ arraylist é‡Œçš„å•ä¸ªå…ƒç´ </td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-size.html">size()</a></td><td style="text-align:left">è¿”å› arraylist é‡Œå…ƒç´ æ•°é‡</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-isempty.html">isEmpty()</a></td><td style="text-align:left">åˆ¤æ–­ arraylist æ˜¯å¦ä¸ºç©º</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-sublist.html">subList()</a></td><td style="text-align:left">æˆªå–éƒ¨åˆ† arraylist çš„å…ƒç´ </td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-set.html">set()</a></td><td style="text-align:left">æ›¿æ¢ arraylist ä¸­æŒ‡å®šç´¢å¼•çš„å…ƒç´ </td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-sort.html">sort()</a></td><td style="text-align:left">å¯¹ arraylist å…ƒç´ è¿›è¡Œæ’åº</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-toarray.html">toArray()</a></td><td style="text-align:left">å°† arraylist è½¬æ¢ä¸ºæ•°ç»„</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-tostring.html">toString()</a></td><td style="text-align:left">å°† arraylist è½¬æ¢ä¸ºå­—ç¬¦ä¸²</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-surecapacity.html">ensureCapacity</a>()</td><td style="text-align:left">è®¾ç½®æŒ‡å®šå®¹é‡å¤§å°çš„ arraylist</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-lastindexof.html">lastIndexOf()</a></td><td style="text-align:left">è¿”å›æŒ‡å®šå…ƒç´ åœ¨ arraylist ä¸­æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-retainall.html">retainAll()</a></td><td style="text-align:left">ä¿ç•™ arraylist ä¸­åœ¨æŒ‡å®šé›†åˆä¸­ä¹Ÿå­˜åœ¨çš„é‚£äº›å…ƒç´ </td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-containsall.html">containsAll()</a></td><td style="text-align:left">æŸ¥çœ‹ arraylist æ˜¯å¦åŒ…å«æŒ‡å®šé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ </td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-trimtosize.html">trimToSize()</a></td><td style="text-align:left">å°† arraylist ä¸­çš„å®¹é‡è°ƒæ•´ä¸ºæ•°ç»„ä¸­çš„å…ƒç´ ä¸ªæ•°</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-removerange.html">removeRange()</a></td><td style="text-align:left">åˆ é™¤ arraylist ä¸­æŒ‡å®šç´¢å¼•ä¹‹é—´å­˜åœ¨çš„å…ƒç´ </td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-replaceall.html">replaceAll()</a></td><td style="text-align:left">å°†ç»™å®šçš„æ“ä½œå†…å®¹æ›¿æ¢æ‰æ•°ç»„ä¸­æ¯ä¸€ä¸ªå…ƒç´ </td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-removeif.html">removeIf()</a></td><td style="text-align:left">åˆ é™¤æ‰€æœ‰æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„ arraylist å…ƒç´ </td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-arraylist-foreach.html">forEach()</a></td><td style="text-align:left">éå† arraylist ä¸­æ¯ä¸€ä¸ªå…ƒç´ å¹¶æ‰§è¡Œç‰¹å®šæ“ä½œ</td></tr></tbody></table><h3 id="Linked-List">Linked List</h3><p><strong>ä»¥ä¸‹æƒ…å†µä½¿ç”¨ ArrayList :</strong></p><ul><li>é¢‘ç¹è®¿é—®åˆ—è¡¨ä¸­çš„æŸä¸€ä¸ªå…ƒç´ ã€‚</li><li>åªéœ€è¦åœ¨åˆ—è¡¨æœ«å°¾è¿›è¡Œæ·»åŠ å’Œåˆ é™¤å…ƒç´ æ“ä½œã€‚</li></ul><p><strong>ä»¥ä¸‹æƒ…å†µä½¿ç”¨ LinkedList :</strong></p><ul><li>ä½ éœ€è¦é€šè¿‡å¾ªç¯è¿­ä»£æ¥è®¿é—®åˆ—è¡¨ä¸­çš„æŸäº›å…ƒç´ ã€‚</li><li>éœ€è¦é¢‘ç¹çš„åœ¨åˆ—è¡¨å¼€å¤´ã€ä¸­é—´ã€æœ«å°¾ç­‰ä½ç½®è¿›è¡Œæ·»åŠ å’Œåˆ é™¤å…ƒç´ æ“ä½œã€‚</li></ul><blockquote><p>LinkedList å®ç°äº† Queue æ¥å£ã€Deque æ¥å£ï¼Œå¯ä½œä¸ºé˜Ÿåˆ—ã€åŒå‘é˜Ÿåˆ—ä½¿ç”¨ã€‚</p></blockquote><table><thead><tr><th style="text-align:left">æ–¹æ³•</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-add.html">public boolean add(E e)</a></td><td style="text-align:left">é“¾è¡¨æœ«å°¾æ·»åŠ å…ƒç´ ï¼Œè¿”å›æ˜¯å¦æˆåŠŸï¼ŒæˆåŠŸä¸º trueï¼Œå¤±è´¥ä¸º falseã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-addall.html">public void add(int index, E element)</a></td><td style="text-align:left">å‘æŒ‡å®šä½ç½®æ’å…¥å…ƒç´ ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-addall.html">public boolean addAll(Collection c)</a></td><td style="text-align:left">å°†ä¸€ä¸ªé›†åˆçš„æ‰€æœ‰å…ƒç´ æ·»åŠ åˆ°é“¾è¡¨åé¢ï¼Œè¿”å›æ˜¯å¦æˆåŠŸï¼ŒæˆåŠŸä¸º trueï¼Œå¤±è´¥ä¸º falseã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-addall.html">public boolean addAll(int index, Collection c)</a></td><td style="text-align:left">å°†ä¸€ä¸ªé›†åˆçš„æ‰€æœ‰å…ƒç´ æ·»åŠ åˆ°é“¾è¡¨çš„æŒ‡å®šä½ç½®åé¢ï¼Œè¿”å›æ˜¯å¦æˆåŠŸï¼ŒæˆåŠŸä¸º trueï¼Œå¤±è´¥ä¸º falseã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-addfirst.html">public void addFirst(E e)</a></td><td style="text-align:left">å…ƒç´ æ·»åŠ åˆ°å¤´éƒ¨ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-addlast.html">public void addLast(E e)</a></td><td style="text-align:left">å…ƒç´ æ·»åŠ åˆ°å°¾éƒ¨ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-offer.html">public boolean offer(E e)</a></td><td style="text-align:left">å‘é“¾è¡¨æœ«å°¾æ·»åŠ å…ƒç´ ï¼Œè¿”å›æ˜¯å¦æˆåŠŸï¼ŒæˆåŠŸä¸º trueï¼Œå¤±è´¥ä¸º falseã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-offerfirst.html">public boolean offerFirst(E e)</a></td><td style="text-align:left">å¤´éƒ¨æ’å…¥å…ƒç´ ï¼Œè¿”å›æ˜¯å¦æˆåŠŸï¼ŒæˆåŠŸä¸º trueï¼Œå¤±è´¥ä¸º falseã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-offerlast.html">public boolean offerLast(E e)</a></td><td style="text-align:left">å°¾éƒ¨æ’å…¥å…ƒç´ ï¼Œè¿”å›æ˜¯å¦æˆåŠŸï¼ŒæˆåŠŸä¸º trueï¼Œå¤±è´¥ä¸º falseã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-clear.html">public void clear()</a></td><td style="text-align:left">æ¸…ç©ºé“¾è¡¨ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-removefirst.html">public E removeFirst()</a></td><td style="text-align:left">åˆ é™¤å¹¶è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-removelast.html">public E removeLast()</a></td><td style="text-align:left">åˆ é™¤å¹¶è¿”å›æœ€åä¸€ä¸ªå…ƒç´ ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-remove.html">public boolean remove(Object o)</a></td><td style="text-align:left">åˆ é™¤æŸä¸€å…ƒç´ ï¼Œè¿”å›æ˜¯å¦æˆåŠŸï¼ŒæˆåŠŸä¸º trueï¼Œå¤±è´¥ä¸º falseã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-remove.html">public E remove(int index)</a></td><td style="text-align:left">åˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-poll.html">public E poll()</a></td><td style="text-align:left">åˆ é™¤å¹¶è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-remove.html">public E remove()</a></td><td style="text-align:left">åˆ é™¤å¹¶è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-contains.html">public boolean contains(Object o)&lt;</a>/td&gt;</td><td style="text-align:left">åˆ¤æ–­æ˜¯å¦å«æœ‰æŸä¸€å…ƒç´ ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-get.html">public E get(int index)</a></td><td style="text-align:left">è¿”å›æŒ‡å®šä½ç½®çš„å…ƒç´ ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-getfirst.html">public E getFirst()</a></td><td style="text-align:left">è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-getlast.html">public E getLast()</a></td><td style="text-align:left">è¿”å›æœ€åä¸€ä¸ªå…ƒç´ ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-indexof.html">public int indexOf(Object o)</a></td><td style="text-align:left">æŸ¥æ‰¾æŒ‡å®šå…ƒç´ ä»å‰å¾€åç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-lastindexof.html">public int lastIndexOf(Object o)</a></td><td style="text-align:left">æŸ¥æ‰¾æŒ‡å®šå…ƒç´ æœ€åä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-peek.html">public E peek()</a></td><td style="text-align:left">è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-element.html">public E element()</a></td><td style="text-align:left">è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-peekfirst.html">public E peekFirst()</a></td><td style="text-align:left">è¿”å›å¤´éƒ¨å…ƒç´ ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-peeklast.html">public E peekLast()</a></td><td style="text-align:left">è¿”å›å°¾éƒ¨å…ƒç´ ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-set.html">public E set(int index, E element)</a></td><td style="text-align:left">è®¾ç½®æŒ‡å®šä½ç½®çš„å…ƒç´ ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-clone.html">public Object clone()</a></td><td style="text-align:left">å…‹éš†è¯¥åˆ—è¡¨ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-descendingiterator.html">public Iterator descendingIterator()</a></td><td style="text-align:left">è¿”å›å€’åºè¿­ä»£å™¨ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-size.html">public int size()</a></td><td style="text-align:left">è¿”å›é“¾è¡¨å…ƒç´ ä¸ªæ•°ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-linkedlist-listiterator.html">public ListIterator listIterator(int index)</a></td><td style="text-align:left">è¿”å›ä»æŒ‡å®šä½ç½®å¼€å§‹åˆ°æœ«å°¾çš„è¿­ä»£å™¨ã€‚</td></tr><tr><td style="text-align:left">[public Object<a href="https://www.runoob.com/java/java-linkedlist-toarray.html">] toArray()</a></td><td style="text-align:left">è¿”å›ä¸€ä¸ªç”±é“¾è¡¨å…ƒç´ ç»„æˆçš„æ•°ç»„ã€‚</td></tr><tr><td style="text-align:left">[public T<a href="https://www.runoob.com/java/java-linkedlist-toarray.html">] toArray(T[] a)</a></td><td style="text-align:left">è¿”å›ä¸€ä¸ªç”±é“¾è¡¨å…ƒç´ è½¬æ¢ç±»å‹è€Œæˆçš„æ•°ç»„ã€‚</td></tr></tbody></table><h3 id="HashSet">HashSet</h3><table><thead><tr><th style="text-align:left"><strong>æ–¹æ³•</strong></th><th style="text-align:left"><strong>è¿”å›å€¼</strong></th><th style="text-align:left"><strong>è¯´æ˜</strong></th><th style="text-align:left"><strong>ç¤ºä¾‹</strong></th></tr></thead><tbody><tr><td style="text-align:left"><code>add(E e)</code></td><td style="text-align:left"><code>boolean</code></td><td style="text-align:left">æ·»åŠ å…ƒç´ åˆ°é›†åˆï¼ŒæˆåŠŸè¿”å› <code>true</code>ï¼Œé‡å¤å…ƒç´ è¿”å› <code>false</code>ã€‚</td><td style="text-align:left"><code>set.add(&quot;Java&quot;);</code></td></tr><tr><td style="text-align:left"><code>remove(Object o)</code></td><td style="text-align:left"><code>boolean</code></td><td style="text-align:left">åˆ é™¤æŒ‡å®šå…ƒç´ ï¼ŒæˆåŠŸè¿”å› <code>true</code>ï¼Œå…ƒç´ ä¸å­˜åœ¨è¿”å› <code>false</code>ã€‚</td><td style="text-align:left"><code>set.remove(&quot;Python&quot;);</code></td></tr><tr><td style="text-align:left"><code>contains(Object o)</code></td><td style="text-align:left"><code>boolean</code></td><td style="text-align:left">æ£€æŸ¥é›†åˆæ˜¯å¦åŒ…å«æŒ‡å®šå…ƒç´ ã€‚</td><td style="text-align:left"><code>if (set.contains(&quot;Java&quot;)) &#123; ... &#125;</code></td></tr><tr><td style="text-align:left"><code>size()</code></td><td style="text-align:left"><code>int</code></td><td style="text-align:left">è¿”å›é›†åˆä¸­çš„å…ƒç´ æ•°é‡ã€‚</td><td style="text-align:left"><code>int count = set.size();</code></td></tr><tr><td style="text-align:left"><code>isEmpty()</code></td><td style="text-align:left"><code>boolean</code></td><td style="text-align:left">åˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©ºã€‚</td><td style="text-align:left"><code>if (set.isEmpty()) &#123; ... &#125;</code></td></tr><tr><td style="text-align:left"><code>clear()</code></td><td style="text-align:left"><code>void</code></td><td style="text-align:left">æ¸…ç©ºé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</td><td style="text-align:left"><code>set.clear();</code></td></tr><tr><td style="text-align:left"><code>iterator()</code></td><td style="text-align:left"><code>Iterator&lt;E&gt;</code></td><td style="text-align:left">è¿”å›é›†åˆçš„è¿­ä»£å™¨ï¼Œç”¨äºéå†å…ƒç´ ã€‚</td><td style="text-align:left"><code>for (String s : set) &#123; ... &#125;</code></td></tr><tr><td style="text-align:left"><code>toArray()</code></td><td style="text-align:left"><code>Object[]</code></td><td style="text-align:left">å°†é›†åˆè½¬æ¢ä¸ºæ•°ç»„ã€‚</td><td style="text-align:left"><code>Object[] arr = set.toArray();</code></td></tr><tr><td style="text-align:left"><code>toArray(T[] a)</code></td><td style="text-align:left"><code>T[]</code></td><td style="text-align:left">å°†é›†åˆè½¬æ¢ä¸ºæŒ‡å®šç±»å‹çš„æ•°ç»„ã€‚</td><td style="text-align:left"><code>String[] arr = set.toArray(new String[0]);</code></td></tr><tr><td style="text-align:left"><code>addAll(Collection&lt;? extends E&gt; c)</code></td><td style="text-align:left"><code>boolean</code></td><td style="text-align:left">æ·»åŠ å¦ä¸€ä¸ªé›†åˆçš„æ‰€æœ‰å…ƒç´ ï¼ˆå¹¶é›†æ“ä½œï¼‰ã€‚</td><td style="text-align:left"><code>set.addAll(Arrays.asList(&quot;A&quot;, &quot;B&quot;));</code></td></tr><tr><td style="text-align:left"><code>retainAll(Collection&lt;?&gt; c)</code></td><td style="text-align:left"><code>boolean</code></td><td style="text-align:left">ä»…ä¿ç•™ä¸æŒ‡å®šé›†åˆå…±æœ‰çš„å…ƒç´ ï¼ˆäº¤é›†æ“ä½œï¼‰ã€‚</td><td style="text-align:left"><code>set.retainAll(otherSet);</code></td></tr><tr><td style="text-align:left"><code>removeAll(Collection&lt;?&gt; c)</code></td><td style="text-align:left"><code>boolean</code></td><td style="text-align:left">åˆ é™¤ä¸æŒ‡å®šé›†åˆå…±æœ‰çš„å…ƒç´ ï¼ˆå·®é›†æ“ä½œï¼‰ã€‚</td><td style="text-align:left"><code>set.removeAll(otherSet);</code></td></tr></tbody></table><h3 id="HashMap">HashMap</h3><p>Java HashMap å¸¸ç”¨æ–¹æ³•åˆ—è¡¨å¦‚ä¸‹ï¼š</p><table><thead><tr><th style="text-align:left">æ–¹æ³•</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-hashmap-clear.html">clear()</a></td><td style="text-align:left">åˆ é™¤ hashMap ä¸­çš„æ‰€æœ‰é”®/å€¼å¯¹</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-hashmap-clone.html">clone()</a></td><td style="text-align:left">å¤åˆ¶ä¸€ä»½ hashMap</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-hashmap-isempty.html">isEmpty()</a></td><td style="text-align:left">åˆ¤æ–­ hashMap æ˜¯å¦ä¸ºç©º</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-hashmap-size.html">size()</a></td><td style="text-align:left">è®¡ç®— hashMap ä¸­é”®/å€¼å¯¹çš„æ•°é‡</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-hashmap-put.html">put()</a></td><td style="text-align:left">å°†é”®/å€¼å¯¹æ·»åŠ åˆ° hashMap ä¸­</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-hashmap-putall.html">putAll()</a></td><td style="text-align:left">å°†æ‰€æœ‰é”®/å€¼å¯¹æ·»åŠ åˆ° hashMap ä¸­</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-hashmap-putifabsent.html">putIfAbsent()</a></td><td style="text-align:left">å¦‚æœ hashMap ä¸­ä¸å­˜åœ¨æŒ‡å®šçš„é”®ï¼Œåˆ™å°†æŒ‡å®šçš„é”®/å€¼å¯¹æ’å…¥åˆ° hashMap ä¸­ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-hashmap-remove.html">remove()</a></td><td style="text-align:left">åˆ é™¤ hashMap ä¸­æŒ‡å®šé”® key çš„æ˜ å°„å…³ç³»</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-hashmap-containskey.html">containsKey()</a></td><td style="text-align:left">æ£€æŸ¥ hashMap ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„ key å¯¹åº”çš„æ˜ å°„å…³ç³»ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-hashmap-containsvalue.html">containsValue()</a></td><td style="text-align:left">æ£€æŸ¥ hashMap ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„ value å¯¹åº”çš„æ˜ å°„å…³ç³»ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-hashmap-replace.html">replace()</a></td><td style="text-align:left">æ›¿æ¢ hashMap ä¸­æ˜¯æŒ‡å®šçš„ key å¯¹åº”çš„ valueã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-hashmap-replaceall.html">replaceAll()</a></td><td style="text-align:left">å°† hashMap ä¸­çš„æ‰€æœ‰æ˜ å°„å…³ç³»æ›¿æ¢æˆç»™å®šçš„å‡½æ•°æ‰€æ‰§è¡Œçš„ç»“æœã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-hashmap-get.html">get()</a></td><td style="text-align:left">è·å–æŒ‡å®š key å¯¹åº”å¯¹ value</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-hashmap-getordefault.html">getOrDefault()</a></td><td style="text-align:left">è·å–æŒ‡å®š key å¯¹åº”å¯¹ valueï¼Œå¦‚æœæ‰¾ä¸åˆ° key ï¼Œåˆ™è¿”å›è®¾ç½®çš„é»˜è®¤å€¼</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-hashmap-foreach.html">forEach()</a></td><td style="text-align:left">å¯¹ hashMap ä¸­çš„æ¯ä¸ªæ˜ å°„æ‰§è¡ŒæŒ‡å®šçš„æ“ä½œã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-hashmap-entryset.html">entrySet()</a></td><td style="text-align:left">è¿”å› hashMap ä¸­æ‰€æœ‰æ˜ å°„é¡¹çš„é›†åˆé›†åˆè§†å›¾ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-hashmap-keyset.html">keySet</a>()</td><td style="text-align:left">è¿”å› hashMap ä¸­æ‰€æœ‰ key ç»„æˆçš„é›†åˆè§†å›¾ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-hashmap-values.html">values()</a></td><td style="text-align:left">è¿”å› hashMap ä¸­å­˜åœ¨çš„æ‰€æœ‰ value å€¼ã€‚</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-hashmap-merge.html">merge()</a></td><td style="text-align:left">æ·»åŠ é”®å€¼å¯¹åˆ° hashMap ä¸­</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-hashmap-compute.html">compute()</a></td><td style="text-align:left">å¯¹ hashMap ä¸­æŒ‡å®š key çš„å€¼è¿›è¡Œé‡æ–°è®¡ç®—</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-hashmap-computeifabsent.html">computeIfAbsent()</a></td><td style="text-align:left">å¯¹ hashMap ä¸­æŒ‡å®š key çš„å€¼è¿›è¡Œé‡æ–°è®¡ç®—ï¼Œå¦‚æœä¸å­˜åœ¨è¿™ä¸ª keyï¼Œåˆ™æ·»åŠ åˆ° hashMap ä¸­</td></tr><tr><td style="text-align:left"><a href="https://www.runoob.com/java/java-hashmap-computeifpresent.html">computeIfPresent()</a></td><td style="text-align:left">å¯¹ hashMap ä¸­æŒ‡å®š key çš„å€¼è¿›è¡Œé‡æ–°è®¡ç®—ï¼Œå‰ææ˜¯è¯¥ key å­˜åœ¨äº hashMap ä¸­ã€‚</td></tr></tbody></table><h2 id="Java-I-O">Java I/O</h2><p><img src="https://cdn.jsdelivr.net/gh/bush-cn/TyporaImages@main/img/2025/07/05/20250705095318.png" alt="img"></p><h3 id="å­—èŠ‚æµï¼ˆå¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼‰">å­—èŠ‚æµï¼ˆå¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼‰</h3><h4 id="InputStream">InputStream</h4><p><code>InputStream</code>ç”¨äºä»æºå¤´ï¼ˆé€šå¸¸æ˜¯æ–‡ä»¶ï¼‰è¯»å–æ•°æ®ï¼ˆå­—èŠ‚ä¿¡æ¯ï¼‰åˆ°å†…å­˜ä¸­ï¼Œ<code>java.io.InputStream</code>æŠ½è±¡ç±»æ˜¯æ‰€æœ‰å­—èŠ‚è¾“å…¥æµçš„çˆ¶ç±»ã€‚</p><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>read()</code></td><td>è¿”å›è¾“å…¥æµä¸­ä¸‹ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ã€‚è¿”å›çš„å€¼ä»‹äº 0 åˆ° 255 ä¹‹é—´ã€‚å¦‚æœæœªè¯»å–ä»»ä½•å­—èŠ‚ï¼Œåˆ™ä»£ç è¿”å› <code>-1</code> ï¼Œè¡¨ç¤ºæ–‡ä»¶ç»“æŸã€‚</td></tr><tr><td><code>read(byte b[ ])</code></td><td>ä»è¾“å…¥æµä¸­è¯»å–ä¸€äº›å­—èŠ‚å­˜å‚¨åˆ°æ•°ç»„ <code>b</code> ä¸­ï¼Œè¿”å›è¯»å–çš„å­—èŠ‚æ•°ã€‚å¦‚æœæ²¡æœ‰å¯ç”¨å­—èŠ‚è¯»å–ï¼Œè¿”å› <code>-1</code>ã€‚</td></tr><tr><td><code>read(byte b[], int off, int len)</code></td><td>åœ¨<code>read(byte b[ ])</code> æ–¹æ³•çš„åŸºç¡€ä¸Šå¢åŠ äº† <code>off</code> å‚æ•°ï¼ˆåç§»é‡ï¼‰å’Œ <code>len</code> å‚æ•°ï¼ˆè¦è¯»å–çš„æœ€å¤§å­—èŠ‚æ•°ï¼‰ã€‚</td></tr><tr><td><code>skip(long n)</code></td><td>å¿½ç•¥è¾“å…¥æµä¸­çš„ n ä¸ªå­—èŠ‚ ,è¿”å›å®é™…å¿½ç•¥çš„å­—èŠ‚æ•°ã€‚</td></tr><tr><td><code>available()</code></td><td>è¿”å›è¾“å…¥æµä¸­å¯ä»¥è¯»å–çš„å­—èŠ‚æ•°ã€‚</td></tr><tr><td><code>close()</code></td><td>å…³é—­è¾“å…¥æµé‡Šæ”¾ç›¸å…³çš„ç³»ç»Ÿèµ„æºã€‚</td></tr></tbody></table><p>ä» Java 9 å¼€å§‹ï¼Œ<code>InputStream</code> æ–°å¢åŠ äº†å¤šä¸ªå®ç”¨çš„æ–¹æ³•ï¼š</p><ul><li><code>readAllBytes()</code>ï¼šè¯»å–è¾“å…¥æµä¸­çš„æ‰€æœ‰å­—èŠ‚ï¼Œè¿”å›å­—èŠ‚æ•°ç»„ã€‚</li><li><code>readNBytes(byte[] b, int off, int len)</code>ï¼šé˜»å¡ç›´åˆ°è¯»å– <code>len</code> ä¸ªå­—èŠ‚ã€‚</li><li><code>transferTo(OutputStream out)</code>ï¼šå°†æ‰€æœ‰å­—èŠ‚ä»ä¸€ä¸ªè¾“å…¥æµä¼ é€’åˆ°ä¸€ä¸ªè¾“å‡ºæµã€‚</li></ul><hr><p><code>FileInputStream</code>é…åˆ<code>BufferedInputStream</code>å®ç°è¯»å–Stringå¯¹è±¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–°å»ºä¸€ä¸ª BufferedInputStream å¯¹è±¡</span></span><br><span class="line"><span class="type">BufferedInputStream</span> <span class="variable">bufferedInputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;input.txt&quot;</span>));</span><br><span class="line"><span class="comment">// è¯»å–æ–‡ä»¶çš„å†…å®¹å¹¶å¤åˆ¶åˆ° String å¯¹è±¡ä¸­</span></span><br><span class="line"><span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(bufferedInputStream.readAllBytes());</span><br><span class="line">System.out.println(result);</span><br></pre></td></tr></table></figure><p><code>DataInputStream</code>å¯è¯»å–å¤šç§ç±»å‹çš„å€¼ã€<code>ObjectInputStream</code>å¯ä»¥ååºåˆ—åŒ–å¯¹è±¡ï¼Œä½¿ç”¨æ–¹æ³•éƒ½ä¸ä¸Šé¢ç±»ä¼¼ï¼Œæ„é€ å‡½æ•°ä½¿ç”¨ä¸€ä¸ª<code>FileInputStream</code>ä½œä¸ºå‚æ•°ã€‚</p><h4 id="OutputStream">OutputStream</h4><p><code>OutputStream</code>ç”¨äºå°†æ•°æ®ï¼ˆå­—èŠ‚ä¿¡æ¯ï¼‰å†™å…¥åˆ°ç›®çš„åœ°ï¼ˆé€šå¸¸æ˜¯æ–‡ä»¶ï¼‰ï¼Œ<code>java.io.OutputStream</code>æŠ½è±¡ç±»æ˜¯æ‰€æœ‰å­—èŠ‚è¾“å‡ºæµçš„çˆ¶ç±»ã€‚</p><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>write(int b)</code></td><td>å°†ç‰¹å®šå­—èŠ‚å†™å…¥è¾“å‡ºæµã€‚</td></tr><tr><td><code>write(byte b[ ])</code></td><td>å°†æ•°ç»„<code>b</code> å†™å…¥åˆ°è¾“å‡ºæµï¼Œç­‰ä»·äº <code>write(b, 0, b.length)</code> ã€‚</td></tr><tr><td><code>write(byte[] b, int off, int len)</code></td><td>åœ¨<code>write(byte b[ ])</code> æ–¹æ³•çš„åŸºç¡€ä¸Šå¢åŠ äº† <code>off</code> å‚æ•°ï¼ˆåç§»é‡ï¼‰å’Œ <code>len</code> å‚æ•°ï¼ˆè¦è¯»å–çš„æœ€å¤§å­—èŠ‚æ•°ï¼‰ã€‚</td></tr><tr><td><code>flush()</code></td><td>åˆ·æ–°æ­¤è¾“å‡ºæµå¹¶å¼ºåˆ¶å†™å‡ºæ‰€æœ‰ç¼“å†²çš„è¾“å‡ºå­—èŠ‚ã€‚</td></tr><tr><td><code>close()</code></td><td>é—­è¾“å‡ºæµé‡Šæ”¾ç›¸å…³çš„ç³»ç»Ÿèµ„æºã€‚</td></tr></tbody></table><h3 id="å­—ç¬¦æµï¼ˆå¤„ç†æ–‡æœ¬æ•°æ®ï¼‰">å­—ç¬¦æµï¼ˆå¤„ç†æ–‡æœ¬æ•°æ®ï¼‰</h3><h4 id="Reader">Reader</h4><p><code>Reader</code>ç”¨äºä»æºå¤´ï¼ˆé€šå¸¸æ˜¯æ–‡ä»¶ï¼‰è¯»å–æ•°æ®ï¼ˆå­—ç¬¦ä¿¡æ¯ï¼‰åˆ°å†…å­˜ä¸­ï¼Œ<code>java.io.Reader</code>æŠ½è±¡ç±»æ˜¯æ‰€æœ‰å­—ç¬¦è¾“å…¥æµçš„çˆ¶ç±»ã€‚</p><p>æ–¹æ³•ä¸<code>InputStream</code>ç±»ä¼¼ï¼Œä½†æ˜¯ç±»å‹ç”±<code>byte</code>æ”¹ä¸º<code>char</code>ã€‚</p><h4 id="Writer">Writer</h4><p>åŒç†ã€‚ä½†æ˜¯é™¤å¯å†™å…¥<code>char[]</code>ç±»å‹å¤–è¿˜å¯å†™å…¥<code>String</code>ç±»ã€‚</p><h3 id="I-Oæ¨¡å‹">I/Oæ¨¡å‹</h3><ul><li>BIOï¼š<strong>åŒæ­¥é˜»å¡I/O</strong></li><li>NIOï¼ˆNon-Blocking I/Oã€New I/Oï¼‰ï¼š<strong>åŒæ­¥éé˜»å¡ I/O</strong>ã€<strong>I/O å¤šè·¯å¤ç”¨</strong></li><li>AIOï¼ˆAsynchronous I/Oï¼‰ï¼š<strong>ä¿¡å·é©±åŠ¨ I/O</strong> ã€<strong>å¼‚æ­¥ I/O</strong></li></ul><h2 id="å¹¶å‘ç¼–ç¨‹">å¹¶å‘ç¼–ç¨‹</h2><h3 id="è¿›ç¨‹å’Œçº¿ç¨‹">è¿›ç¨‹å’Œçº¿ç¨‹</h3><ul><li><strong>è¿›ç¨‹</strong>ï¼šè¿›ç¨‹æ˜¯ä¸€ä¸ªæ­£åœ¨æ‰§è¡Œçš„ç¨‹åºå®ä¾‹ã€‚æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ã€ç³»ç»Ÿèµ„æºåˆ†é…ï¼ˆå¦‚æ–‡ä»¶æè¿°ç¬¦ç­‰ï¼‰ä»¥åŠä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ã€‚</li><li><strong>çº¿ç¨‹</strong>ï¼šçº¿ç¨‹æ˜¯è¿›ç¨‹å†…çš„åŸºæœ¬æ‰§è¡Œå•ä½ï¼Œæ˜¯æ“ä½œç³»ç»Ÿè¿›è¡Œè¿è¡Œæ“ä½œçš„æœ€å°å•å…ƒã€‚ä¸€ä¸ªè¿›ç¨‹å†…çš„æ‰€æœ‰çº¿ç¨‹å…±äº«è¯¥è¿›ç¨‹çš„èµ„æºï¼ŒåŒ…æ‹¬å†…å­˜ç©ºé—´å’Œæ–‡ä»¶æè¿°ç¬¦ç­‰ã€‚</li></ul><blockquote><p>å…±äº«è¿›ç¨‹çš„<strong>å †</strong>å’Œ<strong>æ–¹æ³•åŒº</strong>èµ„æºï¼Œä½†æ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„<strong>ç¨‹åºè®¡æ•°å™¨</strong>ã€<strong>è™šæ‹Ÿæœºæ ˆ</strong>å’Œ<strong>æœ¬åœ°æ–¹æ³•æ ˆ</strong></p></blockquote><h4 id="çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’ŒçŠ¶æ€">çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’ŒçŠ¶æ€</h4><p>Java çº¿ç¨‹åœ¨è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­çš„æŒ‡å®šæ—¶åˆ»åªå¯èƒ½å¤„äºä¸‹é¢ 6 ç§ä¸åŒçŠ¶æ€çš„å…¶ä¸­ä¸€ä¸ªçŠ¶æ€ï¼š</p><ul><li>NEW: åˆå§‹çŠ¶æ€ï¼Œçº¿ç¨‹è¢«åˆ›å»ºå‡ºæ¥ä½†æ²¡æœ‰è¢«è°ƒç”¨ <code>start()</code> ã€‚</li><li>RUNNABLE: è¿è¡ŒçŠ¶æ€ï¼Œçº¿ç¨‹è¢«è°ƒç”¨äº† <code>start()</code>ç­‰å¾…è¿è¡Œçš„çŠ¶æ€ã€‚</li><li>BLOCKEDï¼šé˜»å¡çŠ¶æ€ï¼Œéœ€è¦ç­‰å¾…é”é‡Šæ”¾ã€‚</li><li>WAITINGï¼šç­‰å¾…çŠ¶æ€ï¼Œè¡¨ç¤ºè¯¥çº¿ç¨‹éœ€è¦ç­‰å¾…å…¶ä»–çº¿ç¨‹åšå‡ºä¸€äº›ç‰¹å®šåŠ¨ä½œï¼ˆé€šçŸ¥æˆ–ä¸­æ–­ï¼‰ã€‚</li><li>TIME_WAITINGï¼šè¶…æ—¶ç­‰å¾…çŠ¶æ€ï¼Œå¯ä»¥åœ¨æŒ‡å®šçš„æ—¶é—´åè‡ªè¡Œè¿”å›è€Œä¸æ˜¯åƒ WAITING é‚£æ ·ä¸€ç›´ç­‰å¾…ã€‚</li><li>TERMINATEDï¼šç»ˆæ­¢çŠ¶æ€ï¼Œè¡¨ç¤ºè¯¥çº¿ç¨‹å·²ç»è¿è¡Œå®Œæ¯•ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/bush-cn/TyporaImages@main/img/2025/07/06/20250706105802.png" alt="Java çº¿ç¨‹çŠ¶æ€å˜è¿å›¾"></p><h3 id="å¹¶å‘ä¸å¹¶è¡Œçš„åŒºåˆ«">å¹¶å‘ä¸å¹¶è¡Œçš„åŒºåˆ«</h3><ul><li><strong>å¹¶å‘</strong>ï¼šä¸¤ä¸ªåŠä¸¤ä¸ªä»¥ä¸Šçš„ä½œä¸šåœ¨åŒä¸€ <strong>æ—¶é—´æ®µ</strong> å†…æ‰§è¡Œã€‚</li><li><strong>å¹¶è¡Œ</strong>ï¼šä¸¤ä¸ªåŠä¸¤ä¸ªä»¥ä¸Šçš„ä½œä¸šåœ¨åŒä¸€ <strong>æ—¶åˆ»</strong> æ‰§è¡Œã€‚</li></ul><p>æœ€å…³é”®çš„ç‚¹æ˜¯ï¼šæ˜¯å¦æ˜¯ <strong>åŒæ—¶</strong> æ‰§è¡Œã€‚</p><h3 id="åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«">åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«</h3><ul><li><strong>åŒæ­¥</strong>ï¼šå‘å‡ºä¸€ä¸ªè°ƒç”¨ä¹‹åï¼Œåœ¨æ²¡æœ‰å¾—åˆ°ç»“æœä¹‹å‰ï¼Œ è¯¥è°ƒç”¨å°±ä¸å¯ä»¥è¿”å›ï¼Œä¸€ç›´ç­‰å¾…ã€‚</li><li><strong>å¼‚æ­¥</strong>ï¼šè°ƒç”¨åœ¨å‘å‡ºä¹‹åï¼Œä¸ç”¨ç­‰å¾…è¿”å›ç»“æœï¼Œè¯¥è°ƒç”¨ç›´æ¥è¿”å›ã€‚</li></ul><h3 id="æ­»é”">æ­»é”</h3><p>æ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶ï¼š</p><ol><li><strong>äº’æ–¥æ¡ä»¶</strong>ï¼šè¯¥èµ„æºä»»æ„ä¸€ä¸ªæ—¶åˆ»åªç”±ä¸€ä¸ªçº¿ç¨‹å ç”¨ã€‚</li><li><strong>è¯·æ±‚ä¸ä¿æŒæ¡ä»¶</strong>ï¼šä¸€ä¸ªçº¿ç¨‹å› è¯·æ±‚èµ„æºè€Œé˜»å¡æ—¶ï¼Œå¯¹å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ã€‚</li><li><strong>ä¸å‰¥å¤ºæ¡ä»¶</strong>ï¼šçº¿ç¨‹å·²è·å¾—çš„èµ„æºåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ä¸èƒ½è¢«å…¶ä»–çº¿ç¨‹å¼ºè¡Œå‰¥å¤ºï¼Œåªæœ‰è‡ªå·±ä½¿ç”¨å®Œæ¯•åæ‰é‡Šæ”¾èµ„æºã€‚</li><li><strong>å¾ªç¯ç­‰å¾…æ¡ä»¶</strong>ï¼šè‹¥å¹²çº¿ç¨‹ä¹‹é—´å½¢æˆä¸€ç§å¤´å°¾ç›¸æ¥çš„å¾ªç¯ç­‰å¾…èµ„æºå…³ç³»ã€‚</li></ol><hr><blockquote><p>å‚è€ƒï¼š<a href="https://javaguide.cn/">https://javaguide.cn/</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å®ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·¨åŸŸé—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</title>
      <link href="/2025/06/13/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
      <url>/2025/06/13/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<h2 id="è·¨åŸŸè¯·æ±‚é—®é¢˜">è·¨åŸŸè¯·æ±‚é—®é¢˜</h2><p>è·¨åŸŸè¯·æ±‚é—®é¢˜æ˜¯**æµè§ˆå™¨çš„åŒæºç­–ç•¥ï¼ˆSame-Origin Policy, SOPï¼‰**æ‰€å¯¼è‡´çš„ä¸€ç§å‰ç«¯é™åˆ¶ã€‚</p><h3 id="åŒæº">åŒæº</h3><p>æ‰€è°“â€œåŒæºâ€ï¼Œæ˜¯æŒ‡ä¸¤ä¸ªé¡µé¢çš„åè®®ï¼ˆprotocolï¼‰ã€åŸŸåï¼ˆhostï¼‰å’Œç«¯å£ï¼ˆportï¼‰<strong>å¿…é¡»å®Œå…¨ç›¸åŒ</strong>ã€‚</p><p>ä¾‹å¦‚ï¼š</p><table><thead><tr><th>URL</th><th>æ˜¯å¦åŒæº</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><a href="http://example.com/page1">http://example.com/page1</a></td><td>æ˜¯</td><td>ä¸è‡ªå·±æ¯”</td></tr><tr><td><a href="http://example.com:8080/page1">http://example.com:8080/page1</a></td><td>å¦</td><td>ç«¯å£ä¸åŒ</td></tr><tr><td><a href="https://example.com/page1">https://example.com/page1</a></td><td>å¦</td><td>åè®®ä¸åŒ</td></tr><tr><td><a href="http://api.example.com/page1">http://api.example.com/page1</a></td><td>å¦</td><td>å­åŸŸä¸åŒ</td></tr></tbody></table><h3 id="è·¨åŸŸ">è·¨åŸŸ</h3><p>å½“æµè§ˆå™¨çš„ç½‘é¡µå°è¯•å‘<strong>ä¸åŒæºçš„æœåŠ¡å™¨</strong>å‘é€è¯·æ±‚æ—¶ï¼Œå°±å‘ç”Ÿäº†<strong>è·¨åŸŸè¯·æ±‚</strong>ï¼Œå¦‚ï¼š</p><ul><li>å½“å‰ç½‘é¡µåœ¨ <code>http://localhost:8080</code></li><li>JS å‘èµ· AJAX è¯·æ±‚åˆ° <code>http://api.example.com</code>ï¼Œæ­¤æ—¶å°±æ˜¯è·¨åŸŸè¯·æ±‚</li></ul><p>å¸¸è§è·¨åŸŸè¡Œä¸ºåŒ…æ‹¬ï¼š</p><ul><li>Ajax è¯·æ±‚æ¥å£</li><li>åŠ è½½ç¬¬ä¸‰æ–¹è„šæœ¬ã€æ ·å¼ã€å›¾ç‰‡ï¼ˆéƒ¨åˆ†ä¸å—é™åˆ¶ï¼‰</li><li>ä½¿ç”¨ <code>fetch</code> è·å–ä¸åŒåŸŸèµ„æº</li><li>WebSocketï¼ˆéœ€ç‰¹æ®Šå¤„ç†ï¼‰</li></ul><h3 id="Spring-Boot-ä¸­è·¨åŸŸçš„å¤„ç†æ–¹æ³•">Spring Boot ä¸­è·¨åŸŸçš„å¤„ç†æ–¹æ³•</h3><p><strong>CORSï¼ˆCross-Origin Resource Sharingï¼Œè·¨åŸŸèµ„æºå…±äº«ï¼‰</strong> æ˜¯ä¸€ç§<strong>æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´</strong>çš„åè®®ï¼Œå…è®¸æµè§ˆå™¨ä»<strong>ä¸åŒæºçš„æœåŠ¡å™¨</strong>å®‰å…¨åœ°è¯·æ±‚èµ„æºã€‚</p><p>CORS æ˜¯å½“å‰ä¸»æµçš„è§£å†³è·¨åŸŸè¯·æ±‚çš„æ–¹æ³•ã€‚Spring Bootä¸­ï¼Œå¯ä»¥åœ¨æ§åˆ¶å™¨æ–¹æ³•ä¸ŠåŠ æ³¨è§£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CrossOrigin(origins = &quot;http://localhost:3000&quot;)</span> <span class="comment">// å…è®¸æ¥è‡ª localhost:3000 çš„è·¨åŸŸè¯·æ±‚</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/data&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;?&gt; getData() &#123;</span><br><span class="line">    <span class="keyword">return</span> ResponseEntity.ok(...);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¤§ä½œä¸šé‡‡ç”¨çš„å¦ä¸€ç§æ–¹æ³•æ˜¯ç¼–å†™å…¨å±€è·¨åŸŸé…ç½®ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> &#123;</span><br><span class="line">        registry.addMapping(<span class="string">&quot;/**&quot;</span>)  <span class="comment">// æ”¹ä¸ºå¯¹æ‰€æœ‰è·¯å¾„ç”Ÿæ•ˆ</span></span><br><span class="line">                .allowedOrigins(<span class="string">&quot;[your-origin-url]&quot;</span>)</span><br><span class="line">                .allowedMethods(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;POST&quot;</span>, <span class="string">&quot;PUT&quot;</span>, <span class="string">&quot;DELETE&quot;</span>)</span><br><span class="line">                .allowedHeaders(<span class="string">&quot;*&quot;</span>)  <span class="comment">// å…è®¸æ‰€æœ‰å¤´éƒ¨</span></span><br><span class="line">                .allowCredentials(<span class="literal">true</span>)</span><br><span class="line">                .maxAge(<span class="number">3600</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javaä¼ä¸šçº§å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åç«¯ </tag>
            
            <tag> è·¨åŸŸ </tag>
            
            <tag> CORS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WebSocketä½¿ç”¨</title>
      <link href="/2025/06/13/WebSocket%E4%BD%BF%E7%94%A8/"/>
      <url>/2025/06/13/WebSocket%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="WebSocket"><strong>WebSocket</strong></h2><p>WebSocket æ˜¯ä¸€ç§<strong>åŸºäº TCP åè®®</strong>çš„<strong>å…¨åŒå·¥é€šä¿¡åè®®</strong>ï¼Œå®ƒå…è®¸å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹æŒä¹…çš„ã€åŒå‘çš„é€šä¿¡è¿æ¥ã€‚ç›¸æ¯”ä¼ ç»Ÿçš„ HTTP è¯·æ±‚ - å“åº”æ¨¡å¼ï¼ŒWebSocket æä¾›äº†å®æ—¶ã€ä½å»¶è¿Ÿçš„æ•°æ®ä¼ è¾“èƒ½åŠ›ã€‚é€šè¿‡ WebSocketï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å¯ä»¥<strong>éšæ—¶å‘é€æ•°æ®</strong>ï¼Œè€Œä¸éœ€è¦æ¯æ¬¡éƒ½é‡æ–°å»ºç«‹è¿æ¥ã€‚å®ç°<strong>å®æ—¶æ›´æ–°å’Œå³æ—¶é€šä¿¡</strong>çš„åŠŸèƒ½ã€‚</p><p>WebSocket åè®®ç»è¿‡äº†å¤šä¸ªæµè§ˆå™¨å’ŒæœåŠ¡å™¨çš„æ”¯æŒï¼Œæˆä¸ºäº†ç°ä»£ Web åº”ç”¨ä¸­å¸¸ç”¨çš„é€šä¿¡åè®®ä¹‹ä¸€ã€‚å®ƒå¹¿æ³›åº”ç”¨äºèŠå¤©åº”ç”¨ã€å®æ—¶æ•°æ®æ›´æ–°ã€å¤šäººæ¸¸æˆç­‰åœºæ™¯ï¼Œä¸º Web åº”ç”¨æä¾›äº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒå’Œæ›´é«˜æ•ˆçš„æ•°æ®ä¼ è¾“æ–¹å¼ã€‚</p><table><thead><tr><th>ç‰¹ç‚¹</th><th>æè¿°</th></tr></thead><tbody><tr><td><strong>æŒä¹…è¿æ¥</strong></td><td>å»ºç«‹ä¸€æ¬¡è¿æ¥åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¿æŒè¿æ¥çŠ¶æ€</td></tr><tr><td><strong>å…¨åŒå·¥é€šä¿¡</strong></td><td>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½å¯ä»¥ä¸»åŠ¨å‘é€æ¶ˆæ¯</td></tr><tr><td><strong>ä½å»¶è¿Ÿã€å®æ—¶æ€§å¼º</strong></td><td>é€‚åˆèŠå¤©ã€æ¸¸æˆã€è‚¡ç¥¨ã€å®æ—¶æ¨é€ç­‰åº”ç”¨</td></tr><tr><td><strong>èŠ‚çœèµ„æº</strong></td><td>ä¸ä¼ ç»Ÿ HTTP è¯·æ±‚ç›¸æ¯”ï¼Œå‡å°‘äº†è¯·æ±‚å¤´ç­‰å¼€é”€</td></tr><tr><td><strong>åŸºäº TCP åè®®</strong></td><td>å’Œ HTTP ä¸€æ ·åŸºäº TCPï¼Œä½†æ˜¯ä¸€ä¸ªç‹¬ç«‹åè®®</td></tr></tbody></table><h3 id="Spring-Bootä¸­ä½¿ç”¨WebSocket">Spring Bootä¸­ä½¿ç”¨WebSocket</h3><p>ä»¥æˆ‘ä»¬ç»„çš„å¤§ä½œä¸šä¸ºä¾‹ï¼Œåœ¨å­¦ç”Ÿç­”é¢˜ç«¯å’Œæ•™å¸ˆç›‘è€ƒç«¯ä¹‹é—´å»ºç«‹äº†WebSocketè¿æ¥ï¼Œå®ç°ç­”é¢˜è¿›åº¦åŠè€ƒè¯•çŠ¶æ€å®æ—¶é€šä¿¡ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><h4 id="1-å¼•å…¥ä¾èµ–">1. å¼•å…¥ä¾èµ–</h4><p>åœ¨<code>pom.xml</code>ä¸­å¼•å…¥ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-websocket<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-åˆ›å»ºé…ç½®ç±»">2. åˆ›å»ºé…ç½®ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.buaa.javahuikao.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.messaging.simp.config.MessageBrokerRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.socket.config.annotation.EnableWebSocketMessageBroker;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.socket.config.annotation.StompEndpointRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.socket.config.annotation.WebSocketMessageBrokerConfigurer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebSocketMessageBroker</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebSocketConfig</span> <span class="keyword">implements</span> <span class="title class_">WebSocketMessageBrokerConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configureMessageBroker</span><span class="params">(MessageBrokerRegistry config)</span> &#123;</span><br><span class="line">        config.enableSimpleBroker(<span class="string">&quot;/topic&quot;</span>); <span class="comment">// å®¢æˆ·ç«¯è®¢é˜…åœ°å€å‰ç¼€</span></span><br><span class="line">        config.setApplicationDestinationPrefixes(<span class="string">&quot;/app&quot;</span>); <span class="comment">// æœåŠ¡ç«¯æ¥æ”¶æ¶ˆæ¯åœ°å€å‰ç¼€</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">registerStompEndpoints</span><span class="params">(StompEndpointRegistry registry)</span> &#123;</span><br><span class="line">        registry.addEndpoint(<span class="string">&quot;/ws&quot;</span>) <span class="comment">// WebSocketè¿æ¥ç«¯ç‚¹</span></span><br><span class="line">                .setAllowedOriginPatterns(<span class="string">&quot;*&quot;</span>)</span><br><span class="line">                .withSockJS();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p><code>enableSimpleBroker(&quot;/topic&quot;)</code>ï¼šå¯ç”¨äº†ä¸€ä¸ª <strong>ç®€å•çš„å†…å­˜æ¶ˆæ¯ä»£ç†ï¼ˆmessage brokerï¼‰</strong>ï¼Œå½“å®¢æˆ·ç«¯è®¢é˜… <code>/topic/*</code> å¼€å¤´çš„åœ°å€æ—¶ï¼Œæ¶ˆæ¯å°†ä¼šè¢«æ¨é€åˆ°è¿™äº›è®¢é˜…è€…ã€‚</p></li><li><p><code>setApplicationDestinationPrefixes(&quot;/app&quot;)</code>ï¼šå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯ <strong>å‘é€æ¶ˆæ¯çš„è·¯å¾„å‰ç¼€</strong>ã€‚åªæœ‰ä»¥ <code>/app</code> å¼€å¤´çš„æ¶ˆæ¯ï¼Œæ‰ä¼šè¢« <code>@MessageMapping</code> æ³¨è§£çš„æ–¹æ³•æ¥æ”¶å¤„ç†ã€‚</p></li><li><p><code>addEndpoint(&quot;/ws&quot;)</code>ï¼šæ³¨å†Œä¸€ä¸ª <strong>WebSocket è¿æ¥ç«¯ç‚¹</strong>ï¼Œå®¢æˆ·ç«¯å°†é€šè¿‡è¿™ä¸ªåœ°å€å‘èµ·è¿æ¥ï¼ˆä¾‹å¦‚ï¼š<code>ws://localhost:8080/ws</code>ï¼‰ã€‚</p></li><li><p><code>setAllowedOriginPatterns(&quot;*&quot;)</code>ï¼šå…è®¸æ‰€æœ‰æ¥æºè·¨åŸŸè¿æ¥ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®æŒ‡å®šå…·ä½“åŸŸåï¼‰ã€‚</p><p><code>withSockJS()</code>ï¼šå¯ç”¨ <strong>SockJS å…¼å®¹æ¨¡å¼</strong>ï¼Œä¿è¯åœ¨ WebSocket ä¸å¯ç”¨æ—¶ï¼ˆå¦‚æµè§ˆå™¨ä¸æ”¯æŒï¼‰å¯ä»¥å›é€€åˆ° AJAX é•¿è½®è¯¢ã€‚</p></li></ul><h4 id="3-åœ¨RESTæ¥å£ç±»ä¸­ä½¿ç”¨WebSocket">3. åœ¨RESTæ¥å£ç±»ä¸­ä½¿ç”¨WebSocket</h4><p>é¦–å…ˆæ³¨å…¥ <code>SimpMessagingTemplate</code>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> SimpMessagingTemplate messagingTemplate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">InvigilationController</span><span class="params">(SimpMessagingTemplate messagingTemplate)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.messagingTemplate = messagingTemplate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>SimpMessagingTemplate</code> æ˜¯ Spring æä¾›çš„ä¸€ä¸ªå·¥å…·ç±»ï¼Œç”¨äºåœ¨æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯ <strong>å‘é€ STOMP æ¶ˆæ¯</strong>ã€‚</li><li>å¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªâ€œæ¶ˆæ¯å‘é€å™¨â€ï¼Œé…åˆå‰é¢çš„ <code>WebSocketConfig</code> ä½¿ç”¨ã€‚</li></ul><p>æ¥ç€ï¼Œä½¿ç”¨<code>messagingTemplate.convertAndSend(destination, payload)</code>å‘æœåŠ¡ç«¯æ¨é€æ¶ˆæ¯ã€‚æ­¤å¤„ï¼Œ</p><h4 id="4-å‰ç«¯è®¢é˜…æ¶ˆæ¯å¹¶æ›´æ–°é¡µé¢">4. å‰ç«¯è®¢é˜…æ¶ˆæ¯å¹¶æ›´æ–°é¡µé¢</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å»ºç«‹WebSocketè¿æ¥</span></span><br><span class="line"><span class="keyword">const</span> socketProgress = <span class="keyword">new</span> <span class="title class_">SockJS</span>(<span class="string">&quot;http://localhost:8081/ws&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> stompClientProgress = <span class="title class_">Stomp</span>.<span class="title function_">over</span>(socketProgress);</span><br><span class="line">stompClientProgress.<span class="title function_">connect</span>(&#123;&#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;WebSocket Progress è¿æ¥æˆåŠŸï¼&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> examId = exam_id</span><br><span class="line">    <span class="keyword">const</span> subscription = stompClientProgress.<span class="title function_">subscribe</span>(</span><br><span class="line">        <span class="string">`/topic/exam/<span class="subst">$&#123;examId&#125;</span>/progress`</span>,</span><br><span class="line">        <span class="function">(<span class="params">message</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(message.<span class="property">body</span>);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ”¶åˆ°è¿›åº¦æ›´æ–°:&quot;</span>, data);</span><br><span class="line">            <span class="title function_">updateStudentProgress</span>(data.<span class="property">studentId</span>, data.<span class="property">progress</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å»ºç«‹WebSocketè¿æ¥</span></span><br><span class="line"><span class="keyword">const</span> socketStatus = <span class="keyword">new</span> <span class="title class_">SockJS</span>(<span class="string">&quot;http://localhost:8081/ws&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> stompClientStatus = <span class="title class_">Stomp</span>.<span class="title function_">over</span>(socketStatus);</span><br><span class="line">stompClientStatus.<span class="title function_">connect</span>(&#123;&#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;WebSocket Status è¿æ¥æˆåŠŸï¼&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> examId = exam_id</span><br><span class="line">    <span class="keyword">const</span> subscription = stompClientStatus.<span class="title function_">subscribe</span>(</span><br><span class="line">        <span class="string">`/topic/exam/<span class="subst">$&#123;examId&#125;</span>/status`</span>,</span><br><span class="line">        <span class="function">(<span class="params">message</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(message.<span class="property">body</span>);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ”¶åˆ°çŠ¶æ€æ›´æ–°:&quot;</span>, data);</span><br><span class="line">            <span class="title function_">updateStudentStatus</span>(data.<span class="property">studentId</span>, data.<span class="property">status</span>, data.<span class="property">description</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javaä¼ä¸šçº§å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åç«¯ </tag>
            
            <tag> WebSocket </tag>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java å¤šçº¿ç¨‹</title>
      <link href="/2025/06/13/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
      <url>/2025/06/13/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h2 id="Javaå¤šçº¿ç¨‹"><strong>Javaå¤šçº¿ç¨‹</strong></h2><h3 id="Java-SEä¸­çš„å¤šçº¿ç¨‹">Java SEä¸­çš„å¤šçº¿ç¨‹</h3><p>Java SEä¸­æœ€åŸºç¡€çš„å¤šçº¿ç¨‹æ–¹å¼ï¼ˆé€‚ç”¨äºä»»ä½•Javaç¨‹åºï¼‰åŒ…æ‹¬ä¸¤ç§ï¼š</p><ul><li><p><strong>æ–¹æ³•1ï¼šç»§æ‰¿ Thread ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;çº¿ç¨‹åï¼š&quot;</span> + Thread.currentThread().getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        t1.start();  <span class="comment">// å¯åŠ¨çº¿ç¨‹ï¼Œrun() æ–¹æ³•ä¼šè¢«è‡ªåŠ¨è°ƒç”¨</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>æ–¹æ³•2ï¼šå®ç° Runnable æ¥å£</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;çº¿ç¨‹åï¼š&quot;</span> + Thread.currentThread().getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">MyRunnable</span>());</span><br><span class="line">        t.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><p>æ­¤å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨çº¿ç¨‹æ± ã€‚Java æä¾› <code>ExecutorService</code> æ¥å£ï¼ŒSpring Boot ä¸­ä¹Ÿå¸¸ç”¨çº¿ç¨‹æ± æ¥ç®¡ç†å¹¶å‘ä»»åŠ¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadPoolExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">3</span>); <span class="comment">// åˆ›å»ºå›ºå®šçº¿ç¨‹æ•°çš„çº¿ç¨‹æ± </span></span><br><span class="line"></span><br><span class="line">        <span class="type">Runnable</span> <span class="variable">task</span> <span class="operator">=</span> () -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹ï¼š&quot;</span> + Thread.currentThread().getName());</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        executor.submit(task);</span><br><span class="line">        executor.shutdown(); <span class="comment">// å…³é—­çº¿ç¨‹æ± ï¼ˆä¸ç«‹å³å…³é—­ï¼Œä¼šç­‰å¾…ä»»åŠ¡å®Œæˆï¼‰</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Spring-Boot-ä¸­ä½¿ç”¨å¤šçº¿ç¨‹">Spring Boot ä¸­ä½¿ç”¨å¤šçº¿ç¨‹</h3><p>Spring Boot æä¾›äº†æ›´åŠ ä¼˜é›…çš„æ–¹å¼æ¥ä½¿ç”¨å¤šçº¿ç¨‹ï¼š</p><h4 id="æ–¹æ³•1-ä½¿ç”¨-Async-å¼‚æ­¥æ–¹æ³•ï¼ˆç®€å•é«˜æ•ˆï¼‰">æ–¹æ³•1. ä½¿ç”¨ <code>@Async</code> å¼‚æ­¥æ–¹æ³•ï¼ˆç®€å•é«˜æ•ˆï¼‰</h4><p>ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨ç±»æˆ–é…ç½®ç±»ä¸ŠåŠ  <code>@EnableAsync</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableAsync</span>  <span class="comment">// å¯ç”¨å¼‚æ­¥æ”¯æŒ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyApp</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MyApp.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒæ­¥ï¼šåœ¨ä½ è¦å¼‚æ­¥æ‰§è¡Œçš„æ–¹æ³•ä¸ŠåŠ  <code>@Async</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.Async;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTaskService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Async</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doTask</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å¼€å§‹æ‰§è¡Œä»»åŠ¡ï¼Œçº¿ç¨‹åï¼š&quot;</span> + Thread.currentThread().getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰æ­¥ï¼šè°ƒç”¨å¼‚æ­¥æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TaskController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MyTaskService taskService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/run&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">runTask</span><span class="params">()</span> &#123;</span><br><span class="line">        taskService.doTask();  <span class="comment">// å¼‚æ­¥æ‰§è¡Œï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ä»»åŠ¡å·²æäº¤&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ–¹æ³•2-è‡ªå®šä¹‰çº¿ç¨‹æ± é…ç½®ï¼ˆé«˜çº§ï¼‰">æ–¹æ³•2. è‡ªå®šä¹‰çº¿ç¨‹æ± é…ç½®ï¼ˆé«˜çº§ï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableAsync</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AsyncConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = &quot;customExecutor&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Executor <span class="title function_">taskExecutor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">ThreadPoolTaskExecutor</span> <span class="variable">executor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolTaskExecutor</span>();</span><br><span class="line">        executor.setCorePoolSize(<span class="number">5</span>);       <span class="comment">// æ ¸å¿ƒçº¿ç¨‹æ•°</span></span><br><span class="line">        executor.setMaxPoolSize(<span class="number">10</span>);       <span class="comment">// æœ€å¤§çº¿ç¨‹æ•°</span></span><br><span class="line">        executor.setQueueCapacity(<span class="number">100</span>);    <span class="comment">// é˜Ÿåˆ—å®¹é‡</span></span><br><span class="line">        executor.setThreadNamePrefix(<span class="string">&quot;MyExecutor-&quot;</span>);</span><br><span class="line">        executor.initialize();</span><br><span class="line">        <span class="keyword">return</span> executor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ <code>@Async</code> ä¸­æŒ‡å®šçº¿ç¨‹æ± ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Async(&quot;customExecutor&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doTask</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æ‰§è¡Œä»»åŠ¡ï¼Œçº¿ç¨‹ï¼š&quot;</span> + Thread.currentThread().getName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…·ä½“åœ¨æˆ‘ä»¬çš„å¤§ä½œä¸šä¸­ï¼Œæˆ‘ä»¬é…ç½®äº†æäº¤ç­”æ¡ˆå’ŒçŠ¶æ€æ›´æ–°ä¸¤ä¸ªçº¿ç¨‹æ± ï¼Œä¿è¯å¤§é‡å¹¶å‘è¯·æ±‚çš„æ‰§è¡Œå“åº”é€Ÿåº¦ã€‚</p><h4 id="çº¿ç¨‹æ± -vs-Async">çº¿ç¨‹æ±  vs @Async</h4><table><thead><tr><th>åœºæ™¯</th><th>æ¨èåšæ³•</th></tr></thead><tbody><tr><td>ç®€å•å¼‚æ­¥å¤„ç†ï¼ˆå‘é‚®ä»¶ã€å‘çŸ­ä¿¡ï¼‰</td><td><code>@Async</code></td></tr><tr><td>æ§åˆ¶çº¿ç¨‹æ•°ã€å¯å¤ç”¨çº¿ç¨‹èµ„æº</td><td>è‡ªå®šä¹‰çº¿ç¨‹æ± </td></tr><tr><td>å®šæ—¶ä»»åŠ¡</td><td>ä½¿ç”¨ <code>@Scheduled</code></td></tr><tr><td>æ‰¹é‡å¹¶å‘ä»»åŠ¡ï¼Œéœ€è·å–è¿”å›å€¼</td><td><code>CompletableFuture + @Async</code></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Javaä¼ä¸šçº§å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åç«¯ </tag>
            
            <tag> Javaå¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rediså­¦ä¹ ç¬”è®°</title>
      <link href="/2025/06/13/Redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2025/06/13/Redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="Rediså­¦ä¹ ç¬”è®°">Rediså­¦ä¹ ç¬”è®°</h1><h2 id="Redis"><strong>Redis</strong></h2><h3 id="Redisç®€ä»‹">Redisç®€ä»‹</h3><p>Redisï¼ˆ<strong>Remote Dictionary Server</strong>ï¼‰æ˜¯ä¸€ç§<strong>å¼€æºçš„ã€åŸºäºå†…å­˜çš„é”®å€¼å¯¹ï¼ˆkey-valueï¼‰æ•°æ®åº“</strong>ï¼Œå¯ä»¥ç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜å’Œæ¶ˆæ¯ä¸­é—´ä»¶ã€‚å®ƒä»¥<strong>æé«˜çš„æ€§èƒ½ã€ä¸°å¯Œçš„æ•°æ®ç»“æ„å’Œå¤šç§å®ç”¨åŠŸèƒ½</strong>è€Œè‘—ç§°ï¼Œè¢«å¹¿æ³›ç”¨äºé«˜å¹¶å‘ã€ä½å»¶è¿Ÿçš„åº”ç”¨åœºæ™¯ä¸­ï¼Œå¦‚ç”µå•†ç§’æ€ã€ç¤¾äº¤åº”ç”¨ã€æ’è¡Œæ¦œã€ä¼šè¯ç¼“å­˜ç­‰ã€‚</p><h4 id="Redisç‰¹ç‚¹">Redisç‰¹ç‚¹</h4><table><thead><tr><th>ç‰¹ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>é«˜æ€§èƒ½</strong></td><td>æ‰€æœ‰æ•°æ®æ“ä½œéƒ½åœ¨å†…å­˜ä¸­å®Œæˆï¼Œè¯»å†™é€Ÿåº¦æå¿«ï¼ˆç™¾ä¸‡çº§QPSï¼‰ã€‚</td></tr><tr><td><strong>ä¸°å¯Œæ•°æ®ç»“æ„</strong></td><td>æ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼šå­—ç¬¦ä¸²ï¼ˆstringï¼‰ã€åˆ—è¡¨ï¼ˆlistï¼‰ã€é›†åˆï¼ˆsetï¼‰ã€æœ‰åºé›†åˆï¼ˆzsetï¼‰ã€å“ˆå¸Œè¡¨ï¼ˆhashï¼‰ã€ä½å›¾ã€HyperLogLogã€åœ°ç†ä½ç½®ç­‰ã€‚</td></tr><tr><td><strong>æŒä¹…åŒ–</strong></td><td>è™½ç„¶æ˜¯å†…å­˜æ•°æ®åº“ï¼Œä½†æ”¯æŒå°†æ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œé˜²æ­¢å®•æœºæ•°æ®ä¸¢å¤±ï¼ˆRDBå¿«ç…§å’ŒAOFæ—¥å¿—ï¼‰ã€‚</td></tr><tr><td><strong>æ”¯æŒäº‹åŠ¡</strong></td><td>å¯ä»¥ä¸€æ¬¡æ‰§è¡Œå¤šä¸ªå‘½ä»¤ï¼Œå…·å¤‡åŸºæœ¬çš„äº‹åŠ¡ç‰¹æ€§ï¼ˆMULTI/EXECï¼‰ã€‚</td></tr><tr><td><strong>æ”¯æŒå‘å¸ƒ/è®¢é˜…</strong></td><td>å¯å®ç°æ¶ˆæ¯ç³»ç»Ÿçš„ pub/sub é€šä¿¡æ¨¡å‹ã€‚</td></tr><tr><td><strong>æ”¯æŒä¸»ä»å¤åˆ¶ä¸é›†ç¾¤</strong></td><td>å…·å¤‡é«˜å¯ç”¨ï¼ˆå“¨å…µï¼‰ä¸åˆ†å¸ƒå¼ï¼ˆRedis Clusterï¼‰èƒ½åŠ›ã€‚</td></tr><tr><td><strong>åŸå­æ“ä½œ</strong></td><td>æ‰€æœ‰å•æ¡ Redis å‘½ä»¤éƒ½æ˜¯åŸå­çš„ï¼Œé€‚åˆåšè®¡æ•°å™¨ã€åˆ†å¸ƒå¼é”ç­‰ã€‚</td></tr></tbody></table><h4 id="Redisçš„å…¸å‹åº”ç”¨åœºæ™¯">Redisçš„å…¸å‹åº”ç”¨åœºæ™¯</h4><ul><li>é¡µé¢ç¼“å­˜ï¼ˆå¦‚å•†å“è¯¦æƒ…é¡µã€çƒ­ç‚¹æ–°é—»ï¼‰</li><li>Sessionå­˜å‚¨ï¼ˆåˆ†å¸ƒå¼ç™»å½•çŠ¶æ€ç»´æŠ¤ï¼‰</li><li>ç§’æ€ç³»ç»Ÿï¼ˆæŠ¢è´­è®¡æ•°ã€åº“å­˜æ§åˆ¶ï¼‰</li><li>æ’è¡Œæ¦œç³»ç»Ÿï¼ˆZSetï¼‰</li><li>å®æ—¶æ¶ˆæ¯æ¨é€ï¼ˆPub/Subï¼‰</li><li>åˆ†å¸ƒå¼é”ï¼ˆåŸºäºsetnxç­‰å‘½ä»¤ï¼‰</li></ul><h4 id="NoSQL">NoSQL</h4><p>NoSQLï¼ˆ<strong>Not Only SQL</strong>ï¼‰æ˜¯ä¸€ç±»<strong>éå…³ç³»å‹æ•°æ®åº“ç³»ç»Ÿ</strong>çš„ç»Ÿç§°ï¼Œè®¾è®¡åˆè¡·æ˜¯ä¸ºäº†è§£å†³ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“ï¼ˆå¦‚MySQLã€Oracleï¼‰åœ¨é«˜å¹¶å‘ã€å¤§æ•°æ®é‡ã€åˆ†å¸ƒå¼å­˜å‚¨ç­‰åœºæ™¯ä¸‹çš„æ€§èƒ½ç“¶é¢ˆã€‚</p><p>NoSQLåŒ…æ‹¬ä»¥ä¸‹ç±»å‹ï¼š</p><table><thead><tr><th>ç±»å‹</th><th>ä»£è¡¨æ•°æ®åº“</th><th>æè¿°</th><th>å…¸å‹ç”¨é€”</th></tr></thead><tbody><tr><td><strong>é”®å€¼ï¼ˆKey-Valueï¼‰</strong></td><td><strong>Redis</strong>, Riak</td><td>ä»¥ key æ˜ å°„ valueï¼Œç»“æ„ç®€å•ï¼Œæ€§èƒ½æé«˜</td><td>ç¼“å­˜ã€ä¼šè¯å­˜å‚¨</td></tr><tr><td><strong>æ–‡æ¡£å‹</strong></td><td>MongoDB, CouchDB</td><td>ç±»ä¼¼ JSON çš„æ–‡æ¡£ç»“æ„ï¼Œçµæ´»æ”¯æŒåµŒå¥—å­—æ®µ</td><td>å†…å®¹ç®¡ç†ã€ç”¨æˆ·ä¿¡æ¯å­˜å‚¨</td></tr><tr><td><strong>åˆ—æ—å‹ï¼ˆå®½åˆ—ï¼‰</strong></td><td>HBase, Cassandra</td><td>æŒ‰åˆ—å­˜å‚¨æ•°æ®ï¼Œé€‚åˆå¤§æ•°æ®åˆ†æ</td><td>æ—¥å¿—ç³»ç»Ÿã€æ•°æ®ä»“åº“</td></tr><tr><td><strong>å›¾æ•°æ®åº“</strong></td><td>Neo4j, JanusGraph</td><td>ç”¨èŠ‚ç‚¹å’Œè¾¹è¡¨ç¤ºæ•°æ®åŠå…¶å…³ç³»</td><td>ç¤¾äº¤ç½‘ç»œã€çŸ¥è¯†å›¾è°±ã€æ¨èç³»ç»Ÿ</td></tr></tbody></table><h3 id="Redis-æ•°æ®ç±»å‹">Redis æ•°æ®ç±»å‹</h3><table><thead><tr><th>æ•°æ®ç±»å‹</th><th>è¯´æ˜</th><th>å¸¸è§ç”¨é€”</th></tr></thead><tbody><tr><td>Stringï¼ˆå­—ç¬¦ä¸²ï¼‰</td><td>åŸºæœ¬çš„æ•°æ®å­˜å‚¨å•å…ƒï¼Œå¯ä»¥å­˜å‚¨å­—ç¬¦ä¸²ã€æ•´æ•°æˆ–è€…æµ®ç‚¹æ•°ã€‚</td><td>ç¼“å­˜ã€è®¡æ•°å™¨</td></tr><tr><td>Hashï¼ˆå“ˆå¸Œï¼‰</td><td>ä¸€ä¸ªé”®å€¼å¯¹é›†åˆï¼Œå¯ä»¥å­˜å‚¨å¤šä¸ªå­—æ®µã€‚</td><td>ç”¨æˆ·ä¿¡æ¯ã€é…ç½®é¡¹</td></tr><tr><td>Listï¼ˆåˆ—è¡¨ï¼‰</td><td>ä¸€ä¸ªç®€å•çš„åˆ—è¡¨ï¼Œå¯ä»¥å­˜å‚¨ä¸€ç³»åˆ—çš„å­—ç¬¦ä¸²å…ƒç´ ã€‚</td><td>é˜Ÿåˆ—ã€ä»»åŠ¡æµ</td></tr><tr><td>Setï¼ˆé›†åˆï¼‰</td><td>ä¸€ä¸ªæ— åºé›†åˆï¼Œå¯ä»¥å­˜å‚¨ä¸é‡å¤çš„å­—ç¬¦ä¸²å…ƒç´ ã€‚</td><td>æ ‡ç­¾ã€å»é‡ã€ç¤¾äº¤å…³ç³»</td></tr><tr><td>ZSetï¼ˆæœ‰åºé›†åˆï¼‰</td><td>ç±»ä¼¼äºé›†åˆï¼Œä½†æ˜¯æ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ªåˆ†æ•°ä¸ä¹‹å…³è”ã€‚</td><td>æ’è¡Œæ¦œã€è¯„åˆ†ç³»ç»Ÿ</td></tr><tr><td>Bitmapï¼ˆä½å›¾ï¼‰</td><td>åŸºäºå­—ç¬¦ä¸²ç±»å‹ï¼Œå¯ä»¥å¯¹æ¯ä¸ªä½è¿›è¡Œæ“ä½œã€‚</td><td>ç­¾åˆ°ã€çŠ¶æ€è®°å½•</td></tr><tr><td>HyperLogLog</td><td>ç”¨äºåŸºæ•°ç»Ÿè®¡ï¼Œå¯ä»¥ä¼°ç®—é›†åˆä¸­çš„å”¯ä¸€å…ƒç´ æ•°é‡ã€‚</td><td>UVã€å»é‡ç»Ÿè®¡</td></tr><tr><td>GEO</td><td>ç”¨äºå­˜å‚¨åœ°ç†ä½ç½®ä¿¡æ¯ã€‚</td><td>é™„è¿‘çš„äººã€ä½ç½®æœåŠ¡</td></tr><tr><td>Pub/Sub</td><td>ä¸€ç§æ¶ˆæ¯é€šä¿¡æ¨¡å¼ï¼Œå…è®¸å®¢æˆ·ç«¯è®¢é˜…æ¶ˆæ¯é€šé“ï¼Œå¹¶æ¥æ”¶å‘å¸ƒåˆ°è¯¥é€šé“çš„æ¶ˆæ¯ã€‚</td><td>é€šçŸ¥ç³»ç»Ÿã€èŠå¤©å®¤</td></tr></tbody></table><h4 id="1-Stringï¼ˆå­—ç¬¦ä¸²ï¼‰">1. Stringï¼ˆå­—ç¬¦ä¸²ï¼‰</h4><ul><li><p><strong>æœ€åŸºç¡€çš„æ•°æ®ç±»å‹</strong>ï¼Œä¸€ä¸ªé”®å¯¹åº”ä¸€ä¸ªå­—ç¬¦ä¸²å€¼ï¼Œå¯ä»¥æ˜¯æ–‡æœ¬æˆ–äºŒè¿›åˆ¶æ•°æ®ï¼ˆå¦‚å›¾ç‰‡ã€JSONã€æ•°å­—ç­‰ï¼‰ã€‚</p><blockquote><p>ä¸€ä¸ªé”®æœ€å¤§èƒ½å­˜å‚¨ 512MB</p></blockquote></li><li><p>æ“ä½œå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SET key value<span class="comment"># è®¾ç½®é”®çš„å€¼</span></span><br><span class="line">GET key<span class="comment"># è·å–é”®çš„å€¼</span></span><br><span class="line">INCR key<span class="comment"># å°†é”®çš„å€¼åŠ  1</span></span><br><span class="line">DECR key<span class="comment"># å°†é”®çš„å€¼å‡ 1</span></span><br><span class="line">APPEND key value<span class="comment"># å°†å€¼è¿½åŠ åˆ°é”®çš„å€¼ä¹‹å</span></span><br></pre></td></tr></table></figure></li><li><p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p><ul><li>ç¼“å­˜æ–‡æœ¬ä¿¡æ¯</li><li>è®¡æ•°å™¨ï¼ˆå¦‚è®¿é—®é‡ï¼‰</li><li>å­˜å‚¨JSONï¼ˆå¦‚ç”¨æˆ·tokenï¼‰</li></ul></li></ul><h4 id="2-Hashï¼ˆå“ˆå¸Œï¼‰">2. Hashï¼ˆå“ˆå¸Œï¼‰</h4><ul><li><p>ç±»ä¼¼ Java ä¸­çš„ Map æˆ– Python çš„å­—å…¸ï¼Œä¸€ä¸ªé”®å¯¹åº”ä¸€ä¸ªå­—æ®µé›†åˆï¼Œæ¯ä¸ªå­—æ®µæœ‰è‡ªå·±çš„å€¼ã€‚</p></li><li><p>æ“ä½œå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">HSET key field value<span class="comment"># è®¾ç½®å“ˆå¸Œè¡¨ä¸­å­—æ®µçš„å€¼ã€‚</span></span><br><span class="line">HGET key field<span class="comment"># è·å–å“ˆå¸Œè¡¨ä¸­å­—æ®µçš„å€¼ã€‚</span></span><br><span class="line">HGETALL key<span class="comment"># è·å–å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰å­—æ®µå’Œå€¼ã€‚</span></span><br><span class="line">HDEL key field<span class="comment"># åˆ é™¤å“ˆå¸Œè¡¨ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µã€‚</span></span><br></pre></td></tr></table></figure></li><li><p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p><ul><li>å­˜å‚¨å¯¹è±¡ï¼ˆå¦‚ç”¨æˆ·ã€å•†å“å±æ€§ï¼‰</li><li>èŠ‚çœå†…å­˜ï¼ˆç›¸æ¯”å¤šä¸ªå­—ç¬¦ä¸²é”®ï¼‰</li></ul></li></ul><h4 id="3-Listï¼ˆåˆ—è¡¨ï¼‰">3. Listï¼ˆåˆ—è¡¨ï¼‰</h4><ul><li><p>ä¸€ä¸ªé”®å¯¹åº”ä¸€ä¸ªé“¾è¡¨ç»“æ„ï¼Œæ”¯æŒä¸¤ç«¯æ’å…¥ï¼ˆå¯ä½œé˜Ÿåˆ—æˆ–æ ˆï¼‰ã€‚</p></li><li><p>æ“ä½œå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">LPUSH key value<span class="comment"># å°†å€¼æ’å…¥åˆ°åˆ—è¡¨å¤´éƒ¨ã€‚</span></span><br><span class="line">RPUSH key value<span class="comment"># å°†å€¼æ’å…¥åˆ°åˆ—è¡¨å°¾éƒ¨ã€‚</span></span><br><span class="line">LPOP key<span class="comment"># ç§»å‡ºå¹¶è·å–åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</span></span><br><span class="line">RPOP key<span class="comment"># ç§»å‡ºå¹¶è·å–åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚</span></span><br><span class="line">LRANGE key start stop<span class="comment"># è·å–åˆ—è¡¨åœ¨æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ã€‚</span></span><br></pre></td></tr></table></figure></li><li><p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p><ul><li>æ¶ˆæ¯é˜Ÿåˆ—</li><li>ä»»åŠ¡åˆ—è¡¨ï¼ˆå¦‚è¯„è®ºæµã€å»¶è¿Ÿé˜Ÿåˆ—ï¼‰</li></ul></li></ul><h4 id="4-Setï¼ˆé›†åˆï¼‰">4. Setï¼ˆé›†åˆï¼‰</h4><ul><li><p>æ— åºã€<strong>ä¸é‡å¤</strong>çš„å­—ç¬¦ä¸²é›†åˆã€‚</p></li><li><p>æ“ä½œå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SADD key value<span class="comment"># å‘é›†åˆæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ã€‚</span></span><br><span class="line">SREM key value<span class="comment"># ç§»é™¤é›†åˆä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ã€‚</span></span><br><span class="line">SMEMBERS key<span class="comment"># è¿”å›é›†åˆä¸­çš„æ‰€æœ‰æˆå‘˜ã€‚</span></span><br><span class="line">SISMEMBER key value<span class="comment"># åˆ¤æ–­å€¼æ˜¯å¦æ˜¯é›†åˆçš„æˆå‘˜ã€‚</span></span><br></pre></td></tr></table></figure></li><li><p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p><ul><li>æ ‡ç­¾ç³»ç»Ÿ</li><li>å…±åŒå¥½å‹è®¡ç®—ï¼ˆäº¤é›†ï¼‰</li><li>å»é‡ï¼ˆå¦‚IPé›†åˆï¼‰</li></ul></li></ul><h4 id="5-Sorted-Setï¼ˆæœ‰åºé›†åˆï¼ŒZSetï¼‰">5. Sorted Setï¼ˆæœ‰åºé›†åˆï¼ŒZSetï¼‰</h4><ul><li><p>ç±»ä¼¼ Setï¼Œä½†æ¯ä¸ªå…ƒç´ å¸¦ä¸€ä¸ªåˆ†æ•°ï¼ˆscoreï¼Œdoubleå‹ï¼‰ï¼ŒæŒ‰åˆ†æ•°æ’åºã€‚</p></li><li><p>æ“ä½œå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ZADD key score value<span class="comment"># å‘æœ‰åºé›†åˆæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ï¼Œæˆ–æ›´æ–°å·²å­˜åœ¨æˆå‘˜çš„åˆ†æ•°ã€‚</span></span><br><span class="line">ZRANGE key start stop [WITHSCORES]<span class="comment"># è¿”å›æŒ‡å®šèŒƒå›´å†…çš„æˆå‘˜ã€‚</span></span><br><span class="line">ZREM key value<span class="comment"># ç§»é™¤æœ‰åºé›†åˆä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ã€‚</span></span><br><span class="line">ZSCORE key value<span class="comment"># è¿”å›æœ‰åºé›†åˆä¸­ï¼Œæˆå‘˜çš„åˆ†æ•°å€¼ã€‚</span></span><br></pre></td></tr></table></figure></li><li><p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p><ul><li>æ’è¡Œæ¦œï¼ˆç§¯åˆ†ã€æ’åï¼‰</li><li>ä¼˜å…ˆçº§é˜Ÿåˆ—</li><li>å¸¦æƒé‡æ’åºçš„æ•°æ®åˆ—è¡¨</li></ul></li></ul><h4 id="6-Bitmapï¼ˆäºŒè¿›åˆ¶ä½å›¾ï¼‰">6. Bitmapï¼ˆäºŒè¿›åˆ¶ä½å›¾ï¼‰</h4><ul><li><p>ç”¨äºŒè¿›åˆ¶ä½è¡¨ç¤ºå¸ƒå°”çŠ¶æ€ï¼Œæ¯ä¸ªä½å¯è®¾ç½®ä¸º0æˆ–1ï¼Œé€‚ç”¨äºå¤§é‡å¸ƒå°”ä¿¡æ¯å­˜å‚¨ã€‚</p></li><li><p>æ“ä½œå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SETBIT online_users 1234 1</span><br><span class="line">GETBIT online_users 1234</span><br><span class="line">BITCOUNT online_users</span><br></pre></td></tr></table></figure></li><li><p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p><ul><li>ç”¨æˆ·ç­¾åˆ°è®°å½•ï¼ˆæŸå¤©æ˜¯å¦åœ¨çº¿ï¼‰</li><li>æ´»è·ƒç”¨æˆ·ç»Ÿè®¡</li><li>ç™»å½•çŠ¶æ€è®°å½•</li></ul></li></ul><h4 id="7-HyperLogLog">7. HyperLogLog</h4><ul><li><p>ç”¨äº<strong>ç»Ÿè®¡å”¯ä¸€å…ƒç´ ä¸ªæ•°</strong>ï¼ˆè¿‘ä¼¼å€¼ï¼‰ï¼Œä½†å ç”¨å†…å­˜æå°ï¼ˆ12KB å›ºå®šï¼‰ã€‚</p></li><li><p>æ“ä½œå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PFADD uv_counter user1 user2</span><br><span class="line">PFCOUNT uv_counter</span><br></pre></td></tr></table></figure></li><li><p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p><ul><li>ç½‘ç«™ UV ç»Ÿè®¡</li><li>å»é‡è®¡æ•°ä½†ä¸è¦æ±‚ç²¾ç¡®</li></ul></li></ul><h4 id="8-GEOï¼ˆåœ°ç†ç©ºé—´åæ ‡ï¼‰">8. GEOï¼ˆåœ°ç†ç©ºé—´åæ ‡ï¼‰</h4><ul><li><p>å­˜å‚¨ç»çº¬åº¦åæ ‡ï¼Œå¹¶æ”¯æŒé™„è¿‘æŸ¥è¯¢ç­‰æ“ä½œã€‚</p></li><li><p>æ“ä½œå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GEOADD locations 116.40 39.90 <span class="string">&quot;Beijing&quot;</span></span><br><span class="line">GEODIST locations <span class="string">&quot;Beijing&quot;</span> <span class="string">&quot;Shanghai&quot;</span></span><br><span class="line">GEORADIUS locations 116.40 39.90 100 km</span><br></pre></td></tr></table></figure></li><li><p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p><ul><li>é™„è¿‘çš„äººã€é™„è¿‘çš„åº—</li><li>LBSï¼ˆåŸºäºåœ°ç†ä½ç½®æœåŠ¡ï¼‰</li></ul></li></ul><h4 id="9-Pub-Subï¼ˆå‘å¸ƒè®¢é˜…ï¼‰">9. Pub/Subï¼ˆå‘å¸ƒè®¢é˜…ï¼‰</h4><ul><li><p>Redis çš„<strong>æ¶ˆæ¯ç³»ç»Ÿ</strong>ï¼Œæ”¯æŒå‘å¸ƒ-è®¢é˜…æœºåˆ¶ã€‚</p></li><li><p>æ“ä½œå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SUBSCRIBE news</span><br><span class="line">PUBLISH news <span class="string">&quot;Redis 6.0 released&quot;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p><ul><li>å®æ—¶æ¶ˆæ¯æ¨é€</li><li>èŠå¤©å®¤ç³»ç»Ÿ</li><li>æ—¥å¿—é‡‡é›†ç³»ç»Ÿ</li></ul></li></ul><h3 id="Redisé”®">Redisé”®</h3><p>é€šç”¨å‘½ä»¤å¦‚ä¸‹ï¼š</p><table><thead><tr><th>å‘½ä»¤</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>SET key value</code></td><td>è®¾ç½®é”®çš„å€¼</td></tr><tr><td><code>GET key</code></td><td>è·å–é”®çš„å€¼</td></tr><tr><td><code>DEL key</code></td><td>åˆ é™¤é”®</td></tr><tr><td><code>EXISTS key</code></td><td>åˆ¤æ–­é”®æ˜¯å¦å­˜åœ¨</td></tr><tr><td><code>EXPIRE key seconds</code></td><td>è®¾ç½®é”®çš„è¿‡æœŸæ—¶é—´</td></tr><tr><td><code>TTL key</code></td><td>æŸ¥çœ‹å‰©ä½™å­˜æ´»æ—¶é—´</td></tr><tr><td><code>KEYS pattern</code></td><td>æŒ‰æ¨¡å¼æŸ¥æ‰¾é”®ï¼ˆå¦‚ <code>user:*</code>ï¼‰</td></tr><tr><td><code>TYPE key</code></td><td>è¿”å›é”®çš„æ•°æ®ç±»å‹</td></tr></tbody></table><p>é”®ç®¡ç†å‘½ä»¤ï¼š</p><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>EXPIRE key seconds</code></td><td>è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰</td></tr><tr><td><code>PEXPIRE key milliseconds</code></td><td>è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</td></tr><tr><td><code>TTL key</code></td><td>æŸ¥çœ‹å‰©ä½™ç”Ÿå­˜æ—¶é—´</td></tr><tr><td><code>PERSIST key</code></td><td>ç§»é™¤è¿‡æœŸæ—¶é—´</td></tr><tr><td><code>RENAME old new</code></td><td>é‡å‘½åé”®</td></tr></tbody></table><h3 id="Redisäº‹åŠ¡">Redisäº‹åŠ¡</h3><p>å•ä¸ª Redis å‘½ä»¤çš„æ‰§è¡Œæ˜¯åŸå­æ€§çš„ï¼Œä½† Redis æ²¡æœ‰åœ¨äº‹åŠ¡ä¸Šå¢åŠ ä»»ä½•ç»´æŒåŸå­æ€§çš„æœºåˆ¶ï¼Œæ‰€ä»¥ Redis äº‹åŠ¡çš„æ‰§è¡Œå¹¶ä¸æ˜¯åŸå­æ€§çš„ã€‚</p><p>äº‹åŠ¡å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ‰“åŒ…çš„æ‰¹é‡æ‰§è¡Œè„šæœ¬ï¼Œä½†æ‰¹é‡æŒ‡ä»¤å¹¶éåŸå­åŒ–çš„æ“ä½œï¼Œä¸­é—´æŸæ¡æŒ‡ä»¤çš„å¤±è´¥ä¸ä¼šå¯¼è‡´å‰é¢å·²åšæŒ‡ä»¤çš„å›æ»šï¼Œä¹Ÿä¸ä¼šé€ æˆåç»­çš„æŒ‡ä»¤ä¸åšã€‚</p><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>MULTI</code></td><td>å¼€å¯äº‹åŠ¡</td></tr><tr><td><code>EXEC</code></td><td>æäº¤äº‹åŠ¡</td></tr><tr><td><code>DISCARD</code></td><td>æ”¾å¼ƒäº‹åŠ¡</td></tr><tr><td><code>WATCH key</code></td><td>ç›‘è§†é”®å€¼æ˜¯å¦è¢«å…¶ä»–å®¢æˆ·ç«¯ä¿®æ”¹</td></tr></tbody></table><h3 id="Redisè¿æ¥ä¸æœåŠ¡å™¨">Redisè¿æ¥ä¸æœåŠ¡å™¨</h3><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>AUTH password</code></td><td>éªŒè¯å¯†ç æ˜¯å¦æ­£ç¡®</td></tr><tr><td><code>ECHO message</code></td><td>æ‰“å°å­—ç¬¦ä¸²</td></tr><tr><td><code>PING</code></td><td>æŸ¥çœ‹æœåŠ¡å™¨æ˜¯å¦è¿è¡Œ</td></tr><tr><td><code>QUIT</code></td><td>å…³é—­å½“å‰è¿æ¥</td></tr><tr><td><code>SELECT index</code></td><td>åˆ‡æ¢åˆ°æŒ‡å®šçš„æ•°æ®åº“</td></tr><tr><td><code>INFO</code></td><td>æŸ¥çœ‹æœåŠ¡å™¨ä¿¡æ¯å’Œç»Ÿè®¡</td></tr><tr><td><code>MONITOR</code></td><td>å®æ—¶æŸ¥çœ‹æ“ä½œå‘½ä»¤</td></tr><tr><td><code>FLUSHDB</code></td><td>æ¸…ç©ºå½“å‰æ•°æ®åº“</td></tr><tr><td><code>FLUSHALL</code></td><td>æ¸…ç©ºæ‰€æœ‰æ•°æ®åº“</td></tr><tr><td><code>DBSIZE</code></td><td>è¿”å›å½“å‰æ•°æ®åº“ä¸­ key çš„æ•°é‡</td></tr></tbody></table><h3 id="Redisæ•°æ®å¤‡ä»½ä¸æ¢å¤">Redisæ•°æ®å¤‡ä»½ä¸æ¢å¤</h3><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>SAVE</code></td><td>åŒæ­¥ä¿å­˜å¿«ç…§ï¼ˆé˜»å¡ï¼‰</td></tr><tr><td><code>BGSAVE</code></td><td>å¼‚æ­¥ä¿å­˜å¿«ç…§</td></tr><tr><td><code>BGREWRITEAOF</code></td><td>é‡å†™ AOF æ–‡ä»¶</td></tr><tr><td><code>LASTSAVE</code></td><td>ä¸Šæ¬¡ä¿å­˜çš„æ—¶é—´</td></tr></tbody></table><h3 id="Javaï¼ˆSpring-Bootï¼‰ä¸­ä½¿ç”¨Redis">Javaï¼ˆSpring Bootï¼‰ä¸­ä½¿ç”¨Redis</h3><p>ä»¥æˆ‘ä»¬ç»„çš„å¤§ä½œä¸šé¡¹ç›®ä¸ºä¾‹ï¼Œæˆ‘ä»¬é‡‡ç”¨Rediså®ç°è¯•å·æ•°æ®çš„ç¼“å­˜ï¼Œä½¿å¾—è¯•å·åœ¨æ¯«ç§’å†…åŠ è½½å®Œæˆã€‚</p><h4 id="1-æ·»åŠ ä¾èµ–">1. æ·»åŠ ä¾èµ–</h4><p>åœ¨ pom.xml æ–‡ä»¶ä¸­æ·»åŠ  Redis ç›¸å…³ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Spring Data Redis --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-é…ç½®Redisè¿æ¥ä¿¡æ¯">2. é…ç½®Redisè¿æ¥ä¿¡æ¯</h4><p>åœ¨<code>application.yml</code>ä¸­æ·»åŠ è¿æ¥ä¿¡æ¯ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="comment"># â€¦â€¦å…¶ä»–é…ç½®</span></span><br><span class="line">  <span class="comment"># Redisé…ç½®</span></span><br><span class="line">  <span class="attr">data:</span></span><br><span class="line">    <span class="attr">redis:</span></span><br><span class="line">      <span class="attr">host:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">      <span class="attr">lettuce:</span></span><br><span class="line">        <span class="attr">pool:</span></span><br><span class="line">          <span class="attr">max-active:</span> <span class="number">50</span>  <span class="comment"># åŒ¹é…çº¿ç¨‹æ± å¤§å°</span></span><br><span class="line">          <span class="attr">max-idle:</span> <span class="number">20</span></span><br><span class="line">          <span class="attr">min-idle:</span> <span class="number">5</span></span><br></pre></td></tr></table></figure><h4 id="3-ä½¿ç”¨RedisTemplateè¿›è¡Œæ“ä½œ">3. ä½¿ç”¨RedisTemplateè¿›è¡Œæ“ä½œ</h4><p>åˆ›å»ºé…ç½®ç±»ï¼Œå…¶ä½œç”¨æ˜¯å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰çš„ <code>RedisTemplate&lt;String, Object&gt;</code> Beanï¼ŒæŒ‡å®šåºåˆ—åŒ–æ–¹å¼ï¼Œä»¥ä¾¿åœ¨é¡¹ç›®ä¸­å¯ä»¥æ›´æ–¹ä¾¿åœ°ä½¿ç”¨ Redis å­˜å‚¨å’Œè¯»å–å¯¹è±¡æ•°æ®ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.buaa.javahuikao.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.connection.RedisConnectionFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.StringRedisSerializer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.runtime.ObjectMethods;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate&lt;String,Object&gt; <span class="title function_">redisTemplate</span><span class="params">(RedisConnectionFactory factory)</span>&#123;</span><br><span class="line">        RedisTemplate&lt;String, Object&gt; redisTemplate = <span class="keyword">new</span> <span class="title class_">RedisTemplate</span>&lt;&gt;();</span><br><span class="line">        redisTemplate.setConnectionFactory(factory);</span><br><span class="line">        redisTemplate.setKeySerializer(<span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>());</span><br><span class="line">        redisTemplate.setValueSerializer(<span class="keyword">new</span> <span class="title class_">GenericJackson2JsonRedisSerializer</span>());</span><br><span class="line">        redisTemplate.setHashKeySerializer(<span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>());</span><br><span class="line">        redisTemplate.setHashValueSerializer(<span class="keyword">new</span> <span class="title class_">GenericJackson2JsonRedisSerializer</span>());</span><br><span class="line">        redisTemplate.afterPropertiesSet();</span><br><span class="line">        <span class="keyword">return</span> redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨<code>ExamService.java</code>ä¸­æ³¨å…¥ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line"><span class="keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>redisTemplate.opsForValue().get(cacheKey)</code>ä»ç¼“å­˜ä¸­è·å–æ•°æ®ã€<code>redisTemplate.opsForValue().set(cacheKey,jsonData)</code>å‘ç¼“å­˜ä¸­å†™å…¥æ•°æ®ã€‚æ­¤å¤„ä½¿ç”¨Jacksonçš„åºåˆ—åŒ–å·¥å…·<code>ObjectMapper</code>å°†å¯¹è±¡ä¸Jsonå­—ç¬¦ä¸²ç›¸äº’è½¬æ¢ï¼Œredisç¼“å­˜ä¸­å­˜çš„å­—ç¬¦ä¸²å€¼ä¸ºåºåˆ—åŒ–åçš„Jsonå­—ç¬¦ä¸²ï¼Œè¯»å–ç¼“å­˜åä¹Ÿéœ€è¦ååºåˆ—åŒ–ä¸ºJavaå¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.buaa.javahuikao.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.buaa.javahuikao.dto.StudentExamQuestionDTO;</span><br><span class="line"><span class="keyword">import</span> com.buaa.javahuikao.mapper.ExamQuestionMapper;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.core.JsonProcessingException;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> jakarta.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisCallback;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExamQuestionService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">EXAM_QUESTIONS_KEY_PREFIX</span> <span class="operator">=</span> <span class="string">&quot;exam:questions:&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">CACHE_EXPIRE_HOURS</span> <span class="operator">=</span> <span class="number">3</span>; <span class="comment">// ç¼“å­˜è¿‡æœŸæ—¶é—´(å°æ—¶)</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ExamQuestionMapper examQuestionMapper;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ObjectMapper objectMapper; <span class="comment">//jsonå¤„ç†å™¨</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> StudentExamQuestionDTO <span class="title function_">getExamQuestions</span><span class="params">(<span class="type">int</span> examId)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">cacheKey</span> <span class="operator">=</span> EXAM_QUESTIONS_KEY_PREFIX + examId;</span><br><span class="line">        <span class="comment">//å°è¯•ä»ç¼“å­˜è·å–</span></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">cachedData</span> <span class="operator">=</span> (String) redisTemplate.opsForValue().get(cacheKey);</span><br><span class="line">            <span class="keyword">if</span>(cachedData != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> objectMapper.readValue(cachedData,StudentExamQuestionDTO.class);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;redisç¼“å­˜é”™è¯¯ï¼š&quot;</span>+ e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç¼“å­˜æœªå‘½ä¸­</span></span><br><span class="line">        <span class="type">StudentExamQuestionDTO</span> <span class="variable">questions</span> <span class="operator">=</span> examQuestionMapper.getExamQuestions(examId);</span><br><span class="line">        <span class="comment">//å†™å…¥ç¼“å­˜</span></span><br><span class="line">        <span class="keyword">if</span> (questions!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">jsonData</span> <span class="operator">=</span> objectMapper.writeValueAsString(questions);</span><br><span class="line">                redisTemplate.opsForValue().set(</span><br><span class="line">                        cacheKey,</span><br><span class="line">                        jsonData,</span><br><span class="line">                        CACHE_EXPIRE_HOURS,</span><br><span class="line">                        TimeUnit.HOURS</span><br><span class="line">                );</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span>(JsonProcessingException e)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;å†™å…¥ç¼“å­˜é”™è¯¯ï¼š&quot;</span>+ e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> questions;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javaä¼ä¸šçº§å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åç«¯ </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºå…·æœ‰å…±åŒå±æ€§C/C++å‡½æ•°ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹çš„æœ‰æ•ˆæ€§å®éªŒ</title>
      <link href="/2025/03/04/%E5%9F%BA%E4%BA%8E%E5%85%B7%E6%9C%89%E5%85%B1%E5%90%8C%E5%B1%9E%E6%80%A7C-C-%E5%87%BD%E6%95%B0%E7%94%9F%E6%88%90%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B%E7%9A%84%E6%9C%89%E6%95%88%E6%80%A7%E5%AE%9E%E9%AA%8C/"/>
      <url>/2025/03/04/%E5%9F%BA%E4%BA%8E%E5%85%B7%E6%9C%89%E5%85%B1%E5%90%8C%E5%B1%9E%E6%80%A7C-C-%E5%87%BD%E6%95%B0%E7%94%9F%E6%88%90%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B%E7%9A%84%E6%9C%89%E6%95%88%E6%80%A7%E5%AE%9E%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºäºå…·æœ‰å…±åŒå±æ€§C-C-å‡½æ•°ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹çš„æœ‰æ•ˆæ€§å®éªŒ">åŸºäºå…·æœ‰å…±åŒå±æ€§C/C++å‡½æ•°ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹çš„æœ‰æ•ˆæ€§å®éªŒ</h1><p>éªŒè¯æœ‰æ•ˆæ€§ï¼šè‹¥C/C++è¯­è¨€çš„ä¸¤ä¸ªå‡½æ•°åœ¨æ–‡ä»¶è¯»å†™ã€åˆ†é…å†…å­˜ã€å‚æ•°å¤„ç†ã€ç»“æ„ä½“æ„é€ æˆ–æç«¯æ•°å€¼ç­‰æ–¹é¢å­˜åœ¨ç›¸ä¼¼æ€§ï¼Œåˆ™ä»–ä»¬å¯¹åº”çš„å•å…ƒæµ‹è¯•ä»£ç å¯ä»¥æä¾›å‚è€ƒæ€§ã€‚</p><p>ç”±äºGithubä¸­C/C++è¯­è¨€çš„å•å…ƒæµ‹è¯•ä»£ç å°‘ï¼Œä¸”å¤šå› ä¸ºæµ‹è¯•ç²’åº¦é—®é¢˜åœ¨ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ä¸­æµ‹è¯•çš„æ˜¯ä¸€æ•´ä¸ªæ¨¡å—ã€æ¶‰åŠå¤šä¸ªå‡½æ•°ï¼Œå› æ­¤å¯èƒ½åªæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„ä¸¤å‡½æ•°åï¼Œå¯¹å…¶ä¸­ä¸€ä¸ªå‡½æ•°å…ˆç”Ÿæˆå•æµ‹åå†è¿›è¡Œå®éªŒã€‚</p>]]></content>
      
      
      <categories>
          
          <category> C/C++å•å…ƒæµ‹è¯•ç”Ÿæˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C/C++å•å…ƒæµ‹è¯•ç”Ÿæˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾ç¥ç»ç½‘ç»œè®ºæ–‡é˜…è¯»</title>
      <link href="/2025/03/02/%E5%9B%BE%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/"/>
      <url>/2025/03/02/%E5%9B%BE%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="Graph-Attention-Networks">Graph Attention Networks</h1><h3 id="1-ç ”ç©¶èƒŒæ™¯ä¸åŠ¨æœº">1. ç ”ç©¶èƒŒæ™¯ä¸åŠ¨æœº</h3><ul><li><strong>å›¾æ•°æ®çš„æŒ‘æˆ˜</strong>ï¼šä¼ ç»Ÿçš„å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNsï¼‰é€‚ç”¨äºè§„åˆ™ç½‘æ ¼æ•°æ®ï¼ˆå¦‚å›¾åƒï¼‰ï¼Œä½†å¾ˆå¤šå®é™…ä»»åŠ¡ï¼ˆå¦‚ç¤¾äº¤ç½‘ç»œã€ç”Ÿç‰©ç½‘ç»œç­‰ï¼‰ä¸­çš„æ•°æ®ä»¥å›¾çš„å½¢å¼å­˜åœ¨ï¼Œç»“æ„ä¸è§„åˆ™ã€‚</li><li>ç°æœ‰æ–¹æ³•çš„ä¸è¶³ï¼š<ul><li><strong>è°±æ–¹æ³•</strong>ï¼šåŸºäºå›¾æ‹‰æ™®æ‹‰æ–¯ç‰¹å¾åˆ†è§£ï¼Œ<strong>è®¡ç®—é‡å¤§</strong>ä¸”<strong>ä¾èµ–äºç‰¹å®šå›¾ç»“æ„</strong>ï¼Œéš¾ä»¥æ³›åŒ–åˆ°æ–°å›¾ã€‚</li><li><strong>éè°±æ–¹æ³•</strong>ï¼ˆMoNet, GraphSAGE)ï¼šç›´æ¥åœ¨å›¾ä¸Šå®šä¹‰å·ç§¯æ“ä½œï¼Œä½†éš¾ä»¥ç»Ÿä¸€å¤„ç†é‚»å±…æ•°ç›®ä¸å›ºå®šçš„é—®é¢˜ã€‚</li></ul></li><li><strong>è‡ªæ³¨æ„åŠ›æœºåˆ¶å¯å‘</strong>ï¼šè¿‘å¹´æ¥ï¼Œè‡ªæ³¨æ„åŠ›åœ¨åºåˆ—æ¨¡å‹ï¼ˆå¦‚æœºå™¨ç¿»è¯‘ï¼‰ä¸­è¡¨ç°çªå‡ºï¼Œå¯å‘ä½œè€…å°†è‡ªæ³¨æ„åŠ›æ€æƒ³åº”ç”¨åˆ°å›¾æ•°æ®ä¸­ï¼Œæ›´çµæ´»åœ°èšåˆé‚»å±…ä¿¡æ¯ï¼Œä»¥å®Œæˆå›¾æ•°æ®çš„èŠ‚ç‚¹åˆ†ç±»ä»»åŠ¡ã€‚</li><li>è‡ªæ³¨æ„åŠ›ç»“æ„çš„ç‰¹ç‚¹ï¼š<ol><li>è®¡ç®—é«˜æ•ˆï¼Œæ‰€æœ‰è¿ç®—å¯ä»¥å¹¶è¡ŒåŒ–</li><li>é€šè¿‡æŒ‡å®šä»»æ„çš„é‚»èŠ‚ç‚¹æƒé‡ï¼Œå¯ä»¥å¤„ç†èŠ‚ç‚¹åº¦æ•°ä¸åŒçš„å›¾</li><li>æ¨¡å‹å¯ç›´æ¥åº”ç”¨äºå½’çº³å­¦ä¹ ä»»åŠ¡ï¼Œå¯ä»¥æ³›åŒ–åˆ°æ¨¡å‹ä»æœªè§è¿‡çš„å›¾</li></ol></li></ul><hr><h3 id="2-Graph-Attention-Networksï¼ˆGATï¼‰æ–¹æ³•ç®€ä»‹">2. Graph Attention Networksï¼ˆGATï¼‰æ–¹æ³•ç®€ä»‹</h3><ul><li><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šé€šè¿‡è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼Œè®©æ¯ä¸ªèŠ‚ç‚¹åœ¨èšåˆè‡ªèº«é‚»å±…ç‰¹å¾æ—¶ï¼Œæ ¹æ®é‚»å±…çš„é‡è¦æ€§åˆ†é…ä¸åŒæƒé‡ï¼Œä»è€Œè·å¾—æ›´æœ‰æ•ˆçš„èŠ‚ç‚¹è¡¨ç¤ºã€‚</li><li><strong>è¾“å…¥ä¸è¾“å‡º</strong>ï¼šè¾“å…¥ä¸ºèŠ‚ç‚¹ç‰¹å¾é›†åˆ <strong>h</strong>ï¼Œè¾“å‡ºä¸ºæ›´æ–°åçš„èŠ‚ç‚¹ç‰¹å¾ <strong>h</strong>â€²ï¼Œæ”¯æŒç‰¹å¾ç»´åº¦å˜æ¢ã€‚</li><li><strong>Graph Attention Layerçš„å…³é”®æ­¥éª¤</strong>ï¼š<ol><li><strong>çº¿æ€§å˜æ¢</strong>ï¼šé€šè¿‡æƒé‡çŸ©é˜µ <strong>W</strong> å¯¹æ‰€æœ‰èŠ‚ç‚¹çš„è¾“å…¥ç‰¹å¾è¿›è¡ŒåŒæ ·çš„çº¿æ€§å˜æ¢ï¼Œå¾—åˆ°æ–°çš„ç‰¹å¾è¡¨ç¤ºã€‚</li><li><strong>è®¡ç®—æ³¨æ„åŠ›ç³»æ•°</strong>ï¼š<ul><li>å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ i åŠå…¶ä¸€é˜¶é‚»å±… jï¼ˆå«iï¼‰ï¼Œåˆ©ç”¨ä¸€ä¸ªå…±äº«çš„æ³¨æ„åŠ›æœºåˆ¶ï¼ˆå•å±‚å‰é¦ˆç½‘ç»œåŠ ä¸Š LeakyReLU æ¿€æ´»ï¼‰è®¡ç®—åŸå§‹çš„æ³¨æ„åŠ›åˆ†æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">e_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>ã€‚</li><li>å¯¹æ¯ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰é‚»å±…åˆ†æ•°è¿›è¡Œ softmax å½’ä¸€åŒ–ï¼Œå¾—åˆ°å½’ä¸€åŒ–çš„æ³¨æ„åŠ›ç³»æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î±</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\alpha_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.0037em;">Î±</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>ã€‚</li></ul></li><li><strong>ç‰¹å¾èšåˆ</strong>ï¼šä½¿ç”¨å½’ä¸€åŒ–åçš„æ³¨æ„åŠ›ç³»æ•°ï¼Œå¯¹é‚»å±…èŠ‚ç‚¹çš„ç‰¹å¾è¿›è¡ŒåŠ æƒæ±‚å’Œï¼Œå¹¶ç»è¿‡sigmoidéçº¿æ€§æ¿€æ´»ï¼Œç”Ÿæˆæ–°çš„èŠ‚ç‚¹è¡¨ç¤ºã€‚</li><li><strong>å¤šå¤´æ³¨æ„åŠ›</strong>ï¼šé€šè¿‡å¹¶è¡Œæ‰§è¡Œå¤šä¸ªç‹¬ç«‹çš„æ³¨æ„åŠ›æœºåˆ¶ï¼ˆå³å¤šå¤´æ³¨æ„åŠ›ï¼‰ï¼Œæå‡æ¨¡å‹çš„ç¨³å®šæ€§ä¸è¡¨è¾¾èƒ½åŠ›ã€‚æœ€ååœ¨è¾“å‡ºå±‚å¯é€‰æ‹©æ‹¼æ¥ï¼ˆä¸­é—´å±‚ï¼‰æˆ–å¹³å‡ï¼ˆè¾“å‡ºå±‚ï¼‰å¤šå¤´ç»“æœã€‚</li></ol></li><li><strong>ä¼˜åŠ¿</strong>ï¼š<ul><li><strong>è®¡ç®—é«˜æ•ˆ</strong>ï¼šæ— éœ€çŸ©é˜µåˆ†è§£æˆ–å…¨å±€å›¾ç»“æ„ä¿¡æ¯ï¼Œè®¡ç®—å¤æ‚åº¦ä¸GCNç›¸å½“ï¼ˆO(âˆ£Vâˆ£FFâ€²+âˆ£Eâˆ£Fâ€²) ï¼Œæ”¯æŒå¹¶è¡ŒåŒ–ã€‚</li><li><strong>åŠ¨æ€æƒé‡åˆ†é…</strong>ï¼šé€šè¿‡æ³¨æ„åŠ›æœºåˆ¶ä¸ºä¸åŒé‚»å±…åˆ†é…ä¸åŒæƒé‡ï¼Œæå‡æ¨¡å‹è¡¨è¾¾èƒ½åŠ›ã€‚</li><li><strong>çµæ´»æ€§å¼º</strong>ï¼šä¸ä¾èµ–äºå›¾çš„å…¨å±€ç»“æ„ï¼Œå¯å¤„ç†æœ‰å‘å›¾ã€ä¸åŒå¤§å°çš„é‚»å±…é›†åˆï¼Œä¸”é€‚ç”¨äºå½’çº³å­¦ä¹ ï¼ˆå¤„ç†è®­ç»ƒæ—¶æœªè§è¿‡çš„æ–°å›¾ï¼‰ã€‚</li><li><strong>å¯è§£é‡Šæ€§</strong>ï¼šæ³¨æ„åŠ›ç³»æ•°åæ˜ äº†æ¨¡å‹åœ¨èšåˆé‚»å±…ä¿¡æ¯æ—¶å¯¹å„é‚»å±…çš„å…³æ³¨ç¨‹åº¦ï¼Œæœ‰åŠ©äºç†è§£æ¨¡å‹çš„å†³ç­–è¿‡ç¨‹ã€‚</li></ul></li></ul><hr><h3 id="3-å®éªŒè®¾ç½®ä¸ç»“æœ">3. å®éªŒè®¾ç½®ä¸ç»“æœ</h3><ul><li><strong>æ•°æ®é›†</strong>ï¼š<ul><li><strong>è½¬å¯¼ä»»åŠ¡</strong>ï¼šä½¿ç”¨ Coraã€Citeseer å’Œ Pubmed ä¸‰ä¸ªæ ‡å‡†å¼•æ–‡ç½‘ç»œæ•°æ®é›†ï¼ŒèŠ‚ç‚¹ç‰¹å¾ä¸ºæ–‡æ¡£çš„è¯è¢‹è¡¨ç¤ºï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯¹åº”ä¸€ä¸ªç±»åˆ«ã€‚</li><li><strong>å½’çº³ä»»åŠ¡</strong>ï¼šä½¿ç”¨è›‹ç™½è´¨ç›¸äº’ä½œç”¨ï¼ˆPPIï¼‰æ•°æ®é›†ï¼Œè¯¥æ•°æ®é›†åŒ…å«å¤šä¸ªä¸åŒçš„å›¾ï¼Œæµ‹è¯•æ—¶çš„å›¾å®Œå…¨æœªåœ¨è®­ç»ƒä¸­å‡ºç°ã€‚</li></ul></li><li><strong>æ¨¡å‹ç»“æ„</strong>ï¼š<ul><li><strong>è½¬å¯¼ä»»åŠ¡</strong>ï¼šé‡‡ç”¨ä¸¤å±‚ GAT æ¨¡å‹ï¼Œç¬¬ä¸€å±‚ä½¿ç”¨å¤šå¤´æ³¨æ„åŠ›ï¼ˆä¾‹å¦‚ 8 ä¸ªå¤´ï¼‰æå–ä¸­é—´ç‰¹å¾ï¼Œç¬¬äºŒå±‚ç”¨äºåˆ†ç±»ï¼Œé…åˆ dropout å’Œ L2 æ­£åˆ™åŒ–ã€‚</li><li><strong>å½’çº³ä»»åŠ¡</strong>ï¼šé‡‡ç”¨ä¸‰å±‚ GAT æ¨¡å‹ï¼Œå¹¶åˆ©ç”¨è·³è·ƒè¿æ¥æ¥ç¼“è§£æ·±å±‚æ¨¡å‹è®­ç»ƒä¸­çš„ä¿¡æ¯è¡°å‡é—®é¢˜ã€‚</li></ul></li><li><strong>å®éªŒç»“æœ</strong>ï¼š<ul><li>åœ¨è½¬å¯¼ä»»åŠ¡ä¸Šï¼ŒGAT åœ¨ Coraã€Citeseer å’Œ Pubmed æ•°æ®é›†ä¸Šå‡è¶…è¿‡æˆ–åŒ¹é…äº†å¦‚ GCNã€Chebyshev æ»¤æ³¢å™¨å’Œ MoNet ç­‰å¤šç§æ–¹æ³•çš„è¡¨ç°ã€‚</li><li>åœ¨å½’çº³ä»»åŠ¡ï¼ˆPPI æ•°æ®é›†ï¼‰ä¸Šï¼ŒGAT æ˜¾è‘—æå‡äº†å¾®å¹³å‡ F1 å¾—åˆ†ï¼ŒéªŒè¯äº†å…¶åœ¨æ–°å›¾ç¯å¢ƒä¸‹çš„å¼ºæ³›åŒ–èƒ½åŠ›ï¼ŒåŒæ—¶ä¹Ÿè¯æ˜äº†èµ‹äºˆé‚»å±…ä¸åŒæƒé‡çš„é‡è¦æ€§ã€‚</li></ul></li></ul><hr><h3 id="4-ç»“è®ºä¸æœªæ¥å·¥ä½œ">4. ç»“è®ºä¸æœªæ¥å·¥ä½œ</h3><ul><li><strong>ä¸»è¦è´¡çŒ®</strong>ï¼š<ul><li>æå‡ºäº†åŸºäºè‡ªæ³¨æ„åŠ›æœºåˆ¶çš„å›¾ç¥ç»ç½‘ç»œæ¶æ„ï¼Œèƒ½å¤Ÿçµæ´»é«˜æ•ˆåœ°å¤„ç†å›¾ç»“æ„æ•°æ®ã€‚</li><li>åœ¨ä¸éœ€è¦äº‹å…ˆçŸ¥é“å…¨å±€å›¾ç»“æ„çš„å‰æä¸‹ï¼Œå®ç°äº†å¯¹ä¸åŒå¤§å°é‚»å±…é›†åˆçš„æœ‰æ•ˆå¤„ç†ï¼Œå¹¶é€‚ç”¨äºå½’çº³å­¦ä¹ ã€‚</li><li>åœ¨å¤šä¸ªæ ‡å‡†æ•°æ®é›†ä¸Šè¾¾åˆ°äº†æœ€å…ˆè¿›çš„æ€§èƒ½ï¼ŒéªŒè¯äº†æ¨¡å‹çš„æœ‰æ•ˆæ€§å’Œå¹¿æ³›é€‚ç”¨æ€§ã€‚</li></ul></li><li><strong>æœªæ¥ç ”ç©¶æ–¹å‘</strong>ï¼š<ul><li>æ‰©å±•æ¨¡å‹åˆ°å›¾åˆ†ç±»ä»»åŠ¡ã€‚</li><li>æ¢ç´¢å¦‚ä½•æ›´é«˜æ•ˆåœ°å¤„ç†å¤§è§„æ¨¡å›¾æ•°æ®å’Œæé«˜æ‰¹å¤„ç†èƒ½åŠ›ã€‚</li><li>æ·±å…¥åˆ©ç”¨æ³¨æ„åŠ›æœºåˆ¶è¿›è¡Œæ¨¡å‹è§£é‡Šï¼Œå¹¶å°è¯•æ•´åˆè¾¹ç‰¹å¾ä¿¡æ¯ä»¥å¤„ç†æ›´å¤æ‚çš„å›¾æ•°æ®ã€‚</li></ul></li></ul><h1 id="Deep-Graph-Infomax-DGI">Deep Graph Infomax (DGI)</h1><h3 id="1-ç ”ç©¶èƒŒæ™¯ä¸åŠ¨æœº-2">1. ç ”ç©¶èƒŒæ™¯ä¸åŠ¨æœº</h3><ul><li><strong>å›¾æ•°æ®çš„æŒ‘æˆ˜</strong>ï¼šä¼ ç»Ÿçš„å›¾ç¥ç»ç½‘ç»œï¼ˆå¦‚GCNï¼‰å¤šé‡‡ç”¨ç›‘ç£å­¦ä¹ ï¼Œè€Œåœ¨è®¸å¤šå®é™…åœºæ™¯ä¸‹å›¾æ•°æ®å¾€å¾€æ²¡æœ‰æ ‡æ³¨ä¿¡æ¯ã€‚</li><li><strong>æ— ç›‘ç£å­¦ä¹ çš„éœ€æ±‚</strong>ï¼šç°æœ‰æ–¹æ³•å¸¸åŸºäºéšæœºæ¸¸èµ°æˆ–é‚»è¿‘é‡æ„ç›®æ ‡ï¼Œä½†è¿™ç±»æ–¹æ³•å¯èƒ½è¿‡åˆ†å¼ºè°ƒå±€éƒ¨é‚»æ¥ä¿¡æ¯ï¼Œå¿½ç•¥äº†å…¨å±€ç»“æ„ç‰¹å¾ã€‚</li><li><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šå¦‚ä½•åœ¨ä¸ä¾èµ–æ ‡ç­¾çš„æƒ…å†µä¸‹ï¼Œä»å›¾ç»“æ„æ•°æ®ä¸­å­¦ä¹ åˆ°æ—¢ä¿ç•™å±€éƒ¨ç»†èŠ‚åˆèƒ½åæ˜ å…¨å±€ç»“æ„çš„èŠ‚ç‚¹è¡¨ç¤ºã€‚</li></ul><hr><h3 id="2-æ–¹æ³•æ¦‚è¿°ï¼šDeep-Graph-Infomax-DGI">2. æ–¹æ³•æ¦‚è¿°ï¼šDeep Graph Infomax (DGI)</h3><ul><li><strong>å±€éƒ¨ä¸å…¨å±€äº’ä¿¡æ¯æœ€å¤§åŒ–</strong>ï¼šDGI çš„ä¸»è¦æ€æƒ³æ˜¯åˆ©ç”¨äº’ä¿¡æ¯æœ€å¤§åŒ–ï¼Œé€šè¿‡å¯¹æ¯”å›¾ä¸­å±€éƒ¨ï¼ˆå³èŠ‚ç‚¹åŠå…¶é‚»åŸŸï¼‰è¡¨ç¤ºä¸å›¾æ•´ä½“å…¨å±€æ‘˜è¦ä¹‹é—´çš„å…³ç³»ï¼Œä¿ƒä½¿æ¨¡å‹å­¦ä¹ åˆ°å¯Œæœ‰å…¨å±€ç»“æ„ä¿¡æ¯çš„èŠ‚ç‚¹è¡¨ç¤ºã€‚</li><li>æ–¹æ³•æµç¨‹ï¼š<ol><li><strong>ç¼–ç å™¨ï¼ˆEncoderï¼‰</strong>ï¼šé‡‡ç”¨å›¾å·ç§¯ç½‘ç»œï¼ˆGCNï¼‰æˆ–å…¶å®ƒå›¾ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œä»è¾“å…¥çš„èŠ‚ç‚¹ç‰¹å¾å’Œé‚»æ¥çŸ©é˜µä¸­æå–å±€éƒ¨â€œè¡¥ä¸â€è¡¨ç¤ºã€‚</li><li><strong>è¯»å–å‡½æ•°ï¼ˆReadout Functionï¼‰</strong>ï¼šå°†æ‰€æœ‰èŠ‚ç‚¹çš„å±€éƒ¨è¡¨ç¤ºèšåˆæˆä¸€ä¸ªå…¨å±€æ‘˜è¦å‘é‡ï¼Œåæ˜ æ•´ä¸ªå›¾çš„å…¨å±€ä¿¡æ¯ã€‚</li><li><strong>åˆ¤åˆ«å™¨ï¼ˆDiscriminatorï¼‰</strong>ï¼šé€šè¿‡ä¸€ä¸ªäºŒåˆ†ç±»å™¨å¯¹æ¯”çœŸå®çš„å±€éƒ¨-å…¨å±€é…å¯¹ä¸è´Ÿæ ·æœ¬é…å¯¹ï¼ˆé€šè¿‡å¯¹è¾“å…¥æ•°æ®è¿›è¡Œéšæœºæ‰°åŠ¨æˆ–è´Ÿé‡‡æ ·è·å¾—ï¼‰ï¼Œé‡‡ç”¨äºŒå…ƒäº¤å‰ç†µæŸå¤±å‡½æ•°è¿›è¡Œè®­ç»ƒï¼Œè¿›è€Œæœ€å¤§åŒ–å±€éƒ¨è¡¨ç¤ºä¸å…¨å±€æ‘˜è¦ä¹‹é—´çš„äº’ä¿¡æ¯ã€‚</li></ol></li></ul><hr><h3 id="3-ç†è®ºåˆ†æ">3. ç†è®ºåˆ†æ</h3><ul><li><strong>ç†è®ºè¯æ˜</strong>ï¼šè®ºæ–‡æä¾›äº†ä¸€ç³»åˆ—å¼•ç†å’Œå®šç†ï¼Œè¯æ˜äº†åœ¨å±€éƒ¨ä¸å…¨å±€è¡¨ç¤ºé—´æœ€å°åŒ–åˆ¤åˆ«å™¨çš„åˆ†ç±»é”™è¯¯èƒ½å¤Ÿä¸Šç•Œåœ°æœ€å¤§åŒ–è¿™ä¸¤è€…ä¹‹é—´çš„äº’ä¿¡æ¯ã€‚</li><li><strong>äº’ä¿¡æ¯ä¸æœ€ä¼˜åˆ¤åˆ«å™¨</strong>ï¼šå½“è¯»å–å‡½æ•°å…·å¤‡å•å°„æ€§ï¼ˆinjectiveï¼‰æ—¶ï¼Œå…¨å±€æ‘˜è¦èƒ½å¤Ÿæ•è·è¾“å…¥å›¾çš„æ‰€æœ‰ä¿¡æ¯ï¼Œè¿›è€Œä½¿å¾—æ¨¡å‹åœ¨ç†è®ºä¸Šè¾¾åˆ°æœ€ä¼˜äº’ä¿¡æ¯ã€‚</li></ul><hr><h3 id="4-å®éªŒä¸ç»“æœ">4. å®éªŒä¸ç»“æœ</h3><ul><li>ä»»åŠ¡è®¾ç½®ï¼š<ul><li><strong>è½¬å¯¼å¼ä»»åŠ¡</strong>ï¼šåœ¨ Coraã€Citeseer å’Œ Pubmed ç­‰å¼•ç”¨ç½‘ç»œä¸Šè¿›è¡ŒèŠ‚ç‚¹åˆ†ç±»å®éªŒã€‚</li><li><strong>å½’çº³å¼ä»»åŠ¡</strong>ï¼šåœ¨ Reddit ç¤¾äº¤ç½‘ç»œå’Œ PPI è›‹ç™½è´¨ç›¸äº’ä½œç”¨ç½‘ç»œä¸Šè¿›è¡Œå½’çº³å¼èŠ‚ç‚¹åˆ†ç±»å®éªŒã€‚</li></ul></li><li>ç»“æœè¡¨ç°ï¼š<ul><li>åœ¨è½¬å¯¼å¼ä»»åŠ¡ä¸Šï¼ŒDGI çš„è¡¨ç°è¶…è¶Šäº†è®¸å¤šæ— ç›‘ç£æ–¹æ³•ï¼Œå¹¶åœ¨æŸäº›æ•°æ®é›†ä¸Šç”šè‡³ä¸ç›‘ç£å­¦ä¹ çš„ GCN æ¨¡å‹ç«äº‰ã€‚</li><li>åœ¨å½’çº³å¼ä»»åŠ¡ä¸­ï¼ŒDGI åŒæ ·å±•ç¤ºäº†ä¼˜è¶Šçš„æ€§èƒ½ï¼Œè¯æ˜äº†å…¶åœ¨å¤§è§„æ¨¡å’Œå¤šå›¾åœºæ™¯ä¸‹çš„é€‚ç”¨æ€§ã€‚</li></ul></li><li><strong>é²æ£’æ€§</strong>ï¼šDGI å¯¹è´Ÿæ ·æœ¬ç”Ÿæˆï¼ˆå¦‚ç‰¹å¾æ‰“ä¹±æˆ–é‚»æ¥çŸ©é˜µæ‰°åŠ¨ï¼‰çš„ç­–ç•¥å…·æœ‰è¾ƒé«˜çš„é²æ£’æ€§ï¼Œèƒ½å¤Ÿåœ¨ä¸åŒè´Ÿé‡‡æ ·æ–¹å¼ä¸‹ä¿æŒè‰¯å¥½æ€§èƒ½ã€‚</li></ul><hr><h3 id="5-å®šæ€§åˆ†æä¸ç»“è®º">5. å®šæ€§åˆ†æä¸ç»“è®º</h3><ul><li><strong>å¯è§†åŒ–åˆ†æ</strong>ï¼šé€šè¿‡ t-SNE ç­‰æŠ€æœ¯å¯¹èŠ‚ç‚¹è¡¨ç¤ºè¿›è¡Œå¯è§†åŒ–ï¼Œç»“æœæ˜¾ç¤ºç»è¿‡ DGI å­¦ä¹ çš„è¡¨ç¤ºåœ¨ä½ç»´ç©ºé—´ä¸­å½¢æˆäº†æ˜æ˜¾çš„ç±»åˆ«èšç±»ç»“æ„ã€‚</li><li><strong>åµŒå…¥ç»´åº¦åˆ†æ</strong>ï¼šç ”ç©¶å‘ç°ï¼Œéƒ¨åˆ†åµŒå…¥ç»´åº¦åœ¨åŒºåˆ†æ­£è´Ÿæ ·æœ¬æ—¶èµ·åˆ°å…³é”®ä½œç”¨ï¼Œè€Œå…¶ä½™ç»´åº¦åˆ™ä¸»è¦ç¼–ç äº†æœ‰ç”¨çš„èŠ‚ç‚¹ç‰¹å¾ä¿¡æ¯ï¼›å³ä¾¿ç§»é™¤éƒ¨åˆ†ç»´åº¦ï¼Œåˆ†ç±»æ€§èƒ½ä»èƒ½ä¿æŒè¾ƒé«˜æ°´å¹³ã€‚</li><li><strong>æ€»ç»“</strong>ï¼šDGI æå‡ºäº†ä¸€ç§å…¨æ–°çš„å›¾æ— ç›‘ç£å­¦ä¹ æ–¹æ³•ï¼Œé€šè¿‡å±€éƒ¨ä¸å…¨å±€ä¿¡æ¯çš„å¯¹æ¯”ï¼Œæœ‰æ•ˆæ•æ‰äº†å›¾æ•°æ®çš„ç»“æ„ç‰¹å¾ï¼Œå¹¶åœ¨å¤šä¸ªæ ‡å‡†æ•°æ®é›†ä¸ŠéªŒè¯äº†å…¶ä¼˜å¼‚çš„æ€§èƒ½ï¼Œä¸ºæ— ç›‘ç£å›¾è¡¨ç¤ºå­¦ä¹ æä¾›äº†æ–°çš„æ€è·¯å’Œæ–¹å‘ã€‚</li></ul><hr><p>æ•´ä½“è€Œè¨€ï¼ŒDGI çš„åˆ›æ–°ç‚¹åœ¨äºåˆ©ç”¨äº’ä¿¡æ¯æœ€å¤§åŒ–æ¥æ¡¥æ¥å±€éƒ¨èŠ‚ç‚¹è¡¨ç¤ºä¸å…¨å±€å›¾ä¿¡æ¯ä¹‹é—´çš„è”ç³»ï¼Œä»è€Œåœ¨æ— ç›‘ç£çš„æƒ…å½¢ä¸‹å­¦ä¹ åˆ°é«˜è´¨é‡çš„èŠ‚ç‚¹è¡¨ç¤ºï¼Œä¸ºåç»­çš„å›¾ä»»åŠ¡ï¼ˆå¦‚èŠ‚ç‚¹åˆ†ç±»ã€ç¤¾åŒºæ£€æµ‹ç­‰ï¼‰æä¾›äº†åšå®çš„åŸºç¡€ã€‚</p><h1 id="Semi-Supervised-Classification-with-Graph-Convolutional-Networks">Semi-Supervised Classification with Graph Convolutional Networks</h1><h3 id="1-ç ”ç©¶èƒŒæ™¯ä¸åŠ¨æœº-3">1. <strong>ç ”ç©¶èƒŒæ™¯ä¸åŠ¨æœº</strong></h3><p>æœ¬æ–‡é’ˆå¯¹å›¾ç»“æ„æ•°æ®ä¸­çš„èŠ‚ç‚¹åˆ†ç±»é—®é¢˜ï¼Œæå‡ºäº†ä¸€ç§åŠç›‘ç£å­¦ä¹ æ–¹æ³•ã€‚ä¼ ç»Ÿæ–¹æ³•å¾€å¾€ä¾èµ–äºæ˜¾å¼çš„å›¾æ‹‰æ™®æ‹‰æ–¯æ­£åˆ™åŒ–ï¼Œä½†è¿™åœ¨å®é™…åº”ç”¨ä¸­å¯èƒ½ä¼šå—åˆ°å›¾ä¸­è¾¹ä»…è¡¨ç¤ºèŠ‚ç‚¹ç›¸ä¼¼æ€§çš„é™åˆ¶ã€‚ä½œè€…å¸Œæœ›åˆ©ç”¨å›¾ç»“æ„å’ŒèŠ‚ç‚¹ç‰¹å¾çš„è”åˆä¿¡æ¯ï¼Œé€šè¿‡ç¥ç»ç½‘ç»œç›´æ¥å¯¹å›¾è¿›è¡Œå»ºæ¨¡ï¼Œä»è€Œæé«˜åˆ†ç±»æ•ˆæœã€‚</p><h3 id="2-æ–¹æ³•åŸç†ä¸æ¨¡å‹æ„å»º">2. <strong>æ–¹æ³•åŸç†ä¸æ¨¡å‹æ„å»º</strong></h3><ul><li><p><strong>è°±å›¾å·ç§¯è¿‘ä¼¼</strong>ï¼šè®ºæ–‡é¦–å…ˆä»è°±å›¾å·ç§¯å‡ºå‘ï¼Œåˆ©ç”¨åˆ‡æ¯”é›ªå¤«å¤šé¡¹å¼å¯¹å·ç§¯æ“ä½œè¿›è¡Œè¿‘ä¼¼ï¼Œä»è€Œå®ç°å±€éƒ¨åŒ–æ»¤æ³¢ã€‚é€šè¿‡é™åˆ¶å¤šé¡¹å¼çš„é˜¶æ•°ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€é˜¶è¿‘ä¼¼å½¢å¼ã€‚</p></li><li><p><strong>å±‚çº§ä¼ æ’­è§„åˆ™</strong>ï¼šè¿›ä¸€æ­¥ç®€åŒ–åï¼Œæå‡ºäº†åŸºäºé‡æ–°å½’ä¸€åŒ–æŠ€å·§çš„ä¼ æ’­è§„åˆ™ï¼Œå³</p><p>H(l+1) = Ïƒ( DÌƒ^(â€“1/2) AÌƒ DÌƒ^(â€“1/2) H(l) W(l) )</p><p>å…¶ä¸­ AÌƒ = A + Iâ‚™ï¼ŒDÌƒ æ˜¯ AÌƒ çš„åº¦çŸ©é˜µï¼Œè¿™æ ·è®¾è®¡æ—¢è€ƒè™‘äº†èŠ‚ç‚¹è‡ªè¿æ¥ï¼Œåˆè§£å†³äº†æ·±å±‚ç½‘ç»œä¸­å¯èƒ½å‡ºç°çš„æ•°å€¼ä¸ç¨³å®šé—®é¢˜ã€‚</p></li></ul><h3 id="3-åŠç›‘ç£èŠ‚ç‚¹åˆ†ç±»æ¡†æ¶">3. <strong>åŠç›‘ç£èŠ‚ç‚¹åˆ†ç±»æ¡†æ¶</strong></h3><ul><li><strong>ç½‘ç»œæ¶æ„</strong>ï¼šä»¥ä¸¤å±‚GCNä¸ºä¾‹ï¼Œç¬¬ä¸€å±‚å°†è¾“å…¥ç‰¹å¾ä¸å›¾ç»“æ„ä¿¡æ¯èåˆåç”Ÿæˆéšè—è¡¨ç¤ºï¼Œç¬¬äºŒå±‚å†é€šè¿‡ softmax è¾“å‡ºå„èŠ‚ç‚¹çš„åˆ†ç±»æ¦‚ç‡ã€‚</li><li><strong>æŸå¤±å‡½æ•°</strong>ï¼šé‡‡ç”¨äº¤å‰ç†µæŸå¤±ï¼Œä»…åœ¨å°‘é‡æ ‡è®°èŠ‚ç‚¹ä¸Šè¿›è¡Œç›‘ç£è®­ç»ƒï¼Œä»è€Œåˆ©ç”¨æ•´ä¸ªå›¾ç»“æ„ä¿¡æ¯è¿›è¡Œä¼ æ’­å’Œç‰¹å¾æå–ã€‚</li><li><strong>è®­ç»ƒæ–¹å¼</strong>ï¼šç”±äºæ•°æ®é›†ï¼ˆå¦‚å¼•ç”¨ç½‘ç»œï¼‰çš„è§„æ¨¡é€‚ä¸­ï¼Œå¯é‡‡ç”¨å…¨æ‰¹é‡æ¢¯åº¦ä¸‹é™ï¼Œå¹¶é€šè¿‡ dropout ç­‰æŠ€æœ¯é˜²æ­¢è¿‡æ‹Ÿåˆã€‚</li></ul><h3 id="4-å®éªŒä¸ç»“æœ-2">4. <strong>å®éªŒä¸ç»“æœ</strong></h3><ul><li>åœ¨ Citeseerã€Coraã€Pubmed ä»¥åŠçŸ¥è¯†å›¾è°± NELL æ•°æ®é›†ä¸Šè¿›è¡Œå®éªŒï¼Œç»“æœæ˜¾ç¤ºè¯¥æ¨¡å‹åœ¨åˆ†ç±»å‡†ç¡®ç‡å’Œè®¡ç®—æ•ˆç‡ä¸Šå‡æ˜æ˜¾ä¼˜äºä¼ ç»Ÿæ–¹æ³•ï¼Œå¦‚æ ‡ç­¾ä¼ æ’­ã€æ·±åº¦åµŒå…¥ã€Planetoid ç­‰ã€‚</li><li>å¦å¤–ï¼Œå®éªŒè¿˜åˆ†æäº†ä¸åŒå±‚æ•°å’Œä¼ æ’­æ¨¡å‹å¯¹æ€§èƒ½çš„å½±å“ï¼Œè¯æ˜äº†é‡æ–°å½’ä¸€åŒ–ä¼ æ’­è§„åˆ™åœ¨æ€§èƒ½å’Œç¨³å®šæ€§ä¸Šçš„ä¼˜åŠ¿ã€‚</li></ul><h3 id="5-è®¨è®ºä¸æœªæ¥å·¥ä½œ">5. <strong>è®¨è®ºä¸æœªæ¥å·¥ä½œ</strong></h3><ul><li>è®¨è®ºéƒ¨åˆ†åˆ†æäº†GCNåœ¨æ•æ‰å±€éƒ¨ç»“æ„ä¿¡æ¯æ–¹é¢çš„ä¼˜åŠ¿ï¼Œå¹¶æŒ‡å‡ºæ¨¡å‹åœ¨å¤„ç†å¤§è§„æ¨¡å›¾æ•°æ®æ—¶å†…å­˜æ¶ˆè€—è¾ƒå¤§ï¼Œæœªæ¥å¯ä»¥æ¢ç´¢åŸºäºå°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™çš„æ‰©å±•æ–¹æ³•ã€‚</li><li>è®ºæ–‡è¿˜æ¢è®¨äº†ä¸ Weisfeiler-Lehman ç®—æ³•çš„å…³ç³»ï¼Œè¯´æ˜å³ä½¿æ˜¯æœªç»è¿‡è®­ç»ƒçš„GCNä¹Ÿèƒ½ä½œä¸ºå¼ºå¤§çš„ç‰¹å¾æå–å™¨ã€‚</li></ul><h3 id="6-ç»“è®º">6. <strong>ç»“è®º</strong></h3><p>æ–‡ç« æå‡ºçš„GCNæ¨¡å‹é€šè¿‡ç®€åŒ–è°±å·ç§¯æ“ä½œï¼Œæ„å»ºäº†é«˜æ•ˆä¸”æ˜“æ‰©å±•çš„åŠç›‘ç£åˆ†ç±»æ¡†æ¶ï¼ŒæˆåŠŸåœ°å°†å›¾ç»“æ„ä¿¡æ¯ä¸èŠ‚ç‚¹ç‰¹å¾ç»“åˆèµ·æ¥ï¼Œä¸ä»…æå‡äº†åˆ†ç±»å‡†ç¡®ç‡ï¼ŒåŒæ—¶æ˜¾è‘—é™ä½äº†è®¡ç®—å¤æ‚åº¦ï¼Œä¸ºåç»­å›¾ç¥ç»ç½‘ç»œçš„å‘å±•å¥ å®šäº†åŸºç¡€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å›¾ç¥ç»ç½‘ç»œç ”ç©¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
            <tag> æ•°æ®æŒ–æ˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ChatDevæ€»ç»“ç¬”è®°</title>
      <link href="/2025/02/22/ChatDev%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0/"/>
      <url>/2025/02/22/ChatDev%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºäºå¤§æ¨¡å‹æ™ºèƒ½ä½“çš„è™šæ‹ŸåŒ–è½¯ä»¶å¼€å‘å›¢é˜Ÿ">åŸºäºå¤§æ¨¡å‹æ™ºèƒ½ä½“çš„è™šæ‹ŸåŒ–è½¯ä»¶å¼€å‘å›¢é˜Ÿ</h1><h2 id="é¡¹ç›®ä»‹ç»">é¡¹ç›®ä»‹ç»</h2><p>è½¯ä»¶å¼€å‘è¿‡ç¨‹æ¶‰åŠåˆ°éœ€æ±‚åˆ†æã€æ€»ä½“è®¾è®¡ã€è¯¦ç»†è®¾è®¡ã€ç¼–ç å’Œæµ‹è¯•ç­‰å¤šç§æ´»åŠ¨å’Œå¤šç§è§’è‰²çš„å¼€å‘è€…ã€‚éšç€å¤§æ¨¡å‹æŠ€æœ¯çš„å¿«é€Ÿå‘å±•ï¼Œå¾ˆå¤šè½¯ä»¶å¼€å‘æ´»åŠ¨éƒ½å¯ä»¥é€šè¿‡è‡ªåŠ¨åŒ–å’Œæ™ºèƒ½åŒ–æ–¹å¼æ¥å®ç°ã€‚æœ¬é¡¹ç›®åˆ©ç”¨<strong>å¤§æ¨¡å‹</strong>å’Œ<strong>å¤šæ™ºèƒ½ä½“</strong>æŠ€æœ¯æ¥å®ç°æ™ºèƒ½åŒ–è½¯ä»¶å¼€å‘å…¨è¿‡ç¨‹ï¼Œé€šè¿‡agentæ¨¡æ‹Ÿä¸åŒè§’è‰²çš„è½¯ä»¶å¼€å‘äººå‘˜ï¼Œé€šè¿‡agentä¹‹é—´çš„ååŒå®Œæˆå¤æ‚çš„è½¯ä»¶å¼€å‘è¿‡ç¨‹ã€‚</p><h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2><p><a href="https://openreview.net/pdf?id=yW0AZ5wPji">https://openreview.net/pdf?id=yW0AZ5wPji</a></p><h1 id="ChatDevè®ºæ–‡æ€»ç»“">ChatDevè®ºæ–‡æ€»ç»“</h1><h2 id="What-is-ChatDev">What is ChatDev?</h2><p>ChatDev, a <em>chat</em>-powered software-<em>dev</em>elopment framework integrating multiple â€œsoftware agentsâ€ for active involvement in three core phases of the software lifecycle: design, coding, and testing.</p><h2 id="Methodology">Methodology</h2><h3 id="1-chat-chain">1. chat chain</h3><p>ChatDev introduces <em>chat chain</em> to further break down each phase into smaller and manageable subtasks</p><ul><li>waterfall model -&gt; chat chain</li><li>chat chain -&gt; sequential phases</li><li>phase -&gt; sequential subtasks<ul><li>coding phase -&gt; code writing + completion</li><li>testing phase -&gt; code review (static testing) + system testing (dynamic testing)</li></ul></li><li>subtask -&gt; extraction of solutions -&gt; dialogue of Instructor &amp; Assistant</li><li>dialogue -&gt; loop -&gt; instructor instructing while assistant responding</li></ul><hr><ul><li><strong>Agentization</strong>: inception prompting mechanism</li><li><strong>Memory</strong>: <em>short-term memory</em> / <em>long-term memory</em></li></ul><h3 id="2-communicative-dehallucination">2. communicative dehallucination</h3><p>ChatDev devise <em>communicative dehallucination</em> to alleviate unexpected hallucinations, which <u>encourages the assistant to actively seek more detailed suggestions from the instructor before delivering a formal response.</u></p><h2 id="Evaluation">Evaluation</h2><ul><li>Baselines: GPT-Engineer(fundamental), MetaGPT(advanced)</li><li>Datasets: SRDD</li><li>Metrics: Completeness + Executability + Consistency = Quality</li></ul><p>The most important: multiple agents and roles</p><h2 id="Limitations-Solutions"><strong>Limitations</strong> &amp; Solutions</h2><ol><li>Firstly, the capabilities of autonomous agents in software production might be overestimated: <u>it is crucial to clearly define detailed software requirements.</u></li><li>Secondly, unlike traditional function level code generation, automating the evaluation of general-purpose software is highly complex: <u>consider additional factors such as functionalities, robustness, safety, and user-friendliness.</u></li><li>Thirdly, compared to single-agent approaches, multiple agents require more tokens and time, increasing computational demands and environmental impact: <u>enhance agent capabilities with fewer interactions</u></li></ol><h1 id="æƒ³æ³•">æƒ³æ³•</h1><ul><li>é’ˆå¯¹è®ºæ–‡æåˆ°çš„ç¬¬äºŒç‚¹ä¸è¶³ï¼Œåˆ©ç”¨å¤šæ¨¡æ€å¤§æ¨¡å‹æ·»åŠ ç”¨æˆ·è¿™ä¸€agentï¼Œæä¾›å¯¹åº”ç”¨çš„ç•Œé¢ã€æ“ä½œã€ä½¿ç”¨ç­‰çš„åé¦ˆï¼Œä½œä¸ºå¢åŠ çš„è¯„åˆ¤è½¯ä»¶è´¨é‡çš„æ ‡å‡†å¹¶åŠ ä»¥è¿­ä»£</li></ul>]]></content>
      
      
      <categories>
          
          <category> è™šæ‹ŸåŒ–è½¯ä»¶å¼€å‘å›¢é˜Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ChatDev </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»-Memory Management Test-Case Generation of C Programs using Bounded Model Checking</title>
      <link href="/2025/01/19/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB-Memory-Management-Test-Case-Generation-of-C-Programs-using-Bounded-Model-Checking/"/>
      <url>/2025/01/19/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB-Memory-Management-Test-Case-Generation-of-C-Programs-using-Bounded-Model-Checking/</url>
      
        <content type="html"><![CDATA[<p>è®ºæ–‡é“¾æ¥ï¼š<a href="https://link.springer.com/chapter/10.1007/978-3-319-22969-0_18">Memory Management Test-Case Generation of C Programs Using Bounded Model Checking | SpringerLink</a></p><h2 id="ä½¿ç”¨å·¥å…·">ä½¿ç”¨å·¥å…·</h2><ul><li>Efficient SMT-Based Bounded Model Checkingï¼ˆ<strong>ESBMC</strong>ï¼ŒåŸæ–‡ï¼š<a href="https://ieeexplore.ieee.org/abstract/document/5928354">SMT-Based Bounded Model Checking for Embedded ANSI-C Software | IEEE Journals &amp; Magazine | IEEE Xplore</a>ï¼‰ï¼šESBMCä»¥Cè¯­è¨€æºç¨‹åºä¸ºè¾“å…¥ï¼Œä»¥ä¸€ç³»åˆ—â€œClaimâ€ä¸ºè¾“å‡ºï¼Œè¿™äº›ClaimæŒ‡æ˜äº†è¯¥ç¨‹åºçš„å®‰å…¨å±æ€§ï¼Œå³å¯èƒ½å‡ºç°å†…å­˜é”™è¯¯çš„åœ°æ–¹ï¼ŒåŒ…æ‹¬æ£€æŸ¥ä¸ç®—æœ¯ä¸è¶³å’Œæº¢å‡ºã€é›¶é™¤æ³•ã€è¶Šç•Œç´¢å¼•ã€æŒ‡é’ˆå®‰å…¨ã€æ­»é”å’Œæ•°æ®ç«äº‰ç›¸å…³çš„å±æ€§ã€‚åœ¨ESBMCä¸­ï¼ŒéªŒè¯è¿‡ç¨‹æ˜¯å®Œå…¨è‡ªåŠ¨åŒ–çš„ï¼Œä¸éœ€è¦ç”¨æˆ·ä½¿ç”¨å‰æ¡ä»¶æˆ–åæ¡ä»¶æ³¨é‡Šç¨‹åºã€‚</li><li><strong>Safety Properties</strong>ï¼šè®ºæ–‡å®šä¹‰äº†â€œå®‰å…¨å±æ€§â€çš„æ¦‚å¿µã€‚å¦‚æœä¸€ä¸ªç³»ç»Ÿä¸èƒ½æ»¡è¶³ä¸€ä¸ªå®‰å…¨å±æ€§ï¼Œé‚£ä¹ˆå°±å­˜åœ¨ä¸€ä¸ªæœ‰é™çš„æ‰§è¡Œæ¥æ˜¾ç¤ºè¿™ä¸ªå¤±è´¥ï¼Œä½¿ç”¨æ–­è¨€å°†å¯¹åº”çš„é”™è¯¯å¤ç°ï¼Œå°±å¯ä»¥ç”Ÿæˆé’ˆå¯¹æ€§çš„testcaseã€‚</li><li><strong>CUnit</strong>ï¼ˆ<a href="https://cunit.sourceforge.net/doc/introduction.html#usage">CUnit - Introduction (sourceforge.net)</a>ï¼‰ï¼šæµ‹è¯•æ¡†æ¶ã€‚CUnitæ”¯æŒæ›´å¥½çš„ç»„ç»‡å’Œä»£ç é‡ç”¨ï¼Œä»¥æ›´æœ‰æ•ˆçš„æ–¹å¼åˆ›å»ºå•å…ƒæµ‹è¯•ã€‚å…¶æ”¯æŒå®Œæ•´çš„Cè¯­è¨€ä¹¦å†™ï¼Œå¹¶æä¾›äº†ä¸€ç»„ç”¨äºæµ‹è¯•é€»è¾‘æ¡ä»¶çš„æ–­è¨€ã€‚</li></ul><h2 id="æ–¹æ³•è¿‡ç¨‹">æ–¹æ³•è¿‡ç¨‹</h2><p><img src="https://cdn.jsdelivr.net/gh/bush-cn/TyporaImages@main/img/2025/07/11/20250711101732.png" alt="image-20250121204757596"></p><ol><li>ç”¨ESBMCè¯†åˆ«å®‰å…¨å±æ€§ï¼Œå¾—åˆ°Claimsã€‚</li><li>ä»å®‰å…¨å±æ€§ä¸­æå–ä¿¡æ¯ã€‚å³ä»å››ä¸ªæ–¹é¢åˆ†æClaimï¼šidentificationã€commentsã€line numberã€propertyã€‚</li><li>ç¿»è¯‘å®‰å…¨å±æ€§ã€‚å³å°†Claimsç¿»è¯‘æˆCç¨‹åºä¸­çš„æ–­è¨€ä»£ç ã€‚</li><li>å†…å­˜è·Ÿè¸ªåˆ†æã€‚ä½¿ç”¨Pycparserï¼ˆ<a href="https://github.com/eliben/pycparser">eliben/pycparser: :snake: Complete C99 parser in pure Python (github.com)</a>ï¼‰ç”ŸæˆCè¯­è¨€çš„è¯­æ³•æ ‘ASTï¼Œå†æ ¹æ®ASTè¿›è¡Œåˆ†æï¼Œç›®çš„æ˜¯ç¡®ä¿æŒ‡é’ˆå®‰å…¨æ€§ã€‚åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š<ol><li>è¯†åˆ«å’Œè·Ÿè¸ªæ‰€åˆ†æçš„æºä»£ç ä¸­çš„å˜é‡ï¼Œä»¥åŠå˜é‡çš„æ“ä½œå’Œåˆ†é…ã€‚å¯¹äºéæŒ‡é’ˆï¼Œç›´æ¥è¿›è¡Œå˜é‡æ˜ å°„ï¼›å¯¹äºæŒ‡é’ˆï¼Œæ‰§è¡Œå¯¹è±¡æ˜ å°„ï¼Œè·Ÿè¸ªæŒ‡é’ˆçš„è¿ç®—ã€åˆ†é…ã€å›æ”¶ã€‚</li><li>å¯¹æºä»£ç çš„ç‰¹å®šåŠŸèƒ½ï¼Œç”¨äºæ ¹æ®ç¨‹åºæ‰§è¡Œç›‘è§†å†…å­˜åœ°å€å’Œè¿™äº›å˜é‡æŒ‡å‘çš„åœ°å€ã€‚æ’å…¥å‡½æ•°<code>mark_map_MF</code>ï¼Œæ”¹å‡½æ•°ä»¥å‰é˜¶æ®µæ˜ å°„çš„æ•°æ®ä¸ºè¾“å…¥ï¼Œç»´æŠ¤ä¸€ä¸ªåŒ…å«å†…å­˜åœ°å€ã€æŒ‡å‘çš„åœ°å€ã€ä½œç”¨åŸŸèŒƒå›´ã€æ ‡è¯†ç¬¦ã€è¡Œæ•°çš„åˆ—è¡¨ï¼Œæœ€åç”ŸæˆMap2Checkæä¾›çš„æ–­è¨€å‡½æ•°ã€‚</li></ol></li><li>æ ¹æ®ESBMCå’ŒMap2Checkç”Ÿæˆçš„æ–­è¨€ç”Ÿæˆtestcaseï¼ŒåŒ…æ‹¬åŸç”ŸCè¯­è¨€çš„æ–­è¨€å’Œæµ‹è¯•æ¡†æ¶çš„æ–­è¨€å‡½æ•°ã€‚</li><li>æµ‹è¯•å®æ–½ï¼ŒåŒ…æ‹¬ä¸¤ä¸ªæµ‹è¯•æ¨¡å‹ã€‚</li><li>æ‰§è¡Œæµ‹è¯•ã€‚</li></ol><h2 id="ä¸€äº›ç–‘é—®">ä¸€äº›ç–‘é—®</h2><ul><li>è®ºæ–‡é‡Œå˜é‡çš„<code>dynamic</code>æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</li><li>ä¸¤ä¸ªæµ‹è¯•æ¨¡å‹æ²¡çœ‹æ‡‚ğŸ¤¯</li></ul>]]></content>
      
      
      <categories>
          
          <category> C/C++å•å…ƒæµ‹è¯•ç”Ÿæˆ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>C++å•æµ‹ç”Ÿæˆè°ƒç ”</title>
      <link href="/2025/01/12/C-%E5%8D%95%E6%B5%8B%E7%94%9F%E6%88%90%E8%B0%83%E7%A0%94/"/>
      <url>/2025/01/12/C-%E5%8D%95%E6%B5%8B%E7%94%9F%E6%88%90%E8%B0%83%E7%A0%94/</url>
      
        <content type="html"><![CDATA[<h1 id="C-å•æµ‹ç”Ÿæˆè°ƒç ”">C++å•æµ‹ç”Ÿæˆè°ƒç ”</h1><p>è°ƒç ”C++å•å…ƒæµ‹è¯•ç”Ÿæˆåœ¨Undefined Behaviorã€å†…å­˜ã€æŒ‡é’ˆã€Error Handlingå››ä¸ªæ–¹é¢çš„ç‰¹ç‚¹ã€æŒ‘æˆ˜åŠç°çŠ¶ï¼Œæ®æ­¤è€ƒè™‘ä¸»è¦æ ¹æ®å“ªäº›ç‰¹ç‚¹æ¥è¿ç§»å·²æœ‰æ¨¡å‹ã€‚</p><h2 id="1-Undefined-Behavior">1. Undefined Behavior</h2><p>æœªå®šä¹‰è¡Œä¸ºï¼ˆ<strong>Undefined Behavior</strong>, UBï¼‰æ˜¯ç¼–ç¨‹è¯­è¨€è§„èŒƒä¸­æœªå¯¹æŸäº›æ„é€ å¼ºåˆ¶è§„å®šè¡Œä¸ºçš„éƒ¨åˆ†ã€‚å®ƒä¸ºç¼–è¯‘å™¨ä¼˜åŒ–æä¾›äº†è‡ªç”±ï¼Œä½†å¯èƒ½å¯¼è‡´ç¨‹åºåœ¨ä¸åŒå¹³å°ä¸Šçš„è¡Œä¸ºä¸ä¸€è‡´ã€‚<u>C/C++æ¯”Javaå…·æœ‰æ›´å¤šUB</u>ã€‚</p><blockquote><p>A difficult trade-off in the design of a systems programming language is how much freedom to grant the compiler to generate efficient code for a target instruction set. On one hand, programmers prefer that a program behaves identically on all hardware platforms. On the other hand, programmers want to get high performance by allowing the compiler to exploit specific properties of the instruction set of their hardware platform. A technique that languages use to make this trade-off is labeling certain program constructs as <strong>undefined behavior</strong>, for which the language imposes no requirements on <u>compiler</u> writers.</p><p>From: [Kaashoek_Undefined behavior.pdf (<a href="http://mit.edu">mit.edu</a>)](<a href="https://dspace.mit.edu/bitstream/handle/1721.1/86949/Kaashoek_Undefined">https://dspace.mit.edu/bitstream/handle/1721.1/86949/Kaashoek_Undefined</a> behavior.pdf)</p></blockquote><p>Example:</p><ul><li>division by zero</li><li>oversized shift</li><li>signed integer overflow</li><li>out-of-bounds pointer</li><li>null pointer dereference</li><li>type-punned pointer dereferenceï¼ˆç±»å‹è½¬æ¢æŒ‡é’ˆè§£å¼•ç”¨ï¼‰</li><li>uninitialized read</li></ul><hr><p>æœªæ‰¾åˆ°é’ˆå¯¹æ€§çš„æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆçš„è®ºæ–‡ã€‚</p><h2 id="2-å†…å­˜">2. å†…å­˜</h2><p><a href="https://arxiv.org/pdf/1710.06125">EffectiveSan: Type and Memory Error Detection using Dynamically Typed C/C++ (arxiv.org)</a></p><p>C/C++ç±»å‹ç³»ç»Ÿæ˜¯é™æ€ä¸”å¼±çš„ï¼Œä¼šå‡ºç°<strong>ç±»å‹é”™è¯¯</strong>ï¼ˆä¾‹å¦‚é”™è¯¯çš„ç±»å‹è½¬æ¢ï¼‰å’Œ<strong>å†…å­˜é”™è¯¯</strong>ï¼ˆä¾‹å¦‚æ•°ç»„è¶Šç•Œã€ä½¿ç”¨é‡Šæ”¾åçš„å†…å­˜ç­‰ï¼‰ã€‚</p><p>æå‡ºäº†<strong>åŠ¨æ€ç±»å‹</strong> C/C++ çš„æ¦‚å¿µã€‚è¦ç‚¹å¦‚ä¸‹ï¼š</p><ol><li>æ¯ä¸ªåˆ†é…çš„å¯¹è±¡éƒ½ä¼šç»‘å®š<strong>åŠ¨æ€ç±»å‹ä¿¡æ¯</strong>ï¼ˆç§°ä¸ºâ€œæœ‰æ•ˆç±»å‹â€ï¼‰ï¼Œç”¨äºæè¿°å…¶ç±»å‹ã€è¾¹ç•Œå’Œå­å¯¹è±¡å¸ƒå±€ã€‚</li><li>åœ¨è¿è¡Œæ—¶æ£€æŸ¥æŒ‡é’ˆä½¿ç”¨æ˜¯å¦åˆæ³•ï¼ŒåŒ…æ‹¬æŒ‡é’ˆçš„ç±»å‹æ­£ç¡®æ€§å’Œè¾¹ç•Œæ­£ç¡®æ€§ã€‚</li><li>EffectiveSan æ”¯æŒå¤æ‚å¯¹è±¡çš„å­å¯¹è±¡å¸ƒå±€ï¼šæ¶µç›–åµŒå¥—ç»“æ„ä½“ã€ç±»çš„ç»§æ‰¿ã€è”åˆç­‰ã€‚</li></ol><hr><p><a href="https://d1wqtxts1xzle7.cloudfront.net/76763038/sefm2015-libre.pdf?1639840124=&amp;response-content-disposition=inline%3B+filename%3DMemory_Management_Test_Case_Generation_o.pdf&amp;Expires=1736853826&amp;Signature=VM6--U4EKTgiW1nLN-1mQXQkfkmonBSz5V5MVphAvpKUSmYedrxd6oAj54WBdfZdr~XLyU9oMYH6zq6MHsGnN1LpFcS7aiVs9RMDuC00b8UmBZJtydQXjWVUpW2pnJKtCtL5Fwj0TptHUrzgVudnBaUGAdPuEg7y1GAMPcR1q~OZy0mcSXYNSW2-S21MESUWGVWSmkohHiUEjYmrYYzxxUgNmR2FuzZIm9ktaiin~ZMqWX1R3ZyrhyOYivnoLmV542tU0odxKT3VyI5ITzZ9IJ-RqT8M1bvAtXuf6x2YMjP3CY~RBgJpmfqlwWGKRhje266VLoYnrpj3AXA4Vb10gQ__&amp;Key-Pair-Id=APKAJLOHF5GGSLRBV4ZA">sefm2015-libre.pdf (d1wqtxts1xzle7.cloudfront.net)</a></p><p>åä¸ºMap2Checkçš„å·¥å…·ã€‚æä¾›äº†ä¸€ç§æ”¹è¿›çš„<strong>å•å…ƒæµ‹è¯•ç”Ÿæˆ</strong>æ–¹æ³•ï¼Œç»“åˆ<strong>ESBMCæ¨¡å‹æ£€æŸ¥å™¨</strong>å’ŒåŠ¨æ€åˆ†ææŠ€æœ¯ï¼Œæ˜¾è‘—æé«˜äº†<strong>å†…å­˜ç®¡ç†</strong>ç¼ºé™·æ£€æµ‹çš„ç²¾åº¦ã€‚</p><ol><li>è¯†åˆ«å®‰å…¨å±æ€§ï¼Œåˆ©ç”¨ESBMCæå–æ½œåœ¨çš„ç¨‹åºç¼ºé™·ã€‚</li><li>ä»å®‰å…¨å±æ€§ä¸­æå–ä¿¡æ¯ï¼Œå¦‚ä½ç½®å’Œæ½œåœ¨ç¼ºé™·ã€‚</li><li>å°†å®‰å…¨å±æ€§ç¿»è¯‘ä¸ºCä»£ç ä¸­çš„<strong>æ–­è¨€</strong>ã€‚</li><li>å†…å­˜è·Ÿè¸ªï¼Œè®°å½•ç¨‹åºæ‰§è¡ŒæœŸé—´å†…å­˜åœ°å€çš„ä½¿ç”¨æƒ…å†µã€‚</li><li>åœ¨æºä»£ç ä¸­æ·»åŠ <strong>æ–­è¨€</strong>ä»¥éªŒè¯å®‰å…¨å±æ€§ã€‚</li><li>å®ç°æµ‹è¯•ç”¨ä¾‹ï¼Œé€šè¿‡CUnitæˆ–åŸç”ŸCæ–­è¨€æ‰§è¡Œæµ‹è¯•ã€‚</li><li>æ‰§è¡Œæµ‹è¯•å¹¶åˆ†æç»“æœã€‚</li></ol><h2 id="3-æŒ‡é’ˆ">3. æŒ‡é’ˆ</h2><p><a href="https://www.sciencedirect.com/science/article/pii/S0950584922000027">An automated test data generation method for void pointers and function pointers in C/C++ libraries and embedded projects - ScienceDirect</a></p><p>ä»‹ç»äº†ä¸€ç§åä¸ºVFPï¼ˆVoid and Function Pointers test data generationï¼‰çš„è‡ªåŠ¨åŒ–æµ‹è¯•æ•°æ®ç”Ÿæˆæ–¹æ³•ï¼Œæ—¨åœ¨æé«˜C/C++åº“å’ŒåµŒå…¥å¼é¡¹ç›®ä¸­voidæŒ‡é’ˆå’Œå‡½æ•°æŒ‡é’ˆçš„æµ‹è¯•è¦†ç›–ç‡ã€‚</p><ul><li><p><strong>èƒŒæ™¯</strong>ï¼šåœ¨C/C++é¡¹ç›®ä¸­ï¼ŒæŒ‡é’ˆçš„ä½¿ç”¨éå¸¸æ™®éï¼Œå°¤å…¶æ˜¯voidæŒ‡é’ˆå’Œå‡½æ•°æŒ‡é’ˆã€‚è¿™äº›æŒ‡é’ˆåœ¨å®é™…é¡¹ç›®ä¸­é¢‘ç¹å‡ºç°ï¼Œä½†ç›®å‰å¯¹äºè¿™ç±»æŒ‡é’ˆçš„æµ‹è¯•æ•°æ®ç”Ÿæˆç ”ç©¶è¾ƒå°‘ã€‚</p></li><li><p><strong>æ–¹æ³•</strong>ï¼šVFPæ–¹æ³•åŸºäºConcolicæµ‹è¯•æ–¹æ³•ï¼ˆç»“åˆäº†é™æ€å’ŒåŠ¨æ€æµ‹è¯•çš„æ–¹æ³•ï¼‰ï¼Œé€šè¿‡é¢„å¤„ç†æºä»£ç æ¥æ‰¾å‡ºæ‰€æœ‰å¯èƒ½çš„voidæŒ‡é’ˆç±»å‹å’Œå‡½æ•°æŒ‡é’ˆçš„å¼•ç”¨ã€‚VFPæ–¹æ³•çš„å…³é”®åœ¨äºåˆ†ææºä»£ç ï¼Œæ‰¾å‡ºvoidæŒ‡é’ˆçš„æ‰€æœ‰å¯èƒ½ç±»å‹å’Œå‡½æ•°æŒ‡é’ˆçš„å¼•ç”¨ï¼Œå¹¶åˆ©ç”¨è¿™äº›ä¿¡æ¯ç”Ÿæˆåˆå§‹æµ‹è¯•æ•°æ®ã€‚</p><ol><li><strong>å‚æ•°é¢„å¤„ç†</strong>ï¼šåˆ†æè¢«æµ‹å•å…ƒå†…éƒ¨å’Œå¤–éƒ¨çš„æºä»£ç ï¼Œæ‰¾å‡ºæ‰€æœ‰å¯èƒ½çš„voidæŒ‡é’ˆç±»å‹å’Œå‡½æ•°æŒ‡é’ˆå¼•ç”¨ã€‚</li><li><strong>éšæœºæµ‹è¯•æ•°æ®ç”Ÿæˆ</strong>ï¼šä½¿ç”¨ç±»å‹æ˜ å°„å’Œå¼•ç”¨æ˜ å°„ï¼Œç»“åˆéšæœºå€¼ç”Ÿæˆï¼Œä¸ºå…¶ä»–æ•°æ®ç±»å‹ç”Ÿæˆåˆå§‹æµ‹è¯•æ•°æ®ã€‚</li><li><strong>æµ‹è¯•æ•°æ®æ‰§è¡Œå’Œæµ‹è¯•è·¯å¾„åˆ†æ</strong>ï¼šæ‰§è¡Œç”Ÿæˆçš„æµ‹è¯•æ•°æ®ï¼Œæ”¶é›†è¦†ç›–çš„æµ‹è¯•è·¯å¾„ï¼Œå¹¶å°è¯•æ‰¾å‡ºæœªè¦†ç›–çš„èŠ‚ç‚¹å’Œæœ€çŸ­æœªè¦†ç›–æµ‹è¯•è·¯å¾„ã€‚</li><li><strong>å®šå‘æµ‹è¯•æ•°æ®ç”Ÿæˆ</strong>ï¼šåŸºäºæœªè¦†ç›–çš„æµ‹è¯•è·¯å¾„ï¼Œç”Ÿæˆè·¯å¾„çº¦æŸï¼Œå¹¶è½¬æ¢ä¸ºSMT-Libè¡¨è¾¾å¼ï¼Œç”±SMTæ±‚è§£å™¨æ±‚è§£ï¼Œç”Ÿæˆæ–°çš„æµ‹è¯•æ•°æ®ã€‚</li></ol></li></ul><h2 id="4-Error-Handling">4. Error Handling</h2><p>Cè¯­è¨€çš„é”™è¯¯å¤„ç†æ–¹å¼æ˜¯é€šè¿‡å‡½æ•°è¿”å›å€¼æŒ‡ç¤ºé”™è¯¯çŠ¶æ€ï¼ˆé€šå¸¸è¿˜æœ‰å®å®šä¹‰çš„errnoï¼‰ï¼Œé€šè¿‡æ¡ä»¶è¯­å¥å¤„ç†é”™è¯¯ã€‚C++åœ¨ä¿ç•™Cé£æ ¼çš„é”™è¯¯å¤„ç†æ–¹å¼æ—¶ï¼Œæ–°å¢äº†å¼‚å¸¸å¤„ç†ã€‚</p><p><a href="https://dl.acm.org/doi/abs/10.1145/3106237.3106300">Automatically diagnosing and repairing error handling bugs in C | Proceedings of the 2017 11th Joint Meeting on Foundations of Software Engineering (acm.org)</a></p><p>ç ”ç©¶ç»“æœè¡¨æ˜ï¼Œé”™è¯¯å¤„ç†æ¼æ´é€šå¸¸ç”±å››ä¸ªåŸå› å¼•èµ·ï¼šé”™è¯¯/ç¼ºå¤±çš„é”™è¯¯æ£€æŸ¥ï¼ˆECï¼‰ã€é”™è¯¯/ç¼ºå¤±çš„é”™è¯¯ä¼ æ’­ï¼ˆEPï¼‰ã€é”™è¯¯/ç¼ºå¤±çš„é”™è¯¯è¾“å‡ºï¼ˆEOï¼‰å’Œé”™è¯¯/ç¼ºå¤±çš„èµ„æºé‡Šæ”¾ï¼ˆRRï¼‰ã€‚ä½œè€…åˆ©ç”¨è¿™äº›å‘ç°è®¾è®¡å¹¶å®ç°äº†ä¸€ä¸ªåä¸ºErrDocçš„å·¥å…·ï¼Œè¯¥å·¥å…·ä½¿ç”¨å—é™ç¬¦å·æ‰§è¡Œæ¥æ¢ç´¢æ‰€æœ‰å¯èƒ½çš„é”™è¯¯è·¯å¾„ï¼Œå¹¶ä½¿ç”¨é™æ€åˆ†ææŠ€æœ¯éªŒè¯é”™è¯¯å€¼æ˜¯å¦è¢«æ£€æŸ¥ã€å‘ä¸Šæ¸¸ä¼ æ’­æˆ–è®°å½•ã€‚</p><ol><li><strong>æ¢ç´¢é”™è¯¯è·¯å¾„</strong>ï¼šErrDocé€šè¿‡ç¬¦å·æ‰§è¡Œæ¥è¯†åˆ«æ‰€æœ‰å¯èƒ½çš„é”™è¯¯è·¯å¾„ï¼Œå¹¶æ ‡è®°CFGä¸­çš„ç›¸åº”èŠ‚ç‚¹å’Œè¾¹ã€‚</li><li><strong>æ£€æµ‹å’Œåˆ†ç±»é”™è¯¯å¤„ç†æ¼æ´</strong>ï¼šErrDocåˆ©ç”¨å‰ä¸€æ­¥æ”¶é›†çš„ä¿¡æ¯ï¼Œè¾“å‡ºæœ‰æ¼æ´çš„ç¨‹åºä½ç½®å’Œç›¸åº”çš„æ¼æ´ç±»åˆ«ã€‚</li><li><strong>ä¿®å¤é”™è¯¯å¤„ç†æ¼æ´</strong>ï¼šErrDocè‡ªåŠ¨ä¿®å¤å››ç§ç±»å‹çš„é”™è¯¯å¤„ç†æ¼æ´ï¼Œé€šè¿‡ä¿®æ”¹ASTæ¥å¼•å…¥ä¿®å¤</li></ol><p>ï¼ˆè‡ªåŠ¨ä¿®å¤=&gt;ç”Ÿæˆå¯¹åº”å¤„çš„ç”¨ä¾‹ï¼Ÿï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> C/C++å•å…ƒæµ‹è¯•ç”Ÿæˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C/C++å•å…ƒæµ‹è¯•ç”Ÿæˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++å­¦ä¹ ç¬”è®°</title>
      <link href="/2025/01/11/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2025/01/11/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="C-å­¦ä¹ ç¬”è®°">C++å­¦ä¹ ç¬”è®°</h1><h1 id="å‰è¨€">å‰è¨€</h1><p>å¿…ä¿®è¯¾ç³»ç»Ÿæ•™å­¦çš„åªæœ‰Cè¯­è¨€å’ŒJavaï¼Œè€ŒPythonæ¯”è¾ƒç®€å•è™½æ²¡æœ‰ç³»ç»Ÿæ•™å­¦ä½†ä¹Ÿåœ¨è®¸å¤šè¯¾ç¨‹ä¸­ç»å¸¸ä½¿ç”¨ã€‚æœ¬æ¥åŸ¹å…»æ–¹æ¡ˆä¸Šæ˜¯æœ‰C++çš„é€‰ä¿®è¯¾çš„ï¼Œä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆä¸å¼€äº†ï¼Œä¸Šå­¦æœŸçš„ç¼–è¯‘ä¹Ÿæœ‰ç”¨C++ç¼–ç¨‹çš„é€‰æ‹©ã€‚ç¬”è€…è¿™ä¸ªç¯‡ç¬”è®°åªè®°å½•å­¦ä¹ å…¶ä¸C/Javaçš„ä¸åŒç‚¹ã€‚</p><p>å‚è€ƒï¼š[èœé¸Ÿæ•™ç¨‹](<a href="https://www.runoob.com/cplusplus/cpp-tutorial.html">C++ æ•™ç¨‹ | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a>)</p><h1 id="1ã€ç®€ä»‹">1ã€ç®€ä»‹</h1><p>C++ æ˜¯ä¸€ç§é™æ€ç±»å‹çš„ã€ç¼–è¯‘å¼çš„ã€é€šç”¨çš„ã€å¤§å°å†™æ•æ„Ÿçš„ã€ä¸è§„åˆ™çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ”¯æŒè¿‡ç¨‹åŒ–ç¼–ç¨‹ã€é¢å‘å¯¹è±¡ç¼–ç¨‹å’Œæ³›å‹ç¼–ç¨‹ã€‚</p><p>C++ è¢«è®¤ä¸ºæ˜¯ä¸€ç§<strong>ä¸­çº§</strong>è¯­è¨€ï¼Œå®ƒç»¼åˆäº†é«˜çº§è¯­è¨€å’Œä½çº§è¯­è¨€çš„ç‰¹ç‚¹ã€‚</p><h2 id="1-1ã€ç‰¹ç‚¹">1.1ã€ç‰¹ç‚¹</h2><ul><li>C++æœ‰ç±»ä¼¼Javaçš„é¢å‘å¯¹è±¡çš„ç‰¹ç‚¹ï¼Œå³å°è£…ã€ç»§æ‰¿ã€å¤šæ€ã€æŠ½è±¡ï¼ˆåœ¨å­¦Javaçš„æ—¶å€™å°±å·²ç»çŸ¥é“ï¼ŒJavaåªèƒ½å•ç»§æ‰¿è€ŒC++å¯ä»¥å¤šç»§æ‰¿ï¼‰ã€‚</li><li>æ ‡å‡†çš„ C++ ç”±ä¸‰ä¸ªé‡è¦éƒ¨åˆ†ç»„æˆï¼šæ ¸å¿ƒè¯­è¨€ã€C++æ ‡å‡†åº“ã€æ ‡å‡†æ¨¡æ¿åº“STLï¼ˆè¿™ä¸ªåœ¨ç®—æ³•è¯¾ä¸Šç”¨è¿‡ï¼‰</li></ul><h2 id="1-2ã€ä½¿ç”¨">1.2ã€ä½¿ç”¨</h2><p>C++çš„ä½¿ç”¨åœºæ™¯ï¼ˆåç»­è‹¥å‚åŠ å†¯å¦‚æ¯ï¼Œéœ€è¦ç»“åˆäº§ä¸šå®é™…ï¼Œå¦‚è€å¸ˆè¯´çš„æ±½è½¦C++è½¯ä»¶ï¼‰ï¼š</p><ul><li><p><strong>æ¸¸æˆå¼€å‘</strong>ï¼šC++ æ˜¯æ¸¸æˆå¼€å‘é¢†åŸŸä¸­æœ€å¸¸ç”¨çš„ç¼–ç¨‹è¯­è¨€ä¹‹ä¸€ï¼Œå› ä¸ºå®ƒå…·æœ‰é«˜æ•ˆçš„æ€§èƒ½å’Œç›´æ¥æ§åˆ¶ç¡¬ä»¶çš„èƒ½åŠ›ã€‚è®¸å¤šä¸»è¦çš„æ¸¸æˆå¼•æ“ï¼Œå¦‚ Unreal Engine å’Œ Unityï¼Œéƒ½ä½¿ç”¨ C++ ç¼–å†™ã€‚</p><blockquote><p>æˆ‘é«˜ä¸­/å¤§ä¸€çš„æ—¶å€™è¿˜å¾ˆæƒ³ä»äº‹æ¸¸æˆå¼€å‘å‘¢â€¦â€¦</p></blockquote></li><li><p><strong>åµŒå…¥å¼ç³»ç»Ÿå¼€å‘</strong>ï¼šC++ å¯ä»¥åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­å‘æŒ¥é‡è¦ä½œç”¨ï¼Œå¦‚æ™ºèƒ½æ‰‹æœºã€æ±½è½¦ã€æœºå™¨äººå’Œå®¶ç”µç­‰é¢†åŸŸã€‚ç”±äºåµŒå…¥å¼ç³»ç»Ÿé€šå¸¸å…·æœ‰ä¸¥æ ¼çš„èµ„æºé™åˆ¶å’Œå®æ—¶è¦æ±‚ï¼Œå› æ­¤ C++ çš„é«˜æ•ˆæ€§èƒ½å’Œå†…å­˜æ§åˆ¶åŠŸèƒ½éå¸¸æœ‰ç”¨ã€‚</p></li><li><p>é‡‘èé¢†åŸŸï¼šC++ åœ¨é‡‘èé¢†åŸŸä¸­è¢«å¹¿æ³›åº”ç”¨ï¼Œå¦‚é«˜é¢‘äº¤æ˜“ã€ç®—æ³•äº¤æ˜“å’Œé£é™©ç®¡ç†ç­‰é¢†åŸŸã€‚ç”±äºè¿™äº›åº”ç”¨ç¨‹åºéœ€è¦é«˜æ•ˆçš„æ€§èƒ½å’Œå¯¹ç¡¬ä»¶çš„ç›´æ¥æ§åˆ¶ï¼ŒC++ è¯­è¨€æ˜¯ä¸€ä¸ªåˆé€‚çš„é€‰æ‹©ã€‚</p></li><li><p>å›¾å½¢å›¾åƒå¤„ç†ï¼šC++ å¯ä»¥ç”¨äºå¼€å‘å›¾å½¢å’Œå›¾åƒå¤„ç†åº”ç”¨ç¨‹åºï¼Œå¦‚è®¡ç®—æœºè§†è§‰ã€è®¡ç®—æœºå›¾å½¢å­¦å’Œäººå·¥æ™ºèƒ½é¢†åŸŸã€‚ç”±äºè¿™äº›åº”ç”¨ç¨‹åºéœ€è¦é«˜æ•ˆçš„è®¡ç®—èƒ½åŠ›å’Œå¯¹ç¡¬ä»¶çš„æ§åˆ¶ï¼Œå› æ­¤ C++ æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚</p><blockquote><p>æ™ºèƒ½è®¡ç®—ç³»ç»Ÿçš„C++ç®—å­ï¼Ÿ</p></blockquote></li><li><p>ç§‘å­¦è®¡ç®—å’Œæ•°å€¼åˆ†æï¼šC++ å¯ä»¥ç”¨äºå¼€å‘ç§‘å­¦è®¡ç®—å’Œæ•°å€¼åˆ†æåº”ç”¨ç¨‹åºï¼Œå¦‚æ•°å€¼æ¨¡æ‹Ÿå’Œé«˜æ€§èƒ½è®¡ç®—ç­‰é¢†åŸŸã€‚ç”±äºè¿™äº›åº”ç”¨ç¨‹åºéœ€è¦é«˜æ•ˆçš„è®¡ç®—èƒ½åŠ›å’Œå¯¹ç¡¬ä»¶çš„ç›´æ¥æ§åˆ¶ï¼ŒC++ è¯­è¨€æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚</p></li></ul><h1 id="2ã€åŸºæœ¬è¯­æ³•">2ã€åŸºæœ¬è¯­æ³•</h1><p>è¿‡ç¨‹æ€§è¯­è¨€éƒ¨åˆ†ï¼Œä¸C/Javaç±»ä¼¼ã€‚</p><h1 id="3ã€æ•°æ®ç±»å‹">3ã€æ•°æ®ç±»å‹</h1><ul><li><p>åŸºæœ¬ç±»å‹ï¼šç›¸è¾ƒäºCè¯­è¨€å¤šäº†boolç±»</p></li><li><p>æšä¸¾ç±»å‹ï¼šç±»ä¼¼Javaçš„æšä¸¾ç±»</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> æšä¸¾å&#123; </span><br><span class="line">     æ ‡è¯†ç¬¦[=æ•´å‹å¸¸æ•°], </span><br><span class="line">     æ ‡è¯†ç¬¦[=æ•´å‹å¸¸æ•°], </span><br><span class="line">... </span><br><span class="line">    æ ‡è¯†ç¬¦[=æ•´å‹å¸¸æ•°]</span><br><span class="line">&#125; æšä¸¾å˜é‡;</span><br></pre></td></tr></table></figure></li><li><p>ç±»å‹è½¬æ¢ï¼š</p><ul><li><p><strong>é™æ€è½¬æ¢ï¼ˆstatic_castï¼‰</strong>ï¼šå°†ä¸€ç§æ•°æ®ç±»å‹çš„å€¼å¼ºåˆ¶è½¬æ¢ä¸ºå¦ä¸€ç§æ•°æ®ç±»å‹çš„å€¼ã€‚ä¸è¿›è¡Œä»»ä½•è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥ï¼Œå› æ­¤å¯èƒ½ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> i = <span class="number">10</span>;</span><br><span class="line"><span class="type">float</span> f = <span class="built_in">static_cast</span>&lt;<span class="type">float</span>&gt;(i); <span class="comment">// é™æ€å°†intç±»å‹è½¬æ¢ä¸ºfloatç±»å‹</span></span><br></pre></td></tr></table></figure></li><li><p><strong>åŠ¨æ€è½¬æ¢ï¼ˆdynamic_castï¼‰</strong>ï¼šé€šå¸¸ç”¨äºå°†ä¸€ä¸ªåŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨è½¬æ¢ä¸ºæ´¾ç”Ÿç±»æŒ‡é’ˆæˆ–å¼•ç”¨ã€‚è¿è¡Œæ—¶è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œå¦‚æœä¸èƒ½è¿›è¡Œè½¬æ¢åˆ™è¿”å›ç©ºæŒ‡é’ˆæˆ–å¼•å‘å¼‚å¸¸ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> : <span class="keyword">public</span> Base &#123;&#125;;</span><br><span class="line">Base* ptr_base = <span class="keyword">new</span> Derived;</span><br><span class="line">Derived* ptr_derived = <span class="built_in">dynamic_cast</span>&lt;Derived*&gt;(ptr_base); <span class="comment">// å°†åŸºç±»æŒ‡é’ˆè½¬æ¢ä¸ºæ´¾ç”Ÿç±»æŒ‡é’ˆ</span></span><br></pre></td></tr></table></figure></li><li><p><strong>å¸¸é‡è½¬æ¢ï¼ˆconst_castï¼‰</strong>ï¼šç”¨äºå°† const ç±»å‹çš„å¯¹è±¡è½¬æ¢ä¸ºé const ç±»å‹çš„å¯¹è±¡ã€‚åªèƒ½ç”¨äºè½¬æ¢æ‰ const å±æ€§ï¼Œä¸èƒ½æ”¹å˜å¯¹è±¡çš„ç±»å‹ã€‚</p></li><li><p><strong>é‡æ–°è§£é‡Šè½¬æ¢ï¼ˆreinterpret_castï¼‰</strong>ï¼šé‡æ–°è§£é‡Šè½¬æ¢å°†ä¸€ä¸ªæ•°æ®ç±»å‹çš„å€¼é‡æ–°è§£é‡Šä¸ºå¦ä¸€ä¸ªæ•°æ®ç±»å‹çš„å€¼ï¼Œé€šå¸¸ç”¨äºåœ¨ä¸åŒçš„æ•°æ®ç±»å‹ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚ä¸è¿›è¡Œä»»ä½•ç±»å‹æ£€æŸ¥ã€‚</p></li></ul></li></ul><h1 id="4ã€ä¿®é¥°ç¬¦ç±»å‹">4ã€ä¿®é¥°ç¬¦ç±»å‹</h1><p>ç±»å‹é™å®šç¬¦æä¾›äº†å˜é‡çš„é¢å¤–ä¿¡æ¯ï¼Œç”¨äºåœ¨å®šä¹‰å˜é‡æˆ–å‡½æ•°æ—¶æ”¹å˜å®ƒä»¬çš„é»˜è®¤è¡Œä¸ºçš„å…³é”®å­—ã€‚</p><table><thead><tr><th style="text-align:left">é™å®šç¬¦</th><th style="text-align:left">å«ä¹‰</th></tr></thead><tbody><tr><td style="text-align:left">const</td><td style="text-align:left"><strong>const</strong> å®šä¹‰å¸¸é‡ï¼Œè¡¨ç¤ºè¯¥å˜é‡çš„å€¼ä¸èƒ½è¢«ä¿®æ”¹ã€‚</td></tr><tr><td style="text-align:left">volatile</td><td style="text-align:left">ä¿®é¥°ç¬¦ <strong>volatile</strong> å‘Šè¯‰è¯¥å˜é‡çš„å€¼å¯èƒ½ä¼šè¢«ç¨‹åºä»¥å¤–çš„å› ç´ æ”¹å˜ï¼Œå¦‚ç¡¬ä»¶æˆ–å…¶ä»–çº¿ç¨‹ã€‚ã€‚</td></tr><tr><td style="text-align:left">restrict</td><td style="text-align:left">ç”± <strong>restrict</strong> ä¿®é¥°çš„æŒ‡é’ˆæ˜¯å”¯ä¸€ä¸€ç§è®¿é—®å®ƒæ‰€æŒ‡å‘çš„å¯¹è±¡çš„æ–¹å¼ã€‚åªæœ‰ C99 å¢åŠ äº†æ–°çš„ç±»å‹é™å®šç¬¦ restrictã€‚</td></tr><tr><td style="text-align:left">mutable</td><td style="text-align:left">mutable ç”¨äºä¿®é¥°ç±»çš„æˆå‘˜å˜é‡ã€‚è¢« mutable ä¿®é¥°çš„æˆå‘˜å˜é‡å¯ä»¥è¢«ä¿®æ”¹ï¼Œå³ä½¿å®ƒä»¬æ‰€åœ¨çš„å¯¹è±¡æ˜¯ const çš„ã€‚</td></tr><tr><td style="text-align:left">static</td><td style="text-align:left">ç”¨äºå®šä¹‰é™æ€å˜é‡ï¼Œè¡¨ç¤ºè¯¥å˜é‡çš„ä½œç”¨åŸŸä»…é™äºå½“å‰æ–‡ä»¶æˆ–å½“å‰å‡½æ•°å†…ï¼Œä¸ä¼šè¢«å…¶ä»–æ–‡ä»¶æˆ–å‡½æ•°è®¿é—®ã€‚</td></tr><tr><td style="text-align:left">register</td><td style="text-align:left">ç”¨äºå®šä¹‰å¯„å­˜å™¨å˜é‡ï¼Œè¡¨ç¤ºè¯¥å˜é‡è¢«é¢‘ç¹ä½¿ç”¨ï¼Œå¯ä»¥å­˜å‚¨åœ¨CPUçš„å¯„å­˜å™¨ä¸­ï¼Œä»¥æé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡ã€‚</td></tr></tbody></table><ul><li><p>mutableå®ä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Example</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">get_value</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value_; <span class="comment">// const å…³é”®å­—è¡¨ç¤ºè¯¥æˆå‘˜å‡½æ•°ä¸ä¼šä¿®æ”¹å¯¹è±¡ä¸­çš„æ•°æ®æˆå‘˜</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">set_value</span><span class="params">(<span class="type">int</span> value)</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        value_ = value; <span class="comment">// mutable å…³é”®å­—å…è®¸åœ¨ const æˆå‘˜å‡½æ•°ä¸­ä¿®æ”¹æˆå‘˜å˜é‡</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">mutable</span> <span class="type">int</span> value_;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul><h1 id="5ã€å­˜å‚¨ç±»">5ã€å­˜å‚¨ç±»</h1><p>å­˜å‚¨ç±»å®šä¹‰ C++ ç¨‹åºä¸­å˜é‡/å‡½æ•°çš„èŒƒå›´ï¼ˆå¯è§æ€§ï¼‰å’Œç”Ÿå‘½å‘¨æœŸã€‚è¿™äº›è¯´æ˜ç¬¦æ”¾ç½®åœ¨å®ƒä»¬æ‰€ä¿®é¥°çš„ç±»å‹ä¹‹å‰ã€‚åŒ…æ‹¬autoã€registerï¼ˆå¼ƒç”¨ï¼‰ã€staticã€externã€mutableã€thread_localã€‚</p><p><strong>auto</strong> å…³é”®å­—ç”¨äºä¸¤ç§æƒ…å†µï¼š<u>å£°æ˜å˜é‡æ—¶æ ¹æ®åˆå§‹åŒ–è¡¨è¾¾å¼è‡ªåŠ¨æ¨æ–­è¯¥å˜é‡çš„ç±»å‹</u>ã€å£°æ˜å‡½æ•°æ—¶å‡½æ•°è¿”å›å€¼çš„å ä½ç¬¦ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> f=<span class="number">3.14</span>;      <span class="comment">//double</span></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">s</span><span class="params">(<span class="string">&quot;hello&quot;</span>)</span></span>;  <span class="comment">//const char*</span></span><br><span class="line"><span class="keyword">auto</span> z = <span class="keyword">new</span> <span class="built_in">auto</span>(<span class="number">9</span>); <span class="comment">// int*</span></span><br><span class="line"><span class="keyword">auto</span> x1 = <span class="number">5</span>, x2 = <span class="number">5.0</span>, x3=<span class="string">&#x27;r&#x27;</span>;<span class="comment">//é”™è¯¯ï¼Œå¿…é¡»æ˜¯åˆå§‹åŒ–ä¸ºåŒä¸€ç±»å‹</span></span><br></pre></td></tr></table></figure><h1 id="6ã€å‡½æ•°">6ã€å‡½æ•°</h1><h2 id="6-1ã€å‚æ•°é»˜è®¤å€¼">6.1ã€å‚æ•°é»˜è®¤å€¼</h2><p>ä¸C/Javaä¸åŒè€Œä¸Pythonç±»ä¼¼ï¼šå®šä¹‰ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå¯ä»¥ä¸ºå‚æ•°åˆ—è¡¨ä¸­åè¾¹çš„æ¯ä¸€ä¸ªå‚æ•°æŒ‡å®šé»˜è®¤å€¼ï¼›å½“è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¦‚æœå®é™…å‚æ•°çš„å€¼ç•™ç©ºï¼Œåˆ™ä½¿ç”¨è¿™ä¸ªé»˜è®¤å€¼ã€‚</p><h2 id="6-2ã€Lambdaå‡½æ•°-è¡¨è¾¾å¼">6.2ã€Lambdaå‡½æ•°/è¡¨è¾¾å¼</h2><p>è¡¨è¾¾å¼åŠä¾‹å­å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[capture](parameters)-&gt;<span class="keyword">return</span>-type&#123;body&#125;<span class="comment">// æœ‰è¿”å›å€¼</span></span><br><span class="line">[capture](parameters)&#123;body&#125;<span class="comment">// æ— è¿”å›å€¼</span></span><br><span class="line"></span><br><span class="line">[](<span class="type">int</span> x, <span class="type">int</span> y)&#123; <span class="keyword">return</span> x &lt; y ; &#125;</span><br><span class="line">[]&#123; ++global_x; &#125; </span><br><span class="line">[](<span class="type">int</span> x, <span class="type">int</span> y) -&gt; <span class="type">int</span> &#123; <span class="type">int</span> z = x + y; <span class="keyword">return</span> z + x; &#125;</span><br></pre></td></tr></table></figure><p><code>[]</code>æŒ‡å®šäº†è¯¥è¡¨è¾¾å¼å¯ä»¥è®¿é—®çš„å½“å‰ä½œç”¨åŸŸçš„å˜é‡ï¼ˆåŒ…æ‹¬å¼•ç”¨å’Œä¼ å€¼ä¼ é€’ä¸¤ç§å½¢å¼ï¼‰ã€‚</p><h1 id="7ã€å­—ç¬¦ä¸²">7ã€å­—ç¬¦ä¸²</h1><p>C++ æä¾›äº†ä»¥ä¸‹ä¸¤ç§ç±»å‹çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ï¼š</p><ul><li>C é£æ ¼å­—ç¬¦ä¸²ï¼ˆä¸Cè¯­è¨€ç”¨æ³•ä¸€è‡´ï¼‰</li><li>C++ å¼•å…¥çš„ string ç±»ç±»å‹ï¼ˆç›¸å½“äºJavaä¸­ä¸€ä¸ªStringç±»çš„å¯¹è±¡ï¼‰</li></ul><h1 id="8ã€å¼•ç”¨">8ã€å¼•ç”¨</h1><p>å¼•ç”¨å˜é‡æ˜¯ä¸€ä¸ªåˆ«åï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ˜¯æŸä¸ªå·²å­˜åœ¨å˜é‡çš„å¦ä¸€ä¸ªåå­—ã€‚ä¸€æ—¦æŠŠå¼•ç”¨åˆå§‹åŒ–ä¸ºæŸä¸ªå˜é‡ï¼Œå°±å¯ä»¥ä½¿ç”¨è¯¥å¼•ç”¨åç§°æˆ–å˜é‡åç§°æ¥æŒ‡å‘å˜é‡ã€‚</p><h2 id="8-1ã€å¼•ç”¨-VS-æŒ‡é’ˆ">8.1ã€å¼•ç”¨ VS æŒ‡é’ˆ</h2><p>å¼•ç”¨å¾ˆå®¹æ˜“ä¸æŒ‡é’ˆæ··æ·†ï¼Œå®ƒä»¬ä¹‹é—´æœ‰ä¸‰ä¸ªä¸»è¦çš„ä¸åŒï¼š</p><ul><li>ä¸å­˜åœ¨ç©ºå¼•ç”¨ã€‚å¼•ç”¨å¿…é¡»è¿æ¥åˆ°ä¸€å—åˆæ³•çš„å†…å­˜ã€‚</li><li>ä¸€æ—¦å¼•ç”¨è¢«åˆå§‹åŒ–ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå°±ä¸èƒ½è¢«æŒ‡å‘åˆ°å¦ä¸€ä¸ªå¯¹è±¡ã€‚æŒ‡é’ˆå¯ä»¥åœ¨ä»»ä½•æ—¶å€™æŒ‡å‘åˆ°å¦ä¸€ä¸ªå¯¹è±¡ã€‚</li><li>å¼•ç”¨å¿…é¡»åœ¨åˆ›å»ºæ—¶è¢«åˆå§‹åŒ–ã€‚æŒ‡é’ˆå¯ä»¥åœ¨ä»»ä½•æ—¶é—´è¢«åˆå§‹åŒ–ã€‚</li></ul><h2 id="8-2ã€åˆ›å»ºå¼•ç”¨">8.2ã€åˆ›å»ºå¼•ç”¨</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int i = 17;</span><br></pre></td></tr></table></figure><p>ä¸º i å£°æ˜å¼•ç”¨å˜é‡å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int&amp;  r = i;</span><br><span class="line">double&amp; s = d;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™äº›å£°æ˜ä¸­ï¼Œ&amp; è¯»ä½œ<strong>å¼•ç”¨</strong>ã€‚</p><blockquote><p>è‡³äºC++çš„è¾“å…¥è¾“å‡ºã€vectorã€æ•°æ®ç»“æ„ç­‰åœ¨ç®—æ³•è¯¾å·²ç»ç†Ÿæ‚‰ï¼Œå°±ä¸è®°äº†ã€‚</p></blockquote><h1 id="9ã€ç±»-å¯¹è±¡">9ã€ç±»&amp;å¯¹è±¡</h1><p>ä¸C/JavaåŒºåˆ«æœ€å¤§çš„ç‰¹ç‚¹ä¹‹ä¸€ã€‚</p><ul><li>å®šä¹‰æ–¹æ³•ï¼š</li></ul><p><img src="https://www.runoob.com/wp-content/uploads/2015/05/cpp-classes-objects-2020-12-10-11.png" alt="img"></p><ul><li><p>ç±»æˆå‘˜å‡½æ•°å®šä¹‰ï¼šå¯åœ¨ç±»ä¸­å®šä¹‰ï¼Œä¹Ÿå¯åœ¨ç±»çš„å¤–éƒ¨ä½¿ç”¨<strong>èŒƒå›´è§£æè¿ç®—ç¬¦ ::</strong> å®šä¹‰ã€‚</p></li><li><p>ç±»è®¿é—®ä¿®é¥°ç¬¦ï¼šç”±äºä¸åˆ†åŒ…ï¼Œæ²¡æœ‰Javaçš„é»˜è®¤ï¼ˆåŒ…è®¿é—®æƒé™ï¼‰ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯å®šä¹‰ä¸º privateã€‚</p></li><li><p>æ„é€ å‡½æ•°ï¼šä¸Javaç±»ä¼¼ï¼Œå‡½æ•°åä¸ºç±»åä¸”æ— è¿”å›å€¼ç±»å‹ï¼Œä½†å¯ä»¥ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨æ¥åˆå§‹åŒ–å­—æ®µï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">C::<span class="built_in">C</span>( <span class="type">double</span> a, <span class="type">double</span> b, <span class="type">double</span> c): <span class="built_in">X</span>(a), <span class="built_in">Y</span>(b), <span class="built_in">Z</span>(c) <span class="comment">// å¯¹æˆå‘˜X, Y, Zåˆ†åˆ«èµ‹å€¼a, b, c</span></span><br><span class="line">&#123;</span><br><span class="line">  ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç±»çš„<strong>ææ„å‡½æ•°</strong>ï¼šæ˜¯ç±»çš„ä¸€ç§ç‰¹æ®Šçš„æˆå‘˜å‡½æ•°ï¼Œå®ƒä¼šåœ¨æ¯æ¬¡åˆ é™¤æ‰€åˆ›å»ºçš„å¯¹è±¡æ—¶æ‰§è¡Œã€‚ææ„å‡½æ•°çš„åç§°ä¸ç±»çš„åç§°æ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œåªæ˜¯åœ¨å‰é¢åŠ äº†ä¸ªæ³¢æµªå·ï¼ˆ~ï¼‰ä½œä¸ºå‰ç¼€ï¼Œå®ƒä¸ä¼šè¿”å›ä»»ä½•å€¼ï¼Œä¹Ÿä¸èƒ½å¸¦æœ‰ä»»ä½•å‚æ•°ã€‚ææ„å‡½æ•°æœ‰åŠ©äºåœ¨è·³å‡ºç¨‹åºï¼ˆæ¯”å¦‚å…³é—­æ–‡ä»¶ã€é‡Šæ”¾å†…å­˜ç­‰ï¼‰å‰é‡Šæ”¾èµ„æºã€‚</p></li><li><p><strong>æ‹·è´æ„é€ å‡½æ•°</strong>ï¼šæ˜¯ä¸€ç§ç‰¹æ®Šçš„æ„é€ å‡½æ•°ï¼Œå®ƒåœ¨åˆ›å»ºå¯¹è±¡æ—¶ï¼Œæ˜¯ä½¿ç”¨åŒä¸€ç±»ä¸­ä¹‹å‰åˆ›å»ºçš„å¯¹è±¡æ¥åˆå§‹åŒ–æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚å¦‚æœåœ¨ç±»ä¸­æ²¡æœ‰å®šä¹‰æ‹·è´æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šè‡ªè¡Œå®šä¹‰ä¸€ä¸ªã€‚å¦‚æœç±»å¸¦æœ‰æŒ‡é’ˆå˜é‡ï¼Œå¹¶æœ‰åŠ¨æ€å†…å­˜åˆ†é…ï¼Œåˆ™å®ƒå¿…é¡»æœ‰ä¸€ä¸ªæ‹·è´æ„é€ å‡½æ•°ï¼ˆå®ç°æ·±æ‹·è´ï¼‰ã€‚å½¢å¼ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">classname</span> (<span class="type">const</span> classname &amp;obj) &#123;</span><br><span class="line">   <span class="comment">// æ‹·è´æ„é€ å‡½æ•°çš„ä¸»ä½“</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç±»çš„<strong>å‹å…ƒå‡½æ•°/å‹å…ƒç±»</strong>ï¼šå®šä¹‰åœ¨ç±»<strong>å¤–éƒ¨</strong>ï¼Œä½†æœ‰æƒè®¿é—®ç±»çš„æ‰€æœ‰ç§æœ‰ï¼ˆprivateï¼‰æˆå‘˜å’Œä¿æŠ¤ï¼ˆprotectedï¼‰æˆå‘˜ã€‚</p></li><li><p>å…¶ä»–ä¸C/Javaç±»ä¼¼çš„ï¼šå†…è”å‡½æ•°ã€thisæŒ‡é’ˆã€é™æ€æˆå‘˜å˜é‡åŠå‡½æ•°</p></li></ul><h1 id="10ã€ç»§æ‰¿">10ã€ç»§æ‰¿</h1><ul><li><p>ä¸Javaä¸åŒï¼ŒC++ä¸­ä¸€ä¸ªç±»å¯ä»¥æ´¾ç”Ÿè‡ªå¤šä¸ªç±»ï¼Œå¯ä»¥ä»å¤šä¸ªåŸºç±»ç»§æ‰¿æ•°æ®å’Œå‡½æ•°ã€‚å¤šç»§æ‰¿ä½¿ç”¨é€—å·éš”å¼€ã€‚</p></li><li><p>å®šä¹‰ä¸€ä¸ªæ´¾ç”Ÿç±»ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç±»æ´¾ç”Ÿåˆ—è¡¨æ¥æŒ‡å®šåŸºç±»ã€‚ç±»æ´¾ç”Ÿåˆ—è¡¨ä»¥ä¸€ä¸ªæˆ–å¤šä¸ªåŸºç±»å‘½åï¼Œå½¢å¼å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">derived</span>-<span class="keyword">class</span>: access-specifier base-<span class="keyword">class</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å‡ ä¹ä¸ä½¿ç”¨ <strong>protected</strong> æˆ– <strong>private</strong> ç»§æ‰¿ï¼Œé€šå¸¸ä½¿ç”¨ <strong>public</strong> ç»§æ‰¿ã€‚å½“ä½¿ç”¨ä¸åŒç±»å‹çš„ç»§æ‰¿æ—¶ï¼Œéµå¾ªä»¥ä¸‹å‡ ä¸ªè§„åˆ™ï¼š</p><ul><li><strong>å…¬æœ‰ç»§æ‰¿ï¼ˆpublicï¼‰ï¼š<strong>å½“ä¸€ä¸ªç±»æ´¾ç”Ÿè‡ª</strong>å…¬æœ‰</strong>åŸºç±»æ—¶ï¼ŒåŸºç±»çš„<strong>å…¬æœ‰</strong>æˆå‘˜ä¹Ÿæ˜¯æ´¾ç”Ÿç±»çš„<strong>å…¬æœ‰</strong>æˆå‘˜ï¼ŒåŸºç±»çš„<strong>ä¿æŠ¤</strong>æˆå‘˜ä¹Ÿæ˜¯æ´¾ç”Ÿç±»çš„<strong>ä¿æŠ¤</strong>æˆå‘˜ï¼ŒåŸºç±»çš„<strong>ç§æœ‰</strong>æˆå‘˜ä¸èƒ½ç›´æ¥è¢«æ´¾ç”Ÿç±»è®¿é—®ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡è°ƒç”¨åŸºç±»çš„<strong>å…¬æœ‰</strong>å’Œ<strong>ä¿æŠ¤</strong>æˆå‘˜æ¥è®¿é—®ã€‚</li><li><strong>ä¿æŠ¤ç»§æ‰¿ï¼ˆprotectedï¼‰ï¼š</strong> å½“ä¸€ä¸ªç±»æ´¾ç”Ÿè‡ª<strong>ä¿æŠ¤</strong>åŸºç±»æ—¶ï¼ŒåŸºç±»çš„<strong>å…¬æœ‰</strong>å’Œ<strong>ä¿æŠ¤</strong>æˆå‘˜å°†æˆä¸ºæ´¾ç”Ÿç±»çš„<strong>ä¿æŠ¤</strong>æˆå‘˜ã€‚</li><li><strong>ç§æœ‰ç»§æ‰¿ï¼ˆprivateï¼‰ï¼š<strong>å½“ä¸€ä¸ªç±»æ´¾ç”Ÿè‡ª</strong>ç§æœ‰</strong>åŸºç±»æ—¶ï¼ŒåŸºç±»çš„<strong>å…¬æœ‰</strong>å’Œ<strong>ä¿æŠ¤</strong>æˆå‘˜å°†æˆä¸ºæ´¾ç”Ÿç±»çš„<strong>ç§æœ‰</strong>æˆå‘˜ã€‚</li></ul><blockquote><p>ä¸Javaä¸åŒï¼ŒJavaå­ç±»ä¸èƒ½ç¼©å°çˆ¶ç±»æˆå‘˜çš„å¯è§æ€§ã€‚</p></blockquote></li></ul><h2 id="11ã€é‡è½½è¿ç®—ç¬¦å’Œé‡è½½å‡½æ•°">11ã€é‡è½½è¿ç®—ç¬¦å’Œé‡è½½å‡½æ•°</h2><p>å‡½æ•°é‡è½½ä¸Javaç±»ä¼¼ï¼Œè¿™é‡Œç€é‡è®°å½•è¿ç®—ç¬¦é‡è½½ã€‚</p><p>é‡è½½çš„è¿ç®—ç¬¦æ˜¯å¸¦æœ‰ç‰¹æ®Šåç§°çš„å‡½æ•°ï¼Œå‡½æ•°åæ˜¯ç”±å…³é”®å­— operator å’Œå…¶åè¦é‡è½½çš„è¿ç®—ç¬¦ç¬¦å·æ„æˆçš„ã€‚ä¸å…¶ä»–å‡½æ•°ä¸€æ ·ï¼Œé‡è½½è¿ç®—ç¬¦æœ‰ä¸€ä¸ªè¿”å›ç±»å‹å’Œä¸€ä¸ªå‚æ•°åˆ—è¡¨ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Box operator+(const Box&amp;);</span><br></pre></td></tr></table></figure><p>å£°æ˜åŠ æ³•è¿ç®—ç¬¦ç”¨äºæŠŠä¸¤ä¸ª Box å¯¹è±¡ç›¸åŠ ï¼Œè¿”å›æœ€ç»ˆçš„ Box å¯¹è±¡ã€‚å¤§å¤šæ•°çš„é‡è½½è¿ç®—ç¬¦å¯è¢«å®šä¹‰ä¸ºæ™®é€šçš„éæˆå‘˜å‡½æ•°æˆ–è€…è¢«å®šä¹‰ä¸ºç±»æˆå‘˜å‡½æ•°ã€‚å¦‚æœæˆ‘ä»¬å®šä¹‰ä¸Šé¢çš„å‡½æ•°ä¸ºç±»çš„éæˆå‘˜å‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä¸ºæ¯æ¬¡æ“ä½œä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Box operator+(const Box&amp;, const Box&amp;);</span><br></pre></td></tr></table></figure><h1 id="12ã€å¤šæ€">12ã€å¤šæ€</h1><p>ä¸Javaçš„å¤šæ€ç±»ä¼¼ã€‚</p><ul><li>è™šå‡½æ•°ï¼šä½¿ç”¨å…³é”®å­—<code>virtual</code>ï¼Œå­ç±»é‡å†™è¦åŠ <code>override</code>ã€‚ï¼ˆå¯ä»¥åœ¨åŸºç±»ä¸­æä¾›é»˜è®¤å®ç°ï¼‰</li><li>çº¯è™šå‡½æ•°ï¼ˆPure Virtual Functionsï¼‰ï¼š<ul><li>ä¸€ä¸ªåŒ…å«çº¯è™šå‡½æ•°çš„ç±»è¢«ç§°ä¸º<strong>æŠ½è±¡ç±»</strong>ï¼ˆAbstract Classï¼‰ï¼Œå®ƒä¸èƒ½è¢«ç›´æ¥å®ä¾‹åŒ–ã€‚ï¼ˆä¸Javaä¸­çš„æŠ½è±¡ç±»ç±»ä¼¼ï¼Œæ˜¯C++ä¸­çš„æ¥å£ï¼‰</li><li>çº¯è™šå‡½æ•°æ²¡æœ‰å‡½æ•°ä½“ï¼Œå£°æ˜æ—¶ä½¿ç”¨<code>= 0</code>ã€‚ï¼ˆä¸Javaçš„æŠ½è±¡æ–¹æ³•ç±»ä¼¼ï¼‰</li></ul></li></ul><h1 id="13ã€å…¶ä»–ç‰¹æ€§">13ã€å…¶ä»–ç‰¹æ€§</h1><ul><li><p>åŠ¨æ€å†…å­˜ï¼šä½¿ç”¨newåˆ†é…å †ç©ºé—´ï¼ˆä¸Javaç±»ä¼¼ï¼‰ï¼Œ<u>ä½¿ç”¨deleteé‡Šæ”¾å†…å­˜ï¼ˆJavaè‡ªåŠ¨åƒåœ¾å›æ”¶æœºåˆ¶ï¼‰</u></p><blockquote><p><strong>å¯¹äºåˆ†é…å¯¹è±¡ç©ºé—´ï¼ŒC++æ”¯æŒæ ˆåˆ†é…å†…å­˜å’Œå †åˆ†é…å†…å­˜ï¼ˆéœ€è¦æ˜¾ç¤ºé‡Šæ”¾ï¼‰ï¼Œè€ŒJavaæ˜¯å®Œå…¨åŸºäºå †çš„ã€‚</strong></p></blockquote></li><li><p>å‘½åç©ºé—´ï¼šä½œä¸ºé™„åŠ ä¿¡æ¯æ¥åŒºåˆ†ä¸åŒåº“ä¸­ç›¸åŒåç§°çš„å‡½æ•°ã€ç±»ã€å˜é‡ç­‰ã€‚ä½¿ç”¨äº†å‘½åç©ºé—´å³å®šä¹‰äº†ä¸Šä¸‹æ–‡ã€‚æœ¬è´¨ä¸Šï¼Œå‘½åç©ºé—´å°±æ˜¯å®šä¹‰äº†ä¸€ä¸ªèŒƒå›´ã€‚å¯ä»¥åµŒå¥—ã€‚ä½¿ç”¨**èŒƒå›´è§£æè¿ç®—ç¬¦ ::**è°ƒç”¨å¸¦æœ‰å‘½åç©ºé—´çš„å‡½æ•°æˆ–å˜é‡ã€‚</p></li><li><p>æ¨¡æ¿ï¼šç±»ä¼¼Javaçš„æ³›å‹ã€‚</p><ul><li><p>å‡½æ•°æ¨¡æ¿ï¼šï¼ˆä¸Javaæ³›å‹ä¸åŒï¼Œä½¿ç”¨æ—¶ä¸æŒ‡å®šçš„ç±»å‹ï¼Œç›´æ¥ä½¿ç”¨ï¼‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> type&gt; ret-type func-<span class="built_in">name</span>(parameter list)</span><br><span class="line">&#123;</span><br><span class="line">   <span class="comment">// å‡½æ•°çš„ä¸»ä½“</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç±»æ¨¡æ¿ï¼šï¼ˆéœ€è¦æŒ‡å®šç±»å‹ï¼‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">type</span>&gt; <span class="keyword">class</span> <span class="title class_">class</span>-name &#123;</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li><li><p>å¯¼å…¥æ ‡å‡†åº“ã€é¢„å¤„ç†å™¨ï¼šä¸Cè¯­è¨€ç›¸åŒã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> C/C++å•å…ƒæµ‹è¯•ç”Ÿæˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¼–è¯‘æŠ€æœ¯å®éªŒæ€»ç»“æ„Ÿæƒ³</title>
      <link href="/2025/01/10/%E7%BC%96%E8%AF%91%E6%8A%80%E6%9C%AF%E5%AE%9E%E9%AA%8C%E6%80%BB%E7%BB%93%E6%84%9F%E6%83%B3/"/>
      <url>/2025/01/10/%E7%BC%96%E8%AF%91%E6%8A%80%E6%9C%AF%E5%AE%9E%E9%AA%8C%E6%80%BB%E7%BB%93%E6%84%9F%E6%83%B3/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šç¼–è¯‘æŠ€æœ¯ã€‹å®éªŒæ€»ç»“æ„Ÿæƒ³">ã€Šç¼–è¯‘æŠ€æœ¯ã€‹å®éªŒæ€»ç»“æ„Ÿæƒ³</h1><h2 id="1-å®éªŒæ€»ç»“">1. å®éªŒæ€»ç»“</h2><p>è¿™ä¸ªå­¦æœŸçš„ç¼–è¯‘å®éªŒä¸€å…±åˆ†ä¸ºæ–‡æ³•è§£è¯»ã€è¯æ³•åˆ†æã€è¯­æ³•åˆ†æã€è¯­ä¹‰åˆ†æã€ä»£ç ç”Ÿæˆã€ä»£ç ä¼˜åŒ–å‡ ä¸ªéƒ¨åˆ†ã€‚æ€»ä½“æ¥è¯´ï¼Œéš¾åº¦ä¾æ¬¡é€’å¢ã€‚</p><p>æˆ‘é€‰æ‹©çš„ç¼–ç¨‹è¯­è¨€æ˜¯Javaï¼Œè¿™ä¹Ÿæ˜¯æˆ‘æœ€å–œæ¬¢çš„ä¸€ç§è¯­è¨€ã€‚åœ¨å®éªŒå¼€å§‹å‰ï¼Œæˆ‘è¿˜åœ¨åº†å¹¸ä¸ç”¨åƒä¸Šå­¦æœŸçš„OSä¸€æ ·æ•´å¤©è·ŸCè¯­è¨€æ‰“äº¤é“ï¼Œåˆèƒ½æ„‰å¿«åœ°ç¼–å†™æœ€å–œæ¬¢çš„Javaäº†ã€‚</p><p>åœ¨æœ€åˆçš„è¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æä¸­ï¼Œæˆ‘è¿˜ä½“éªŒç€è¿­ä»£å¼€å‘Javaã€æ¬£èµè‡ªå·±çš„è®¾è®¡æ¨¡å¼çš„ä¹è¶£ä¸­ã€‚è™½ç„¶è¯­æ³•åˆ†æçš„å·¥ä½œé‡ç›¸æ¯”äºè¯æ³•åˆ†æé™¡å¢ï¼Œä½†æ˜¯æˆ‘ä¸ªäººè§‰å¾—æˆ‘çš„ç±»è®¾è®¡è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°çš„ï¼Œå› æ­¤å†™å®Œä¹‹åä¹Ÿç®—æ˜¯éå¸¸æœ‰æˆå°±æ„Ÿäº†ã€‚</p><p>ä¹‹åçš„è¯­ä¹‰åˆ†æå…¶å®å°±æ˜¯å»ºç«‹ç¬¦å·è¡¨å¹¶å¤„ç†è¯­ä¹‰é”™è¯¯ï¼Œå› æ­¤æ¯”è¾ƒç®€å•ã€‚ä½†å®Œæˆè¿™é‡Œçš„æ—¶å€™ï¼Œæˆ‘æ·±æ„Ÿå¯¹äºç±»è®¾è®¡ç­‰çš„æ¬ ç¼ºï¼Œå‡ ä¹æŠŠé¢å‘å¯¹è±¡çš„è¯­è¨€å†™æˆäº†é¢å‘è¿‡ç¨‹çš„è¯­è¨€ã€‚è€Œåé¢çš„ä¸­ç«¯ä»£ç ç”Ÿæˆæ˜¯åœ¨è¯­ä¹‰åˆ†æçš„åŸºç¡€ä¸Šåšçš„ï¼Œå› æ­¤æˆ‘æ€»ä½“çš„è®¾è®¡åœ¨æ­¤åä¹Ÿå˜å¾—ä¸å¿ç›´è§†ã€‚</p><p>ä»£ç ç”Ÿæˆæˆ‘é€‰æ‹©çš„æ˜¯LLVM IR+MIPSã€‚æ­¤æ—¶èƒ½ç»™äºˆæˆ‘å¸®åŠ©çš„åªæœ‰æŒ‡å¯¼ä¹¦äº†ï¼Œç„¶è€Œæˆ‘è§‰å¾—æŒ‡å¯¼ä¹¦å¹¶ä¸å…¨é¢ï¼Œåªæä¾›äº†æœ€åŸºæœ¬çš„ä»‹ç»ï¼Œå…·ä½“å®ç°å¤§éƒ¨åˆ†éƒ½æ˜¯æˆ‘è‡ªå·±æ‘¸ç´¢å‡ºæ¥çš„ã€‚æ¯”å¦‚åœ¨LLVM IRç”Ÿæˆä¸­ï¼ŒæŒ‡å¯¼ä¹¦å¹¶æ²¡æœ‰è¯´ç¬¦å·è¡¨åˆ°åº•å­˜ä»€ä¹ˆä¸œè¥¿ï¼Œæˆ‘æœ€åæƒ³çš„æ˜¯å­˜åœ°å€å¯¹åº”çš„è™šæ‹Ÿå¯„å­˜å™¨ï¼Œå¦‚æœå­˜å€¼çš„è¯ï¼Œè¿˜éœ€è¦è€ƒè™‘åˆ†æ”¯åˆå¹¶æ—¶çš„phiæŒ‡ä»¤ç­‰ï¼Œå¦‚æœæŒ‡å¯¼ä¹¦ç›´æ¥è¯´æ˜phiæŒ‡ä»¤å»ºè®®åœ¨åé¢ä¼˜åŒ–æ—¶å®ç°ï¼Œå¯èƒ½æˆ‘ä¼šèŠ±æ›´å°‘çš„æ—¶é—´äº†ã€‚</p><p>åœ¨MIPSçš„ç”Ÿæˆæ—¶ï¼Œä¹Ÿæœ‰ç±»ä¼¼æƒ…å†µã€‚æˆ‘ä¸€å¼€å§‹ç†è§£é”™äº†LLVM IRä¸­â€è™šæ‹Ÿå¯„å­˜å™¨â€œçš„æ¦‚å¿µï¼Œä»¥ä¸ºè™šæ‹Ÿå¯„å­˜å™¨å°±å¿…é¡»å¾—åˆ†é…ä¸€ä¸ªç‰©ç†å¯„å­˜å™¨ï¼Œæ‰€ä»¥æˆ‘ç›´æ¥å°†åé¢ä¼˜åŒ–éƒ¨åˆ†çš„å¯„å­˜å™¨åˆ†é…åœ¨ç”ŸæˆMIPSæ—¶å°±å†™äº†ï¼Œè¿™è€—è´¹äº†æˆ‘å¤§é‡çš„æ—¶é—´ã€‚è€Œåæ¥æˆ‘å‡ ä¹å¿«å®Œæˆçš„æ—¶å€™ç»åŒå­¦çš„æé†’ï¼Œæ‰æ„è¯†åˆ°è™šæ‹Ÿå¯„å­˜å™¨ä¹Ÿå°±æ˜¯ä¸€ä¸ªå˜é‡è€Œå·²äº†ï¼Œå®Œå…¨å¯ä»¥å…¨éƒ¨æ”¾åœ¨æ ˆä¸Šã€‚</p><p>åœ¨ä»£ç ç”Ÿæˆçš„é‚£æ®µæ—¶é—´ï¼Œç‰¹åˆ«æ˜¯MIPSç”Ÿæˆï¼Œæ˜¯æ•´ä¸ªè¿‡ç¨‹æœ€éš¾ã€è€—è´¹æ—¶é—´æœ€é•¿çš„ã€æœ€è§‰å¾—æ— åŠ©çš„ã€‚ä¸­é—´ä»£ç å’Œç›®æ ‡ä»£ç ç”Ÿæˆéƒ½èŠ±è´¹äº†æˆ‘å¿«2å‘¨æ—¶é—´ã€‚ä¸€å¼€å§‹æˆ‘ä»¥ä¸ºMIPSç”Ÿæˆå°±æ˜¯ç®€å•çš„é€æ¡æŒ‡ä»¤ç¿»è¯‘ï¼Œä½†æ˜¯æˆ‘ç›´æ¥å°†å¯„å­˜å™¨åˆ†é…çº³å…¥ï¼Œä½¿å¾—æ•´ä¸ªè¿‡ç¨‹éå¸¸åå·ï¼Œå„ç§bugã€å„ç§é—®é¢˜â€¦â€¦é‚£æ—¶çœŸçš„æ˜¯æœ€æƒ³æ”¾å¼ƒçš„ä¸€ç¬ã€‚</p><p>å¥½åœ¨ç›´æ¥å®ç°äº†å¯„å­˜å™¨åˆ†é…ï¼Œä½¿æˆ‘ç«é€Ÿæ’åºçš„æ’åä¸ç®—å¤ªé åã€‚åŒæ—¶ç”±äºè€—è´¹äº†å¤ªå¤šæ—¶é—´ï¼Œæˆ‘ä¹Ÿæ— åŠ›åšå·¥ä½œé‡å·¨å¤§çš„å¤æ‚ä¼˜åŒ–äº†ï¼ˆæ¯”å¦‚LLVM IR mem2regï¼‰ã€‚ä½†æ˜¯æˆ‘æœ¬èº«ä¹Ÿæ— æ„å»å·ç«é€Ÿæ’åï¼Œæˆ‘æ„Ÿè§‰æˆ‘èƒ½åšå‡ºMIPSå¹¶åœ¨æ’åé‡Œæœ‰ä¸€å¸­ä¹‹åœ°å°±è¶³å¤Ÿäº†ã€‚æœ€åçš„æœ€åï¼Œæˆ‘å°½æˆ‘æ‰€èƒ½åœ°å®ç°äº†ä¸€äº›æ¯”è¾ƒç®€å•çš„ä¼˜åŒ–ï¼Œä¹Ÿç®—æ˜¯ç»™æ•´ä¸ªç¼–è¯‘å®éªŒç”»ä¸Šäº†ä¸€ä¸ªåœ†æ»¡çš„å¥å·å§ã€‚</p><h2 id="2-æ„Ÿæƒ³">2. æ„Ÿæƒ³</h2><p>å®Œæˆæ•´ä¸ªç¼–è¯‘å®éªŒæ˜¯æˆ‘ä¸ªäººç¬¬ä¸€æ¬¡ç‹¬ç«‹å®Œæˆå·¥ä½œé‡å’Œå¤æ‚åº¦è¿™ä¹ˆåºå¤§çš„é¡¹ç›®äº†ï¼Œæœ€åçœ‹äº†ä¸€ä¸‹æ€»å…±æœ‰9216è¡Œä»£ç ã€‚ä½†è‚¯å®šä¸æ˜¯ä»£ç è¡Œæ•°è¶Šå¤šå°±è¶Šå¥½ï¼Œæˆ‘åœ¨ä¸­åæœŸé‡Œç±»å’Œæ–¹æ³•è®¾è®¡æ–¹é¢æ¯”è¾ƒæ¬ ç¼ºï¼Œä»£ç çš„è´¨é‡ä¹Ÿä¸ç®—å¤ªé«˜ã€‚è™½ç„¶æ¯æ¬¡ä½œä¸šéƒ½æ˜¯â€ä¸‡äº‹å¼€å¤´éš¾â€œï¼Œä½†æ˜¯æ¯æ¬¡ç‚¹å‡»IDEAçš„â€æ–°å»ºç±»â€œæŒ‰é’®éƒ½æ»¡æ€€ç€æœŸå¾…ï¼ŒæœŸå¾…ç€è¿™ä¸ªç±»çš„è®¾è®¡èƒ½å¤Ÿè¶³å¤Ÿå®Œç¾ï¼Œè€Œè¶³å¤Ÿå®Œç¾çš„è®¾è®¡åœ¨æ–¹ä¾¿ä½¿ç”¨çš„åŒæ—¶çœŸçš„èƒ½ç»™äººè‡ªè±ªæ„Ÿï¼›è™½ç„¶æ¯æ¬¡ç¼–ç ã€debugè¿‡ç¨‹éƒ½éå¸¸è‰°è¾›ï¼Œä½†æ˜¯æ¯æ¬¡çœ‹åˆ°ACé€šè¿‡çš„èµå¿ƒæ‚¦ç›®çš„ç»¿è‰²æ—¶ï¼Œä¼šæ„Ÿè§‰ä¸€åˆ‡éƒ½å€¼äº†ã€‚</p><h2 id="3-ä¸€ç‚¹å»ºè®®">3. ä¸€ç‚¹å»ºè®®</h2><p>å¸Œæœ›æŒ‡å¯¼ä¹¦å¯ä»¥ç»™ä¸€äº›æ€»ä½“çš„ç¼–ç å®ç°æ€è·¯ï¼ˆä½†æ˜¯å¤ªå…·ä½“ä¹Ÿä¸è¡Œï¼Œå¦åˆ™å¤§å®¶éƒ½å†™æˆä¸€æ ·çš„äº†ï¼‰ï¼Œæ¯•ç«Ÿä»æ— åˆ°æœ‰çš„å¼€å‘å¦‚æœæ²¡æœ‰å‚è€ƒè¿˜æ˜¯å¾ˆæœ‰éš¾åº¦çš„ï¼Œè€Œä¸”å®¹æ˜“èµ°å¼¯è·¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–è¯‘æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¼–è¯‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¼–è¯‘æŠ€æœ¯å¼€å‘æ–‡æ¡£</title>
      <link href="/2025/01/10/%E7%BC%96%E8%AF%91%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91%E6%96%87%E6%A1%A3/"/>
      <url>/2025/01/10/%E7%BC%96%E8%AF%91%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91%E6%96%87%E6%A1%A3/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ã€Šç¼–è¯‘æŠ€æœ¯ã€‹å®éªŒå¼€å‘æ–‡æ¡£</p><p>Authorï¼šbush</p></blockquote><h1 id="1-å‚è€ƒç¼–è¯‘å™¨ä»‹ç»">1 å‚è€ƒç¼–è¯‘å™¨ä»‹ç»</h1><p>ä¸»è¦å‚è€ƒäº†æ•™æä¸ŠPL/0ä»¥åŠtolang</p><h2 id="1-1-æ€»ä½“ç»“æ„">1.1 æ€»ä½“ç»“æ„</h2><p>PL/0æ˜¯ä¸€ä¸ªç¼–è¯‘-è§£é‡Šæ‰§è¡Œç¨‹åºï¼Œæ€»ä½“ç»“æ„åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š</p><ol><li>å…ˆæŠŠPL/0ç¼–è¯‘æˆç›®æ ‡ç¨‹åºï¼ˆP-codeæŒ‡ä»¤ï¼‰</li><li>å†å¯¹ç›®æ ‡ç¨‹åºè¿›è¡Œè§£é‡Šæ‰§è¡Œï¼Œå¾—åˆ°è¿è¡Œç»“æœ</li></ol><h2 id="1-2-æ¥å£è®¾è®¡">1.2 æ¥å£è®¾è®¡</h2><p>PL/0ç¼–è¯‘ç¨‹åºé‡‡ç”¨ä¸€éæ‰«æï¼Œä»¥è¯­æ³•åˆ†æä¸ºæ ¸å¿ƒï¼Œç”±å®ƒè°ƒç”¨è¯æ³•åˆ†æç¨‹åºå–å•è¯ï¼Œåœ¨è¯­æ³•åˆ†æè¿‡ç¨‹ä¸­åŒæ—¶è¿›è¡Œè¯­ä¹‰åˆ†æå¤„ç†ï¼Œå¹¶ç”Ÿæˆç›®æ ‡æŒ‡ä»¤ã€‚</p><p>å¦‚é‡æœ‰è¯­æ³•ã€è¯­ä¹‰é”™è¯¯ï¼Œåˆ™éšæ—¶è°ƒç”¨å‡ºé”™å¤„ç†ç¨‹åºï¼Œæ‰“å°å‡ºé”™ä¿¡æ¯ã€‚</p><h2 id="1-3-æ–‡ä»¶ç»„ç»‡">1.3 æ–‡ä»¶ç»„ç»‡</h2><p>å‰ç«¯å’Œåç«¯åˆ†åŒ…ç­‰ã€‚</p><h1 id="2-ç¼–è¯‘å™¨æ€»ä½“è®¾è®¡">2 ç¼–è¯‘å™¨æ€»ä½“è®¾è®¡</h1><h2 id="2-1-æ€»ä½“ç»“æ„">2.1 æ€»ä½“ç»“æ„</h2><p>æ€»ä½“ç»“æ„ä¸PL/0ä¸åŒï¼Œæ˜¯ç¼–è¯‘ç¨‹åºã€‚</p><ol><li>å…ˆç¼–è¯‘æˆLLVM IR</li><li>ç”±LLVM IRç”ŸæˆMIPSæ±‡ç¼–ä»£ç </li><li>ç›´æ¥è¿è¡ŒMIPSæ±‡ç¼–ä»£ç </li></ol><hr><p>ç¼–è¯‘å™¨æ€»ä½“é‡‡ç”¨å¤šéæ‰«æï¼Œå³å…ˆé€šè¿‡ä¸€æ¬¡å®Œæ•´çš„è¯æ³•åˆ†æå¾—åˆ°tokenåºåˆ—ï¼Œå†è¿›è¡Œè¯­æ³•åˆ†æå¾—åˆ°è¯­æ³•æ ‘ã€‚</p><h2 id="2-2-æ¥å£è®¾è®¡">2.2 æ¥å£è®¾è®¡</h2><h3 id="2-2-1-è¯æ³•åˆ†æå™¨Lexer">2.2.1 è¯æ³•åˆ†æå™¨Lexer</h3><p><code>Lexer.java</code>ä¸»è¦æä¾›ä¸€ä¸ªæ¥å£<code>getToken()</code></p><ul><li><strong>è°ƒç”¨å½¢å¼</strong>ï¼š<code>token = lexer.getToken()</code></li><li><strong>ä½œç”¨</strong>ï¼šæ ¹æ®è®¾ç½®çš„è¯»å–å™¨<code>BufferedReader</code>ï¼Œæ¯æ¬¡è°ƒç”¨è¿”å›ä¸‹ä¸€ä¸ªè§£æåˆ°çš„<code>Token</code>ç±»ç¬¦å·</li><li><strong>å¤‡æ³¨</strong>ï¼šå½“ä¸”ä»…å½“è¯»åˆ°æ–‡ä»¶æµæœ«å°¾æ—¶è¿”å›<code>null</code></li></ul><h3 id="2-2-2-è¯­æ³•åˆ†æå™¨Parser">2.2.2 è¯­æ³•åˆ†æå™¨Parser</h3><p><code>Parser.java</code>ä¸»è¦æä¾›ä¸€ä¸ªæ¥å£<code>parse()</code></p><ul><li><strong>è°ƒç”¨å½¢å¼</strong>ï¼š<code>compUnit = parser.parse()</code></li><li><strong>ä½œç”¨</strong>ï¼šé¦–å…ˆè°ƒç”¨è¯æ³•åˆ†æå™¨çš„æ¥å£è§£æå¾—åˆ°tokenåºåˆ—ï¼Œç„¶åé€’å½’è§£æä»¥ä¸€ä¸ª<code>CompUnit</code>ç±»å®ä¾‹è¡¨ç¤ºçš„è¯­æ³•æ ‘</li></ul><h2 id="2-3-æ–‡ä»¶ç»„ç»‡">2.3 æ–‡ä»¶ç»„ç»‡</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># ä¸»è¦æ–‡ä»¶ç»“æ„å¦‚ä¸‹</span><br><span class="line">â”œâ”€error</span><br><span class="line">â”‚  â””â”€CompilerError.java</span><br><span class="line">â”œâ”€frontend</span><br><span class="line">â”‚  â”œâ”€lexer</span><br><span class="line">â”‚  â”‚   â””â”€Lexer.java</span><br><span class="line">â”‚  â””â”€parser</span><br><span class="line">â”‚      â”œâ”€declaration</span><br><span class="line">â”‚      â”œâ”€expression</span><br><span class="line">â”‚      â”œâ”€function</span><br><span class="line">â”‚      â”œâ”€statement</span><br><span class="line">â”‚      â””â”€terminal</span><br><span class="line">â”‚      â””â”€Parser.java</span><br><span class="line">â”œâ”€Compiler.java</span><br><span class="line">â”œâ”€config.json</span><br><span class="line">â””â”€README.md</span><br></pre></td></tr></table></figure><h1 id="3-è¯æ³•åˆ†æè®¾è®¡">3 è¯æ³•åˆ†æè®¾è®¡</h1><h2 id="3-1-ç¼–ç å‰çš„è®¾è®¡">3.1 ç¼–ç å‰çš„è®¾è®¡</h2><p>ä¸»è¦å‚è€ƒçš„æ˜¯æ•™æä¸Šçš„PL/0ï¼Œä»¥åŠç¬¬ä¸‰ç« çš„è¯æ³•åˆ†æç¤ºä¾‹ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/bush-cn/TyporaImages@main/img/2025/07/11/20250711101424.png" alt="image-20241014104848084"></p><p>ä»£ç å¤§è‡´æµç¨‹å›¾å¦‚ä¸Šï¼Œç¼–ç æ—¶ï¼Œä¸»è¦ä¾é è¿™å¼ å›¾ï¼Œå…¶ä»–ç»†èŠ‚åœ¨ç¼–ç æ—¶å®ç°ã€‚</p><p><code>Compiler.java</code>è¿™ä¸€ä¸»ç¨‹åºè°ƒç”¨<code>frontedn/Lexer.java</code>ä¸­çš„<code>getSymbol</code>æ–¹æ³•ã€‚åœ¨æ­¤æ¬¡ä½œä¸šä¸­ä¸»é€»è¾‘è¿˜æœªå®ç°ï¼Œå› æ­¤å¯ä»¥åœ¨<code>Compiler.java</code>ä¸­æš‚æ—¶ç¼–å†™æ»¡è¶³æœ¬æ¬¡ä½œä¸šçš„æµ‹è¯•é€»è¾‘ã€‚</p><h2 id="3-2-ç¼–ç å®Œæˆåçš„ä¿®æ”¹">3.2 ç¼–ç å®Œæˆåçš„ä¿®æ”¹</h2><h3 id="3-2-1-è®¾è®¡æ¨¡å¼çš„é€‰æ‹©ã€ç±»çš„è®¾è®¡">3.2.1 è®¾è®¡æ¨¡å¼çš„é€‰æ‹©ã€ç±»çš„è®¾è®¡</h3><ul><li>è¯æ³•åˆ†æå™¨<code>Lexer.java</code>é‡‡ç”¨å•ä¾‹æ¨¡å¼ï¼ˆé¥¿æ±‰å¼ï¼‰çš„è®¾è®¡æ¨¡å¼ï¼Œä½œä¸ºä¸€ä¸ªé™æ€ç±»å­˜æ”¾åˆ°ä¸»ç±»<code>Compiler.java</code>ä¸­ï¼Œå…¶æ–¹æ³•ä¹Ÿå¤šæ˜¯é™æ€æ–¹æ³•ï¼Œæœ€ä¸»è¦çš„æ˜¯<code>getToken</code>æ–¹æ³•ï¼›<br><img src="https://cdn.jsdelivr.net/gh/bush-cn/TyporaImages@main/img/2025/07/11/20250711101443.png" alt="image-20241014104957471"></li><li>å•è¯tokenä½œä¸ºä¸€ä¸ªç±»<code>Token</code>ï¼Œç±»å‹ä½œä¸ºå…¶å†…éƒ¨æšä¸¾ç±»<code>TokenType</code>ï¼›</li><li>ç¼–è¯‘é”™è¯¯çš„å¤„ç†ï¼š<code>CompilerError</code>æ˜¯ä¸€ä¸ª<code>Exception</code>çš„å­ç±»ï¼Œåœ¨<code>Lexer</code>ç­‰å„ä¸ªç»„ä»¶çš„æ–¹æ³•å¯ä»¥è¢«æŠ›å‡ºï¼Œåœ¨ä¸»ç±»<code>Compiler</code>ä¸­è¢«<code>try-catch</code>å¤„ç†ã€‚</li></ul><h3 id="3-2-2-å…¶ä»–æ›´æ”¹æˆ–BUG">3.2.2 å…¶ä»–æ›´æ”¹æˆ–BUG</h3><ol><li>æœ€å¤§çš„ç–å¿½æ˜¯å¿˜è®°æ·»åŠ å¤„ç†æ³¨é‡Šçš„ä»£ç äº†ï¼Œåº”è¯¥æŠŠè¯»å…¥<code>/</code>ç¬¦å·åçš„é€»è¾‘å•åˆ—å‡ºæ¥ã€‚</li><li>å¦å¤–ï¼Œåªè€ƒè™‘åˆ°å­—ç¬¦å¸¸é‡ä¸­åªæœ‰ä¸€ä¸ªå­—ç¬¦çš„æƒ…å†µäº†ï¼Œæ²¡æœ‰è€ƒè™‘åˆ°è½¬ä¹‰å­—ç¬¦</li></ol><h3 id="3-2-3-è¯­æ³•åˆ†æå®Œæˆåçš„æ”¹åŠ¨">3.2.3 è¯­æ³•åˆ†æå®Œæˆåçš„æ”¹åŠ¨</h3><ul><li>æœ€å¤§çš„æ”¹åŠ¨æ˜¯ï¼Œç”±è®¾è®¡ä¹‹åˆçš„ä¸€éæ‰«ææ”¹ä¸ºå¤šéæ‰«æ<ul><li>åœ¨è¯æ³•åˆ†ææ—¶ï¼Œè®¾è®¡é‡‡ç”¨ä¸€éæ‰«æï¼Œå³è¯­æ³•åˆ†æä¸­æ¯æ¬¡è°ƒç”¨è¯æ³•åˆ†æçš„æ¥å£<code>getToken()</code>å³è¿”å›ä¸‹ä¸€ä¸ªtokenã€‚<br>åœ¨è¯æ³•åˆ†æç¨‹åºå†…éƒ¨ä¸­ä½¿ç”¨<code>BufferedReader</code>çš„<code>mark()</code>å’Œ<code>reset()</code>ä¸¤ä¸ªæ–¹æ³•ç»„å®ç°å­—ç¬¦è¯»å–çš„å›é€€ï¼Œåœ¨è¯­æ³•åˆ†æå¼€å§‹æ—¶è®¡åˆ’åœ¨è°ƒç”¨<code>getToken()</code>æ¥å£çš„å¤–å±‚ä¹Ÿä½¿ç”¨è¿™ä¸¤ä¸ªæ–¹æ³•å®ç°tokençš„å›é€€å’Œé¢„è¯»ã€‚</li><li>ä½†æ˜¯è¿™æ ·ä¼šä½¿å¾—åœ¨æ¥å£å†…éƒ¨å†æ¬¡è°ƒç”¨<code>mark()</code>è¦†ç›–å¤–å±‚çš„<code>mark()</code>ä½¿å¾—æ— æ³•å›é€€tokenç­‰é—®é¢˜ï¼Œå› æ­¤æ”¹ä¸ºå¤šéæ‰«æï¼Œå³åœ¨è¯­æ³•åˆ†æå‰å…ˆå®Œæˆæ•´ä¸ªç¨‹åºçš„è¯æ³•åˆ†æå¾—åˆ°tokenåºåˆ—ï¼Œæ¥ä¸‹æ¥çš„è¯­æ³•åˆ†æä¾¿ä¸ç”¨é€šè¿‡æ“ä½œè¯»å–å™¨å›é€€tokenï¼ŒåŠŸèƒ½å®Œæˆè§£è€¦ã€‚</li></ul></li><li>ä¿®æ”¹äº†è¯æ³•åˆ†æè§£æå¤šè¡Œæ³¨é‡Šçš„éƒ¨åˆ†ï¼šåœ¨deå®Œè¯­æ³•åˆ†æçš„bugåï¼Œå…¬å…±æµ‹è¯•åº“å…¨è¿‡ä½†æµ‹è¯•ç‚¹16REï¼Œæœ€åå‘ç°æ˜¯è¯æ³•åˆ†æä¸­å¯¹å¤šè¡Œæ³¨é‡Šçš„è¯»å–æœ‰è¯¯</li></ul><h1 id="4-è¯­æ³•åˆ†æè®¾è®¡">4 è¯­æ³•åˆ†æè®¾è®¡</h1><h2 id="4-1-ç¼–ç å‰çš„è®¾è®¡">4.1 ç¼–ç å‰çš„è®¾è®¡</h2><ul><li>ä¸è¯æ³•åˆ†æç±»ä¼¼ï¼Œä½¿ç”¨å•ä¾‹æ¨¡å¼å®ç°<code>Parser.java</code></li><li>ä¸»è¦é‡‡ç”¨é€’å½’ä¸‹é™ç¨‹åºå®ç°</li><li>æ­¤å¤–é€šè¿‡é¢„è¯»è§£å†³å¤šä¸ªè§„åˆ™åŒ¹é…é—®é¢˜</li></ul><p>ä»¥ä¸‹æ˜¯ç¼–å†™é€’å½’ç¨‹åºæ—¶çš„è¾…åŠ©è¡¨æ ¼ï¼Œéƒ¨åˆ†éç»ˆç»“ç¬¦çš„FIRSTç•¥</p><table><thead><tr><th>éç»ˆç»“ç¬¦</th><th>FIRSTé›†</th><th>å®Œæˆ</th></tr></thead><tbody><tr><td>CompUnit</td><td>CONSTTK, INTTK, CHARTK, VOIDTK</td><td>V</td></tr><tr><td>Decl</td><td>CONSTTK, INTTK, CHARTK</td><td>V</td></tr><tr><td>FuncDef</td><td>VOIDTK, INTTK, CHARTK</td><td>V</td></tr><tr><td>MainFuncDef</td><td>INTTK</td><td>V</td></tr><tr><td>ConstDecl</td><td>CONSTTK</td><td>V</td></tr><tr><td>VarDecl</td><td>INT, CHAR</td><td>V</td></tr><tr><td>FuncType</td><td>'VOIDTK, INTTK, CHARTK</td><td>V</td></tr><tr><td>BType</td><td>INTTK, CHARTK</td><td>V</td></tr><tr><td>ConstDef</td><td></td><td>V</td></tr><tr><td>Ident</td><td>Vt</td><td>V</td></tr><tr><td>ConstInitVal</td><td></td><td>V</td></tr><tr><td>ConstExp</td><td></td><td>V</td></tr><tr><td>StringConst</td><td>Vt</td><td>V</td></tr><tr><td>AddExp</td><td></td><td>V</td></tr><tr><td>MulExp</td><td></td><td>V</td></tr><tr><td>UnaryExp</td><td>LPARENT, IDENFR, INTCON, CHRCON, PLUS, MINU, NOT</td><td>V</td></tr><tr><td>PrimaryExp</td><td>LPARENT, IDENFR, INTCON, CHRCON</td><td>V</td></tr><tr><td>FuncRParams</td><td></td><td>V</td></tr><tr><td>UnaryOp</td><td>PLUS, MINU, NOT</td><td>V</td></tr><tr><td>LVal</td><td>IDENFR</td><td>V</td></tr><tr><td>Number</td><td>INTCON</td><td>V</td></tr><tr><td>Character</td><td>CHRCON</td><td>V</td></tr><tr><td>IntConst</td><td>Vt</td><td>V</td></tr><tr><td>CharConst</td><td>Vt</td><td>V</td></tr><tr><td>VarDef</td><td></td><td>V</td></tr><tr><td>InitVal</td><td></td><td>V</td></tr><tr><td>Exp</td><td>LPARENT, IDENFR, INTCON, CHRCON, PLUS, MINU, NOT</td><td>V</td></tr><tr><td>FuncFParams</td><td>INTTK, CHARTK</td><td>V</td></tr><tr><td>FuncFParam</td><td>INTTK, CHARTK</td><td>V</td></tr><tr><td>Block</td><td>LPARENT</td><td>V</td></tr><tr><td>BlockItem</td><td></td><td>V</td></tr><tr><td>Stmt</td><td></td><td>V</td></tr><tr><td>ForStmt</td><td></td><td>V</td></tr><tr><td>Cond</td><td></td><td>V</td></tr><tr><td>LOrExp</td><td></td><td>V</td></tr><tr><td>LAndExp</td><td></td><td>V</td></tr><tr><td>EqExp</td><td></td><td>V</td></tr><tr><td>RelExp</td><td></td><td>V</td></tr></tbody></table><h2 id="4-2-ç¼–ç åçš„è®¾è®¡">4.2 ç¼–ç åçš„è®¾è®¡</h2><h3 id="4-2-1-è®¾è®¡æ¨¡å¼">4.2.1 è®¾è®¡æ¨¡å¼</h3><ul><li>è¯­æ³•åˆ†æå™¨<code>Parser.java</code>ä¸è¯æ³•åˆ†æå™¨ç±»ä¼¼ï¼Œé‡‡ç”¨é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼ï¼›</li><li>å•ä¾‹æ¨¡å¼çš„é™æ€æ–¹æ³•ä¸éé™æ€æ–¹æ³•çš„å®ç°æ•ˆæœç±»ä¼¼ï¼Œä½†ä¸ºäº†ç®€ä¾¿ï¼Œåœ¨è¯­æ³•æˆåˆ†ç±»ä¸­è¦é¢‘ç¹è°ƒç”¨çš„<code>getSymbol() currentSymbol()</code>ç­‰æ–¹æ³•è®¾ç½®ä¸ºé™æ€æ–¹æ³•ã€‚</li></ul><h3 id="4-2-2-é€’å½’ä¸‹é™è¯»å–é€»è¾‘">4.2.2 é€’å½’ä¸‹é™è¯»å–é€»è¾‘</h3><ul><li>åœ¨ä¸€ä¸ªç¨‹åºè¦è°ƒç”¨ä¸€ä¸ªåˆ†æå­ç¨‹åºå‰ï¼Œéœ€è¦ä½¿ç”¨<code>Parser.getSymbol()</code>è¯»å–ä¸€ä¸ªtoken</li><li>åœ¨åˆ†æå­ç¨‹åºé‡Œï¼Œåˆ†æå­ç¨‹åºä¼šé€’å½’åŒ¹é…æ‰€æœ‰tokenï¼Œä½†å¹¶ä¸ä¼šè¶…å‰è¯»å–ï¼ˆä¾‹å¦‚åˆ†æå­ç¨‹åºåªåŒ¹é…ä¸€ä¸ªç»ˆç»“ç¬¦å³ç»“æŸï¼Œåˆ™ä¸ä¼šè°ƒç”¨<code>Parser.getSymbol()</code>ï¼‰ï¼Œå› æ­¤ä¸€ä¸ªå­æˆåˆ†åˆ†æå®Œåï¼Œ<code>symbol</code>åœç•™åœ¨æœ€ååŒ¹é…åˆ°çš„é‚£ä¸ªtokenå¤„</li><li>æ¥ç€ç»§ç»­ä½¿ç”¨<code>Parser.getSymbol()</code>è¯»å–ä¸€ä¸ªtokenå¹¶è°ƒç”¨å‰©ä¸‹çš„åˆ†æå­ç¨‹åº</li><li>åœ¨é‡åˆ°ç»ˆç»“ç¬¦æ—¶ï¼ŒåŒ¹é…åä¸éœ€è¦ä½¿ç”¨<code>Parser.getSymbol()</code>ï¼Œå› ä¸ºé€’å½’è¿‡ç¨‹ç›¸å½“äºåœ¨åŒ¹é…ä¹‹å‰å·²ç»æ‰§è¡Œä¸€æ¬¡</li></ul><h3 id="4-2-3-ç±»è®¾è®¡">4.2.3 ç±»è®¾è®¡</h3><ul><li><p>å¯¹äºè¯­æ³•æ ‘çš„æ„å»ºï¼Œé¦–å…ˆè®¾è®¡äº†ä¸€ä¸ªè¯­æ³•æ ‘èŠ‚ç‚¹çš„æ¥å£<code>SyntaxNode.java</code>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SyntaxNode</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">parse</span><span class="params">()</span> <span class="keyword">throws</span> IOException;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">outputString</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¯¹äºæ¯ä¸ªè¯­æ³•æˆåˆ†ï¼Œå‡è®¾è®¡åŒåçš„ä¸€ä¸ªç±»å¹¶å®ç°ä»¥ä¸Šæ¥å£ï¼›</p><ul><li>å¯¹äºè¯¥è¯­æ³•æˆåˆ†çš„ä¸€æ¡è§„åˆ™ï¼Œè§„åˆ™å³éƒ¨è¯­æ³•æˆåˆ†ä½œä¸ºè¯¥ç±»çš„ä¸€ä¸ªå±æ€§å­˜å‚¨<ul><li>è‹¥æœ‰å¤šæ¡è§„åˆ™ï¼Œåˆ™æ ¹æ®FIRSTé›†çš„ä¸åŒåˆ’åˆ†æˆä¸åŒçš„å­ç±»ï¼Œè¶…ç±»å±æ€§ç±»å‹ä¸ºè¶…ç±»ï¼Œä½†åœ¨<code>parse()</code>æ–¹æ³•ä¸­æ ¹æ®å½“å‰ç¬¦å·é€‰æ‹©å®ä¾‹åŒ–ä¸åŒçš„å­ç±»ï¼ˆæ–¹æ³•é‡å†™å’Œå¤šæ€ï¼‰</li><li>è‹¥å³éƒ¨è¯­æ³•æˆåˆ†å¯é‡å¤å¤šæ¬¡ï¼Œåˆ™å­˜å‚¨å¯¹åº”çš„åˆ—è¡¨</li><li>è‹¥å³éƒ¨è¯­æ³•æˆåˆ†å¯é€‰ï¼Œåˆ™å€¼é<code>null</code>æ—¶è¡¨ç¤ºå­˜åœ¨ï¼Œå¦åˆ™ä¸å­˜åœ¨</li></ul></li><li>ç±»çš„<code>parse()</code>æ–¹æ³•ä¼šæ ¹æ®è¯­æ³•åˆ†æå™¨å½“å‰è§£æåˆ°çš„ç¬¦å·<code>Parser.currentSymbol()</code>å‘å‰è§£æï¼Œå¹¶è¿”å›è‡ªèº«ï¼ˆ<code>return this</code>ï¼‰</li><li>é¡¶å±‚è¯­æ³•æˆåˆ†è°ƒç”¨<code>parse()</code>æ–¹æ³•è§£ææ—¶ï¼Œä¸ºä¸‹å±‚è¯­æ³•æˆåˆ†å±æ€§èµ‹å€¼ä¸€ä¸ªè°ƒç”¨è¿‡è‡ªèº«<code>parse()</code>æ–¹æ³•çš„<code>new</code>å¯¹è±¡ï¼Œè¿™æ ·å°±å®ç°äº†é€’å½’</li><li>æ¯ä¸ªè¯­æ³•æˆåˆ†çš„<code>outputString()</code>æ–¹æ³•æŒ‰ç…§åŒæ ·çš„é€’å½’é€»è¾‘è¿”å›éœ€è¦è¾“å‡ºçš„å†…å®¹å’Œæ ¼å¼</li></ul></li><li><p>ä¸ºäº†ä½¿å¾—ç»“æ„æ¸…æ™°ï¼ŒæŒ‰åŠŸèƒ½å°†è¯­æ³•æˆåˆ†åŒ…ä¸º<code>declaration</code>, <code>expression</code>, <code>function</code>, <code>statement</code>, <code>terminal</code>äº”ä¸ªåŒ…</p></li><li><p>å¯¹äºæœ‰å¤šæ¡è§„åˆ™çš„è¯­æ³•æˆåˆ†çš„å­ç±»ä¹Ÿåˆ†åŒ…ç®¡ç†ï¼Œå¦‚<code>stmts</code>, <code>unaryexps</code>, <code>primaryexps</code></p></li></ul><h3 id="4-2-4-FIRSTé›†å†²çªè§£å†³æ–¹æ¡ˆ">4.2.4 FIRSTé›†å†²çªè§£å†³æ–¹æ¡ˆ</h3><ul><li>è‹¥FIRSTé›†å†²çªï¼Œå¯ä»¥ç±»ä¼¼çš„æŸ¥çœ‹è§„åˆ™çš„SECONDé›†ï¼Œå¹¶ä½¿ç”¨<code>preReadNext()</code>é¢„è¯»ä¸€ä¸ªtokençš„æ–¹æ³•åŒºåˆ†ï¼ˆå¤§éƒ¨åˆ†å¯ä»¥è§£å†³ï¼‰</li><li>ä»…åœ¨<code>CompUnit-&gt;Decl|FuncDef</code>ï¼ŒSECONDé›†ä»å†²çªï¼Œåˆ™<code>preReadNextNext()</code>é¢„è¯»ä¸‹ä¸‹ä¸ªtokenå¯ä»¥åŒºåˆ†</li><li>ä»…åœ¨<code>Stmt</code>çš„æ¨å¯¼æ—¶ï¼Œä½¿ç”¨SECONDé›†ä»ç„¶éš¾ä»¥åŒºåˆ†ï¼Œæ­¤å¤„é‡‡ç”¨å›æº¯tokençš„æ–¹æ³•è§£å†³<ul><li>åœ¨å›æº¯æ—¶éœ€è¦åŒæ—¶å›æº¯æŠ›å‡ºçš„é”™è¯¯ï¼ä¸ç„¶ä¼šå‡ºç°å¤šè¾“å‡ºé”™è¯¯çš„æƒ…å†µ</li></ul></li></ul><h3 id="4-2-5-å·¦é€’å½’æ–‡æ³•è§£å†³æ–¹æ¡ˆ">4.2.5 å·¦é€’å½’æ–‡æ³•è§£å†³æ–¹æ¡ˆ</h3><ul><li><p>å¯¹äºå·¦é€’å½’æ–‡æ³•ï¼Œå°†è§„åˆ™æ”¹å†™ä¸ºæ‰©å……çš„BNFèŒƒå¼ã€‚<br>ä»¥<code>MulExp â†’ UnaryExp | MulExp ('*' | '/' | '%') UnaryExp</code>è¿™æ¡è§„åˆ™ä¸ºä¾‹ï¼Œæ¶ˆé™¤å·¦é€’å½’åå¾—åˆ°<br><code>MulExp â†’ UnaryExp &#123; ('*' | '/' | '%') UnaryExp &#125;</code></p></li><li><p>ä»¥è¿™æ¡è§„åˆ™ä¸ºä¾‹ï¼Œè¿™äº›å…·æœ‰é€’å½’æ–‡æ³•çš„ç±»å±æ€§è®¾ç½®ä¸ºä¸€ä¸ª<code>UnaryExp</code>ç±»å’Œä¸€ä¸ªå…ƒç´ ä¸º<code>OpUnaryExp</code>ç±»çš„åˆ—è¡¨åˆ†åˆ«è¡¨ç¤ºEBNFèŒƒå¼çš„ä¸¤éƒ¨åˆ†</p></li><li><p>å…¶ä¸­<code>OpUnaryExp</code>ä¸ºé™æ€å†…éƒ¨ç±»ï¼Œç›¸å½“äºä¸€ä¸ªäºŒå…ƒç»„ï¼ŒåŒ…å«æ¯ä¸ªé‡å¤çš„ç¬¦å·<code>op</code>å’Œ<code>unaryExp</code></p></li><li><p>è‡³æ­¤ä¾¿æ¶ˆé™¤å·¦é€’å½’æ–‡æ³•ï¼Œåœ¨åˆ†ææ–¹æ³•ä¸­ä¸ä¼šé€’å½’è°ƒç”¨è‡ªå·±ï¼Œè€Œæ˜¯ä¸æ–­è°ƒç”¨ä¸‹ä¸€å±‚çš„è¯­æ³•æˆåˆ†åˆ†ææ–¹æ³•ï¼›å¹¶ä¸”åœ¨è¾“å‡ºæ–¹æ³•<code>outputString()</code>ä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç±»ä¼¼é€»è¾‘è¾“å‡ºæ­£ç¡®çš„è¯­æ³•æ ‘ç»“æ„</p></li><li><p>ä»<code>UnaryExp-&gt;MulExp-&gt;AddExp-&gt;RelExp-&gt;EqExp-&gt;LAndExp-&gt;LorExp</code>å„å±‚æ¬¡é—´å…³ç³»æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œå› æ­¤ç¼–å†™å®Œ<code>UnaryExp-&gt;MulExp</code>åï¼Œå¯é€šè¿‡ä»£ç æŸ¥æ‰¾æ›¿æ¢è¿ç§»å¾—åˆ°åé¢çš„å±‚é—´å…³ç³»ï¼›æ‰‹ç¨¿å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/bush-cn/TyporaImages@main/img/2025/07/11/20250711101500.jpg" alt="07fae8c98c7d24c7990122f1fc798d0"></p></li></ul><h3 id="4-2-6-å…³äºé”™è¯¯å¤„ç†çš„ä¿®æ”¹">4.2.6 å…³äºé”™è¯¯å¤„ç†çš„ä¿®æ”¹</h3><ul><li><p>åœ¨ä¹‹å‰çš„è¯æ³•åˆ†æè®¾è®¡æ—¶ï¼Œè®¾è®¡äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„<code>CompileError</code>å¹¶ç»§æ‰¿<code>Exception</code>ç±»ï¼Œé”™è¯¯é€šè¿‡throwæŠ›å‡ºè‡ª<code>CompileError</code>æŠ¥é”™å¹¶åœ¨ä¸Šå±‚å¤„ç†ï¼Œä½†åœ¨æ­¤æ¬¡ç¼–ç æ—¶å‘ç°ï¼š</p><ul><li>è¯­æ³•åˆ†æä¸è¯æ³•åˆ†æä¸åŒï¼Œè¯æ³•åˆ†ææ˜¯é¡ºåºæ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨throwæŠ›å‡ºå¼‚å¸¸ï¼Œåœ¨é¡¶å±‚è®°å½•é”™è¯¯å¹¶ç»§ç»­æ‰§è¡Œ</li><li>è€Œè¯­æ³•åˆ†ææ˜¯é€’å½’è°ƒç”¨çš„ï¼Œä¸èƒ½å¤Ÿè¢«ä¸­æ–­ï¼Œå› æ­¤æŠŠé”™è¯¯æš‚å­˜è€Œä¸æ˜¯æŠ›å‡º</li></ul></li><li><p>å¹¶ä¸”ç”±ä¸€éæ‰«ææ”¹ä¸ºå¤šéæ‰«æä¹Ÿä¸èƒ½é¡ºåºåœ°ä¾æ¬¡å¤„ç†é”™è¯¯ã€‚å› æ­¤ï¼Œä¿®æ”¹å¤„ç†é€»è¾‘ï¼Œå°†æ‰€æœ‰é”™è¯¯å…ˆæš‚å­˜å¹¶ç›´æ¥å¤„ç†ï¼Œæœ€åä¸€èµ·è¾“å‡ºã€‚</p></li><li><p>éœ€è¦æ³¨æ„çš„æ˜¯ä¸€éæ‰«æé”™è¯¯æŠ›å‡ºçš„é¡ºåºæ˜¯æŒ‰è¡Œæ•°å‡åºçš„ï¼Œä½†å¤šéæ‰«æçš„é¡ºåºä¸€æ¬¡æ˜¯è¯æ³•åˆ†æé”™è¯¯ã€è¯­æ³•åˆ†æé”™è¯¯ã€è¯­ä¹‰åˆ†æé”™è¯¯ç­‰ï¼Œéœ€è¦åœ¨è¾“å‡ºå‰æŒ‰è¡Œæ•°æ’åºå†è¾“å‡º</p></li></ul><h1 id="5-è¯­ä¹‰åˆ†æè®¾è®¡">5 è¯­ä¹‰åˆ†æè®¾è®¡</h1><h2 id="5-1-ç¼–ç å‰çš„è®¾è®¡">5.1 ç¼–ç å‰çš„è®¾è®¡</h2><p>åœ¨è¿™ä¸€é˜¶æ®µï¼Œä¸éœ€è¦è¿›è¡Œä¸­é—´ä»£ç ç”Ÿæˆï¼Œåªéœ€è¦è¾“å‡ºç¬¦å·è¡¨å†…å®¹ã€‚ä¸”æŒ‡å¯¼ä¹¦åœ¨ä¸­é—´ä»£ç ç”Ÿæˆè¿™ä¸€ç« å†™é“ï¼š</p><blockquote><p>å¯¹äºç¬¦å·è¡¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¯ä»¥æ˜¯éå† AST åï¼Œç”Ÿæˆä¸€å¼ <strong>å®Œæ•´çš„ç¬¦å·è¡¨</strong>ï¼Œç„¶åå†è¿›è¡Œä»£ç ç”Ÿæˆï¼›ä¹Ÿå¯ä»¥æ˜¯åœ¨éå†è¿‡ç¨‹ä¸­åˆ›å»º<strong>æ ˆå¼ç¬¦å·è¡¨</strong>ï¼Œéšç€éå†è¿‡ç¨‹åˆ›å»ºå’Œé”€æ¯ï¼ŒåŒæ—¶è¿›è¡Œä»£ç ç”Ÿæˆã€‚</p></blockquote><p>å› æ­¤ï¼Œæš‚æ—¶è®¾è®¡ä¸ºå…ˆéå†ASTç”Ÿæˆæ ‘å½¢ç¬¦å·è¡¨ï¼Œå†åœ¨åé¢çš„ä¸­é—´ä»£ç ç”Ÿæˆæ—¶åšå¢é‡å¼å¼€å‘ã€‚</p><hr><p>é‡‡ç”¨è®¿é—®è€…æ¨¡å¼ï¼š</p><ul><li>è®¾è®¡ä¸€ä¸ªå•ä¾‹<code>Visitor</code>ç±»ï¼Œå…¶åŒ…å«ä¸åŒè¯­æ³•æˆåˆ†çš„<code>visit()</code>æ–¹æ³•ï¼Œè§£æè¯­æ³•æ ‘å¹¶è°ƒç”¨ä¸‹å±‚çš„<code>visit()</code>æ–¹æ³•ã€‚</li><li>ä»…<code>visit(CompUnit compUnit)</code>æ–¹æ³•ä¸º<code>public</code>ä»¥ä¾¿å¤–å±‚è°ƒç”¨ï¼Œå…¶ä½™è¯­æ³•æˆåˆ†çš„<code>visit()</code>æ–¹æ³•è®¾ç½®ä¸º<code>private</code>è¢«å…¶è°ƒç”¨ã€‚</li></ul><h2 id="5-2-ç¼–ç åçš„è®¾è®¡">5.2 ç¼–ç åçš„è®¾è®¡</h2><h3 id="5-2-1-ç¬¦å·å’Œç¬¦å·è¡¨çš„ç±»è®¾è®¡">5.2.1 ç¬¦å·å’Œç¬¦å·è¡¨çš„ç±»è®¾è®¡</h3><ul><li><p>ç¬¦å·ç±»<code>Symbol</code>è®¾ç½®ä¸ºæŠ½è±¡ç±»ï¼š<code>ConstInt, ConstChar, ConstIntArray, ConstCharArray, ConstInt, ConstChar, ConstIntArray, ConstCharArray</code>è¿™8ç§ç¬¦å·æ¯ç§å„è®¾ç½®ä¸€ä¸ªå­ç±»<code>xxxSymbol</code>ç»§æ‰¿<code>Symbol</code>ï¼›<code>IntFunc, CharFunc, VoidFunc</code>è¿™3ç§ç¬¦å·è®¾è®¡ä¸€ä¸ªå­ç±»<code>FuncSymbol</code>ï¼›å…±9ä¸ªç»§æ‰¿ã€‚</p></li><li><p>ç¬¦å·è¡¨éœ€è¦ç»´æŒæ ‘çŠ¶ç»“æ„ï¼Œå› æ­¤æ·»åŠ <code>fatherTable</code>è¿™ä¸€å±æ€§ã€‚æ„é€ æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">SymbolTable</span><span class="params">(SymbolTable fatherTable)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.fatherTable = fatherTable;</span><br><span class="line">    <span class="built_in">this</span>.scopeId = scopeIdCounter++;</span><br><span class="line">    fatherTable.childrenTables.add(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="title function_">SymbolTable</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.fatherTable = <span class="literal">null</span>;</span><br><span class="line">    <span class="built_in">this</span>.scopeId = scopeIdCounter++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­æ ¹ç¬¦å·è¡¨ä½œä¸ºé™æ€å±æ€§å­˜å‚¨ä»¥ä¾¿è¾“å‡ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">SymbolTable</span> <span class="variable">ROOT</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SymbolTable</span>(); <span class="comment">// æ ¹ç¬¦å·è¡¨ï¼Œå³å…¨å±€ç¬¦å·è¡¨</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="5-2-2-è®¿é—®è€…è®¾è®¡">5.2.2 è®¿é—®è€…è®¾è®¡</h3><ul><li>è®¿é—®è€…æ€»ä½“ç»“æ„ä¸ #5.1 ç¼–ç å‰çš„è®¾è®¡ç›¸åŒï¼›</li><li>åœ¨è®¿é—®è€…ä¸­ç»´æŠ¤ä¸€ä¸ª<code>curSymbolTab</code>å±æ€§ä¿å­˜å½“å‰çš„ç¬¦å·è¡¨ï¼›</li><li>å¦æœ‰å…¶ä»–å±æ€§ç”¨æ¥è¾…åŠ©è¯­ä¹‰åˆ†æï¼ˆç›´æ¥ä½œä¸ºVisitorå±æ€§å°±ä¸ç”¨åœ¨æ–¹æ³•ä¸­ä¼ é€’å‚æ•°äº†ï¼‰ã€‚</li></ul><h3 id="5-2-3-è¯­ä¹‰åˆ†æåçš„æ”¹åŠ¨">5.2.3 è¯­ä¹‰åˆ†æåçš„æ”¹åŠ¨</h3><ul><li>è§£è€¦è¯æ³•åˆ†æå™¨å’Œè¯­æ³•åˆ†æå™¨ï¼Œä¼˜åŒ–äº†å¯¹å¤–æ¥å£</li><li>ä¸ºè¯­æ³•æˆåˆ†å±æ€§æ·»åŠ Getter</li><li>UnaryExp â†’ UnaryOp UnaryExpè¿™æ¡è§„åˆ™ä¸åº”æ‹†åˆ†å­ç±»è€Œåº”æŠŠUnaryOpä½œä¸ºUnaryExpçš„å±æ€§</li><li>é‡æ„å¤šæ¡è§„åˆ™è¯­æ³•æˆåˆ†ï¼šå°†Stmtã€BlockItemã€PrimaryExpä¸­çš„è‡ªåå±æ€§åˆ å»ï¼›å°†UnaryExpä¸­çš„å±æ€§æ›´åä¸ºUnaryExpWithoutOpã€‚è¿™æ ·é¿å…äº†åœ¨è¯­ä¹‰åˆ†ææ—¶ï¼Œä½¿ç”¨<code>unaryExp.getUnaryExp(), primaryExp.getPrimaryExp(), stmt.getStmt() instanceof ReturnStmt</code>ç­‰ç­‰å†—ä½™ä¸”æ˜“å‡ºé”™çš„è°ƒç”¨ã€‚</li></ul><h3 id="5-2-4-å®Œæˆåçš„æ€è€ƒ">5.2.4 å®Œæˆåçš„æ€è€ƒ</h3><p>ç›¸æ¯”äºè¯­æ³•åˆ†æï¼Œè¿™æ¬¡çš„ä¸»è¦ä»£ç å‡åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸‹ï¼ˆ<code>Visitor.java</code>ï¼‰ï¼Œè€¦åˆåº¦é«˜ã€æ¨¡å—åŒ–å·®ã€éš¾ä»¥é˜…è¯»å’Œè°ƒè¯•ã€‚ä½†ç”±äºè¿™æ¬¡åªæ˜¯éƒ¨åˆ†çš„è¯­ä¹‰åˆ†æï¼Œä¸æ¶‰åŠä¸­é—´ä»£ç ç”Ÿæˆï¼Œå› æ­¤æœŸå¾…åœ¨åé¢çš„è¿­ä»£ä¸­ä¼˜åŒ–ç»“æ„ã€è§£è€¦åˆã€‚</p><h1 id="6-ä»£ç ç”Ÿæˆè®¾è®¡">6 ä»£ç ç”Ÿæˆè®¾è®¡</h1><h2 id="6-1-ç¼–ç å‰çš„è®¾è®¡">6.1 ç¼–ç å‰çš„è®¾è®¡</h2><h3 id="6-1-1-ä¸­é—´ä»£ç ç”Ÿæˆè®¾è®¡">6.1.1 ä¸­é—´ä»£ç ç”Ÿæˆè®¾è®¡</h3><p>æŒ‰ç…§æ•™ç¨‹çš„æ„å»ºå•å…ƒè®¾ç½®ç›¸å…³ç±»ï¼š</p><img src="https://cdn.jsdelivr.net/gh/bush-cn/TyporaImages@main/img/2025/07/11/20250711101617.png" alt="img" style="zoom:50%;" /><p>ç±»é‡Œå‡å­˜æ”¾åˆå§‹åŒ–çš„å€¼ï¼Œä»…ä»…ç”¨äºè½¬æˆLLVM IRæ–‡æœ¬ã€‚å®é™…è¦è¾“å‡ºå¸¸é‡çš„å€¼åº”å·®ç¬¦å·è¡¨ã€‚</p><p>æŒ‡ä»¤ï¼š</p><table><thead><tr><th>LLVM IR</th><th>ä½¿ç”¨æ–¹æ³•</th><th>ç®€ä»‹</th></tr></thead><tbody><tr><td><code>add</code></td><td><code>&lt;result&gt; = add &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;</code></td><td>/</td></tr><tr><td><code>sub</code></td><td><code>&lt;result&gt; = sub &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;</code></td><td>/</td></tr><tr><td><code>mul</code></td><td><code>&lt;result&gt; = mul &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;</code></td><td>/</td></tr><tr><td><code>sdiv</code></td><td><code>&lt;result&gt; = sdiv &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;</code></td><td>æœ‰ç¬¦å·é™¤æ³•</td></tr><tr><td><code>srem</code></td><td><code>&lt;result&gt; = srem &lt;baseType&gt; &lt;op1&gt;, &lt;op2&gt;</code></td><td>æœ‰ç¬¦å·å–ä½™</td></tr><tr><td><code>icmp</code></td><td><code>&lt;result&gt; = icmp &lt;cond&gt; &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;</code></td><td>æ¯”è¾ƒæŒ‡ä»¤</td></tr><tr><td><code>and</code></td><td><code>&lt;result&gt; = and &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;</code></td><td>æŒ‰ä½ä¸</td></tr><tr><td><code>or</code></td><td><code>&lt;result&gt; = or &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;</code></td><td>æŒ‰ä½æˆ–</td></tr><tr><td><code>call</code></td><td><code>&lt;result&gt; = call [ret attrs] &lt;ty&gt; &lt;name&gt;(&lt;...args&gt;)</code></td><td>å‡½æ•°è°ƒç”¨</td></tr><tr><td><code>alloca</code></td><td><code>&lt;result&gt; = alloca &lt;baseType&gt;</code></td><td>åˆ†é…å†…å­˜</td></tr><tr><td><code>load</code></td><td><code>&lt;result&gt; = load &lt;ty&gt;, ptr &lt;pointer&gt;</code></td><td>è¯»å–å†…å­˜</td></tr><tr><td><code>store</code></td><td><code>store &lt;ty&gt; &lt;initValue&gt;, ptr &lt;pointer&gt;</code></td><td>å†™å†…å­˜</td></tr><tr><td><code>getelementptr</code></td><td><code>&lt;result&gt; = getelementptr &lt;ty&gt;, ptr &lt;ptrval&gt;&#123;, &lt;ty&gt; &lt;idx&gt;&#125;*</code></td><td>è®¡ç®—ç›®æ ‡å…ƒç´ çš„ä½ç½®ï¼ˆæ•°ç»„éƒ¨åˆ†ä¼šå•ç‹¬è¯¦ç»†è¯´æ˜ï¼‰</td></tr><tr><td><code>phi</code></td><td><code>&lt;result&gt; = phi [fast-math-flags] &lt;ty&gt; [&lt;val0&gt;, &lt;label0&gt;], ...</code></td><td>/</td></tr><tr><td><code>zext..to</code></td><td><code>&lt;result&gt; = zext &lt;ty&gt; &lt;initValue&gt; to &lt;ty2&gt;</code></td><td>å°† <code>ty</code> çš„ <code>initValue</code> çš„ baseType æ‰©å……ä¸º <code>ty2</code>ï¼ˆzero extendï¼‰</td></tr><tr><td><code>trunc..to</code></td><td><code>&lt;result&gt; = trunc &lt;ty&gt; &lt;initValue&gt; to &lt;ty2&gt;</code></td><td>å°† <code>ty</code> çš„ <code>initValue</code> çš„ baseType ç¼©å‡ä¸º <code>ty2</code>ï¼ˆtruncateï¼‰</td></tr><tr><td><code>br</code></td><td><code>br i1 &lt;cond&gt;, label &lt;iftrue&gt;, label &lt;iffalse&gt;</code> <code>br label &lt;dest&gt;</code></td><td>æ”¹å˜æ§åˆ¶æµ</td></tr><tr><td><code>ret</code></td><td><code>ret &lt;baseType&gt; &lt;initValue&gt; </code>, <code>ret void</code></td><td>é€€å‡ºå½“å‰å‡½æ•°ï¼Œå¹¶è¿”å›å€¼</td></tr></tbody></table><ul><li>åœ¨ç”Ÿæˆå¯¹åº”æŒ‡ä»¤æ—¶ï¼Œå°†slotåŠ å…¥å‡½æ•°åŸŸã€‚ä¾‹å¦‚åœ¨<code>visitAddExp</code>ä¸­ï¼Œä»…åœ¨åœ¨ç”ŸæˆaddæŒ‡ä»¤æ—¶å°†resultä½œä¸ºæ–°slotåŠ å…¥å‡½æ•°åŸŸï¼Œå…¶ä»–slotå‡åœ¨è°ƒç”¨çš„<code>visitMulExp</code>ä¸­å·²åŠ å…¥å‡½æ•°åŸŸã€‚</li><li>ç¬¦å·ç±»ä¸­æ–°å¢addresså­—æ®µï¼Œå­˜æ”¾ç¬¦å·åˆ†é…åˆ°çš„åœ°å€ç©ºé—´</li><li>æˆ‘ä»¬è§„å®šæ•°ç»„ååªç”¨æ¥ï¼ˆ1ï¼‰å‡½æ•°ä¼ å‚ï¼ˆæ­¤æ—¶åº”ç”±FuncRParamä¸€è·¯æ¨å¯¼è‡³Identï¼Œä¸å­˜åœ¨ä»»ä½•å…¶ä»–ç¬¦å·ï¼‰ï¼Œï¼ˆ2ï¼‰é€šè¿‡ç´¢å¼•å–æ•°ç»„é‡Œé¢çš„å€¼ã€‚</li></ul><table><thead><tr><th></th><th>å…¨å±€ä½œç”¨åŸŸ</th><th>å±€éƒ¨ä½œç”¨åŸŸ</th><th>å…±æ€§</th></tr></thead><tbody><tr><td><strong>å¸¸é‡</strong></td><td></td><td></td><td>å•ä¸ªå¸¸é‡å’Œå¸¸é‡æ•°ç»„å‡éœ€ç»™å®š<code>ConstExp</code>ï¼ˆå³å¯åœ¨ç¼–è¯‘æ—¶è®¡ç®—çš„ï¼‰åˆå§‹å€¼</td></tr><tr><td><strong>å˜é‡</strong></td><td>è‹¥æœ‰åˆå§‹å€¼ï¼Œåˆ™å¿…é¡»æ˜¯å¯è®¡ç®—çš„<code>ConstExp</code>ï¼›è‹¥æ— åˆå§‹å€¼ï¼Œç½®é›¶</td><td>å¯ä»¥æ˜¯ä¸å¯è®¡ç®—çš„<code>Exp</code></td><td>å¯ä»¥ä¸å¸¦åˆå§‹å€¼</td></tr><tr><td>å…±æ€§</td><td>@å£°æ˜ï¼Œåœ¨é¡¶å±‚ï¼Œå±äº<code>GlobalValue</code>ï¼›éœ€è¦ä¿å­˜åˆå§‹å€¼</td><td>å¸¸é‡å’Œå˜é‡jun<code>alloca</code>æŒ‡ä»¤å£°æ˜ï¼Œä»…ä¿å­˜å¯¹åº”çš„è™šæ‹Ÿå¯„å­˜å™¨</td><td></td></tr></tbody></table><ul><li><p>ä¸€ä¸ªifè¯­å¥å°†å½“å‰åŸºæœ¬å—åˆ†ä¸º4ä¸ªåŸºæœ¬å—ï¼ˆæœ‰elseï¼‰æˆ–3ä¸ªåŸºæœ¬å—ï¼ˆæ— elseï¼‰</p></li><li><p>ä¸€ä¸ªforè¯­å¥å°†å½“å‰åŸºæœ¬å—åˆ†ä¸º5å—</p><table><thead><tr><th>B1</th><th>preForStmtï¼ˆè‹¥æ— preForStmtï¼Œåˆ™æ— B1ï¼‰</th></tr></thead><tbody><tr><td>B2</td><td>Condï¼Œæ¡ä»¶è·³è½¬æŒ‡ä»¤B3ã€B5ï¼ˆè‹¥æ— Condï¼Œåˆ™æ˜¯æ— æ¡ä»¶è·³è½¬B3ï¼‰</td></tr><tr><td>B3</td><td>Stmtï¼Œæ— æ¡ä»¶è·³è½¬B4</td></tr><tr><td>B4</td><td>postStmtï¼Œæ— æ¡ä»¶è·³è½¬B2 ï¼ˆ<strong>continueè¯­å¥è·³ç‚¹</strong>ï¼‰</td></tr><tr><td>B5</td><td>ï¼ˆendï¼‰ï¼ˆ<strong>breakè¯­å¥è·³ç‚¹</strong>ï¼‰</td></tr></tbody></table></li><li><p>æš‚æ—¶ä¸è€ƒè™‘SSAå½¢å¼å’ŒphiæŒ‡ä»¤ï¼Œç¬¦å·è¡¨å­˜å‚¨åœ°å€ï¼Œæ¯æ¬¡å¼•ç”¨å˜é‡ä½¿ç”¨loadï¼Œèµ‹å€¼å˜é‡ä½¿ç”¨storeã€‚</p></li><li><p>å‡½æ•°ä¼ é€’çš„éæŒ‡é’ˆå‚æ•°ä¸èƒ½ä¿®æ”¹ï¼Œå› æ­¤<strong>åœ¨è¿›å…¥å‡½æ•°æ—¶</strong>ï¼Œéœ€è¦ä¸ºå…¶allocaä¸€ä¸ªåœ°å€ç©ºé—´ï¼Œå¹¶å°†ä¼ è¿›çš„å‚æ•°èµ‹ç»™å®ƒï¼ˆç›¸å½“äºå˜é‡å®šä¹‰ï¼‰ã€‚<strong>ä¸èƒ½åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶å†åˆ†é…å¹¶èµ‹å€¼</strong>ï¼Œå› ä¸ºå¦‚æœåœ¨å¾ªç¯ä½“å†…ä½¿ç”¨è¯¥å˜é‡ï¼Œåˆ™ä¼šå¯¼è‡´æ­»å¾ªç¯ï¼š</p></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">fun2</span><span class="params">(<span class="type">int</span> a)</span>  <span class="comment">// a=6</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> b = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> num = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (;a &gt;= <span class="number">1</span>;) <span class="comment">// ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶</span></span><br><span class="line">    &#123;</span><br><span class="line">        b = b * a;</span><br><span class="line">        a = a - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (a == <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (a != <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            num = num + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;a! = %d, num = %d\n&quot;</span>, b, num);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">define dso_local i32 @fun2(i32 %0) &#123;</span><br><span class="line">1:</span><br><span class="line">%2 = alloca i32</span><br><span class="line">store i32 1, i32* %2</span><br><span class="line">%3 = alloca i32</span><br><span class="line">store i32 1, i32* %3</span><br><span class="line">br label %4</span><br><span class="line">4:</span><br><span class="line">%5 = icmp sge i32 %0, 1; forå¾ªç¯çš„condå—ã€‚è‹¥ä¸åˆ†é…ï¼Œè¿™é‡Œä¼šå§‹ç»ˆä¼šç”¨açš„æ—§å€¼ï¼›è€Œå¦‚æœåœ¨æ­¤åˆ†é…å¹¶èµ‹å€¼ï¼Œåˆ™ä¼šä¸€ç›´èµ‹ç›¸åŒçš„å€¼ç»™a</span><br><span class="line">%6 = zext i1 %5 to i32</span><br><span class="line">%7 = icmp ne i32 %6, 0</span><br><span class="line">br i1 %7, label %8, label %26</span><br></pre></td></tr></table></figure><h3 id="6-1-2-åç«¯ä»£ç ç”Ÿæˆè®¾è®¡">6.1.2 åç«¯ä»£ç ç”Ÿæˆè®¾è®¡</h3><ul><li><p>ä»¥å‡½æ•°ä¸ºå•ä½ç®¡ç†æ ˆå¸§ã€åˆ†é…å…¨å±€å¯„å­˜å™¨ï¼Œä»¥åŸºæœ¬å—ä¸ºå•ä½åˆ†é…ä¸´æ—¶å¯„å­˜å™¨ï¼ˆå¯„å­˜å™¨åˆ†é…å®ç°åœ¨æ–‡æ¡£çš„ä¼˜åŒ–éƒ¨åˆ†ï¼‰</p></li><li><p>åœ¨LLVM IRä¸­ï¼Œå­˜åœ¨i32å’Œi8ä¸¤ç§ç±»å‹ï¼Œä½†æ˜¯åœ¨MIPSä¸­ï¼Œå‡ä½¿ç”¨32ä½å­—å­˜å‚¨ã€‚</p></li><li><p>æ ˆå¸§ç»“æ„ï¼ˆç®€åŒ–äº†éƒ¨åˆ†ç»“æ„ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æ ˆå¸§ç»“æ„ï¼ˆä»é«˜åˆ°ä½å¢é•¿ï¼‰ï¼š</span><br><span class="line"> * sp+size-&gt;|- - - - - - - |   ä»¥ä¸‹ä¸ºæ ˆå¸§å†…å®¹ï¼š</span><br><span class="line"> *          |  å±€éƒ¨å˜é‡      |</span><br><span class="line"> *          |- - - - - - - |   ä»¥ä¸‹è°ƒç”¨å‡½æ•°åéœ€ç”Ÿæˆçš„ï¼š</span><br><span class="line"> *          |  è¿”å›åœ°å€      |</span><br><span class="line"> *          |- - - - - - - |</span><br><span class="line"> *          |  ï¼ˆä¿ç•™å¯„å­˜å™¨ï¼‰ |   ï¼ˆå³å…¨å±€å¯„å­˜å™¨s0-s7ï¼‰</span><br><span class="line"> *          |- - - - - - - |</span><br><span class="line"> *          |  è¢«è°ƒç”¨è€…å‚æ•°  |   ï¼ˆåŒ…æ‹¬a0-a3ã€‚ä»é«˜åˆ°ä½ï¼Œå…ˆå‹æœ€åä¸€ä¸ªå‚æ•°ï¼‰</span><br><span class="line"> *  sp-&gt;    |- - - - - - - |</span><br><span class="line"> */</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bush-cn/TyporaImages@main/img/2025/07/11/20250711101641.png" alt="mips-stackframe"></p></li><li><p>å‡½æ•°è°ƒç”¨è®¾è®¡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* ã€è°ƒç”¨è€…åŠ¨ä½œã€‘ï¼š</span><br><span class="line">*          1. ä¿å­˜raå¯„å­˜å™¨</span><br><span class="line">*          2. å°†åç»­éœ€è¦ç”¨åˆ°çš„ä¿ç•™å¯„å­˜å™¨å€¼å­˜å…¥æ ˆä¸­</span><br><span class="line">*          3. å°†å‚æ•°å‹æ ˆã€[å¦‚æœa0-a3æœ‰å†²çªï¼ˆéœ€è¦ä¼ é€’ä¸”åç»­è¦ç”¨åˆ°ï¼‰ï¼Œåˆ™éœ€è¦ä¿å­˜å¹¶æ¢å¤]</span><br><span class="line">*          4. æ›´æ”¹spå¯„å­˜å™¨çš„å€¼</span><br><span class="line">*          5. ä½¿ç”¨jalæŒ‡ä»¤</span><br><span class="line">*          6. å–v0è¿”å›å€¼å¹¶å¡«å…¥ç›¸åº”å¯„å­˜å™¨ï¼ˆè‹¥æœ‰è¿”å›å€¼ï¼‰</span><br><span class="line">*          7. å°†spå¯„å­˜å™¨çš„å€¼æ¢å¤</span><br><span class="line">*          8. æ¢å¤raå¯„å­˜å™¨å€¼ã€ä¿å­˜çš„å¯„å­˜å™¨å€¼ã€æ¢å¤å†²çªçš„a0-a3å¯„å­˜å™¨å€¼</span><br><span class="line">*          9. ç»§ç»­å…¶ä»–æŒ‡ä»¤â€¦â€¦</span><br><span class="line">*  ã€è¢«è°ƒç”¨è€…åŠ¨ä½œã€‘ï¼š</span><br><span class="line">*          1. æ‰§è¡Œå‡½æ•°é€»è¾‘ï¼Œè‹¥ä½¿ç”¨å‚æ•°åˆ™å–å¯„å­˜å™¨å€¼æˆ–æ ˆä¸Šå€¼</span><br><span class="line">*          2. æ‰§è¡Œåˆ°retæŒ‡ä»¤ï¼Œè¿”å›å€¼å­˜å…¥v0ï¼ˆè‹¥æœ‰ï¼‰</span><br><span class="line">*          3. ä½¿ç”¨jr raè¿”å›</span><br></pre></td></tr></table></figure><ul><li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºè¢«è°ƒç”¨è€…éœ€è¦é åç§»å–å‚æ•°ï¼Œæ‰€ä»¥åœ¨å°†å‚æ•°å‹æ ˆæ—¶ï¼Œåº”è¯¥ä¿è¯ä¸ä¼šå‡ºç°å¯„å­˜å™¨æº¢å‡ºçš„æƒ…å†µï¼Œå¦åˆ™ä¼šå¯¼è‡´åç§»ä¸å‚æ•°ä¸å¯¹åº”ã€‚</li></ul></li></ul><h2 id="6-2-ç¼–ç åçš„è®¾è®¡">6.2 ç¼–ç åçš„è®¾è®¡</h2><ul><li>éµå¾ª<strong>é‡Œæ°æ›¿æ¢åŸåˆ™</strong>å’Œ<strong>å¼€æ”¾å°é—­åŸåˆ™</strong>ï¼Œå°†LLVM IRå’ŒMIPSçš„æŒ‡ä»¤éƒ½è®¾ç½®ä¸ºä¸€ä¸ªæ¥å£æˆ–æŠ½è±¡ç±»ï¼Œå¹¶åœ¨å…·ä½“çš„æ¯æ¡æŒ‡ä»¤ä¸­é‡å†™å¯¹åº”çš„è¾“å‡ºæ–¹æ³•ï¼Œè°ƒç”¨è€…ä½¿ç”¨æŒ‡ä»¤ç±»çš„å¤šæ€å±æ€§å®Œæˆæ¯æ¡æŒ‡ä»¤çš„è¾“å‡ºã€‚ä¸”å½“éœ€è¦æ–°å¢æŒ‡ä»¤æ—¶ï¼Œä¸éœ€è¦ä¿®æ”¹åŸæ¥çš„ä»£ç ï¼Œåªéœ€è¦æ–°å¢ç±»å¹¶ç»§æ‰¿æŠ½è±¡çˆ¶ç±»æˆ–å®ç°æ¥å£å³å¯ã€‚</li></ul><h1 id="7-ä»£ç ä¼˜åŒ–è®¾è®¡">7. ä»£ç ä¼˜åŒ–è®¾è®¡</h1><h2 id="7-1-å¯„å­˜å™¨åˆ†é…">7.1. å¯„å­˜å™¨åˆ†é…</h2><p>åœ¨ç›®æ ‡ä»£ç ç”Ÿæˆçš„æŒ‡å¯¼ä¹¦ä¸­ï¼š</p><blockquote><p>åœ¨ MIPS è¿™ç§<strong>å¯„å­˜å™¨åˆ°å¯„å­˜å™¨</strong>æ¨¡å‹ä¸­ï¼Œæ¯ä¸ªå‚ä¸è¿ç®—çš„å€¼éƒ½å¿…é¡»è¢«åŠ è½½åˆ°å¯„å­˜å™¨ä¸­ï¼Œå› æ­¤åœ¨æˆ‘ä»¬çš„ IR ä¸­ï¼Œå‚ä¸è¿ç®—çš„å˜é‡éƒ½åº”è¯¥å¯¹åº”ä¸€ä¸ªå¯„å­˜å™¨ï¼Œåœ¨ IR ä¸­ï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¸º<strong>è™šæ‹Ÿå¯„å­˜å™¨</strong>ã€‚è™šæ‹Ÿå¯„å­˜å™¨æ•°ç›®æ˜¯æ— é™çš„ï¼Œä½†æ˜¯å½“ç¿»è¯‘ä¸ºç›®æ ‡å¹³å°çš„æ±‡ç¼–ä»£ç æ—¶ï¼Œå°±éœ€è¦å°†å…¶æ˜ å°„åˆ°ä¸€ç»„æœ‰é™çš„å¯„å­˜å™¨ä¸­ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯<strong>å¯„å­˜å™¨åˆ†é…</strong>ã€‚</p><p>å¯¹äºè§„èŒƒçš„å¯„å­˜å™¨åˆ†é…ï¼Œåˆ™éœ€è¦è€ƒè™‘<strong>å…¨å±€å¯„å­˜å™¨</strong>å’Œ<strong>å±€éƒ¨å¯„å­˜å™¨</strong>çš„åˆ†é…ï¼Œåˆ†åˆ«å¯¹åº” MIPS ä¸­çš„ <code>s</code> å’Œ <code>t</code> å¯„å­˜å™¨ã€‚â€¦â€¦</p></blockquote><p>å› æ­¤ï¼Œ<strong>æˆ‘åœ¨ç”Ÿæˆç›®æ ‡ä»£ç æ—¶å°±å·²ç»åˆ†é…äº†å¯„å­˜å™¨</strong>ï¼ˆå› æ­¤ä¼˜åŒ–å‰å’Œä¼˜åŒ–åfinalCycleå·®è·å¯èƒ½ä¸å¤§ï¼‰ã€‚ä»¥ä¸‹æ˜¯å…·ä½“å®ç°æ€è·¯ã€‚</p><h3 id="7-1-1-è·¨å—æ´»è·ƒå˜é‡ï¼šé‡‡ç”¨å›¾ç€è‰²æ³•åˆ†é…å…¨å±€å¯„å­˜å™¨">7.1.1 è·¨å—æ´»è·ƒå˜é‡ï¼šé‡‡ç”¨å›¾ç€è‰²æ³•åˆ†é…å…¨å±€å¯„å­˜å™¨</h3><h4 id="7-1-1-1-æ•°æ®æµåˆ†æ">7.1.1.1 æ•°æ®æµåˆ†æ</h4><p>åœ¨LLVM IRæ¯æ¡å…·ä½“æŒ‡ä»¤ç±»ä¸­æ·»åŠ <code>def</code>å’Œ<code>use</code>é›†ï¼Œå¹¶åœ¨æ„é€ æ–¹æ³•ä¸­å°†å¯¹åº”å˜é‡åŠ å…¥è¿™ä¸¤ä¸ªé›†åˆã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“æœ‰é›†åˆçš„iné›†å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç»§ç»­è¿­ä»£</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">changed</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">while</span>(changed) &#123;</span><br><span class="line">    changed = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> basicBlocks.size() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="type">BasicBlock</span> <span class="variable">basicBlock</span> <span class="operator">=</span> basicBlocks.get(i);</span><br><span class="line">        <span class="comment">// BasicBlockçš„liveOuté›†åˆä¸ºå…¶æ‰€æœ‰åç»§çš„liveIné›†åˆçš„å¹¶é›†</span></span><br><span class="line">        <span class="keyword">for</span> (BasicBlock succ: basicBlock.succs) &#123;</span><br><span class="line">            basicBlock.liveOut.addAll(succ.liveIn);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è®¡ç®—æ¯æ¡æŒ‡ä»¤çš„iné›†å’Œouté›†</span></span><br><span class="line">        List&lt;Instruction&gt; instructions = basicBlock.instructions;</span><br><span class="line">        <span class="comment">// BasicBlockçš„æœ€åä¸€æ¡æŒ‡ä»¤çš„liveOuté›†åˆå³ä¸ºliveOuté›†åˆ</span></span><br><span class="line">        Set&lt;Slot&gt; succsLiveIn = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;(basicBlock.liveOut);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> instructions.size() - <span class="number">1</span>; j &gt;= <span class="number">0</span>; j--) &#123;</span><br><span class="line">            <span class="type">Instruction</span> <span class="variable">instruction</span> <span class="operator">=</span> instructions.get(j);</span><br><span class="line">            instruction.liveOut = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;(succsLiveIn);   <span class="comment">// æ¯æ¡æŒ‡ä»¤çš„liveOuté›†åˆä¸ºå…¶åç»§çš„liveIné›†åˆ</span></span><br><span class="line">            instruction.liveIn = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;(instruction.liveOut);</span><br><span class="line">            instruction.liveIn.removeAll(instruction.def);</span><br><span class="line">            instruction.liveIn.addAll(instruction.use);</span><br><span class="line">            succsLiveIn = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;(instruction.liveIn);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æœ€åä¸€æ¡æŒ‡ä»¤çš„liveIné›†åˆå³ä¸ºBasicBlockçš„liveIné›†åˆ</span></span><br><span class="line">        <span class="keyword">if</span> (!basicBlock.liveIn.equals(succsLiveIn)) &#123;</span><br><span class="line">            changed = <span class="literal">true</span>;</span><br><span class="line">            basicBlock.liveIn = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;(succsLiveIn);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>åœ¨å¯¹æ¯æ¡æŒ‡ä»¤çš„<code>liveIn</code>å’Œ<code>liveOut</code>é›†è®¡ç®—çš„åŸºç¡€ä¸Šï¼Œè®¡ç®—åŸºæœ¬å—çš„<code>liveIn</code>å’Œ<code>liveOut</code>é›†ã€‚</p><p>éœ€è¦æ³¨æ„åœ¨è®¡ç®—å‡½æ•°çš„è·¨å—æ´»è·ƒå˜é‡æ—¶ï¼Œå°†æ‰€æœ‰çš„<code>liveIn</code>å’Œ<code>liveOut</code>é›†å˜é‡åŠ å…¥åï¼Œéœ€è¦åˆ é™¤æ‰€æœ‰ä½œä¸ºå‡½æ•°å‚æ•°çš„å˜é‡ï¼ˆåŒ…æ‹¬æŒ‡é’ˆå‹ï¼‰ã€‚<br>è¿™æ˜¯å› ä¸ºå‡½æ•°å‚æ•°ä¸€æ¦‚ä¸åˆ†é…å¯„å­˜å™¨ï¼Œå› æ­¤å°½ç®¡åœ¨å‚æ•°ä¸­å‡ºç°ï¼Œä¹Ÿä¸åŠ å…¥è·¨å—æ´»è·ƒå˜é‡é›†åˆã€‚</p><h4 id="7-1-1-2-å›¾ç€è‰²ç®—æ³•">7.1.1.2 å›¾ç€è‰²ç®—æ³•</h4><p>ä¸ºäº†ç®€ä¾¿ï¼Œæˆ‘åœ¨å®ç°ä¸­å¯¹å†²çªçš„å®šä¹‰æ˜¯ï¼šæ´»è·ƒèŒƒå›´é‡åˆã€‚å› æ­¤ï¼Œåœ¨æ•°æ®æµåˆ†æåï¼ŒåŒæ—¶å‡ºç°åœ¨<code>liveIn</code>æˆ–<code>liveOut</code>é›†åˆçš„ã€ä»¥åŠåœ¨å—å†…æ´»è·ƒèŒƒå›´å†²çªçš„å˜é‡è§†ä¸ºå†²çªã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ„é€ å†²çªå›¾</span></span><br><span class="line"><span class="type">Graph</span> <span class="variable">graph</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Graph</span>(); <span class="comment">// ç”¨äºç§»é™¤èŠ‚ç‚¹å¾—åˆ°é˜Ÿåˆ—</span></span><br><span class="line"><span class="type">Graph</span> <span class="variable">conflict</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Graph</span>(); <span class="comment">// å‰¯æœ¬ï¼Œç”¨äºä¿å­˜å†²çªå›¾</span></span><br><span class="line"><span class="keyword">for</span> (Slot node: function.interBlockLive) &#123;</span><br><span class="line">    graph.addNode(node);</span><br><span class="line">    conflict.addNode(node);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åœ¨liveInå’ŒliveOutä¸­åŒæ—¶å‡ºç°çš„å˜é‡ï¼Œå³ä¸ºå†²çªå˜é‡ï¼Œæ·»åŠ è¾¹</span></span><br><span class="line"><span class="keyword">for</span> (BasicBlock block: function.basicBlocks) &#123;</span><br><span class="line">    <span class="keyword">for</span> (Slot slot1: block.liveIn) &#123;</span><br><span class="line">        <span class="keyword">for</span> (Slot slot2: block.liveIn) &#123;</span><br><span class="line">            <span class="keyword">if</span> (slot1 != slot2 &amp;&amp;</span><br><span class="line">                function.interBlockLive.contains(slot1) &amp;&amp;</span><br><span class="line">                function.interBlockLive.contains(slot2)) &#123;</span><br><span class="line">                graph.addEdge(slot1, slot2);</span><br><span class="line">                conflict.addEdge(slot1, slot2);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (Slot slot1: block.liveOut) &#123;</span><br><span class="line">        <span class="keyword">for</span> (Slot slot2: block.liveOut) &#123;</span><br><span class="line">            <span class="keyword">if</span> (slot1 != slot2 &amp;&amp;</span><br><span class="line">                function.interBlockLive.contains(slot1) &amp;&amp;</span><br><span class="line">                function.interBlockLive.contains(slot2)) &#123;</span><br><span class="line">                graph.addEdge(slot1, slot2);</span><br><span class="line">                conflict.addEdge(slot1, slot2);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¯¹æ¯ä¸ªåŸºæœ¬å—ï¼Œæ£€æŸ¥åªå‡ºç°åœ¨ in æˆ– out ä¸­çš„å˜é‡ï¼Œè‹¥æ´»æ€§èŒƒå›´å†²çªåˆ™ä¹Ÿæ·»åŠ å†²çªè¾¹</span></span><br><span class="line"><span class="keyword">for</span> (BasicBlock block: function.basicBlocks) &#123;</span><br><span class="line">    Set&lt;Slot&gt; intersection = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;(block.liveIn);   <span class="comment">// äº¤é›†</span></span><br><span class="line">    intersection.retainAll(block.liveOut);</span><br><span class="line"></span><br><span class="line">    Set&lt;Slot&gt; liveInRemoveInter = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;(block.liveIn);</span><br><span class="line">    liveInRemoveInter.removeAll(intersection);</span><br><span class="line">    Set&lt;Slot&gt; liveOutRemoveInter = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;(block.liveOut);</span><br><span class="line">    liveOutRemoveInter.removeAll(intersection);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (Slot slot1: liveInRemoveInter) &#123;</span><br><span class="line">        <span class="keyword">for</span> (Slot slot2: liveOutRemoveInter) &#123;</span><br><span class="line">            <span class="keyword">if</span> (function.interBlockLive.contains(slot1) &amp;&amp;</span><br><span class="line">                    function.interBlockLive.contains(slot2)) &#123;</span><br><span class="line">                <span class="comment">// æ»¤å»å‡½æ•°å‚æ•°ç­‰ä¸è·¨å—æ´»è·ƒçš„å˜é‡</span></span><br><span class="line">                <span class="type">Instruction</span> <span class="variable">defInst</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">                <span class="keyword">for</span> (Instruction inst: block.instructions) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (inst.def.contains(slot2)) &#123;</span><br><span class="line">                        <span class="comment">// slot2åªå‡ºç°åœ¨liveOutä¸­ï¼Œåˆ™æœ‰ä¸€æ¡å®šä¹‰å®ƒçš„æŒ‡ä»¤</span></span><br><span class="line">                        defInst = inst;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// å®šä¹‰åï¼Œslot1ä»æ´»è·ƒï¼Œå³ä¸ºå†²çª</span></span><br><span class="line">                <span class="keyword">if</span> (defInst.liveOut.contains(slot1)) &#123;</span><br><span class="line">                    graph.addEdge(slot1, slot2);</span><br><span class="line">                    conflict.addEdge(slot1, slot2);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ä¿å­˜å†²çªå›¾çš„å‰¯æœ¬æ˜¯ä¸ºäº†åœ¨åç»­ç§»èµ°èŠ‚ç‚¹ä¹Ÿèƒ½æŸ¥è¯¢åˆ°æ¯ä¸ªå˜é‡çš„å†²çªæƒ…å†µã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">LinkedList&lt;Slot&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line"><span class="comment">// æ‰§è¡Œå›¾ç€è‰²ç®—æ³•</span></span><br><span class="line"><span class="keyword">while</span> (graph.getNodesNum() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">canRemove</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// ã€ä¸ºä¿è¯ç§»å‡ºé¡ºåºï¼Œå…ˆå¯¹é‚»æ¥è¡¨æ’åºã€‘</span></span><br><span class="line">    List&lt;Map.Entry&lt;Slot, Set&lt;Slot&gt;&gt;&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(graph.adjacencyList.entrySet());</span><br><span class="line">    list.sort(Comparator.comparingInt(o -&gt; o.getKey().slotId));</span><br><span class="line">    <span class="keyword">for</span> (Map.Entry&lt;Slot, Set&lt;Slot&gt;&gt; entry : list) &#123;</span><br><span class="line">        <span class="keyword">if</span> (graph.getDegree(entry.getKey()) &lt; RegisterPool.savedRegisters.size()) &#123;</span><br><span class="line">            queue.addLast(entry.getKey());</span><br><span class="line">            graph.removeNode(entry.getKey());</span><br><span class="line">            canRemove = <span class="literal">true</span>;</span><br><span class="line">            System.out.println(<span class="string">&quot;remove &quot;</span> + entry.getKey().toText());</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!canRemove) &#123;</span><br><span class="line">        <span class="comment">// è‹¥æ— æ³•åˆ é™¤èŠ‚ç‚¹ï¼Œå³å›¾ä¸­å­˜åœ¨åº¦æ•°å¤§äºç­‰äºå¯„å­˜å™¨æ•°é‡çš„èŠ‚ç‚¹ï¼Œä¿å­˜åœ¨æ ˆä¸Š</span></span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> ä¼˜åŒ–æ—¶ï¼Œé€‰æ‹©å¼•ç”¨æ¬¡æ•°æœ€å°‘çš„èŠ‚ç‚¹è¿›è¡Œåˆå¹¶</span></span><br><span class="line">        <span class="type">Slot</span> <span class="variable">remove</span> <span class="operator">=</span> list.get(<span class="number">0</span>).getKey();</span><br><span class="line">        graph.removeNode(remove);</span><br><span class="line">        conflict.removeNode(remove);    <span class="comment">// ã€ä¸åˆ†é…ï¼Œç§»å‡ºå†²çªå›¾ã€‘</span></span><br><span class="line">        System.out.println(<span class="string">&quot;spill &quot;</span> + remove.toText());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æŒ‰ç…§ç»“ç‚¹ç§»èµ°çš„åå‘é¡ºåºå°†ç‚¹å’Œè¾¹æ·»åŠ å›å»ï¼Œå¹¶åˆ†é…é¢œè‰²</span></span><br><span class="line"><span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">    <span class="type">Slot</span> <span class="variable">slot</span> <span class="operator">=</span> queue.removeLast();</span><br><span class="line">    graph.addNode(slot);</span><br><span class="line">    List&lt;Register&gt; available = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;(RegisterPool.savedRegisters);</span><br><span class="line">    <span class="keyword">for</span> (Map.Entry&lt;Slot, Set&lt;Slot&gt;&gt; entry: graph.adjacencyList.entrySet()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (conflict.adjacencyList.get(slot).contains(entry.getKey())) &#123;</span><br><span class="line">            <span class="comment">// è‹¥å·²åœ¨å›¾ä¸­çš„èŠ‚ç‚¹ä¸æ­¤èŠ‚ç‚¹å­˜åœ¨å†²çª</span></span><br><span class="line">            available.remove(registerPool.globalAllocation.get(entry.getKey()));</span><br><span class="line">            graph.addEdge(slot, entry.getKey());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æŒ‘é€‰ä¸€ä¸ªå¯ç”¨çš„å¯„å­˜å™¨ç€è‰²</span></span><br><span class="line">    <span class="keyword">assert</span> !available.isEmpty();</span><br><span class="line">    registerPool.globalAllocation.put(slot, available.get(<span class="number">0</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå¯¹äºé€‰æ‹©å“ªä¸ªèŠ‚ç‚¹ç§»é™¤æš‚æ—¶æ²¡æœ‰å®ç°é€‰æ‹©ç®—æ³•ï¼Œåç»­å¯èƒ½ä¼˜åŒ–ä¸ºå¼•ç”¨æ¬¡æ•°æœ€å°‘çš„ä¸åˆ†é…å…¨å±€å¯„å­˜å™¨ã€‚</p><p>éœ€è¦æ³¨æ„ç”±äº<code>HashMap</code>éå†é¡ºåºçš„ä¸ç¡®å®šæ€§ï¼Œéœ€è¦å…ˆå°†å…¶æ’åºå†è¿›è¡Œåç»­æ“ä½œã€‚</p><h3 id="7-1-2-ä¸è·¨å—æ´»è·ƒçš„å˜é‡ï¼šé‡‡ç”¨å¯„å­˜å™¨æ± åˆ†é…ä¸´æ—¶å¯„å­˜å™¨">7.1.2 ä¸è·¨å—æ´»è·ƒçš„å˜é‡ï¼šé‡‡ç”¨å¯„å­˜å™¨æ± åˆ†é…ä¸´æ—¶å¯„å­˜å™¨</h3><p>åœ¨åç«¯å®ç°äº†ä¸€ä¸ª<code>RegisterPool.java</code>ç±»ï¼Œè™½ç„¶å…¨å±€å¯„å­˜å™¨ä¸ä½¿ç”¨å¯„å­˜å™¨æ± åˆ†é…ï¼Œä½†æ˜¯å®ç°è¿™ä¸ªç±»å¯ä»¥ä¾¿äºå¯¹å˜é‡å¯¹åº”çš„å¯„å­˜å™¨ç»Ÿä¸€ç®¡ç†ã€‚ç”Ÿæˆç›®æ ‡ä»£ç æ—¶ï¼Œå¯ä»¥ç»Ÿä¸€ä½¿ç”¨æä¾›çš„æ¥å£æ‰¾åˆ°å¯¹åº”çš„å¯„å­˜å™¨ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œæˆ‘å®ç°çš„ä¸´æ—¶å¯„å­˜å™¨æ± ä½¿ç”¨<strong>FIFOç®—æ³•</strong>ï¼Œç»´æŠ¤ä¸€ä¸ª<code>allocated</code>è¡¨å’Œ<code>tempQueue</code>ï¼Œå‰è€…å­˜å‚¨å˜é‡å¯¹åº”çš„å¯„å­˜å™¨ï¼Œåè€…æ˜¯ä¸€ä¸ªè®°å½•åˆ†é…é¡ºåºçš„é˜Ÿåˆ—ã€‚å½“æ–°å¢å˜é‡æ—¶ï¼Œä»å¯„å­˜å™¨æ± ä¸­åˆ†é…ä¸€ä¸ªå˜é‡ï¼Œå¹¶æ·»åŠ <code>allocated</code>è¡¨é¡¹ã€åŠ å…¥<code>tempQueue</code>é˜Ÿå°¾ï¼›å½“é‡Šæ”¾å¯„å­˜å™¨æ—¶ï¼Œç§»é™¤<code>allocated</code>è¡¨é¡¹ä»¥åŠ<code>tempQueue</code>å¯¹åº”å¯„å­˜å™¨ï¼›å½“å¯„å­˜å™¨ä¸å¤Ÿéœ€è¦æº¢å‡ºæ—¶ï¼Œå–<code>tempQueue</code>çš„é˜Ÿé¦–æº¢å‡ºåˆ°å†…å­˜å¹¶åˆ†é…ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ†é…ä¸´æ—¶å¯„å­˜å™¨å¹¶ä¸Slotã€ç»‘å®šã€‘</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> slot éœ€è¦åˆ†é…çš„slot</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> curStackFrame å½“å‰çš„æ ˆå¸§</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> åˆ†é…çš„å¯„å­˜å™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> Register <span class="title function_">bindAllocTemp</span><span class="params">(Slot slot, StackFrame curStackFrame)</span> &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæ˜¯è·¨å—æ´»è·ƒå˜é‡ï¼Œåˆ†é…ä¿ç•™å¯„å­˜å™¨ï¼Œå¦åˆ™åˆ†é…ä¸´æ—¶å¯„å­˜å™¨</span></span><br><span class="line">    <span class="keyword">for</span> (Register r: tempRegisters) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!allocated.containsValue(r)) &#123;</span><br><span class="line">            <span class="comment">// è‹¥ç©ºé—²ï¼Œå³æ‰¾åˆ°</span></span><br><span class="line">            tempQueue.addLast(r);</span><br><span class="line">            allocated.put(slot, r);</span><br><span class="line">            <span class="keyword">return</span> r;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æº¢å‡ºå¤„ç†</span></span><br><span class="line">    <span class="keyword">return</span> spill(slot, curStackFrame);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æº¢å‡ºå¤„ç†ï¼Œå°†æº¢å‡ºå¯„å­˜å™¨çš„å€¼å­˜åˆ°æ ˆä¸Š</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> curStackFrame å½“å‰çš„æ ˆå¸§</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> slot éœ€è¦åˆ†é…çš„slotï¼Œå¯ä¸ºnull</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> Register <span class="title function_">spill</span><span class="params">(Slot slot, StackFrame curStackFrame)</span> &#123;</span><br><span class="line">    <span class="comment">// FIFOç®—æ³•ï¼Œå–å‡ºæœ€æ—©åˆ†é…çš„å¯„å­˜å™¨</span></span><br><span class="line">    <span class="type">Register</span> <span class="variable">spillRegister</span> <span class="operator">=</span> tempQueue.removeFirst();</span><br><span class="line">    <span class="type">Slot</span> <span class="variable">spillSlot</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">for</span> (Map.Entry&lt;Slot, Register&gt; entry: allocated.entrySet()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (entry.getValue() == spillRegister) &#123;</span><br><span class="line">            spillSlot = entry.getKey();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å°†å¯„å­˜å™¨çš„å€¼å­˜åˆ°æ ˆä¸Š</span></span><br><span class="line">    curStackFrame.recordLocal(spillSlot, <span class="number">4</span>);</span><br><span class="line">    mipsCode.addMIPSInst(<span class="keyword">new</span> <span class="title class_">SW</span>(spillRegister, Register.SP, -curStackFrame.getSize()).setComment(<span class="string">&quot;\tspill reg of &quot;</span> + spillSlot.toText()));</span><br><span class="line">    <span class="comment">// ç§»é™¤allocatedä¸­çš„è®°å½•</span></span><br><span class="line">    allocated.remove(spillSlot);</span><br><span class="line">    <span class="keyword">if</span> (slot != <span class="literal">null</span>) &#123;</span><br><span class="line">        tempQueue.addLast(spillRegister);</span><br><span class="line">        allocated.put(slot, spillRegister);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> spillRegister;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å› æ­¤ï¼Œæ¯æ¡æŒ‡ä»¤çš„ç¿»è¯‘æ­¥éª¤å³ï¼š</p><blockquote><ol><li>ä½¿ç”¨ find è·å– use çš„å¯„å­˜å™¨</li><li>ä½¿ç”¨ deallocUse å›æ”¶ use ä¸­ä¸æ´»è·ƒå˜é‡çš„å¯„å­˜å™¨</li><li>ä½¿ç”¨ allocDef åˆ†é… def ä½¿ç”¨çš„å¯„å­˜å™¨ã€allocDefå¯èƒ½è¿”å›nullï¼Œæ­¤æ—¶éœ€è¦ä¿å­˜åˆ°æ ˆä¸Šã€‘</li><li>ä½¿ç”¨ allocTemp åˆ†é…ä¸ç»‘å®šslotçš„å¯„å­˜å™¨</li><li>ç”ŸæˆMIPSæŒ‡ä»¤</li></ol></blockquote><p>è¿™äº›æ­¥éª¤ä¸èƒ½éšæ„è°ƒæ¢é¡ºåºã€‚å…·ä½“æ¥è¯´ï¼š</p><ul><li>å…ˆ<code>find</code>å†<code>deallocUse</code>ï¼ˆå¦åˆ™æ‰¾ä¸åˆ°å°±é‡Šæ”¾äº†ï¼‰</li><li>å…ˆ<code>deallocUse</code>å†<code>allocDef</code>ï¼ˆè¿™æ ·å¯ä»¥ç«‹å³ä½¿ç”¨useä¸å†ä½¿ç”¨çš„å¯„å­˜å™¨ï¼Œä¾‹å¦‚addiu $t0, $t0, -4è¿™ç§æŒ‡ä»¤ï¼‰</li><li>å…ˆ<code>allocDef</code>å†<code>allocTemp</code>ã€‚ï¼ˆå¦åˆ™ï¼Œå› ä¸ºåè€…ä¸ç»‘å®šSlotï¼Œä¼šåˆ†é…åˆ°ä¸€æ ·çš„å¯„å­˜å™¨è€Œå‡ºé”™ï¼‰</li></ul><blockquote><p>æ­¤ä¼˜åŒ–ä¸MIPSç”Ÿæˆä¸€èµ·å®Œæˆï¼Œå› æ­¤æäº¤çš„ä¼˜åŒ–å‰ç›®æ ‡ä»£ç ä¸æ­¤ä¸€è‡´ã€‚</p></blockquote><h2 id="7-2-åŸºæœ¬å—åˆå¹¶">7.2. åŸºæœ¬å—åˆå¹¶</h2><p>ä¾‹å¦‚ï¼Œåœ¨å…¬å¼€testcase7ä¸­ï¼Œç”Ÿæˆäº†å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">101:                          ; preds = 96</span><br><span class="line">    %102 = load i32, i32* %1      ;load value of i</span><br><span class="line">    %103 = getelementptr [10 x i32], [10 x i32]* @a, i32 0, i32 %102      ;get &amp;a[%102]</span><br><span class="line">    %104 = load i32, i32* %103    ;load value of a[%102]</span><br><span class="line">    call void @putint(i32 %104)</span><br><span class="line">    call void @putstr(i8* getelementptr inbounds ([3 x i8], [3 x i8]* @.str.0, i64 0, i64 0))</span><br><span class="line">    %105 = load i32, i32* %1      ;load value of i</span><br><span class="line">    %106 = add i32 %105, 1</span><br><span class="line">    store i32 %106, i32* %1</span><br><span class="line">    br label %107</span><br><span class="line">107:                          ; preds = 101</span><br><span class="line">    br label %96</span><br><span class="line">108: ; preds = 96</span><br></pre></td></tr></table></figure><p>ç»è¿‡åŸºæœ¬å—åˆå¹¶ä¼˜åŒ–åï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">101:                          ; preds = 96</span><br><span class="line">    %102 = load i32, i32* %1      ;load value of i</span><br><span class="line">    %103 = getelementptr [10 x i32], [10 x i32]* @a, i32 0, i32 %102      ;get &amp;a[%102]</span><br><span class="line">    %104 = load i32, i32* %103    ;load value of a[%102]</span><br><span class="line">    call void @putint(i32 %104)</span><br><span class="line">    call void @putstr(i8* getelementptr inbounds ([3 x i8], [3 x i8]* @.str.0, i64 0, i64 0))</span><br><span class="line">    %105 = load i32, i32* %1      ;load value of i</span><br><span class="line">    %106 = add i32 %105, 1</span><br><span class="line">    store i32 %106, i32* %1</span><br><span class="line">    br label %96</span><br><span class="line">107:                          ; preds = 96</span><br></pre></td></tr></table></figure><h2 id="7-3-ä¹˜é™¤æ³•ä¼˜åŒ–">7.3. ä¹˜é™¤æ³•ä¼˜åŒ–</h2><p>åªé’ˆå¯¹ç¬¬äºŒä¸ªæ“ä½œæ•°ä¸ºç«‹å³æ•°çš„ä¹˜é™¤æŒ‡ä»¤è¿›è¡Œä¼˜åŒ–ã€‚</p><h3 id="7-3-1-ä¹˜æ³•ä¼˜åŒ–">7.3.1 ä¹˜æ³•ä¼˜åŒ–</h3><p>å¯¹äºä¹˜æ•°ä¸º0ã€1ã€2çš„æ•´æ•°å¹‚ã€2çš„æ•´æ•°å¹‚çš„ç›¸åæ•°ã€2çš„æ•´æ•°å¹‚-1ã€2çš„æ•´æ•°å¹‚-2ã€2çš„æ•´æ•°å¹‚+1è¿›è¡Œä¼˜åŒ–ï¼Œè½¬ä¸ºè‹¥å¹²ç§»ä½æŒ‡ä»¤å’ŒåŠ å‡æŒ‡ä»¤ã€‚</p><h3 id="7-3-2-é™¤æ³•ä¼˜åŒ–">7.3.2 é™¤æ³•ä¼˜åŒ–</h3><p>å¯¹äºé™¤æ•°ä¸º2çš„æ•´æ•°å¹‚ã€2çš„æ•´æ•°å¹‚çš„ç›¸åæ•°è¿›è¡Œä¼˜åŒ–ã€‚</p><p>æ­¤å¤–ï¼Œå¯¹äºèƒ½è½¬åŒ–ä¸ºä¹˜æ³•å’Œç§»ä½è¿ç®—çš„è¿›è¡Œä¼˜åŒ–ï¼Œä¾‹å¦‚å¯¹äºtestcase7ä¸­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">div $t0, $t0, 5</span><br></pre></td></tr></table></figure><p>è¢«ä¼˜åŒ–ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    slt $t1, $zero, $t0</span><br><span class="line">    bnez $t1, _L_divOptimize_0</span><br><span class="line">    subu $t0, $zero, $t0</span><br><span class="line">_L_divOptimize_0:</span><br><span class="line">    li $t2, 3435973837</span><br><span class="line">    multu $t0, $t2</span><br><span class="line">    mfhi $t0</span><br><span class="line">    sra $t0, $t0, 2</span><br><span class="line">    bnez $t1, _L_divOptimize_1</span><br><span class="line">    subu $t0, $zero, $t0</span><br><span class="line">_L_divOptimize_1:</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„ï¼Œä¼˜åŒ–æ—¶ï¼Œéœ€è¦åˆ†æ­£è´Ÿä¸¤ç§æƒ…å†µï¼Œä¸ç„¶ä¼šäº§ç”Ÿé”™è¯¯ã€‚</p><h2 id="å…¶ä»–è¯´æ˜">å…¶ä»–è¯´æ˜</h2><p>ç”±äºç”ŸæˆMIPSæ—¶ç›´æ¥å®Œæˆå¯„å­˜å™¨åˆ†é…è¿™ä¸€â€œä¼˜åŒ–ä»»åŠ¡â€ï¼Œå› æ­¤è€—è´¹äº†è®¸å¤šæ—¶é—´ã€‚æœ€åå› æ—¶é—´ç´§è¿«ï¼Œå…¶ä»–ä¼˜åŒ–æš‚æ—¶æ²¡æœ‰å®Œæˆã€‚</p><blockquote><p>Authorï¼šbush</p><p>æ›´æ–°æ—¥å¿—ï¼š</p><ul><li>2024.9.24ï¼šå®Œæˆè¯æ³•åˆ†æï¼Œå®Œæˆæ–‡æ¡£#1ã€#2ã€#3</li><li>2024.10.14ï¼šå®Œæˆè¯­æ³•åˆ†æåŠæ­¤éƒ¨åˆ†æ–‡æ¡£#4ï¼Œä¿®æ”¹#2.2ï¼Œæ–°å¢#3.2.3</li><li>2024.10.19ï¼šåœ¨æœŸä¸­æ¨¡æ‹Ÿè€ƒå‘ç°å›æº¯æ—¶æœªå›æº¯å·²æŠ›å‡ºé”™è¯¯å¯¼è‡´å¤šè¾“å‡ºé”™è¯¯ï¼Œä¿®æ”¹#4.2.5</li><li>2024.11.2ï¼šå®Œæˆè¯­ä¹‰åˆ†æï¼Œå®Œæˆæ–‡æ¡£#5</li><li>2024.12.12ï¼šå®ŒæˆMIPSä»£ç ç”Ÿæˆï¼Œå®Œæˆæ–‡æ¡£#6</li><li>2024.12.17ï¼šå®Œæˆä¼˜åŒ–æ–‡æ¡£#7</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç¼–è¯‘æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¼–è¯‘ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
